<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>CompOptCert.optimizer.CSEProofAux</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library CompOptCert.optimizer.CSEProofAux</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">RelationClasses</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Program.Basics.html#"><span class="id" title="library">Basics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Coqlib.html#"><span class="id" title="library">Coqlib</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.sflib.html#"><span class="id" title="library">sflib</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Paco</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">paco</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Basic.html#"><span class="id" title="library">Basic</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Axioms.html#"><span class="id" title="library">Axioms</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Loc.html#"><span class="id" title="library">Loc</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.DenseOrder.html#"><span class="id" title="library">DenseOrder</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Language.html#"><span class="id" title="library">Language</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Maps.html#"><span class="id" title="library">Maps</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.FSets.FSets.html#"><span class="id" title="library">FSets</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.FSets.FSetInterface.html#"><span class="id" title="library">FSetInterface</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Lattice.html#"><span class="id" title="library">Lattice</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Event.html#"><span class="id" title="library">Event</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Syntax.html#"><span class="id" title="library">Syntax</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Semantics.html#"><span class="id" title="library">Semantics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Memory.html#"><span class="id" title="library">Memory</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Cell.html#"><span class="id" title="library">Cell</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Time.html#"><span class="id" title="library">Time</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Thread.html#"><span class="id" title="library">Thread</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Local.html#"><span class="id" title="library">Local</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.CompAuxDef.html#"><span class="id" title="library">CompAuxDef</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.optimizer.Kildall.html#"><span class="id" title="library">Kildall</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#"><span class="id" title="library">AveAnalysis</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.CorrectOpt.html#"><span class="id" title="library">CorrectOpt</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.MsgMapping.html#"><span class="id" title="library">MsgMapping</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.optimizer.CSE.html#"><span class="id" title="library">CSE</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.LocalSim.html#"><span class="id" title="library">LocalSim</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.LibTactics.html#"><span class="id" title="library">LibTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.Event.html#"><span class="id" title="library">Event</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.View.html#"><span class="id" title="library">View</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CompOptCert.TView.html#"><span class="id" title="library">TView</span></a>.<br/>

<br/>
</div>

<div class="doc">
Auxilary lemmas for premises clean-up or memory step reasoning 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nonatomic_or_atomic" class="idref" href="#nonatomic_or_atomic"><span class="id" title="lemma">nonatomic_or_atomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="or:1" class="idref" href="#or:1"><span class="id" title="binder">or</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:1"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.plain"><span class="id" title="constructor">Ordering.plain</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:1"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.plain"><span class="id" title="constructor">Ordering.plain</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">or</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="var">ii</span>; <span class="id" title="var">ss</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="split_or_non_split" class="idref" href="#split_or_non_split"><span class="id" title="lemma">split_or_non_split</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="kind:2" class="idref" href="#kind:2"><span class="id" title="binder">kind</span></a>, <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">∃</span></a> <a id="ts3:3" class="idref" href="#ts3:3"><span class="id" title="binder">ts3</span></a> <a id="msg3:4" class="idref" href="#msg3:4"><span class="id" title="binder">msg3</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:2"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts3:3"><span class="id" title="variable">ts3</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg3:4"><span class="id" title="variable">msg3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="ts3:5" class="idref" href="#ts3:5"><span class="id" title="binder">ts3</span></a> <a id="msg3:6" class="idref" href="#msg3:6"><span class="id" title="binder">msg3</span></a>, <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:2"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts3:5"><span class="id" title="variable">ts3</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg3:6"><span class="id" title="variable">msg3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">kind</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="var">ii</span>; <span class="id" title="var">ss</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="cse_wf_transform_func" class="idref" href="#cse_wf_transform_func"><span class="id" title="lemma">cse_wf_transform_func</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="lo:7" class="idref" href="#lo:7"><span class="id" title="binder">lo</span></a> <a id="code_src:8" class="idref" href="#code_src:8"><span class="id" title="binder">code_src</span></a> <a id="code_tgt:9" class="idref" href="#code_tgt:9"><span class="id" title="binder">code_tgt</span></a> <a id="fid:10" class="idref" href="#fid:10"><span class="id" title="binder">fid</span></a> <a id="cdhp_src:11" class="idref" href="#cdhp_src:11"><span class="id" title="binder">cdhp_src</span></a> <a id="fentry:12" class="idref" href="#fentry:12"><span class="id" title="binder">fentry</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSE.html#cse_optimizer"><span class="id" title="definition">cse_optimizer</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:7"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_src:8"><span class="id" title="variable">code_src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_tgt:9"><span class="id" title="variable">code_tgt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_src:8"><span class="id" title="variable">code_src</span></a><a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fid:10"><span class="id" title="variable">fid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:11"><span class="id" title="variable">cdhp_src</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fentry:12"><span class="id" title="variable">fentry</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">∃</span></a> <a id="cdhp_tgt:13" class="idref" href="#cdhp_tgt:13"><span class="id" title="binder">cdhp_tgt</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_tgt:9"><span class="id" title="variable">code_tgt</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fid:10"><span class="id" title="variable">fid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:13"><span class="id" title="variable">cdhp_tgt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fentry:12"><span class="id" title="variable">fentry</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.optimizer.CSE.html#cse_optimizer"><span class="id" title="definition">cse_optimizer</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.optimizer.CSE.html#transform_prog"><span class="id" title="definition">transform_prog</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Maps.html#PTree.gmap"><span class="id" title="lemma">PTree.gmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">Coqlib.option_map</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_func</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#AveDS.analyze_program"><span class="id" title="definition">AveDS.analyze_program</span></a> <span class="id" title="var">code_src</span> <a class="idref" href="CompOptCert.Syntax.html#succ"><span class="id" title="definition">succ</span></a> <a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#AveLat.top"><span class="id" title="definition">AveLat.top</span></a> <a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#Ave_B.transf_blk"><span class="id" title="definition">Ave_B.transf_blk</span></a><a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">)</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <span class="id" title="var">fid</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">afunc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">afunc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">cdhp_src</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_cdhp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="cse_wf_transform_cdhp" class="idref" href="#cse_wf_transform_cdhp"><span class="id" title="lemma">cse_wf_transform_cdhp</span></a>: <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="cdhp_src:14" class="idref" href="#cdhp_src:14"><span class="id" title="binder">cdhp_src</span></a> <a id="ai:15" class="idref" href="#ai:15"><span class="id" title="binder">ai</span></a> <a id="cdhp_tgt:16" class="idref" href="#cdhp_tgt:16"><span class="id" title="binder">cdhp_tgt</span></a> <a id="f:17" class="idref" href="#f:17"><span class="id" title="binder">f</span></a> <a id="b_src:18" class="idref" href="#b_src:18"><span class="id" title="binder">b_src</span></a> ,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSE.html#transform_cdhp"><span class="id" title="definition">transform_cdhp</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:14"><span class="id" title="variable">cdhp_src</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ai:15"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:16"><span class="id" title="variable">cdhp_tgt</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:14"><span class="id" title="variable">cdhp_src</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:17"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#b_src:18"><span class="id" title="variable">b_src</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">∃</span></a> <a id="b_tgt:19" class="idref" href="#b_tgt:19"><span class="id" title="binder">b_tgt</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:16"><span class="id" title="variable">cdhp_tgt</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:17"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#b_tgt:19"><span class="id" title="variable">b_tgt</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_cdhp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Maps.html#PTree.gmap"><span class="id" title="lemma">PTree.gmap</span></a>; <span class="id" title="var">unfolds</span> <span class="id" title="var">Coqlib.option_map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="var">econs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="cse_wf_transform_cdhp_reverse" class="idref" href="#cse_wf_transform_cdhp_reverse"><span class="id" title="lemma">cse_wf_transform_cdhp_reverse</span></a>: <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="cdhp_src:20" class="idref" href="#cdhp_src:20"><span class="id" title="binder">cdhp_src</span></a> <a id="ai:21" class="idref" href="#ai:21"><span class="id" title="binder">ai</span></a> <a id="cdhp_tgt:22" class="idref" href="#cdhp_tgt:22"><span class="id" title="binder">cdhp_tgt</span></a> <a id="f:23" class="idref" href="#f:23"><span class="id" title="binder">f</span></a> <a id="b_tgt:24" class="idref" href="#b_tgt:24"><span class="id" title="binder">b_tgt</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSE.html#transform_cdhp"><span class="id" title="definition">transform_cdhp</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:20"><span class="id" title="variable">cdhp_src</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ai:21"><span class="id" title="variable">ai</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:22"><span class="id" title="variable">cdhp_tgt</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:22"><span class="id" title="variable">cdhp_tgt</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:23"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#b_tgt:24"><span class="id" title="variable">b_tgt</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">∃</span></a> <a id="b_src:25" class="idref" href="#b_src:25"><span class="id" title="binder">b_src</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:20"><span class="id" title="variable">cdhp_src</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:23"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#b_src:25"><span class="id" title="variable">b_src</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_cdhp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Maps.html#PTree.gmap"><span class="id" title="lemma">PTree.gmap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">unfolds</span> <span class="id" title="var">Coqlib.option_map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">cdhp_src</span> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <span class="id" title="var">f</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="cse_wf_transform_blk" class="idref" href="#cse_wf_transform_blk"><span class="id" title="lemma">cse_wf_transform_blk</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="lo:26" class="idref" href="#lo:26"><span class="id" title="binder">lo</span></a> <a id="code_src:27" class="idref" href="#code_src:27"><span class="id" title="binder">code_src</span></a> <a id="code_tgt:28" class="idref" href="#code_tgt:28"><span class="id" title="binder">code_tgt</span></a> <a id="fid:29" class="idref" href="#fid:29"><span class="id" title="binder">fid</span></a> <a id="f:30" class="idref" href="#f:30"><span class="id" title="binder">f</span></a> <a id="cdhp_src:31" class="idref" href="#cdhp_src:31"><span class="id" title="binder">cdhp_src</span></a> <a id="fentry:32" class="idref" href="#fentry:32"><span class="id" title="binder">fentry</span></a> <a id="blk_src:33" class="idref" href="#blk_src:33"><span class="id" title="binder">blk_src</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSE.html#cse_optimizer"><span class="id" title="definition">cse_optimizer</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:26"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_src:27"><span class="id" title="variable">code_src</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_tgt:28"><span class="id" title="variable">code_tgt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_src:27"><span class="id" title="variable">code_src</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fid:29"><span class="id" title="variable">fid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:31"><span class="id" title="variable">cdhp_src</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fentry:32"><span class="id" title="variable">fentry</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_src:31"><span class="id" title="variable">cdhp_src</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#blk_src:33"><span class="id" title="variable">blk_src</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">∃</span></a> <a id="cdhp_tgt:34" class="idref" href="#cdhp_tgt:34"><span class="id" title="binder">cdhp_tgt</span></a> <a id="blk_tgt:35" class="idref" href="#blk_tgt:35"><span class="id" title="binder">blk_tgt</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#code_tgt:28"><span class="id" title="variable">code_tgt</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fid:29"><span class="id" title="variable">fid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:34"><span class="id" title="variable">cdhp_tgt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#fentry:32"><span class="id" title="variable">fentry</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#cdhp_tgt:34"><span class="id" title="variable">cdhp_tgt</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#blk_tgt:35"><span class="id" title="variable">blk_tgt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.optimizer.CSE.html#cse_optimizer"><span class="id" title="definition">cse_optimizer</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.optimizer.CSE.html#transform_prog"><span class="id" title="definition">transform_prog</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Maps.html#PTree.gmap"><span class="id" title="lemma">PTree.gmap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">Coqlib.option_map</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_func</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#AveDS.analyze_program"><span class="id" title="definition">AveDS.analyze_program</span></a> <span class="id" title="var">code_src</span> <a class="idref" href="CompOptCert.Syntax.html#succ"><span class="id" title="definition">succ</span></a> <a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#AveLat.top"><span class="id" title="definition">AveLat.top</span></a> <a class="idref" href="CompOptCert.optimizer.AveAnalysis.html#Ave_B.transf_blk"><span class="id" title="definition">Ave_B.transf_blk</span></a><a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">)</span></a> <a class="idref" href="CompOptCert.Maps.html#73774dfd3fef401022b78a58a582fe58"><span class="id" title="notation">!</span></a> <span class="id" title="var">fid</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">afunc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">afunc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">cdhp_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="var">splits</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">transform_cdhp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">splits</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Maps.html#PTree.gmap"><span class="id" title="lemma">PTree.gmap</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Coqlib.html#option_map"><span class="id" title="definition">Coqlib.option_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="var">econs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rlx_read_step_keep_na_cur_pln" class="idref" href="#rlx_read_step_keep_na_cur_pln"><span class="id" title="lemma">rlx_read_step_keep_na_cur_pln</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:36" class="idref" href="#lc:36"><span class="id" title="binder">lc</span></a> <a id="mem:37" class="idref" href="#mem:37"><span class="id" title="binder">mem</span></a> <a id="loc:38" class="idref" href="#loc:38"><span class="id" title="binder">loc</span></a> <a id="loc':39" class="idref" href="#loc':39"><span class="id" title="binder">loc'</span></a> <a id="ts:40" class="idref" href="#ts:40"><span class="id" title="binder">ts</span></a> <a id="val:41" class="idref" href="#val:41"><span class="id" title="binder">val</span></a> <a id="released:42" class="idref" href="#released:42"><span class="id" title="binder">released</span></a> <a id="or:43" class="idref" href="#or:43"><span class="id" title="binder">or</span></a> <a id="lc':44" class="idref" href="#lc':44"><span class="id" title="binder">lc'</span></a> <a id="lo:45" class="idref" href="#lo:45"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.read_step"><span class="id" title="inductive">Local.read_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:36"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:37"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:38"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts:40"><span class="id" title="variable">ts</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:41"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:42"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:43"><span class="id" title="variable">or</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':44"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:45"><span class="id" title="variable">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:43"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:43"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:38"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':39"><span class="id" title="variable">loc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:45"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':39"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:36"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':39"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':44"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':39"><span class="id" title="variable">loc'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">RELAXED</span>|<span class="id" title="var">RELAXED</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join_bot"><span class="id" title="lemma">TimeMap.join_bot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur_if"><span class="id" title="definition">View.singleton_ur_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur"><span class="id" title="definition">View.singleton_ur</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="CompOptCert.View.html#TimeMap.add_spec_neq"><span class="id" title="lemma">TimeMap.add_spec_neq</span></a> <span class="id" title="var">loc'</span> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span> (<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Event.html#loc_neq_sym"><span class="id" title="lemma">loc_neq_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">READABLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.add"><span class="id" title="definition">TimeMap.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a> (<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>))) (<a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)) <span class="id" title="var">loc'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join_bot"><span class="id" title="lemma">TimeMap.join_bot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur_if"><span class="id" title="definition">View.singleton_ur_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur"><span class="id" title="definition">View.singleton_ur</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="CompOptCert.View.html#TimeMap.add_spec_neq"><span class="id" title="lemma">TimeMap.add_spec_neq</span></a> <span class="id" title="var">loc'</span> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span> (<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Event.html#loc_neq_sym"><span class="id" title="lemma">loc_neq_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">READABLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.add"><span class="id" title="definition">TimeMap.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a> (<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>))) (<a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)) <span class="id" title="var">loc'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fence_rel_step_keep_na_cur_rlx" class="idref" href="#fence_rel_step_keep_na_cur_rlx"><span class="id" title="lemma">fence_rel_step_keep_na_cur_rlx</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:46" class="idref" href="#lc:46"><span class="id" title="binder">lc</span></a> <a id="loc:47" class="idref" href="#loc:47"><span class="id" title="binder">loc</span></a> <a id="lc':48" class="idref" href="#lc':48"><span class="id" title="binder">lc'</span></a> <a id="sc:49" class="idref" href="#sc:49"><span class="id" title="binder">sc</span></a> <a id="sc':50" class="idref" href="#sc':50"><span class="id" title="binder">sc'</span></a> <a id="lo:51" class="idref" href="#lo:51"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.fence_step"><span class="id" title="inductive">Local.fence_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:46"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:49"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':48"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':50"><span class="id" title="variable">sc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:51"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:47"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:46"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:47"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':48"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:47"><span class="id" title="variable">loc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fence_rel_step_keep_na_cur_pln" class="idref" href="#fence_rel_step_keep_na_cur_pln"><span class="id" title="lemma">fence_rel_step_keep_na_cur_pln</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:52" class="idref" href="#lc:52"><span class="id" title="binder">lc</span></a> <a id="loc:53" class="idref" href="#loc:53"><span class="id" title="binder">loc</span></a> <a id="lc':54" class="idref" href="#lc':54"><span class="id" title="binder">lc'</span></a> <a id="sc:55" class="idref" href="#sc:55"><span class="id" title="binder">sc</span></a> <a id="sc':56" class="idref" href="#sc':56"><span class="id" title="binder">sc'</span></a> <a id="lo:57" class="idref" href="#lo:57"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.fence_step"><span class="id" title="inductive">Local.fence_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:52"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:55"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':54"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':56"><span class="id" title="variable">sc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:57"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:53"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:52"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:53"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':54"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:53"><span class="id" title="variable">loc</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rlx_read_step_keep_na_cur_rlx" class="idref" href="#rlx_read_step_keep_na_cur_rlx"><span class="id" title="lemma">rlx_read_step_keep_na_cur_rlx</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:58" class="idref" href="#lc:58"><span class="id" title="binder">lc</span></a> <a id="mem:59" class="idref" href="#mem:59"><span class="id" title="binder">mem</span></a> <a id="loc:60" class="idref" href="#loc:60"><span class="id" title="binder">loc</span></a> <a id="loc':61" class="idref" href="#loc':61"><span class="id" title="binder">loc'</span></a> <a id="ts:62" class="idref" href="#ts:62"><span class="id" title="binder">ts</span></a> <a id="val:63" class="idref" href="#val:63"><span class="id" title="binder">val</span></a> <a id="released:64" class="idref" href="#released:64"><span class="id" title="binder">released</span></a> <a id="or:65" class="idref" href="#or:65"><span class="id" title="binder">or</span></a> <a id="lc':66" class="idref" href="#lc':66"><span class="id" title="binder">lc'</span></a> <a id="lo:67" class="idref" href="#lo:67"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.read_step"><span class="id" title="inductive">Local.read_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:58"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:59"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:60"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts:62"><span class="id" title="variable">ts</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:63"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:64"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:65"><span class="id" title="variable">or</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':66"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:67"><span class="id" title="variable">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:65"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:65"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:60"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':61"><span class="id" title="variable">loc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:67"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':61"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:58"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':61"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':66"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':61"><span class="id" title="variable">loc'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">RELAXED</span>|<span class="id" title="var">RELAXED</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join_bot"><span class="id" title="lemma">TimeMap.join_bot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur_if"><span class="id" title="definition">View.singleton_ur_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur"><span class="id" title="definition">View.singleton_ur</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="CompOptCert.View.html#TimeMap.add_spec_neq"><span class="id" title="lemma">TimeMap.add_spec_neq</span></a> <span class="id" title="var">loc'</span> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span> (<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Event.html#loc_neq_sym"><span class="id" title="lemma">loc_neq_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">READABLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.add"><span class="id" title="definition">TimeMap.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a> (<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>))) (<a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)) <span class="id" title="var">loc'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CompOptCert.Event.html#Ordering.le"><span class="id" title="definition">Ordering.le</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join_bot"><span class="id" title="lemma">TimeMap.join_bot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur_if"><span class="id" title="definition">View.singleton_ur_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#View.singleton_ur"><span class="id" title="definition">View.singleton_ur</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="CompOptCert.View.html#TimeMap.add_spec_neq"><span class="id" title="lemma">TimeMap.add_spec_neq</span></a> <span class="id" title="var">loc'</span> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span> (<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Event.html#loc_neq_sym"><span class="id" title="lemma">loc_neq_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">READABLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.add"><span class="id" title="definition">TimeMap.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a> (<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>))) (<a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a> <span class="id" title="var">loc</span> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">loc'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <span class="id" title="var">lc</span>)) <span class="id" title="var">loc'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.get"><span class="id" title="definition">TimeMap.get</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="construct_incr_inj1" class="idref" href="#construct_incr_inj1"><span class="id" title="lemma">construct_incr_inj1</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:68" class="idref" href="#inj:68"><span class="id" title="binder">inj</span></a> <a id="inj':69" class="idref" href="#inj':69"><span class="id" title="binder">inj'</span></a> <a id="loc:70" class="idref" href="#loc:70"><span class="id" title="binder">loc</span></a> <a id="to:71" class="idref" href="#to:71"><span class="id" title="binder">to</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">∃</span></a> <a id="mem:72" class="idref" href="#mem:72"><span class="id" title="binder">mem</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.MsgMapping.html#eq_ident_mapping"><span class="id" title="definition">eq_ident_mapping</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:68"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:72"><span class="id" title="variable">mem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':69"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:73" class="idref" href="#loc1:73"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:74" class="idref" href="#to1:74"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:70"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:71"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:73"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:74"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:71"><span class="id" title="variable">to</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:68"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:73"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:74"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#incr_inj"><span class="id" title="definition">incr_inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:68"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':69"><span class="id" title="variable">inj'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">mem</span> &amp; <span class="id" title="var">MAP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">MAP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">incr_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="remove_keeps_promises_injected" class="idref" href="#remove_keeps_promises_injected"><span class="id" title="lemma">remove_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:75" class="idref" href="#inj:75"><span class="id" title="binder">inj</span></a> <a id="loc:76" class="idref" href="#loc:76"><span class="id" title="binder">loc</span></a> <a id="from:77" class="idref" href="#from:77"><span class="id" title="binder">from</span></a> <a id="to:78" class="idref" href="#to:78"><span class="id" title="binder">to</span></a> <a id="msg:79" class="idref" href="#msg:79"><span class="id" title="binder">msg</span></a> <a id="promises:80" class="idref" href="#promises:80"><span class="id" title="binder">promises</span></a> <a id="promises':81" class="idref" href="#promises':81"><span class="id" title="binder">promises'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:75"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:80"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.remove"><span class="id" title="inductive">Memory.remove</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:80"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:76"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:77"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:78"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:79"><span class="id" title="variable">msg</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':81"><span class="id" title="variable">promises'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:75"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':81"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">H0</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_add_incr_mem_with_inj" class="idref" href="#prm_add_incr_mem_with_inj"><span class="id" title="lemma">prm_add_incr_mem_with_inj</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:82" class="idref" href="#inj:82"><span class="id" title="binder">inj</span></a> <a id="inj':83" class="idref" href="#inj':83"><span class="id" title="binder">inj'</span></a> <a id="mem:84" class="idref" href="#mem:84"><span class="id" title="binder">mem</span></a> <a id="mem':85" class="idref" href="#mem':85"><span class="id" title="binder">mem'</span></a> <a id="loc:86" class="idref" href="#loc:86"><span class="id" title="binder">loc</span></a> <a id="from:87" class="idref" href="#from:87"><span class="id" title="binder">from</span></a> <a id="to:88" class="idref" href="#to:88"><span class="id" title="binder">to</span></a> <a id="msg:89" class="idref" href="#msg:89"><span class="id" title="binder">msg</span></a> <a id="promises:90" class="idref" href="#promises:90"><span class="id" title="binder">promises</span></a> <a id="promises':91" class="idref" href="#promises':91"><span class="id" title="binder">promises'</span></a> <a id="kind:92" class="idref" href="#kind:92"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:82"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:84"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:90"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:84"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:86"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:87"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:88"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:89"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':91"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':85"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:92"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:92"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_add"><span class="id" title="constructor">Memory.op_kind_add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:89"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.reserve"><span class="id" title="constructor">Message.reserve</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':83"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:93" class="idref" href="#loc1:93"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:94" class="idref" href="#to1:94"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:86"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:88"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:93"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:94"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:88"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:82"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:93"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:94"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':83"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':85"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
mem -&gt; inj 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_o"><span class="id" title="lemma">Memory.add_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> is newly insert
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> in inj 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
inj -&gt; mem 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_o"><span class="id" title="lemma">Memory.add_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">INJ</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">COMPLETE</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">INJ</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">COMPLETE</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_split_incr_mem_with_inj" class="idref" href="#prm_split_incr_mem_with_inj"><span class="id" title="lemma">prm_split_incr_mem_with_inj</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:95" class="idref" href="#inj:95"><span class="id" title="binder">inj</span></a> <a id="inj':96" class="idref" href="#inj':96"><span class="id" title="binder">inj'</span></a> <a id="mem:97" class="idref" href="#mem:97"><span class="id" title="binder">mem</span></a> <a id="mem':98" class="idref" href="#mem':98"><span class="id" title="binder">mem'</span></a> <a id="loc:99" class="idref" href="#loc:99"><span class="id" title="binder">loc</span></a> <a id="from:100" class="idref" href="#from:100"><span class="id" title="binder">from</span></a> <a id="to:101" class="idref" href="#to:101"><span class="id" title="binder">to</span></a> <a id="to':102" class="idref" href="#to':102"><span class="id" title="binder">to'</span></a> <a id="msg:103" class="idref" href="#msg:103"><span class="id" title="binder">msg</span></a> <a id="msg':104" class="idref" href="#msg':104"><span class="id" title="binder">msg'</span></a> <a id="promises:105" class="idref" href="#promises:105"><span class="id" title="binder">promises</span></a> <a id="promises':106" class="idref" href="#promises':106"><span class="id" title="binder">promises'</span></a> <a id="kind:107" class="idref" href="#kind:107"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:95"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:97"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:105"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:97"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:99"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:100"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:101"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:103"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':106"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':98"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:107"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:107"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to':102"><span class="id" title="variable">to'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg':104"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:103"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.reserve"><span class="id" title="constructor">Message.reserve</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':96"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:108" class="idref" href="#loc1:108"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:109" class="idref" href="#to1:109"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:99"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:101"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:108"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:109"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:101"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:95"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:108"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:109"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':96"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':98"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">MEM</span> <span class="id" title="keyword">as</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_o"><span class="id" title="lemma">Memory.split_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>)  <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> is newly insert
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> in inj 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_get0"><span class="id" title="lemma">Memory.split_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MEM'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">M</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">M</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">MEM</span> <span class="id" title="keyword">as</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_o"><span class="id" title="lemma">Memory.split_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>)  <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> is newly insert
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v'</span> &amp; <span class="id" title="var">R'</span> &amp; <span class="id" title="var">M</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">M</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">loc0</span></span> <span class="inlinecode"><a class="idref" href="CompOptCert.optimizer.ValAnalysis.html#ValLat.t"><span class="id" title="definition">t</span></a></span> in inj 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">COMPLETE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>. }        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_get0"><span class="id" title="lemma">Memory.split_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MEM'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">M</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVEORIGINAL</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v'</span> &amp; <span class="id" title="var">R'</span> &amp; <span class="id" title="var">M'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">M'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">COMPLETE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">INJ</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="promise_resv_preserve_mem_inj_dom_eq" class="idref" href="#promise_resv_preserve_mem_inj_dom_eq"><span class="id" title="lemma">promise_resv_preserve_mem_inj_dom_eq</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="msg:110" class="idref" href="#msg:110"><span class="id" title="binder">msg</span></a> <a id="inj:111" class="idref" href="#inj:111"><span class="id" title="binder">inj</span></a> <a id="mem:112" class="idref" href="#mem:112"><span class="id" title="binder">mem</span></a> <a id="mem':113" class="idref" href="#mem':113"><span class="id" title="binder">mem'</span></a> <a id="prm:114" class="idref" href="#prm:114"><span class="id" title="binder">prm</span></a> <a id="prm':115" class="idref" href="#prm':115"><span class="id" title="binder">prm'</span></a> <a id="kind:116" class="idref" href="#kind:116"><span class="id" title="binder">kind</span></a> <a id="from:117" class="idref" href="#from:117"><span class="id" title="binder">from</span></a> <a id="loc:118" class="idref" href="#loc:118"><span class="id" title="binder">loc</span></a> <a id="to:119" class="idref" href="#to:119"><span class="id" title="binder">to</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:110"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.reserve"><span class="id" title="constructor">Message.reserve</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:111"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:112"><span class="id" title="variable">mem</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm:114"><span class="id" title="variable">prm</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:112"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:118"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:117"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:119"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:110"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm':115"><span class="id" title="variable">prm'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':113"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:116"><span class="id" title="variable">kind</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:111"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':113"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
add 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_o"><span class="id" title="lemma">Memory.add_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">COMPLETE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">INJ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">val</span> &amp; <span class="id" title="var">f</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">MSG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_get1"><span class="id" title="lemma">Memory.add_get1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
split 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">LOWER</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
cancel 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="CompOptCert.Memory.html#Memory.concrete_msg_remove_rsv_stable"><span class="id" title="lemma">Memory.concrete_msg_remove_rsv_stable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">COMPLETE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">INJ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">val</span> &amp; <span class="id" title="var">f</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">MSG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="incr_inj_preserve_mem_injected" class="idref" href="#incr_inj_preserve_mem_injected"><span class="id" title="lemma">incr_inj_preserve_mem_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:120" class="idref" href="#inj:120"><span class="id" title="binder">inj</span></a> <a id="inj':121" class="idref" href="#inj':121"><span class="id" title="binder">inj'</span></a> <a id="mem:122" class="idref" href="#mem:122"><span class="id" title="binder">mem</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#incr_inj"><span class="id" title="definition">incr_inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:120"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':121"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:120"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:122"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':121"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:122"><span class="id" title="variable">mem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">incr_inj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="promise_ccl_keeps_promises_injected" class="idref" href="#promise_ccl_keeps_promises_injected"><span class="id" title="lemma">promise_ccl_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:123" class="idref" href="#inj:123"><span class="id" title="binder">inj</span></a> <a id="mem:124" class="idref" href="#mem:124"><span class="id" title="binder">mem</span></a> <a id="mem':125" class="idref" href="#mem':125"><span class="id" title="binder">mem'</span></a> <a id="loc:126" class="idref" href="#loc:126"><span class="id" title="binder">loc</span></a> <a id="from:127" class="idref" href="#from:127"><span class="id" title="binder">from</span></a> <a id="to:128" class="idref" href="#to:128"><span class="id" title="binder">to</span></a> <a id="msg:129" class="idref" href="#msg:129"><span class="id" title="binder">msg</span></a> <a id="promises:130" class="idref" href="#promises:130"><span class="id" title="binder">promises</span></a> <a id="promises':131" class="idref" href="#promises':131"><span class="id" title="binder">promises'</span></a> <a id="kind:132" class="idref" href="#kind:132"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:123"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:130"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:130"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:124"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:126"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:127"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:128"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:129"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':131"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':125"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:132"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:132"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_cancel"><span class="id" title="constructor">Memory.op_kind_cancel</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:123"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':131"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">PROMISES</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="promise_resv_keeps_promises_injected" class="idref" href="#promise_resv_keeps_promises_injected"><span class="id" title="lemma">promise_resv_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:133" class="idref" href="#inj:133"><span class="id" title="binder">inj</span></a> <a id="mem:134" class="idref" href="#mem:134"><span class="id" title="binder">mem</span></a> <a id="mem':135" class="idref" href="#mem':135"><span class="id" title="binder">mem'</span></a> <a id="loc:136" class="idref" href="#loc:136"><span class="id" title="binder">loc</span></a> <a id="from:137" class="idref" href="#from:137"><span class="id" title="binder">from</span></a> <a id="to:138" class="idref" href="#to:138"><span class="id" title="binder">to</span></a> <a id="msg:139" class="idref" href="#msg:139"><span class="id" title="binder">msg</span></a> <a id="promises:140" class="idref" href="#promises:140"><span class="id" title="binder">promises</span></a> <a id="promises':141" class="idref" href="#promises':141"><span class="id" title="binder">promises'</span></a> <a id="kind:142" class="idref" href="#kind:142"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:133"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:140"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:139"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.reserve"><span class="id" title="constructor">Message.reserve</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:140"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:134"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:136"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:137"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:138"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:139"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':141"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':135"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:142"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:133"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':141"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
add 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">PROMISES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_o"><span class="id" title="lemma">Memory.add_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
split 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MEM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">LOWER</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">G</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
cancel 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">PROMISES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.remove_o"><span class="id" title="lemma">Memory.remove_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_add_keeps_promises_injected" class="idref" href="#prm_add_keeps_promises_injected"><span class="id" title="lemma">prm_add_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:143" class="idref" href="#inj:143"><span class="id" title="binder">inj</span></a> <a id="inj':144" class="idref" href="#inj':144"><span class="id" title="binder">inj'</span></a> <a id="mem:145" class="idref" href="#mem:145"><span class="id" title="binder">mem</span></a> <a id="mem':146" class="idref" href="#mem':146"><span class="id" title="binder">mem'</span></a> <a id="loc:147" class="idref" href="#loc:147"><span class="id" title="binder">loc</span></a> <a id="from:148" class="idref" href="#from:148"><span class="id" title="binder">from</span></a> <a id="to:149" class="idref" href="#to:149"><span class="id" title="binder">to</span></a> <a id="msg:150" class="idref" href="#msg:150"><span class="id" title="binder">msg</span></a> <a id="promises:151" class="idref" href="#promises:151"><span class="id" title="binder">promises</span></a> <a id="promises':152" class="idref" href="#promises':152"><span class="id" title="binder">promises'</span></a> <a id="kind:153" class="idref" href="#kind:153"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:143"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:151"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:151"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:145"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:147"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:148"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:149"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:150"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':152"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':146"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:153"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:153"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_add"><span class="id" title="constructor">Memory.op_kind_add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':144"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:154" class="idref" href="#loc1:154"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:155" class="idref" href="#to1:155"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:147"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:149"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:154"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:155"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:149"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:143"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:154"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:155"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':144"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':152"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.add_o"><span class="id" title="lemma">Memory.add_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for new <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">to</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_split_keeps_promises_injected" class="idref" href="#prm_split_keeps_promises_injected"><span class="id" title="lemma">prm_split_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:156" class="idref" href="#inj:156"><span class="id" title="binder">inj</span></a> <a id="inj':157" class="idref" href="#inj':157"><span class="id" title="binder">inj'</span></a> <a id="mem:158" class="idref" href="#mem:158"><span class="id" title="binder">mem</span></a> <a id="mem':159" class="idref" href="#mem':159"><span class="id" title="binder">mem'</span></a> <a id="loc:160" class="idref" href="#loc:160"><span class="id" title="binder">loc</span></a> <a id="from:161" class="idref" href="#from:161"><span class="id" title="binder">from</span></a> <a id="to:162" class="idref" href="#to:162"><span class="id" title="binder">to</span></a> <a id="to':163" class="idref" href="#to':163"><span class="id" title="binder">to'</span></a> <a id="msg:164" class="idref" href="#msg:164"><span class="id" title="binder">msg</span></a> <a id="msg':165" class="idref" href="#msg':165"><span class="id" title="binder">msg'</span></a> <a id="promises:166" class="idref" href="#promises:166"><span class="id" title="binder">promises</span></a> <a id="promises':167" class="idref" href="#promises':167"><span class="id" title="binder">promises'</span></a> <a id="kind:168" class="idref" href="#kind:168"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:156"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:166"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:166"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:158"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:160"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:161"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:162"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:164"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':167"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':159"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:168"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:168"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to':163"><span class="id" title="variable">to'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg':165"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':157"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:169" class="idref" href="#loc1:169"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:170" class="idref" href="#to1:170"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:160"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:162"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:169"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:170"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:162"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:156"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:169"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:170"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':157"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':167"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">PROMISES</span> <span class="id" title="keyword">as</span> <span class="id" title="var">PROMISES'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_o"><span class="id" title="lemma">Memory.split_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>)  <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for new <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">to</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MSG</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.split_get0"><span class="id" title="lemma">Memory.split_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">PROMISES'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">M</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifs</span>; <span class="id" title="var">simpls</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">o0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_lower_keeps_promises_injected" class="idref" href="#prm_lower_keeps_promises_injected"><span class="id" title="lemma">prm_lower_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:171" class="idref" href="#inj:171"><span class="id" title="binder">inj</span></a> <a id="mem:172" class="idref" href="#mem:172"><span class="id" title="binder">mem</span></a> <a id="mem':173" class="idref" href="#mem':173"><span class="id" title="binder">mem'</span></a> <a id="loc:174" class="idref" href="#loc:174"><span class="id" title="binder">loc</span></a> <a id="from:175" class="idref" href="#from:175"><span class="id" title="binder">from</span></a> <a id="to:176" class="idref" href="#to:176"><span class="id" title="binder">to</span></a> <a id="msg:177" class="idref" href="#msg:177"><span class="id" title="binder">msg</span></a> <a id="msg':178" class="idref" href="#msg':178"><span class="id" title="binder">msg'</span></a> <a id="promises:179" class="idref" href="#promises:179"><span class="id" title="binder">promises</span></a> <a id="promises':180" class="idref" href="#promises':180"><span class="id" title="binder">promises'</span></a> <a id="kind:181" class="idref" href="#kind:181"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:171"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:179"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:179"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:172"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:174"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:175"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:176"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:177"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':180"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':173"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:181"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:181"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_lower"><span class="id" title="constructor">Memory.op_kind_lower</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg':178"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:171"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':180"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">PROMISES</span> <span class="id" title="keyword">as</span> <span class="id" title="var">PROMISE'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">PROMISES</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for msg whose R is subst by lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
</div>

<div class="doc">
related msg' and msg 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_get0"><span class="id" title="lemma">Memory.lower_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISE'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">PROMISE'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">OLD_MSG</span> &amp; <span class="id" title="var">NEW_MSG</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R'</span> &amp; <span class="id" title="var">M</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">M</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">to</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">PROMISES0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">PROMISES</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_lower_keeps_mem_inj_dom_eq" class="idref" href="#prm_lower_keeps_mem_inj_dom_eq"><span class="id" title="lemma">prm_lower_keeps_mem_inj_dom_eq</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:182" class="idref" href="#inj:182"><span class="id" title="binder">inj</span></a> <a id="mem:183" class="idref" href="#mem:183"><span class="id" title="binder">mem</span></a> <a id="mem':184" class="idref" href="#mem':184"><span class="id" title="binder">mem'</span></a> <a id="loc:185" class="idref" href="#loc:185"><span class="id" title="binder">loc</span></a> <a id="from:186" class="idref" href="#from:186"><span class="id" title="binder">from</span></a> <a id="to:187" class="idref" href="#to:187"><span class="id" title="binder">to</span></a> <a id="msg:188" class="idref" href="#msg:188"><span class="id" title="binder">msg</span></a> <a id="msg':189" class="idref" href="#msg':189"><span class="id" title="binder">msg'</span></a> <a id="promises:190" class="idref" href="#promises:190"><span class="id" title="binder">promises</span></a> <a id="promises':191" class="idref" href="#promises':191"><span class="id" title="binder">promises'</span></a> <a id="kind:192" class="idref" href="#kind:192"><span class="id" title="binder">kind</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:182"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:183"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:190"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:183"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:185"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:186"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:187"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:188"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':191"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':184"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:192"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:192"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_lower"><span class="id" title="constructor">Memory.op_kind_lower</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg':189"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:182"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':184"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">MEM</span> <span class="id" title="keyword">as</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">M</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
for msg whose R is subst by lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_get0"><span class="id" title="lemma">Memory.lower_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MEM'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">OLD_MSG</span> &amp; <span class="id" title="var">NEW_MSG</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">M</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
for msg whose R is subst by lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_get0"><span class="id" title="lemma">Memory.lower_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MEM'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">OLD_MSG</span> &amp; <span class="id" title="var">NEW_MSG</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">PROMISES</span>. <span class="id" title="var">inv</span> <span class="id" title="var">LOWER</span>. <span class="id" title="var">inv</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">NEW_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">NEW_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM'</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">COMPLETE</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_keeps_mem_inj_dom_eq" class="idref" href="#prm_keeps_mem_inj_dom_eq"><span class="id" title="lemma">prm_keeps_mem_inj_dom_eq</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:193" class="idref" href="#inj:193"><span class="id" title="binder">inj</span></a> <a id="inj':194" class="idref" href="#inj':194"><span class="id" title="binder">inj'</span></a> <a id="mem:195" class="idref" href="#mem:195"><span class="id" title="binder">mem</span></a> <a id="mem':196" class="idref" href="#mem':196"><span class="id" title="binder">mem'</span></a> <a id="loc:197" class="idref" href="#loc:197"><span class="id" title="binder">loc</span></a> <a id="from:198" class="idref" href="#from:198"><span class="id" title="binder">from</span></a> <a id="to:199" class="idref" href="#to:199"><span class="id" title="binder">to</span></a> <a id="msg:200" class="idref" href="#msg:200"><span class="id" title="binder">msg</span></a> <a id="promises:201" class="idref" href="#promises:201"><span class="id" title="binder">promises</span></a> <a id="promises':202" class="idref" href="#promises':202"><span class="id" title="binder">promises'</span></a> <a id="kind:203" class="idref" href="#kind:203"><span class="id" title="binder">kind</span></a>,<br/>
<br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:193"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:195"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:201"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:195"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:197"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:198"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:199"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:200"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':202"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':196"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:203"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg:200"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.reserve"><span class="id" title="constructor">Message.reserve</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':194"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:204" class="idref" href="#loc1:204"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:205" class="idref" href="#to1:205"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:197"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:199"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:204"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:205"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:199"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:193"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:204"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:205"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="loc:206" class="idref" href="#loc:206"><span class="id" title="binder">loc</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="t:207" class="idref" href="#t:207"><span class="id" title="binder">t</span></a> <a id="t':208" class="idref" href="#t':208"><span class="id" title="binder">t'</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:193"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:206"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:207"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t':208"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:207"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t':208"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">))-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_inj_dom_eq"><span class="id" title="inductive">mem_inj_dom_eq</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':194"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':196"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_add_incr_mem_with_inj"><span class="id" title="lemma">prm_add_incr_mem_with_inj</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_split_incr_mem_with_inj"><span class="id" title="lemma">prm_split_incr_mem_with_inj</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_lower_keeps_mem_inj_dom_eq"><span class="id" title="lemma">prm_lower_keeps_mem_inj_dom_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CompOptCert.MsgMapping.html#eq_inj"><span class="id" title="definition">eq_inj</span></a> <span class="id" title="var">inj</span> <span class="id" title="var">inj'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.MsgMapping.html#eq_inj"><span class="id" title="definition">eq_inj</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="var">des_if</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">MEM</span> <span class="id" title="keyword">as</span> <span class="id" title="var">MEM'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_o"><span class="id" title="lemma">Memory.lower_o</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">loc0</span>) (<span class="id" title="var">t</span>:=<span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">MEM</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">MEM</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
for msg whose R is subst by lower 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t'</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="var">des_ifH</span> <span class="id" title="var">H5</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Memory.html#Memory.lower_get0"><span class="id" title="lemma">Memory.lower_get0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">MEM'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MEM'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">OLD_MSG</span> &amp; <span class="id" title="var">NEW_MSG</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">CONCRETE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">PROMISES</span>. <span class="id" title="var">inv</span> <span class="id" title="var">LOWER</span>. <span class="id" title="var">inv</span> <span class="id" title="var">MSG_LE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">RESERVE</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">CONCRETE</span>); <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">CONCRETE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">SOUND</span> <span class="id" title="tactic">in</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">OLD_MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H14</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  </div>

<div class="doc">
for old <span class="inlinecode"><span class="id" title="var">loc</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_ifH</span> <span class="id" title="var">H5</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.MsgMapping.html#eq_inj_implies_mem_inj_dom_eq"><span class="id" title="lemma">eq_inj_implies_mem_inj_dom_eq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RESERVE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="prm_concrete_keeps_promises_injected" class="idref" href="#prm_concrete_keeps_promises_injected"><span class="id" title="lemma">prm_concrete_keeps_promises_injected</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="inj:209" class="idref" href="#inj:209"><span class="id" title="binder">inj</span></a> <a id="inj':210" class="idref" href="#inj':210"><span class="id" title="binder">inj'</span></a> <a id="mem:211" class="idref" href="#mem:211"><span class="id" title="binder">mem</span></a> <a id="mem':212" class="idref" href="#mem':212"><span class="id" title="binder">mem'</span></a> <a id="loc:213" class="idref" href="#loc:213"><span class="id" title="binder">loc</span></a> <a id="from:214" class="idref" href="#from:214"><span class="id" title="binder">from</span></a> <a id="to:215" class="idref" href="#to:215"><span class="id" title="binder">to</span></a> <a id="promises:216" class="idref" href="#promises:216"><span class="id" title="binder">promises</span></a> <a id="promises':217" class="idref" href="#promises':217"><span class="id" title="binder">promises'</span></a> <a id="kind:218" class="idref" href="#kind:218"><span class="id" title="binder">kind</span></a> <a id="v:219" class="idref" href="#v:219"><span class="id" title="binder">v</span></a> <a id="released:220" class="idref" href="#released:220"><span class="id" title="binder">released</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">∃</span></a> <a id="mem:221" class="idref" href="#mem:221"><span class="id" title="binder">mem</span></a><a class="idref" href="CompOptCert.LibTactics.html#3cd408940d17a0809f793173996d5fd5"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.MsgMapping.html#eq_ident_mapping"><span class="id" title="definition">eq_ident_mapping</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:209"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:221"><span class="id" title="variable">mem</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:209"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:216"><span class="id" title="variable">promises</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.promise"><span class="id" title="inductive">Memory.promise</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises:216"><span class="id" title="variable">promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:211"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:213"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:214"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:215"><span class="id" title="variable">to</span></a> (<a class="idref" href="CompOptCert.Cell.html#Message.concrete"><span class="id" title="constructor">Message.concrete</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#v:219"><span class="id" title="variable">v</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:220"><span class="id" title="variable">released</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':217"><span class="id" title="variable">promises'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':212"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:218"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':210"><span class="id" title="variable">inj'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="loc1:222" class="idref" href="#loc1:222"><span class="id" title="binder">loc1</span></a> : <a class="idref" href="CompOptCert.Loc.html#Loc.t"><span class="id" title="definition">Loc.t</span></a>) (<a id="to1:223" class="idref" href="#to1:223"><span class="id" title="binder">to1</span></a> : <a class="idref" href="CompOptCert.Time.html#Time.t"><span class="id" title="definition">Time.t</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:213"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:215"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:222"><span class="id" title="variable">loc1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:223"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:215"><span class="id" title="variable">to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj:209"><span class="id" title="variable">inj</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc1:222"><span class="id" title="variable">loc1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to1:223"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CompOptCert.MsgMapping.html#mem_injected"><span class="id" title="definition">mem_injected</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#inj':210"><span class="id" title="variable">inj'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#promises':217"><span class="id" title="variable">promises'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">released</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">MAP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_split_keeps_promises_injected"><span class="id" title="lemma">prm_split_keeps_promises_injected</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_add_keeps_promises_injected"><span class="id" title="lemma">prm_add_keeps_promises_injected</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;-<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#prm_lower_keeps_promises_injected"><span class="id" title="lemma">prm_lower_keeps_promises_injected</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">mem_injected</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">des_if</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">MAP</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="atomic_write_step_keep_na_cur_rlx" class="idref" href="#atomic_write_step_keep_na_cur_rlx"><span class="id" title="lemma">atomic_write_step_keep_na_cur_rlx</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:224" class="idref" href="#lc:224"><span class="id" title="binder">lc</span></a> <a id="sc:225" class="idref" href="#sc:225"><span class="id" title="binder">sc</span></a> <a id="mem:226" class="idref" href="#mem:226"><span class="id" title="binder">mem</span></a> <a id="loc:227" class="idref" href="#loc:227"><span class="id" title="binder">loc</span></a> <a id="loc':228" class="idref" href="#loc':228"><span class="id" title="binder">loc'</span></a> <a id="from:229" class="idref" href="#from:229"><span class="id" title="binder">from</span></a> <a id="to:230" class="idref" href="#to:230"><span class="id" title="binder">to</span></a>  <a id="val:231" class="idref" href="#val:231"><span class="id" title="binder">val</span></a> <a id="releasedm:232" class="idref" href="#releasedm:232"><span class="id" title="binder">releasedm</span></a> <a id="released:233" class="idref" href="#released:233"><span class="id" title="binder">released</span></a> <a id="or:234" class="idref" href="#or:234"><span class="id" title="binder">or</span></a> <a id="lc':235" class="idref" href="#lc':235"><span class="id" title="binder">lc'</span></a> <a id="sc':236" class="idref" href="#sc':236"><span class="id" title="binder">sc'</span></a> <a id="mem':237" class="idref" href="#mem':237"><span class="id" title="binder">mem'</span></a> <a id="kind:238" class="idref" href="#kind:238"><span class="id" title="binder">kind</span></a> <a id="lo:239" class="idref" href="#lo:239"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.write_step"><span class="id" title="inductive">Local.write_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:224"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:225"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:226"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:227"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:229"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:230"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:231"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#releasedm:232"><span class="id" title="variable">releasedm</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:233"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:234"><span class="id" title="variable">or</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':235"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':236"><span class="id" title="variable">sc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':237"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:238"><span class="id" title="variable">kind</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:239"><span class="id" title="variable">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:234"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:234"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:234"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:227"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':228"><span class="id" title="variable">loc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:239"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':228"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:224"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':228"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.rlx"><span class="id" title="projection">View.rlx</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':235"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':228"><span class="id" title="variable">loc'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">RELAXED</span>|[<span class="id" title="var">RELAXED</span>|<span class="id" title="var">ACQ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ACQ</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="atomic_write_step_keep_na_cur_pln" class="idref" href="#atomic_write_step_keep_na_cur_pln"><span class="id" title="lemma">atomic_write_step_keep_na_cur_pln</span></a>: <br/>
<span class="id" title="keyword">∀</span> <a id="lc:240" class="idref" href="#lc:240"><span class="id" title="binder">lc</span></a> <a id="sc:241" class="idref" href="#sc:241"><span class="id" title="binder">sc</span></a> <a id="mem:242" class="idref" href="#mem:242"><span class="id" title="binder">mem</span></a> <a id="loc:243" class="idref" href="#loc:243"><span class="id" title="binder">loc</span></a> <a id="loc':244" class="idref" href="#loc':244"><span class="id" title="binder">loc'</span></a> <a id="from:245" class="idref" href="#from:245"><span class="id" title="binder">from</span></a> <a id="to:246" class="idref" href="#to:246"><span class="id" title="binder">to</span></a>  <a id="val:247" class="idref" href="#val:247"><span class="id" title="binder">val</span></a> <a id="releasedm:248" class="idref" href="#releasedm:248"><span class="id" title="binder">releasedm</span></a> <a id="released:249" class="idref" href="#released:249"><span class="id" title="binder">released</span></a> <a id="or:250" class="idref" href="#or:250"><span class="id" title="binder">or</span></a> <a id="lc':251" class="idref" href="#lc':251"><span class="id" title="binder">lc'</span></a> <a id="sc':252" class="idref" href="#sc':252"><span class="id" title="binder">sc'</span></a> <a id="mem':253" class="idref" href="#mem':253"><span class="id" title="binder">mem'</span></a> <a id="kind:254" class="idref" href="#kind:254"><span class="id" title="binder">kind</span></a> <a id="lo:255" class="idref" href="#lo:255"><span class="id" title="binder">lo</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.write_step"><span class="id" title="inductive">Local.write_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:240"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:241"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:242"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:243"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:245"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:246"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:247"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#releasedm:248"><span class="id" title="variable">releasedm</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:249"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:250"><span class="id" title="variable">or</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':251"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':252"><span class="id" title="variable">sc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':253"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:254"><span class="id" title="variable">kind</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:255"><span class="id" title="variable">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:250"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.relaxed"><span class="id" title="constructor">Ordering.relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:250"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.strong_relaxed"><span class="id" title="constructor">Ordering.strong_relaxed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#or:250"><span class="id" title="variable">or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.acqrel"><span class="id" title="constructor">Ordering.acqrel</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:243"><span class="id" title="variable">loc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':244"><span class="id" title="variable">loc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:255"><span class="id" title="variable">lo</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':244"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Event.html#Ordering.nonatomic"><span class="id" title="constructor">Ordering.nonatomic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:240"><span class="id" title="variable">lc</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':244"><span class="id" title="variable">loc'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.View.html#View.pln"><span class="id" title="projection">View.pln</span></a> (<a class="idref" href="CompOptCert.TView.html#TView.cur"><span class="id" title="projection">TView.cur</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.tview"><span class="id" title="projection">Local.tview</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':251"><span class="id" title="variable">lc'</span></a>)) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc':244"><span class="id" title="variable">loc'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">RELAXED</span>|[<span class="id" title="var">RELAXED</span>|<span class="id" title="var">ACQ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">RELAXED</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-  <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ACQ</span>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.join"><span class="id" title="definition">TimeMap.join</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.View.html#TimeMap.singleton"><span class="id" title="definition">TimeMap.singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  <a class="idref" href="CompOptCert.MsgMapping.html#Loc_add_neq"><span class="id" title="lemma">Loc_add_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Loc.html#LocFun.init"><span class="id" title="definition">LocFun.init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CompOptCert.Time.html#Time_join_bot"><span class="id" title="lemma">Time_join_bot</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="incr_mem_preserve_closed_view" class="idref" href="#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>:<br/>
<span class="id" title="keyword">∀</span> <a id="view:256" class="idref" href="#view:256"><span class="id" title="binder">view</span></a> <a id="mem:257" class="idref" href="#mem:257"><span class="id" title="binder">mem</span></a> <a id="mem':258" class="idref" href="#mem':258"><span class="id" title="binder">mem'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.closed_view"><span class="id" title="inductive">Memory.closed_view</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#view:256"><span class="id" title="variable">view</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:257"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.LocalSim.html#concrete_mem_incr"><span class="id" title="definition">concrete_mem_incr</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:257"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':258"><span class="id" title="variable">mem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.closed_view"><span class="id" title="inductive">Memory.closed_view</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#view:256"><span class="id" title="variable">view</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':258"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.LocalSim.html#concrete_mem_incr"><span class="id" title="definition">concrete_mem_incr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">Memory.closed_timemap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">PLN</span> <span class="id" title="var">loc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span> &amp; <span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">MSG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f'</span> &amp; <span class="id" title="var">R'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">MSG'</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">Memory.closed_timemap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">RLX</span> <span class="id" title="var">loc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span> &amp; <span class="id" title="var">v</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">MSG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">MSG</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">MSG</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">f'</span> &amp; <span class="id" title="var">R'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">MSG'</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="incr_mem_preserve_local_wf" class="idref" href="#incr_mem_preserve_local_wf"><span class="id" title="lemma">incr_mem_preserve_local_wf</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="lc:259" class="idref" href="#lc:259"><span class="id" title="binder">lc</span></a> <a id="mem:260" class="idref" href="#mem:260"><span class="id" title="binder">mem</span></a> <a id="mem':261" class="idref" href="#mem':261"><span class="id" title="binder">mem'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.wf"><span class="id" title="inductive">Local.wf</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:259"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:260"><span class="id" title="variable">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.LocalSim.html#concrete_mem_incr"><span class="id" title="definition">concrete_mem_incr</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:260"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':261"><span class="id" title="variable">mem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.le"><span class="id" title="definition">Memory.le</span></a> (<a class="idref" href="CompOptCert.Local.html#Local.promises"><span class="id" title="projection">Local.promises</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:259"><span class="id" title="variable">lc</span></a>) <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':261"><span class="id" title="variable">mem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> </div>

<div class="doc">
why this 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Local.html#Local.wf"><span class="id" title="inductive">Local.wf</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:259"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':261"><span class="id" title="variable">mem'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">TVIEW_CLOSED</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">concrete_mem_incr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">TVIEW_CLOSED</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;×     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">TVIEW_CLOSED</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;×     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;-<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">TVIEW_CLOSED</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;×     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#incr_mem_preserve_closed_view"><span class="id" title="lemma">incr_mem_preserve_closed_view</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="non_split_write_o" class="idref" href="#non_split_write_o"><span class="id" title="lemma">non_split_write_o</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:262" class="idref" href="#l:262"><span class="id" title="binder">l</span></a> <a id="t:263" class="idref" href="#t:263"><span class="id" title="binder">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="mem:264" class="idref" href="#mem:264"><span class="id" title="binder">mem</span></a> <a id="lc:265" class="idref" href="#lc:265"><span class="id" title="binder">lc</span></a> <a id="sc:266" class="idref" href="#sc:266"><span class="id" title="binder">sc</span></a> <a id="loc:267" class="idref" href="#loc:267"><span class="id" title="binder">loc</span></a> <a id="from:268" class="idref" href="#from:268"><span class="id" title="binder">from</span></a> <a id="to:269" class="idref" href="#to:269"><span class="id" title="binder">to</span></a> <a id="val:270" class="idref" href="#val:270"><span class="id" title="binder">val</span></a> <a id="releasedm:271" class="idref" href="#releasedm:271"><span class="id" title="binder">releasedm</span></a> <a id="released:272" class="idref" href="#released:272"><span class="id" title="binder">released</span></a> <a id="mem':273" class="idref" href="#mem':273"><span class="id" title="binder">mem'</span></a> <a id="lc':274" class="idref" href="#lc':274"><span class="id" title="binder">lc'</span></a> <a id="sc':275" class="idref" href="#sc':275"><span class="id" title="binder">sc'</span></a> <a id="kind:276" class="idref" href="#kind:276"><span class="id" title="binder">kind</span></a> <a id="ord:277" class="idref" href="#ord:277"><span class="id" title="binder">ord</span></a> <a id="lo:278" class="idref" href="#lo:278"><span class="id" title="binder">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="WRITE:279" class="idref" href="#WRITE:279"><span class="id" title="binder">WRITE</span></a>: <a class="idref" href="CompOptCert.Local.html#Local.write_step"><span class="id" title="inductive">Local.write_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:265"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:266"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:264"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:267"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:268"><span class="id" title="variable">from</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:269"><span class="id" title="variable">to</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:270"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#releasedm:271"><span class="id" title="variable">releasedm</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:272"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ord:277"><span class="id" title="variable">ord</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':274"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':275"><span class="id" title="variable">sc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':273"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:276"><span class="id" title="variable">kind</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:278"><span class="id" title="variable">lo</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="NON_SPLIT:282" class="idref" href="#NON_SPLIT:282"><span class="id" title="binder">NON_SPLIT</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">∃</span></a> <a id="msg3:280" class="idref" href="#msg3:280"><span class="id" title="binder">msg3</span></a> <a id="ts3:281" class="idref" href="#ts3:281"><span class="id" title="binder">ts3</span></a><a class="idref" href="CompOptCert.LibTactics.html#c02b6b01c62ddee8aaf402f63f978cd2"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:276"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts3:281"><span class="id" title="variable">ts3</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg3:280"><span class="id" title="variable">msg3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:262"><span class="id" title="variable">l</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:263"><span class="id" title="variable">t</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':273"><span class="id" title="variable">mem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:262"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:263"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:267"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#to:269"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#from:268"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.concrete"><span class="id" title="constructor">Message.concrete</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:270"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:272"><span class="id" title="variable">released</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:262"><span class="id" title="variable">l</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:263"><span class="id" title="variable">t</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:264"><span class="id" title="variable">mem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">WRITE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CompOptCert.Local.html#Local.write_step_non_cancel"><span class="id" title="lemma">Local.write_step_non_cancel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">WRITE</span>. <span class="id" title="var">inv</span> <span class="id" title="var">WRITE0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">PROMISE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a>, <a class="idref" href="CompOptCert.Loc.html#LocFun.add"><span class="id" title="definition">LocFun.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_if</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="CompOptCert.Cell.html#Cell.add_o"><span class="id" title="lemma">Cell.add_o</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-   <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">NON_SPLIT</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a>, <a class="idref" href="CompOptCert.Loc.html#LocFun.add"><span class="id" title="definition">LocFun.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_if</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="CompOptCert.Cell.html#Cell.lower_o"><span class="id" title="lemma">Cell.lower_o</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <span class="id" title="var">Memory.op_kind_is_cancel</span>. <span class="id" title="var">simpls</span>. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="split_write_o" class="idref" href="#split_write_o"><span class="id" title="lemma">split_write_o</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:283" class="idref" href="#l:283"><span class="id" title="binder">l</span></a> <a id="t:284" class="idref" href="#t:284"><span class="id" title="binder">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="mem:285" class="idref" href="#mem:285"><span class="id" title="binder">mem</span></a> <a id="lc:286" class="idref" href="#lc:286"><span class="id" title="binder">lc</span></a> <a id="sc:287" class="idref" href="#sc:287"><span class="id" title="binder">sc</span></a> <a id="loc:288" class="idref" href="#loc:288"><span class="id" title="binder">loc</span></a> <a id="val:289" class="idref" href="#val:289"><span class="id" title="binder">val</span></a> <a id="ts1:290" class="idref" href="#ts1:290"><span class="id" title="binder">ts1</span></a> <a id="ts2:291" class="idref" href="#ts2:291"><span class="id" title="binder">ts2</span></a> <a id="ts3:292" class="idref" href="#ts3:292"><span class="id" title="binder">ts3</span></a> <a id="msg3:293" class="idref" href="#msg3:293"><span class="id" title="binder">msg3</span></a> <a id="releasedm:294" class="idref" href="#releasedm:294"><span class="id" title="binder">releasedm</span></a> <a id="released:295" class="idref" href="#released:295"><span class="id" title="binder">released</span></a> <a id="mem':296" class="idref" href="#mem':296"><span class="id" title="binder">mem'</span></a> <a id="lc':297" class="idref" href="#lc':297"><span class="id" title="binder">lc'</span></a> <a id="sc':298" class="idref" href="#sc':298"><span class="id" title="binder">sc'</span></a> <a id="kind:299" class="idref" href="#kind:299"><span class="id" title="binder">kind</span></a> <a id="ord:300" class="idref" href="#ord:300"><span class="id" title="binder">ord</span></a> <a id="lo:301" class="idref" href="#lo:301"><span class="id" title="binder">lo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="WRITE:302" class="idref" href="#WRITE:302"><span class="id" title="binder">WRITE</span></a>: <a class="idref" href="CompOptCert.Local.html#Local.write_step"><span class="id" title="inductive">Local.write_step</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc:286"><span class="id" title="variable">lc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc:287"><span class="id" title="variable">sc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:285"><span class="id" title="variable">mem</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:288"><span class="id" title="variable">loc</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts1:290"><span class="id" title="variable">ts1</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts2:291"><span class="id" title="variable">ts2</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:289"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#releasedm:294"><span class="id" title="variable">releasedm</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:295"><span class="id" title="variable">released</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ord:300"><span class="id" title="variable">ord</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lc':297"><span class="id" title="variable">lc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#sc':298"><span class="id" title="variable">sc'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':296"><span class="id" title="variable">mem'</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:299"><span class="id" title="variable">kind</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#lo:301"><span class="id" title="variable">lo</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="SPLIT:303" class="idref" href="#SPLIT:303"><span class="id" title="binder">SPLIT</span></a>: (<a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#kind:299"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CompOptCert.Memory.html#Memory.op_kind_split"><span class="id" title="constructor">Memory.op_kind_split</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts3:292"><span class="id" title="variable">ts3</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg3:293"><span class="id" title="variable">msg3</span></a>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:283"><span class="id" title="variable">l</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:284"><span class="id" title="variable">t</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem':296"><span class="id" title="variable">mem'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:283"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:284"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:288"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts2:291"><span class="id" title="variable">ts2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts1:290"><span class="id" title="variable">ts1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.Cell.html#Message.concrete"><span class="id" title="constructor">Message.concrete</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#val:289"><span class="id" title="variable">val</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#released:295"><span class="id" title="variable">released</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <a class="idref" href="CompOptCert.View.html#loc_ts_eq_dec"><span class="id" title="definition">loc_ts_eq_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:283"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:284"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#loc:288"><span class="id" title="variable">loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts3:292"><span class="id" title="variable">ts3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#ts2:291"><span class="id" title="variable">ts2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#msg3:293"><span class="id" title="variable">msg3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#l:283"><span class="id" title="variable">l</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#t:284"><span class="id" title="variable">t</span></a> <a class="idref" href="CompOptCert.optimizer.CSEProofAux.html#mem:285"><span class="id" title="variable">mem</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">WRITE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">WRITE</span>. <span class="id" title="var">inv</span> <span class="id" title="var">WRITE0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">PROMISE</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">MEM</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CompOptCert.Memory.html#Memory.get"><span class="id" title="definition">Memory.get</span></a>, <a class="idref" href="CompOptCert.Loc.html#LocFun.add"><span class="id" title="definition">LocFun.add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">des_if</span>; <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="CompOptCert.Cell.html#Cell.split_o"><span class="id" title="lemma">Cell.split_o</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">condtac</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">des</span>; <span class="id" title="var">ss</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">congr</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>