<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module rtlgen_proof</title>
<meta name="description" content="Documentation of Coq module rtlgen_proof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module rtlgen_proof</h1>
<div class="coq">
<br/>
<br/>
<div class="doc">Correctness proof for RTL generation. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Events.html">Events</a></span> <span class="id"><a href="Smallstep.html">Smallstep</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Switch.html">Switch</a></span> <span class="id"><a href="Registers.html">Registers</a></span> <span class="id"><a href="Cminor.html">Cminor</a></span> <span class="id"><a href="Op.html">Op</a></span> <span class="id"><a href="CminorSel.html">CminorSel</a></span> <span class="id"><a href="RTL.html">RTL</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">RTLgen</span> <span class="id"><a href="RTLgenspec.html">RTLgenspec</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="LDSimDefs_local.html">LDSimDefs_local</a></span> <span class="id"><a href="LDSim_local.html">LDSim_local</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="IS_local.html">IS_local</a></span> <span class="id"><a href="val_casted.html">val_casted</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html">MemOpFP</a></span> <span class="id"><a href="Op_fp.html">Op_fp</a></span> <span class="id"><a href="helpers.html">helpers</a></span> <span class="id"><a href="CminorSel_local.html">CminorSel_local</a></span> <span class="id"><a href="RTL_local.html">RTL_local</a></span> <span class="id"><a href="rtlgen.html">rtlgen</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span>:=<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<br/>
<h1> Correspondence between Cminor environments and RTL register sets </h1>
<br/>
<div class="doc">A compilation environment (mapping) is well-formed if
  the following properties hold:
<ul>
<li>
 Two distinct Cminor local variables are mapped to distinct pseudo-registers.
</li>
<li>
 A Cminor local variable and a let-bound variable are mapped to
  distinct pseudo-registers.
</li>
</ul>
</div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="map_wf">map_wf</a></span> (<span class="id">m</span>: <span class="id">mapping</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_map_wf">mk_map_wf</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="map_wf_inj">map_wf_inj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id1</span> <span class="id">id2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#m">m</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id1">id1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#m">m</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id2">id2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#id1">id1</a></span> = <span class="id"><a href="rtlgen_proof.html#id2">id2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="map_wf_disj">map_wf_disj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#m">m</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span>.(<span class="id">map_letvars</span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>)<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_mapping_wf">init_mapping_wf</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id">init_mapping</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7272')">Proof.</div>
<div class="proofscript" id="proof7272">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">init_mapping</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">r</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_var_wf">add_var_wf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">map</span> <span class="id">name</span> <span class="id">r</span> <span class="id">map</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id">add_var</span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#name">name</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#r">r</a></span>,<span class="id">map</span>') <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> <span class="id"><a href="rtlgen_proof.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt; <span class="id"><a href="RTLgenspec.html#map_valid">map_valid</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id">map</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7273')">Proof.</div>
<div class="proofscript" id="proof7273">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#mk_map_wf">mk_map_wf</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">r0</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id1</span> <span class="id">name</span>); <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id2</span> <span class="id">name</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">elimtype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#valid_fresh_absurd">valid_fresh_absurd</a></span> <span class="kwd">with</span> <span class="id">r0</span> <span class="id">s1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">id2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">elimtype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#valid_fresh_absurd">valid_fresh_absurd</a></span> <span class="kwd">with</span> <span class="id">r0</span> <span class="id">s1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">id1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">r0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">name</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#valid_fresh_absurd">valid_fresh_absurd</a></span> <span class="kwd">with</span> <span class="id">r0</span> <span class="id">s1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="id">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_vars_wf">add_vars_wf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">names</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">map</span> <span class="id">map</span>' <span class="id">rl</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id">add_vars</span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#names">names</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>,<span class="id">map</span>') <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> <span class="id"><a href="rtlgen_proof.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt; <span class="id"><a href="RTLgenspec.html#map_valid">map_valid</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id">map</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7274')">Proof.</div>
<div class="proofscript" id="proof7274">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">names</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="RTLgenspec.html#add_vars_valid">add_vars_valid</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_var_wf">add_var_wf</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_letvar_wf">add_letvar_wf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt; ~<span class="id"><a href="RTLgenspec.html#reg_in_map">reg_in_map</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> (<span class="id">add_letvar</span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7275')">Proof.</div>
<div class="proofscript" id="proof7275">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id">add_letvar</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H1</span>; <span class="tactic">intro</span>. <span class="tactic">subst</span> <span class="id">r0</span>. <span class="tactic">elim</span> <span class="id">H0</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An RTL register environment matches a CminorSel local environment and
  let-environment if the value of every local or let-bound variable in
  the CminorSel environments is identical to the value of the
  corresponding pseudo-register in the RTL register environment. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="match_env">match_env</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">map</span>: <span class="id">mapping</span>) (<span class="id">e</span>: <span class="id"><a href="Cminor.html#env">env</a></span>) (<span class="id">le</span>: <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">rs</span>: <span class="id"><a href="RTL.html#regset">regset</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_match_env">mk_match_env</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_vars">me_vars</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#e">e</a></span>!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt; <span class="id">exists</span> <span class="id">r</span>, <span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> /\ <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_letvars">me_letvars</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>##(<span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_letvars</span>))<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_find_var">match_env_find_var</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">id</span> <span class="id">v</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#e">e</a></span>!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7276')">Proof.</div>
<div class="proofscript" id="proof7276">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">r</span>' [<span class="id">EQ</span>' <span class="id">RS</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">r</span> <span class="kwd">with</span> <span class="id">r</span>'. <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_find_letvar">match_env_find_letvar</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">idx</span> <span class="id">v</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">List.nth_error</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#idx">idx</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">List.nth_error</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_letvars</span>) <span class="id"><a href="rtlgen_proof.html#idx">idx</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7277')">Proof.</div>
<div class="proofscript" id="proof7277">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#me_letvars">me_letvars</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>. <span class="id">revert</span> <span class="id">le</span> <span class="id">H0</span> <span class="id">H1</span>. <span class="tactic">generalize</span> (<span class="id">map_letvars</span> <span class="id">map</span>). <span class="tactic">clear</span> <span class="id">map</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">idx</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">le</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">subst</span> <span class="id">v1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>; <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">subst</span> <span class="id">v2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>; <span class="tactic">destruct</span> <span class="id">le</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHidx</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_invariant">match_env_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">rs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, (<span class="id"><a href="RTLgenspec.html#reg_in_map">reg_in_map</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span>) -&gt; <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id">rs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7278')">Proof.</div>
<div class="proofscript" id="proof7278">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#mk_match_env">mk_match_env</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">me_vars0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">r</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">r</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">rs</span>'##(<span class="id">map_letvars</span> <span class="id">map</span>)) <span class="kwd">with</span> (<span class="id">rs</span> ## (<span class="id">map_letvars</span> <span class="id">map</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_map_exten">list_map_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Matching between environments is preserved when an unmapped register
  (not corresponding to any Cminor variable) is assigned in the RTL
  execution. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_update_temp">match_env_update_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;~(<span class="id"><a href="RTLgenspec.html#reg_in_map">reg_in_map</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> &lt;- <span class="id"><a href="rtlgen_proof.html#v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7279')">Proof.</div>
<div class="proofscript" id="proof7279">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> <span class="id">rs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">case</span> (<span class="id"><a href="Registers.html#Reg.eq">Reg.eq</a></span> <span class="id">r</span> <span class="id">r0</span>); <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">r0</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">match_env_update_temp</span>: <span class="id">rtlg</span>.<br/>
<br/>
<div class="doc">Matching between environments is preserved by simultaneous
  assignment to a Cminor local variable (in the Cminor environments)
  and to the corresponding RTL pseudo-register (in the RTL register
  environment). </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_update_var">match_env_update_var</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">id</span> <span class="id">r</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_vars</span>)!<span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="rtlgen_proof.html#id">id</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span>) <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> &lt;- <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7280')">Proof.</div>
<div class="proofscript" id="proof7280">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#mk_match_env">mk_match_env</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span>' <span class="id">v</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span>' <span class="id">id</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id</span>'. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">exists</span> <span class="id">r</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">me_vars0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">r</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">r</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">r</span>'. <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Coqlib.html#list_map_exten">list_map_exten</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">x</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">A variant of <span class="bracket"><span class="id">match_env_update_var</span></span> where a variable is optionally
  assigned to, depending on the <span class="bracket"><span class="id">dst</span></span> parameter. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_update_dest">match_env_update_dest</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#reg_map_ok">reg_map_ok</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#dst">dst</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="Cminor.html#set_optvar">set_optvar</a></span> <span class="id"><a href="rtlgen_proof.html#dst">dst</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span>) <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> &lt;- <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7281')">Proof.</div>
<div class="proofscript" id="proof7281">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_temp">match_env_update_temp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_var">match_env_update_var</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">match_env_update_dest</span>: <span class="id">rtlg</span>.<br/>
<br/>
<div class="doc">A variant of <span class="bracket"><span class="id">match_env_update_var</span></span> corresponding to the assignment
  of the result of a builtin. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_update_res">match_env_update_res</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">res</span> <span class="id">v</span> <span class="id">e</span> <span class="id">le</span> <span class="id">tres</span> <span class="id">tv</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#tr_builtin_res">tr_builtin_res</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#res">res</a></span> <span class="id"><a href="rtlgen_proof.html#tres">tres</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="CminorSel.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="rtlgen_proof.html#res">res</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span>) <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="rtlgen_proof.html#tres">tres</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7282')">Proof.</div>
<div class="proofscript" id="proof7282">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_var">match_env_update_var</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_temp">match_env_update_temp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Matching and <span class="bracket"><span class="kwd">let</span></span>-bound variables. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_bind_letvar">match_env_bind_letvar</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> (<span class="id">add_letvar</span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span>) <span class="id"><a href="rtlgen_proof.html#e">e</a></span> (<span class="id"><a href="rtlgen_proof.html#v">v</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7283')">Proof.</div>
<div class="proofscript" id="proof7283">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id">add_letvar</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#mk_match_env">mk_match_env</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_unbind_letvar">match_env_unbind_letvar</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> (<span class="id">add_letvar</span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span>) <span class="id"><a href="rtlgen_proof.html#e">e</a></span> (<span class="id"><a href="rtlgen_proof.html#v">v</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7284')">Proof.</div>
<div class="proofscript" id="proof7284">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">add_letvar</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">me_letvars0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Matching between initial environments. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_empty">match_env_empty</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map">map</a></span>.(<span class="id">map_letvars</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="Values.html#val">val</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7285')">Proof.</div>
<div class="proofscript" id="proof7285">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#mk_match_env">mk_match_env</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The assignment of function arguments to local variables (on the Cminor
  side) and pseudo-registers (on the RTL side) preserves matching
  between environments. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_set_params_init_regs">match_set_params_init_regs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span> <span class="id">rl</span> <span class="id">s1</span> <span class="id">map2</span> <span class="id">s2</span> <span class="id">vl</span> <span class="id">tvl</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id">add_vars</span> <span class="id">init_mapping</span> <span class="id"><a href="rtlgen_proof.html#il">il</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>, <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span>) <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> <span class="id"><a href="rtlgen_proof.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#tvl">tvl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span> (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#il">il</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="rtlgen_proof.html#tvl">tvl</a></span> <span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="RTLgenspec.html#reg_fresh">reg_fresh</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> -&gt; (<span class="id"><a href="RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="rtlgen_proof.html#tvl">tvl</a></span> <span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>)#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7286')">Proof.</div>
<div class="proofscript" id="proof7286">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_empty">match_env_empty</a></span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Registers.html#Regmap.gi">Regmap.gi</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="RTLgenspec.html#add_vars_valid">add_vars_valid</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#init_mapping_valid">init_mapping_valid</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="RTLgenspec.html#add_var_valid">add_var_valid</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>' <span class="id">B</span>']. <span class="tactic">clear</span> <span class="id">B</span>'.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [ | <span class="id">v1</span> <span class="id">tv1</span> <span class="id">vs</span> <span class="id">tvs</span>].<br/>
&nbsp;vl&nbsp;=&nbsp;nil&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHil</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">_</span> <span class="id">EQ</span>) <span class="kwd">as</span> [<span class="id">ME</span> <span class="id">UNDEF</span>]. <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">ME</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">x</span>) <span class="kwd">with</span> (<span class="id"><a href="Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>) <span class="kwd">in</span> <span class="id">me_vars0</span>, <span class="id">me_letvars0</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span> <span class="id">v</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">x1</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Registers.html#Regmap.gi">Regmap.gi</a></span>.<br/>
&nbsp;vl&nbsp;=&nbsp;v1&nbsp;::&nbsp;vs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHil</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">EQ</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">ME</span> <span class="id">UNDEF</span>]. <span class="id">inv</span> <span class="id">ME</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span> <span class="id">v</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">x1</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">eexists</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">me_vars0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">r</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">r</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#valid_fresh_different">valid_fresh_different</a></span> <span class="kwd">with</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">B</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">map_letvars</span> <span class="id">x0</span>). <span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">me_letvars0</span>. <span class="tactic">inversion</span> <span class="id">me_letvars0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">apply</span> <span class="id">UNDEF</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#reg_fresh_decr">reg_fresh_decr</a></span> <span class="kwd">with</span> <span class="id">s2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_not_equal">sym_not_equal</a></span>. <span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#valid_fresh_different">valid_fresh_different</a></span> <span class="kwd">with</span> <span class="id">s2</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_set_locals">match_set_locals</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">map1</span> <span class="id">s1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map1">map1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span> <span class="id">rl</span> <span class="id">map2</span> <span class="id">s2</span> <span class="id">e</span> <span class="id">le</span> <span class="id">rs</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map1">map1</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="RTLgenspec.html#reg_fresh">reg_fresh</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="Values.html#Vundef">Vundef</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">add_vars</span> <span class="id"><a href="rtlgen_proof.html#map1">map1</a></span> <span class="id"><a href="rtlgen_proof.html#il">il</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>, <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span>) <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> <span class="id"><a href="rtlgen_proof.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span> (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="rtlgen_proof.html#il">il</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span>) <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7287')">Proof.</div>
<div class="proofscript" id="proof7287">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHil</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span> <span class="id">v</span>. <span class="tactic">simpl</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>). <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#me_vars">me_vars</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#me_letvars">me_letvars</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_init_env_init_reg">match_init_env_init_reg</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">params</span> <span class="id">s0</span> <span class="id">rparams</span> <span class="id">map1</span> <span class="id">s1</span> <span class="id">i1</span> <span class="id">vars</span> <span class="id">rvars</span> <span class="id">map2</span> <span class="id">s2</span> <span class="id">i2</span> <span class="id">vparams</span> <span class="id">tvparams</span>,<br/>
&nbsp;&nbsp;<span class="id">add_vars</span> <span class="id">init_mapping</span> <span class="id"><a href="rtlgen_proof.html#params">params</a></span> <span class="id"><a href="rtlgen_proof.html#s0">s0</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#rparams">rparams</a></span>, <span class="id"><a href="rtlgen_proof.html#map1">map1</a></span>) <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> <span class="id"><a href="rtlgen_proof.html#i1">i1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">add_vars</span> <span class="id"><a href="rtlgen_proof.html#map1">map1</a></span> <span class="id"><a href="rtlgen_proof.html#vars">vars</a></span> <span class="id"><a href="rtlgen_proof.html#s1">s1</a></span> = <span class="id">OK</span> (<span class="id"><a href="rtlgen_proof.html#rvars">rvars</a></span>, <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span>) <span class="id"><a href="rtlgen_proof.html#s2">s2</a></span> <span class="id"><a href="rtlgen_proof.html#i2">i2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="rtlgen_proof.html#vparams">vparams</a></span> <span class="id"><a href="rtlgen_proof.html#tvparams">tvparams</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map2">map2</a></span> (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="rtlgen_proof.html#vars">vars</a></span> (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="rtlgen_proof.html#vparams">vparams</a></span> <span class="id"><a href="rtlgen_proof.html#params">params</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="rtlgen_proof.html#tvparams">tvparams</a></span> <span class="id"><a href="rtlgen_proof.html#rparams">rparams</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7288')">Proof.</div>
<div class="proofscript" id="proof7288">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_set_params_init_regs">match_set_params_init_regs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_set_locals">match_set_locals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_vars_wf">add_vars_wf</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#init_mapping_wf">init_mapping_wf</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#init_mapping_valid">init_mapping_valid</a></span>.<br/>
Qed.</div>
<br/>
<h1> The simulation argument </h1>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Errors.html">Errors</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_cu">match_cu</a></span> (<span class="id">scu</span>: <span class="id"><a href="CminorSel_local.html#cminorsel_comp_unit">cminorsel_comp_unit</a></span>) (<span class="id">tcu</span>: <span class="id"><a href="RTL_local.html#RTL_comp_unit">RTL_comp_unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="rtlgen_proof.html#scu">scu</a></span> <span class="id"><a href="rtlgen_proof.html#tcu">tcu</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">scu</span> <span class="id">tcu</span>, <span class="id"><a href="rtlgen.html#transf_program">transf_program</a></span> <span class="id"><a href="rtlgen_proof.html#scu">scu</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tcu">tcu</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#match_cu">match_cu</a></span> <span class="id"><a href="rtlgen_proof.html#scu">scu</a></span> <span class="id"><a href="rtlgen_proof.html#tcu">tcu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7289')">Proof.</div>
<div class="proofscript" id="proof7289">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit">match_transform_partial_cunit</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="CORRECTNESS">CORRECTNESS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.scu">scu</a></span>: <span class="id"><a href="CminorSel_local.html#cminorsel_comp_unit">cminorsel_comp_unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.tcu">tcu</a></span>: <span class="id"><a href="RTL_local.html#RTL_comp_unit">RTL_comp_unit</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CORRECTNESS.TRANSL">TRANSL</a></span>: <span class="id"><a href="rtlgen_proof.html#match_cu">match_cu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.scu">scu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tcu">tcu</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.sge">sge</a></span> <span class="id"><a name="CORRECTNESS.sG">sG</a></span>: <span class="id"><a href="CminorSel.html#genv">CminorSel.genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.tge">tge</a></span> <span class="id"><a name="CORRECTNESS.tG">tG</a></span>: <span class="id"><a href="RTL.html#genv">RTL.genv</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CORRECTNESS.GE_INIT">GE_INIT</a></span>: <span class="id"><a href="CminorSel_local.html#CminorSel_IS">CminorSel_IS</a></span>.(<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span>) <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.scu">scu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CORRECTNESS.TGE_INIT">TGE_INIT</a></span>: <span class="id"><a href="RTL_local.html#RTL_IS">RTL_IS</a></span>.(<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span>) <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tcu">tcu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CORRECTNESS.S_EQ">S_EQ</a></span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>) = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_match">ge_match</a></span>: <span class="id"><a href="LDSim_local.html#ge_match_strict">ge_match_strict</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7290')">Proof.</div>
<div class="proofscript" id="proof7290">
 <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>. <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_ge_match_strict">match_cu_ge_match_strict</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="genv_match">genv_match</a></span>: <span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>) <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7291')">Proof.</div>
<div class="proofscript" id="proof7291">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span>: <span class="id"><a href="AST.html#ident">ident</a></span>), <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7292')">Proof.</div>
<div class="proofscript" id="proof7292">
 <span class="tactic">destruct</span> <span class="id"><a href="rtlgen_proof.html#genv_match">genv_match</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="function_ptr_translated">function_ptr_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">f</span>: <span class="id"><a href="CminorSel.html#fundef">CminorSel.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> /\ <span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7293')">Proof.</div>
<div class="proofscript" id="proof7293">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="rtlgen_proof.html#genv_match">genv_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CminorSel.html#fundef">CminorSel.fundef</a></span>, <span class="id"><a href="RTL.html#fundef">RTL.fundef</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>; <span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>). <span class="id">inv</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> /\ <span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7294')">Proof.</div>
<div class="proofscript" id="proof7294">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; [|<span class="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#function_ptr_translated">function_ptr_translated</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_transl_function">sig_transl_function</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span>: <span class="id"><a href="CminorSel.html#fundef">CminorSel.fundef</a></span>) (<span class="id">tf</span>: <span class="id"><a href="RTL.html#fundef">RTL.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="RTL.html#funsig">RTL.funsig</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> = <span class="id"><a href="CminorSel.html#funsig">CminorSel.funsig</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7295')">Proof.</div>
<div class="proofscript" id="proof7295">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">tf</span>. <span class="tactic">unfold</span> <span class="id">transl_fundef</span>, <span class="id"><a href="AST.html#transf_partial_fundef">transf_partial_fundef</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">case</span> <span class="id">f</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transl_function</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">reserve_labels</span> (<span class="id"><a href="CminorSel.html#fn_body">fn_body</a></span> <span class="id">f0</span>) (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="RTL.html#node">node</a></span>, <span class="id">init_state</span>)) <span class="kwd">as</span> [<span class="id">ngoto</span> <span class="id">s0</span>].<br/>
&nbsp;&nbsp;<span class="tactic">case</span> (<span class="id">transl_fun</span> <span class="id">f0</span> <span class="id">ngoto</span> <span class="id">s0</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="senv_preserved">senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7296')">Proof.</div>
<div class="proofscript" id="proof7296">
 <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>. <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_senv_preserved">match_cu_senv_preserved</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<div class="doc">Correctness of the code generated by <span class="bracket"><span class="id">add_move</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tr_move_correct">tr_move_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r1</span> <span class="id">ns</span> <span class="id">r2</span> <span class="id">nd</span> <span class="id">cs</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#tr_move">tr_move</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#r1">r1</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#r2">r2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="RTL_local.html#step">step</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>) <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span> (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id">rs</span>') <span class="id"><a href="rtlgen_proof.html#m">m</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r2">r2</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r1">r1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="rtlgen_proof.html#r">r</a></span> &lt;&gt; <span class="id"><a href="rtlgen_proof.html#r2">r2</a></span> -&gt; <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7297')">Proof.</div>
<div class="proofscript" id="proof7297">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">rs</span>#<span class="id">r2</span> &lt;- (<span class="id">rs</span>#<span class="id">r1</span>)); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_one">star_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Iop">exec_Iop</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Semantic preservation for the translation of expressions </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="CORRECTNESS.CORRECTNESS_EXPR">CORRECTNESS_EXPR</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span>: <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span>: <span class="id"><a href="Cminor.html#env">env</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span>: <span class="id"><a href="Memory.html#mem">mem</a></span>.<br/>
<br/>
<div class="doc">The proof of semantic preservation for the translation of expressions
  is a simulation argument based on diagrams of the following form:
<pre>
                    I /\ P
    e, le, m, a ------------- State cs code sp ns rs tm
         ||                      |
         ||                      |*
         ||                      |
         \/                      v
    e, le, m, v ------------ State cs code sp nd rs' tm'
                    I /\ Q</pre>
  where <span class="bracket"><span class="id">tr_expr</span> <span class="id">code</span> <span class="id">map</span> <span class="id">pr</span> <span class="id">a</span> <span class="id">ns</span> <span class="id">nd</span> <span class="id">rd</span></span> is assumed to hold.
  The left vertical arrow represents an evaluation of the expression <span class="bracket"><span class="id">a</span></span>.
  The right vertical arrow represents the execution of zero, one or
  several instructions in the generated RTL flow graph <span class="bracket"><span class="id">code</span></span>.
  The invariant <span class="bracket"><span class="id">I</span></span> is the agreement between Cminor environments and
  RTL register environment, as captured by <span class="bracket"><span class="id">match_envs</span></span>.
  The precondition <span class="bracket"><span class="id">P</span></span> includes the well-formedness of the compilation
  environment <span class="bracket"><span class="id">mut</span></span>.
  The postconditions <span class="bracket"><span class="id">Q</span></span> state that in the final register environment
  <span class="bracket"><span class="id">rs</span>'</span>, register <span class="bracket"><span class="id">rd</span></span> contains value <span class="bracket"><span class="id">v</span></span>, and the registers in
  the set of preserved registers <span class="bracket"><span class="id">pr</span></span> are unchanged, as are the registers
  in the codomain of <span class="bracket"><span class="id">map</span></span>.
  We formalize this simulation property by the following predicate
  parameterized by the CminorSel evaluation (left arrow).  </div>
<br/>
<br/>
<div class="doc">Modification: 
    add constraints on footprints </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_expr_fp_prop">transl_expr_fp_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">v</span>: <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">fp</span>: <span class="id"><a href="rtlgen_proof.html#footprint">footprint</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">f</span> <span class="id">map</span> <span class="id">pr</span> <span class="id">ns</span> <span class="id">nd</span> <span class="id">rd</span> <span class="id">rs</span> <span class="id">dst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TE</span>: <span class="id"><a href="RTLgenspec.html#tr_expr">tr_expr</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#rd">rd</a></span> <span class="id"><a href="rtlgen_proof.html#dst">dst</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>', <span class="id">exists</span> <span class="id">fp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="RTL_local.html#step">step</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>) <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id">fp</span>' (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id">rs</span>') <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="Cminor.html#set_optvar">set_optvar</a></span> <span class="id"><a href="rtlgen_proof.html#dst">dst</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span>) <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id">rs</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#rd">rd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> -&gt; <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id">fp</span>' <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">al</span>: <span class="id"><a href="CminorSel.html#exprlist">exprlist</a></span>) (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">fp</span>: <span class="id"><a href="rtlgen_proof.html#footprint">footprint</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">f</span> <span class="id">map</span> <span class="id">pr</span> <span class="id">ns</span> <span class="id">nd</span> <span class="id">rl</span> <span class="id">rs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TE</span>: <span class="id"><a href="RTLgenspec.html#tr_exprlist">tr_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>', <span class="id">exists</span> <span class="id">fp</span>', <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="RTL_local.html#step">step</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>) <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id">fp</span>' (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id">rs</span>') <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id">rs</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id">rs</span>'##<span class="id"><a href="rtlgen_proof.html#rl">rl</a></span><br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> -&gt; <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id">fp</span>' <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a</span>: <span class="id"><a href="CminorSel.html#condexpr">condexpr</a></span>) (<span class="id">v</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">fp</span>: <span class="id"><a href="rtlgen_proof.html#footprint">footprint</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">f</span> <span class="id">map</span> <span class="id">pr</span> <span class="id">ns</span> <span class="id">ntrue</span> <span class="id">nfalse</span> <span class="id">rs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TE</span>: <span class="id"><a href="RTLgenspec.html#tr_condition">tr_condition</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#ntrue">ntrue</a></span> <span class="id"><a href="rtlgen_proof.html#nfalse">nfalse</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>', <span class="id">exists</span> <span class="id">fp</span>', <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#plus">plus</a></span> (<span class="id"><a href="RTL_local.html#step">step</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>) <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id">fp</span>' (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#ntrue">ntrue</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#nfalse">nfalse</a></span>) <span class="id">rs</span>') <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id">rs</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#pr">pr</a></span> -&gt; <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id">fp</span>' <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<br/>
<div class="doc">The correctness of the translation is a huge induction over
  the CminorSel evaluation derivation for the source program.  To keep
  the proof manageable, we put each case of the proof in a separate
  lemma.  There is one lemma for each CminorSel evaluation rule.
  It takes as hypotheses the premises of the CminorSel evaluation rule,
  plus the induction hypotheses, that is, the <span class="bracket"><span class="id">transl_expr_prop</span></span>, etc,
  corresponding to the evaluations of sub-expressions or sub-statements. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Evar_correct">transl_expr_fp_Evar_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">id</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span class="id">v</span>: <span class="id"><a href="Values.html#val">val</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> ! <span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Evar">Evar</a></span> <span class="id"><a href="rtlgen_proof.html#id">id</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7298')">Proof.</div>
<div class="proofscript" id="proof7298">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_env_find_var">match_env_find_var</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#tr_move_correct">tr_move_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>'; <span class="id">exists</span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [[<span class="id">D</span> <span class="id">E</span>] | [<span class="id">D</span> <span class="id">E</span>]].<br/>
&nbsp;optimized&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">r</span> <span class="id">dst</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">rs</span>'#<span class="id"><a href="rtlgen_proof.html#r">r</a></span> = <span class="id">rs</span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Registers.html#Reg.eq">Reg.eq</a></span> <span class="id">r</span> <span class="id">rd</span>). <span class="tactic">subst</span> <span class="id">r</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_invariant">match_env_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">congruence</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">cbv</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;general&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> (<span class="id">rs</span>#<span class="id">rd</span> &lt;- (<span class="id">rs</span>#<span class="id">r</span>)). <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_dest">match_env_update_dest</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">rd</span>). <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">congruence</span>. <span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">C</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">cbv</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Eop_correct">transl_expr_fp_Eop_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">op</span> : <span class="id"><a href="Op.html#operation">operation</a></span>) (<span class="id">args</span> : <span class="id"><a href="CminorSel.html#exprlist">exprlist</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">vargs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp1</span> (<span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#op">op</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Op_fp.html#eval_operation_fp">eval_operation_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#op">op</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="rtlgen_proof.html#op">op</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7299')">Proof.</div>
<div class="proofscript" id="proof7299">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;normal&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RR1</span> [<span class="id">RO1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Op.html#eval_operation_lessdef">eval_operation_lessdef</a></span> <span class="kwd">as</span> [<span class="id">v</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Op_fp.html#eval_operation_lessdef_fp">eval_operation_lessdef_fp</a></span> <span class="kwd">as</span> [<span class="id">fp2</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">rs1</span>#<span class="id">rd</span> &lt;- <span class="id">v</span>'); <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_right">star_right</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Iop">exec_Iop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (@<span class="id"><a href="Op.html#eval_operation_preserved">eval_operation_preserved</a></span> <span class="id"><a href="CminorSel.html#fundef">CminorSel.fundef</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (@<span class="id"><a href="Op_fp.html#eval_operation_fp_preserved">eval_operation_fp_preserved</a></span> <span class="id"><a href="CminorSel.html#fundef">CminorSel.fundef</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;Result&nbsp;reg&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;Footprint&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Op_fp.html#fp_inject_id_fp_subset">fp_inject_id_fp_subset</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Eload_correct">transl_expr_fp_Eload_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">chunk</span> : <span class="id"><a href="AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span> : <span class="id"><a href="Op.html#addressing">Op.addressing</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">args</span> : <span class="id"><a href="CminorSel.html#exprlist">exprlist</a></span>) <span class="id">fp1</span> (<span class="id">vargs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">vaddr</span> <span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Op.html#eval_addressing">Op.eval_addressing</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#addr">addr</a></span> <span class="id"><a href="rtlgen_proof.html#vargs">vargs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#vaddr">vaddr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="rtlgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#vaddr">vaddr</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Eload">Eload</a></span> <span class="id"><a href="rtlgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="rtlgen_proof.html#addr">addr</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> (<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="rtlgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="rtlgen_proof.html#vaddr">vaddr</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7300')">Proof.</div>
<div class="proofscript" id="proof7300">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RES1</span> [<span class="id">OTHER1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span> <span class="kwd">as</span> [<span class="id">vaddr</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span> <span class="kwd">as</span> [<span class="id">v</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">rs1</span>#<span class="id">rd</span> &lt;- <span class="id">v</span>'); <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' (<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id">chunk</span> <span class="id">vaddr</span>')).<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_right">star_right</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Iload">exec_Iload</a></span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">vaddr</span>'). <span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;Result&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;Footprint&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vaddr</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Econdition_correct">transl_expr_fp_Econdition_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a</span>: <span class="id"><a href="CminorSel.html#condexpr">condexpr</a></span>) (<span class="id">ifso</span> <span class="id">ifnot</span> : <span class="id"><a href="CminorSel.html#expr">expr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">va</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">fp1</span> (<span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp">eval_condexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#ifso">ifso</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#ifnot">ifnot</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#ifso">ifso</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#ifnot">ifnot</a></span>) <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#ifso">ifso</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#ifnot">ifnot</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Econdition">Econdition</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#ifso">ifso</a></span> <span class="id"><a href="rtlgen_proof.html#ifnot">ifnot</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7301')">Proof.</div>
<div class="proofscript" id="proof7301">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">OTHER1</span>  <span class="id">HFP1</span>]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTLgenspec.html#tr_expr">tr_expr</a></span> <span class="id">f</span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id">map</span> <span class="id">pr</span> (<span class="kwd">if</span> <span class="id">va</span> <span class="kwd">then</span> <span class="id">ifso</span> <span class="kwd">else</span> <span class="id">ifnot</span>) (<span class="kwd">if</span> <span class="id">va</span> <span class="kwd">then</span> <span class="id">ntrue</span> <span class="kwd">else</span> <span class="id">nfalse</span>) <span class="id">nd</span> <span class="id">rd</span> <span class="id">dst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">va</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs2</span> [<span class="id">fp2</span>' [<span class="id">EX2</span> [<span class="id">ME2</span> [<span class="id">RES2</span> [<span class="id">OTHER2</span> <span class="id">HFP2</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs2</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="id">eexact</span> <span class="id">EX2</span>. <span class="id">traceEq</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Result&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">rs1</span>#<span class="id">r</span>); <span class="tactic">auto</span>.<br/>
&nbsp;Footprint&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Elet_correct">transl_expr_fp_Elet_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a1</span> <span class="id">a2</span> : <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">v1</span> <span class="id">v2</span> : <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span> <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span> <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span>) <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7302')">Proof.</div>
<div class="proofscript" id="proof7302">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RES1</span> [<span class="id">OTHER1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> (<span class="id">add_letvar</span> <span class="id">map</span> <span class="id">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_letvar_wf">add_letvar_wf</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_bind_letvar">match_env_bind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs2</span> [<span class="id">fp2</span>' [<span class="id">EX2</span> [<span class="id">ME3</span> [<span class="id">RES2</span> [<span class="id">OTHER2</span> <span class="id">HFP2</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs2</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="id">eexact</span> <span class="id">EX2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_unbind_letvar">match_env_unbind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Result&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">rs1</span>#<span class="id">r0</span>); <span class="tactic">auto</span>.<br/>
&nbsp;Footprint&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Eletvar_correct">transl_expr_fp_Eletvar_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7303')">Proof.</div>
<div class="proofscript" id="proof7303">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#tr_move_correct">tr_move_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">EX1</span> [<span class="id">RES1</span> <span class="id">OTHER1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs1</span>; <span class="id">exists</span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eexact</span> <span class="id">EX1</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [[<span class="id">A</span> <span class="id">B</span>] | [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">r</span> <span class="id">dst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> <span class="id">rs</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Registers.html#Reg.eq">Reg.eq</a></span> <span class="id">r</span> <span class="id">rd</span>). <span class="tactic">subst</span> <span class="id">r</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> (<span class="id">rs</span>#<span class="id">rd</span> &lt;- (<span class="id">rs</span>#<span class="id">r</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_dest">match_env_update_dest</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_find_letvar">match_env_find_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">rd</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;Result&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id">RES1</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_find_letvar">match_env_find_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [[<span class="id">A</span> <span class="id">B</span>] | [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Registers.html#Reg.eq">Reg.eq</a></span> <span class="id">r0</span> <span class="id">rd</span>); <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">OTHER1</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;Footprint&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="id">constructor</span>; <span class="id">cbv</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="eval_builtin_args_trivial">eval_builtin_args_trivial</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>: <span class="id"><a href="RTL.html#genv">RTL.genv</a></span>) (<span class="id">rs</span>: <span class="id"><a href="RTL.html#regset">regset</a></span>) <span class="id">sp</span> <span class="id">m</span> <span class="id">rl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="rtlgen_proof.html#ge">ge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>) <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="AST.html#BA">BA</a></span> <span class="id"><a href="Registers.html#reg">reg</a></span>) <span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>) <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>##<span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7304')">Proof.</div>
<div class="proofscript" id="proof7304">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl</span>; <span class="tactic">simpl</span>.<br/>
- <span class="id">constructor</span>.<br/>
- <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="eval_builtin_args_fp_trivial">eval_builtin_args_fp_trivial</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>: <span class="id"><a href="RTL.html#genv">RTL.genv</a></span>) (<span class="id">rs</span>: <span class="id"><a href="RTL.html#regset">regset</a></span>) <span class="id">sp</span> <span class="id">rl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id"><a href="rtlgen_proof.html#ge">ge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>#<span class="id"><a href="rtlgen_proof.html#r">r</a></span>) <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="AST.html#BA">BA</a></span> <span class="id"><a href="Registers.html#reg">reg</a></span>) <span class="id"><a href="rtlgen_proof.html#rl">rl</a></span>) <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7305')">Proof.</div>
<div class="proofscript" id="proof7305">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">induction</span> <span class="id">rl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Ebuiltin_correct">transl_expr_fp_Ebuiltin_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">ef</span> <span class="id">al</span> <span class="id">vl</span> <span class="id">fp</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="helpers.html#i64ext">i64ext</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Events.html#external_call">external_call</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="Events.html#E0">E0</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Ebuiltin">Ebuiltin</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7306')">Proof.</div>
<div class="proofscript" id="proof7306">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span> [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RR1</span> [<span class="id">RO1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Events.html#external_call_mem_extends">external_call_mem_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">tm2</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">_</span> <span class="id">_</span> ]]]]]. <span class="id">exploit</span> <span class="id"><a href="helpers.html#i64ext_effects">i64ext_effects</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">_</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">rs1</span>#<span class="id">rd</span> &lt;- <span class="id">v</span>'), <span class="id">fp1</span>.<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_right">star_right</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">rs1</span>#<span class="id">rd</span> &lt;- <span class="id">v</span>') <span class="kwd">with</span> (<span class="id"><a href="Registers.html#regmap_setres">regmap_setres</a></span> (<span class="id"><a href="AST.html#BR">BR</a></span> <span class="id">rd</span>) <span class="id">v</span>' <span class="id">rs1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Ibuiltin">exec_Ibuiltin</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#eval_builtin_args_trivial">eval_builtin_args_trivial</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#eval_builtin_args_fp_trivial">eval_builtin_args_fp_trivial</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Events.html#external_call_symbols_preserved">external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;Result&nbsp;reg&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;FP&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_Eexternal_correct">transl_expr_fp_Eexternal_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">id</span> <span class="id">sg</span> <span class="id">al</span> <span class="id">b</span> <span class="id">ef</span> <span class="id">vl</span> <span class="id">fp</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="AST.html#External">External</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="AST.html#ef_sig">ef_sig</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> = <span class="id"><a href="rtlgen_proof.html#sg">sg</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="helpers.html#i64ext">i64ext</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Events.html#external_call">external_call</a></span> <span class="id"><a href="rtlgen_proof.html#ef">ef</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="Events.html#E0">E0</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Eexternal">Eexternal</a></span> <span class="id"><a href="rtlgen_proof.html#id">id</a></span> <span class="id"><a href="rtlgen_proof.html#sg">sg</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7307')">Proof.</div>
<div class="proofscript" id="proof7307">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span> [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RR1</span> [<span class="id">RO1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Events.html#external_call_mem_extends">external_call_mem_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">tm2</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">_</span>]]]]. <span class="id">exploit</span> <span class="id"><a href="helpers.html#i64ext_effects">i64ext_effects</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">_</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#function_ptr_translated">function_ptr_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">tf</span> [<span class="id">P</span> <span class="id">Q</span>]]. <span class="id">inv</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">rs1</span>#<span class="id">rd</span> &lt;- <span class="id">v</span>'); <span class="id">exists</span> <span class="id">fp1</span>.<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Icall">exec_Icall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_function_external">exec_function_external</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Events.html#external_call_symbols_preserved">external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_one">star_one</a></span>. <span class="tactic">apply</span> <span class="id"><a href="RTL_local.html#exec_return">exec_return</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">rtlg</span>.<br/>
&nbsp;Result&nbsp;reg&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;FP&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_exprlist_fp_Enil_correct">transl_exprlist_fp_Enil_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7308')">Proof.</div>
<div class="proofscript" id="proof7308">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs</span>; <span class="id">exists</span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">cbv</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_exprlist_fp_Econs_correct">transl_exprlist_fp_Econs_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">le</span> : <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a1</span> : <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">al</span> : <span class="id"><a href="CminorSel.html#exprlist">exprlist</a></span>) (<span class="id">v1</span> : <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">vl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#Econs">Econs</a></span> <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span>) (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7309')">Proof.</div>
<div class="proofscript" id="proof7309">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RES1</span> [<span class="id">OTHER1</span>  <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs2</span> [<span class="id">fp2</span>' [<span class="id">EX2</span> [<span class="id">ME2</span> [<span class="id">RES2</span> [<span class="id">OTHER2</span>  <span class="id">HFP2</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs2</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="id">eexact</span> <span class="id">EX2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Results&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id">OTHER2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">rs1</span>#<span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">OTHER2</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">OTHER1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_condexpr_fp_CEcond_correct">transl_condexpr_fp_CEcond_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">cond</span> <span class="id">al</span> <span class="id">vl</span> <span class="id">fp1</span> <span class="id">vb</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="rtlgen_proof.html#cond">cond</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#vb">vb</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Op_fp.html#eval_condition_fp">eval_condition_fp</a></span> <span class="id"><a href="rtlgen_proof.html#cond">cond</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;  <br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#CEcond">CEcond</a></span> <span class="id"><a href="rtlgen_proof.html#cond">cond</a></span> <span class="id"><a href="rtlgen_proof.html#al">al</a></span>) <span class="id"><a href="rtlgen_proof.html#vb">vb</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7310')">Proof.</div>
<div class="proofscript" id="proof7310">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RES1</span> [<span class="id">OTHER1</span>  <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Op_fp.html#eval_condition_lessdef_fp">eval_condition_lessdef_fp</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp2</span>' [<span class="id">EVALC</span>' <span class="id">HFP2</span>']]. <span class="tactic">apply</span> <span class="id"><a href="Op_fp.html#fp_inject_id_fp_subset">fp_inject_id_fp_subset</a></span> <span class="kwd">in</span> <span class="id">HFP2</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs1</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Icond">exec_Icond</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Op.html#eval_condition_lessdef">eval_condition_lessdef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">EVALC</span>'. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_condexpr_fp_CEcondition_correct">transl_condexpr_fp_CEcondition_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span> <span class="id">va</span> <span class="id">fp1</span> <span class="id">v</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp">eval_condexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp">eval_condexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span>) <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="kwd">if</span> <span class="id"><a href="rtlgen_proof.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="kwd">else</span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#CEcondition">CEcondition</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span>) <span class="id"><a href="rtlgen_proof.html#v">v</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7311')">Proof.</div>
<div class="proofscript" id="proof7311">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">OTHER1</span> <span class="id">HFP1</span>]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTLgenspec.html#tr_condition">tr_condition</a></span> (<span class="id"><a href="RTL.html#fn_code">fn_code</a></span> <span class="id">f</span>) <span class="id">map</span> <span class="id">pr</span> (<span class="kwd">if</span> <span class="id">va</span> <span class="kwd">then</span> <span class="id">b</span> <span class="kwd">else</span> <span class="id">c</span>) (<span class="kwd">if</span> <span class="id">va</span> <span class="kwd">then</span> <span class="id">n2</span> <span class="kwd">else</span> <span class="id">n3</span>) <span class="id">ntrue</span> <span class="id">nfalse</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">va</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs2</span> [<span class="id">fp2</span>' [<span class="id">EX2</span> [<span class="id">ME2</span> [<span class="id">OTHER2</span> <span class="id">HFP2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs2</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_trans">plus_trans</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="id">eexact</span> <span class="id">EX2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">OTHER2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_condexpr_fp_CElet_correct">transl_condexpr_fp_CElet_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">v1</span> <span class="id">fp1</span> <span class="id">v2</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp">eval_condexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> (<span class="id"><a href="rtlgen_proof.html#v1">v1</a></span> :: <span class="id"><a href="rtlgen_proof.html#le">le</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id"><a href="CminorSel.html#CElet">CElet</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>) <span class="id"><a href="rtlgen_proof.html#v2">v2</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#fp1">fp1</a></span> <span class="id"><a href="rtlgen_proof.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7312')">Proof.</div>
<div class="proofscript" id="proof7312">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TE</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs1</span> [<span class="id">fp1</span>' [<span class="id">EX1</span> [<span class="id">ME1</span> [<span class="id">RES1</span> [<span class="id">OTHER1</span> <span class="id">HFP1</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> (<span class="id">add_letvar</span> <span class="id">map</span> <span class="id">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_letvar_wf">add_letvar_wf</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_bind_letvar">match_env_bind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs2</span> [<span class="id">fp2</span>' [<span class="id">EX2</span> [<span class="id">ME3</span> [<span class="id">OTHER2</span> <span class="id">HFP2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">rs2</span>; <span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;Exec&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_plus_trans">star_plus_trans</a></span>. <span class="id">eexact</span> <span class="id">EX1</span>. <span class="id">eexact</span> <span class="id">EX2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Match-env&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_unbind_letvar">match_env_unbind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Other&nbsp;regs&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">OTHER2</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transl_expr_fp_correct">transl_expr_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7313')">Proof.</div>
<div class="proofscript" id="proof7313">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="CminorSel_local.html#eval_expr_fp_ind3">eval_expr_fp_ind3</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">vl</span>, <span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Evar_correct">transl_expr_fp_Evar_correct</a></span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eop_correct">transl_expr_fp_Eop_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eload_correct">transl_expr_fp_Eload_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Econdition_correct">transl_expr_fp_Econdition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Elet_correct">transl_expr_fp_Elet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eletvar_correct">transl_expr_fp_Eletvar_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Ebuiltin_correct">transl_expr_fp_Ebuiltin_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eexternal_correct">transl_expr_fp_Eexternal_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Enil_correct">transl_exprlist_fp_Enil_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Econs_correct">transl_exprlist_fp_Econs_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcond_correct">transl_condexpr_fp_CEcond_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcondition_correct">transl_condexpr_fp_CEcondition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CElet_correct">transl_condexpr_fp_CElet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7314')">Proof.</div>
<div class="proofscript" id="proof7314">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="CminorSel_local.html#eval_exprlist_fp_ind3">eval_exprlist_fp_ind3</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">vl</span>, <span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Evar_correct">transl_expr_fp_Evar_correct</a></span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eop_correct">transl_expr_fp_Eop_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eload_correct">transl_expr_fp_Eload_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Econdition_correct">transl_expr_fp_Econdition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Elet_correct">transl_expr_fp_Elet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eletvar_correct">transl_expr_fp_Eletvar_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Ebuiltin_correct">transl_expr_fp_Ebuiltin_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eexternal_correct">transl_expr_fp_Eexternal_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Enil_correct">transl_exprlist_fp_Enil_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Econs_correct">transl_exprlist_fp_Econs_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcond_correct">transl_condexpr_fp_CEcond_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcondition_correct">transl_condexpr_fp_CEcondition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CElet_correct">transl_condexpr_fp_CElet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transl_condexpr_fp_correct">transl_condexpr_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp">eval_condexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt;  <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7315')">Proof.</div>
<div class="proofscript" id="proof7315">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="CminorSel_local.html#eval_condexpr_fp_ind3">eval_condexpr_fp_ind3</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_prop">transl_expr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">vl</span>, <span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_prop">transl_exprlist_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#vl">vl</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> =&gt; (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="CminorSel.html#eval_condexpr">eval_condexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_prop">transl_condexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Evar_correct">transl_expr_fp_Evar_correct</a></span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eop_correct">transl_expr_fp_Eop_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eload_correct">transl_expr_fp_Eload_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Econdition_correct">transl_expr_fp_Econdition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Elet_correct">transl_expr_fp_Elet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eletvar_correct">transl_expr_fp_Eletvar_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Ebuiltin_correct">transl_expr_fp_Ebuiltin_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_Eexternal_correct">transl_expr_fp_Eexternal_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Enil_correct">transl_exprlist_fp_Enil_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_Econs_correct">transl_exprlist_fp_Econs_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcond_correct">transl_condexpr_fp_CEcond_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CEcondition_correct">transl_condexpr_fp_CEcondition_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>; <span class="id">eqexpr</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_CElet_correct">transl_condexpr_fp_CElet_correct</a></span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">Exit expressions. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_exitexpr_fp_prop">transl_exitexpr_fp_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="CminorSel.html#letenv">letenv</a></span>) (<span class="id">a</span>: <span class="id"><a href="CminorSel.html#exitexpr">exitexpr</a></span>) (<span class="id">x</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">fp</span>: <span class="id"><a href="rtlgen_proof.html#footprint">footprint</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">f</span> <span class="id">map</span> <span class="id">ns</span> <span class="id">nexits</span> <span class="id">rs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TE</span>: <span class="id"><a href="RTLgenspec.html#tr_exitexpr">tr_exitexpr</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">nd</span>, <span class="id">exists</span> <span class="id">rs</span>', <span class="id">exists</span> <span class="id">fp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="RTL_local.html#step">step</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>) <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id">fp</span>' (<span class="id"><a href="RTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id">rs</span>') <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id">rs</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id">fp</span>' <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transl_exitexpr_fp_correct">transl_exitexpr_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">fp</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_exitexpr_fp">eval_exitexpr_fp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exitexpr">eval_exitexpr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#transl_exitexpr_fp_prop">transl_exitexpr_fp_prop</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> <span class="id"><a href="rtlgen_proof.html#a">a</a></span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7316')">Proof.</div>
<div class="proofscript" id="proof7316">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">TE</span>.<br/>
- <span class="comment">(*&nbsp;XEexit&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ns</span>, <span class="id">rs</span>, <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.  <span class="id">constructor</span>; <span class="id">cbv</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;XEjumptable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">nd</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">rs1</span> &amp; <span class="id">fp</span>' &amp; <span class="id">EXEC1</span> &amp; <span class="id">ME1</span> &amp; <span class="id">RES1</span> &amp; <span class="id">PRES1</span> &amp; <span class="id">HFP</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">nd</span>, <span class="id">rs1</span>, <span class="id">fp</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_right">star_right</a></span>. <span class="id">eexact</span> <span class="id">EXEC1</span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Ijumptable">exec_Ijumptable</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">RES1</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="id">eqexpr</span>. <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;XEcondition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="id">eqexpr</span>. <br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_correct">transl_condexpr_fp_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">rs1</span> &amp; <span class="id">fp1</span>' &amp; <span class="id">EXEC1</span> &amp; <span class="id">ME1</span> &amp; <span class="id">RES1</span> &amp; <span class="id">HFP1</span>').<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exitexpr_fp</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (2 := <span class="kwd">if</span> <span class="id">va0</span> <span class="kwd">then</span> <span class="id">n2</span> <span class="kwd">else</span> <span class="id">n3</span>). <span class="tactic">destruct</span> <span class="id">va0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">nd</span> &amp; <span class="id">rs2</span> &amp; <span class="id">fp2</span>' &amp; <span class="id">EXEC2</span> &amp; <span class="id">EXIT2</span> &amp; <span class="id">ME2</span> &amp; <span class="id">HFP2</span>').<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">nd</span>, <span class="id">rs2</span>, (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>. <span class="id">eexact</span> <span class="id">EXEC1</span>. <span class="id">eexact</span> <span class="id">EXEC2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">split</span>; <span class="tactic">auto</span>). <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;XElet&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="id">eqexpr</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">rs1</span> &amp; <span class="id">fp1</span>' &amp; <span class="id">EXEC1</span> &amp; <span class="id">ME1</span> &amp; <span class="id">RES1</span> &amp; <span class="id">PRES1</span> &amp; <span class="id">HFP1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> (<span class="id">add_letvar</span> <span class="id">map</span> <span class="id">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_letvar_wf">add_letvar_wf</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exitexpr_fp</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_bind_letvar">match_env_bind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">nd</span> &amp; <span class="id">rs2</span> &amp; <span class="id">fp2</span>' &amp; <span class="id">EXEC2</span> &amp; <span class="id">EXIT2</span> &amp; <span class="id">ME2</span>  &amp; <span class="id">HFP2</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">nd</span>, <span class="id">rs2</span>, (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">EXEC1</span>. <span class="id">eexact</span> <span class="id">EXEC2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_unbind_letvar">match_env_unbind_letvar</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Builtin arguments. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_exprlist_append">eval_exprlist_append</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">al1</span> <span class="id">vl1</span> <span class="id">al2</span> <span class="id">vl2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id">exprlist_of_expr_list</span> <span class="id"><a href="rtlgen_proof.html#al1">al1</a></span>) <span class="id"><a href="rtlgen_proof.html#vl1">vl1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id">exprlist_of_expr_list</span> <span class="id"><a href="rtlgen_proof.html#al2">al2</a></span>) <span class="id"><a href="rtlgen_proof.html#vl2">vl2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.e">e</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR.m">m</a></span> <span class="id"><a href="rtlgen_proof.html#le">le</a></span> (<span class="id">exprlist_of_expr_list</span> (<span class="id"><a href="rtlgen_proof.html#al1">al1</a></span> ++ <span class="id"><a href="rtlgen_proof.html#al2">al2</a></span>)) (<span class="id"><a href="rtlgen_proof.html#vl1">vl1</a></span> ++ <span class="id"><a href="rtlgen_proof.html#vl2">vl2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7317')">Proof.</div>
<div class="proofscript" id="proof7317">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">al1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">vl1</span> <span class="id">al2</span> <span class="id">vl2</span> <span class="id">E1</span> <span class="id">E2</span>; <span class="id">inv</span> <span class="id">E1</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.CORRECTNESS_EXPR">CORRECTNESS_EXPR</a></span>.<br/>
<br/>
<h2> Measure over CminorSel states </h2>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">nat_scope</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="size_stmt">size_stmt</a></span> (<span class="id">s</span>: <span class="id"><a href="CminorSel.html#stmt">stmt</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sskip">Sskip</a></span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sseq">Sseq</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s1</span> + <span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s2</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sifthenelse">Sifthenelse</a></span> <span class="id">c</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s1</span> + <span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s2</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sloop">Sloop</a></span> <span class="id">s1</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s1</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sblock">Sblock</a></span> <span class="id">s1</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s1</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Sexit">Sexit</a></span> <span class="id">n</span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Slabel">Slabel</a></span> <span class="id">lbl</span> <span class="id">s1</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s1</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; 1<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="size_cont">size_cont</a></span> (<span class="id">k</span>: <span class="id"><a href="CminorSel.html#cont">cont</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Kseq">Kseq</a></span> <span class="id">s</span> <span class="id">k1</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id">s</span> + <span class="id"><a href="rtlgen_proof.html#size_cont">size_cont</a></span> <span class="id">k1</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Kblock">Kblock</a></span> <span class="id">k1</span> =&gt; (<span class="id"><a href="rtlgen_proof.html#size_cont">size_cont</a></span> <span class="id">k1</span> + 1)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; 0%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="index_gen">index_gen</a></span> (<span class="id">s</span>: <span class="id"><a href="CminorSel.html#stmt">stmt</a></span>) (<span class="id">k</span>: <span class="id"><a href="CminorSel.html#cont">cont</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> + <span class="id"><a href="rtlgen_proof.html#size_cont">size_cont</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>, <span class="id"><a href="rtlgen_proof.html#size_stmt">size_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="index_order">index_order</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="kwd">Prop</span> := <span class="id"><a href="Coqlib.html#lex_ord">lex_ord</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lt_index_intro">lt_index_intro</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">b1</span> <span class="id">b2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> + <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span> &lt; <span class="id"><a href="rtlgen_proof.html#b1">b1</a></span> + <span class="id"><a href="rtlgen_proof.html#b2">b2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> + <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span> = <span class="id"><a href="rtlgen_proof.html#b1">b1</a></span> + <span class="id"><a href="rtlgen_proof.html#b2">b2</a></span> /\ <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> &lt; <span class="id"><a href="rtlgen_proof.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#index_order">index_order</a></span> (<span class="id"><a href="rtlgen_proof.html#a1">a1</a></span> + <span class="id"><a href="rtlgen_proof.html#a2">a2</a></span>, <span class="id"><a href="rtlgen_proof.html#a1">a1</a></span>) (<span class="id"><a href="rtlgen_proof.html#b1">b1</a></span> + <span class="id"><a href="rtlgen_proof.html#b2">b2</a></span>, <span class="id"><a href="rtlgen_proof.html#b1">b1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7318')">Proof.</div>
<div class="proofscript" id="proof7318">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>. <span class="id">right</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">Ex_index</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="CminorSel_local.html#Core_State">CminorSel_local.Core_State</a></span> <span class="id">_</span> ?<span class="id">s</span> ?<span class="id">k</span> <span class="id">_</span> <span class="id">_</span>] =&gt; <span class="id">exists</span> (<span class="id"><a href="rtlgen_proof.html#index_gen">index_gen</a></span> <span class="id">s</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="CminorSel_local.html#Core_Callstate">CminorSel_local.Core_Callstate</a></span>] =&gt; <span class="id">exists</span> (0,0)<br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="CminorSel_local.html#Core_Returnstate">CminorSel_local.Core_Returnstate</a></span>] =&gt; <span class="id">exists</span> (0,0)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Lt_index</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#lt_index_intro">lt_index_intro</a></span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Wellfounded.Wellfounded.html">Wellfounded</a></span>.<br/>
<br/>
<h2> Semantic preservation for the translation of statements </h2>
<br/>
<div class="doc">The simulation diagram for the translation of statements
  and functions is a "star" diagram of the form:
<pre>
           I                         I
     S1 ------- R1             S1 ------- R1
     |          |              |          |
   t |        + | t      or  t |        * | t    and |S2| &lt; |S1|
     v          v              v          |
     S2 ------- R2             S2 ------- R2
           I                         I</pre>
  where <span class="bracket"><span class="id">I</span></span> is the <span class="bracket"><span class="id">match_states</span></span> predicate defined below.  It includes:
<ul>
<li>
 Agreement between the Cminor statement under consideration and
  the current program point in the RTL control-flow graph,
  as captured by the <span class="bracket"><span class="id">tr_stmt</span></span> predicate.
</li>
<li>
 Agreement between the Cminor continuation and the RTL control-flow
  graph and call stack, as captured by the <span class="bracket"><span class="id">tr_cont</span></span> predicate below.
</li>
<li>
 Agreement between Cminor environments and RTL register environments,
  as captured by <span class="bracket"><span class="id">match_envs</span></span>.
</li>
</ul>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="tr_fun">tr_fun</a></span> (<span class="id">tf</span>: <span class="id"><a href="RTL.html#function">function</a></span>) (<span class="id">map</span>: <span class="id">mapping</span>) (<span class="id">f</span>: <span class="id"><a href="CminorSel.html#function">CminorSel.function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ngoto</span>: <span class="id">labelmap</span>) (<span class="id">nret</span>: <span class="id"><a href="RTL.html#node">node</a></span>) (<span class="id">rret</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Registers.html#reg">reg</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tr_fun_intro">tr_fun_intro</a></span>: <span class="kwd">forall</span> <span class="id">nentry</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rret</span> = <span class="id">ret_reg</span> <span class="id">f</span>.(<span class="id"><a href="CminorSel.html#fn_sig">CminorSel.fn_sig</a></span>) <span class="id"><a href="rtlgen_proof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#tr_stmt">tr_stmt</a></span> <span class="id">tf</span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id">map</span> <span class="id">f</span>.(<span class="id"><a href="CminorSel.html#fn_body">fn_body</a></span>) <span class="id"><a href="rtlgen_proof.html#nentry">nentry</a></span> <span class="id">nret</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tf</span>.(<span class="id"><a href="RTL.html#fn_stacksize">fn_stacksize</a></span>) = <span class="id">f</span>.(<span class="id"><a href="CminorSel.html#fn_stackspace">fn_stackspace</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_fun">tr_fun</a></span> <span class="id">tf</span> <span class="id">map</span> <span class="id">f</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="tr_cont">tr_cont</a></span>: <span class="id"><a href="RTL.html#code">RTL.code</a></span> -&gt; <span class="id">mapping</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#cont">CminorSel.cont</a></span> -&gt; <span class="id"><a href="RTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="RTL.html#node">node</a></span> -&gt; <span class="id">labelmap</span> -&gt; <span class="id"><a href="RTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Registers.html#reg">reg</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="RTL.html#stackframe">RTL.stackframe</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tr_Kseq">tr_Kseq</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">s</span> <span class="id">k</span> <span class="id">nd</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#tr_stmt">tr_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="CminorSel.html#Kseq">Kseq</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tr_Kblock">tr_Kblock</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">k</span> <span class="id">nd</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="CminorSel.html#Kblock">Kblock</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> (<span class="id"><a href="rtlgen_proof.html#nd">nd</a></span> :: <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span>) <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tr_Kstop">tr_Kstop</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#c">c</a></span>!<span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="RTL.html#Ireturn">Ireturn</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="CminorSel.html#Kstop">Kstop</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="CminorSel.html#Kstop">Kstop</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tr_Kcall">tr_Kcall</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">optid</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">k</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#c">c</a></span>!<span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="RTL.html#Ireturn">Ireturn</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> (<span class="id"><a href="CminorSel.html#Kcall">Kcall</a></span> <span class="id"><a href="rtlgen_proof.html#optid">optid</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="CminorSel.html#Kcall">Kcall</a></span> <span class="id"><a href="rtlgen_proof.html#optid">optid</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="match_stacks">match_stacks</a></span>: <span class="id"><a href="CminorSel.html#cont">CminorSel.cont</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="RTL.html#stackframe">RTL.stackframe</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stacks_stop">match_stacks_stop</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="CminorSel.html#Kstop">Kstop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stacks_call">match_stacks_call</a></span>: <span class="kwd">forall</span> <span class="id">optid</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">k</span> <span class="id">r</span> <span class="id">tf</span> <span class="id">n</span> <span class="id">rs</span> <span class="id">cs</span> <span class="id">map</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_fun">tr_fun</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#reg_map_ok">reg_map_ok</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#optid">optid</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> (<span class="id"><a href="CminorSel.html#Kcall">Kcall</a></span> <span class="id"><a href="rtlgen_proof.html#optid">optid</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) (<span class="id"><a href="RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="rtlgen_proof.html#r">r</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span> :: <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_call_cont">match_stacks_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">k</span> <span class="id">ncont</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#ncont">ncont</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> (<span class="id"><a href="CminorSel.html#call_cont">call_cont</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> /\ <span class="id"><a href="rtlgen_proof.html#c">c</a></span>!<span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="RTL.html#Ireturn">Ireturn</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7319')">Proof.</div>
<div class="proofscript" id="proof7319">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tr_cont_call_cont">tr_cont_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">k</span> <span class="id">ncont</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#ncont">ncont</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> (<span class="id"><a href="CminorSel.html#call_cont">call_cont</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7320')">Proof.</div>
<div class="proofscript" id="proof7320">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tr_find_label">tr_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">map</span> <span class="id">lbl</span> <span class="id">n</span> (<span class="id">ngoto</span>: <span class="id">labelmap</span>) <span class="id">nret</span> <span class="id">rret</span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span>!<span class="id"><a href="rtlgen_proof.html#lbl">lbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="rtlgen_proof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">ns1</span> <span class="id">nd1</span> <span class="id">nexits1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#find_label">find_label</a></span> <span class="id"><a href="rtlgen_proof.html#lbl">lbl</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">s</span>', <span class="id">k</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="RTLgenspec.html#tr_stmt">tr_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#ns1">ns1</a></span> <span class="id"><a href="rtlgen_proof.html#nd1">nd1</a></span> <span class="id"><a href="rtlgen_proof.html#nexits1">nexits1</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#nd1">nd1</a></span> <span class="id"><a href="rtlgen_proof.html#nexits1">nexits1</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ns2</span>, <span class="id">exists</span> <span class="id">nd2</span>, <span class="id">exists</span> <span class="id">nexits2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#c">c</a></span>!<span class="id"><a href="rtlgen_proof.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="RTL.html#Inop">Inop</a></span> <span class="id"><a href="rtlgen_proof.html#ns2">ns2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="RTLgenspec.html#tr_stmt">tr_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id">s</span>' <span class="id"><a href="rtlgen_proof.html#ns2">ns2</a></span> <span class="id"><a href="rtlgen_proof.html#nd2">nd2</a></span> <span class="id"><a href="rtlgen_proof.html#nexits2">nexits2</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#c">c</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id">k</span>' <span class="id"><a href="rtlgen_proof.html#nd2">nd2</a></span> <span class="id"><a href="rtlgen_proof.html#nexits2">nexits2</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7321')">Proof.</div>
<div class="proofscript" id="proof7321">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">nexits1</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;seq&nbsp;*)</span>&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="CminorSel.html#find_label">find_label</a></span> <span class="id">lbl</span> <span class="id">s1</span> (<span class="id"><a href="CminorSel.html#Kseq">Kseq</a></span> <span class="id">s2</span> <span class="id">k</span>)); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">IHs1</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">IHs2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;ifthenelse&nbsp;*)</span>&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="CminorSel.html#find_label">find_label</a></span> <span class="id">lbl</span> <span class="id">s1</span> <span class="id">k</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">IHs1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">IHs2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHs</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;block&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHs</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;label&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="AST.html#ident_eq">ident_eq</a></span> <span class="id">lbl</span> <span class="id">l</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">n0</span> = <span class="id">n</span>). <span class="id">change</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="kwd">with</span> <span class="id"><a href="RTL.html#node">node</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ns1</span>; <span class="id">exists</span> <span class="id">nd1</span>; <span class="id">exists</span> <span class="id">nexits1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id">IHs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="MATCH_STATE">MATCH_STATE</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) -&gt; <span class="id"><a href="Injections.html#Mu">Injections.Mu</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#core">CminorSel_local.core</a></span> * <span class="id"><a href="Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="RTL_local.html#core">RTL_local.core</a></span> * <span class="id"><a href="Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_state">match_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">tf</span> <span class="id">ns</span> <span class="id">rs</span> <span class="id">map</span> <span class="id">ncont</span> <span class="id">nexits</span> <span class="id">ngoto</span> <span class="id">nret</span> <span class="id">rret</span> <span class="id">fp</span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TS</span>: <span class="id"><a href="RTLgenspec.html#tr_stmt">tr_stmt</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#ncont">ncont</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TF</span>: <span class="id"><a href="rtlgen_proof.html#tr_fun">tr_fun</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TK</span>: <span class="id"><a href="rtlgen_proof.html#tr_cont">tr_cont</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#ncont">ncont</a></span> <span class="id"><a href="rtlgen_proof.html#nexits">nexits</a></span> <span class="id"><a href="rtlgen_proof.html#ngoto">ngoto</a></span> <span class="id"><a href="rtlgen_proof.html#nret">nret</a></span> <span class="id"><a href="rtlgen_proof.html#rret">rret</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="rtlgen_proof.html#map">map</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
<div class="doc">NEW </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RCPRESV</span>: <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPMATCH</span>: <span class="id">Injections.FPMatch</span>' <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#MATCH_STATE">MATCH_STATE</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> (<span class="id"><a href="rtlgen_proof.html#index_gen">index_gen</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>) <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CminorSel_local.html#Core_State">CminorSel_local.Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#s">s</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#e">e</a></span>, <span class="id"><a href="rtlgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RTL_local.html#Core_State">RTL_local.Core_State</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> <span class="id"><a href="rtlgen_proof.html#sp">sp</a></span> <span class="id"><a href="rtlgen_proof.html#ns">ns</a></span> <span class="id"><a href="rtlgen_proof.html#rs">rs</a></span>, <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
| <span class="id"><a name="match_callstate">match_callstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">b</span> <span class="id">f</span> <span class="id">args</span> <span class="id">targs</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">tf</span> <span class="id">fp</span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TF</span>: <span class="id">transl_fundef</span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MS</span>: <span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LD</span>: <span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#targs">targs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
<div class="doc">NEW </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RCPRESV</span>: <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPMATCH</span>: <span class="id">Injections.FPMatch</span>' <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#MATCH_STATE">MATCH_STATE</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> (0,0) <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CminorSel_local.html#Core_Callstate">CminorSel_local.Core_Callstate</a></span> <span class="id"><a href="rtlgen_proof.html#f">f</a></span> <span class="id"><a href="rtlgen_proof.html#args">args</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>, <span class="id"><a href="rtlgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RTL_local.html#Core_Callstate">RTL_local.Core_Callstate</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#tf">tf</a></span> <span class="id"><a href="rtlgen_proof.html#targs">targs</a></span>, <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
| <span class="id"><a name="match_returnstate">match_returnstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">fp</span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MS</span>: <span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LD</span>: <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
<div class="doc">NEW </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>) <span class="id"><a href="rtlgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RCPRESV</span>: <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#m">m</a></span> <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPMATCH</span>: <span class="id">Injections.FPMatch</span>' <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen_proof.html#MATCH_STATE">MATCH_STATE</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> (0,0) <span class="id"><a href="rtlgen_proof.html#mu">mu</a></span> <span class="id"><a href="rtlgen_proof.html#fp">fp</a></span> <span class="id">fp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CminorSel_local.html#Core_Returnstate">CminorSel_local.Core_Returnstate</a></span> <span class="id"><a href="rtlgen_proof.html#v">v</a></span> <span class="id"><a href="rtlgen_proof.html#k">k</a></span>, <span class="id"><a href="rtlgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RTL_local.html#Core_Returnstate">RTL_local.Core_Returnstate</a></span> <span class="id"><a href="rtlgen_proof.html#cs">cs</a></span> <span class="id"><a href="rtlgen_proof.html#tv">tv</a></span>, <span class="id"><a href="rtlgen_proof.html#tm">tm</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">resolvfp</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">_</span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span> <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> ?<span class="id">fp1</span> ?<span class="id">fp1</span>' |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>'; [<span class="tactic">exact</span> <span class="id">H</span>| <span class="id">resolvfp</span>]<br/>
&nbsp;&nbsp;| |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="rtlgen_proof.html#empfp">empfp</a></span> =&gt; <span class="tactic">apply</span> <span class="id">Injections.fp_match_emp</span>'<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span> ?<span class="id">fp2</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_subset_T</span>' <span class="kwd">with</span> <span class="id">fp2</span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp2</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) ?<span class="id">fp2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eresolvfp</span>:= <span class="id">resolvfp</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">resvalid</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
<div class="doc">valid blocks </div>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>,<span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="rtlgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span><br/>
<div class="doc">Mem inv </div>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#free_inject_unmapped_closed_preserved">MemClosures_local.free_inject_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Right</span> := <span class="id">right</span>; <span class="id">Ex_index</span>; <span class="tactic">do</span> 3 <span class="id">eexists</span>; <span class="tactic">split</span>; [|<span class="id">resolvfp</span>].<br/>
<span class="kwd">Ltac</span> <span class="id">FP</span>:= <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">P</span> /\ <span class="id">_</span> =&gt; <span class="tactic">assert</span> <span class="id">P</span>; <span class="id">eresolvfp</span> <span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Left</span> := <span class="id">left</span>; <span class="id">Ex_index</span>; <span class="tactic">split</span>; [<span class="id">Lt_index</span>|<span class="id">eresolvfp</span>].<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="TRANSF_local_ldsim">TRANSF_local_ldsim</a></span>:<br/>
&nbsp;&nbsp;@<span class="id"><a href="LDSim_local.html#local_ldsim">local_ldsim</a></span> <span class="id"><a href="CminorSel_local.html#CminorSel_IS">CminorSel_IS</a></span> <span class="id"><a href="RTL_local.html#RTL_IS">RTL_IS</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7322')">Proof.</div>
<div class="proofscript" id="proof7322">
&nbsp;&nbsp;<span class="tactic">eapply</span> (@<span class="id"><a href="LDSim_local.html#Local_ldsim">Local_ldsim</a></span> <span class="id"><a href="CminorSel_local.html#CminorSel_IS">CminorSel_IS</a></span> <span class="id"><a href="RTL_local.html#RTL_IS">RTL_IS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="rtlgen_proof.html#index_order">index_order</a></span> <span class="id"><a href="rtlgen_proof.html#MATCH_STATE">MATCH_STATE</a></span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;index&nbsp;wf&nbsp;*)</span>&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#wf_lex_ord">wf_lex_ord</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>.<br/>
&nbsp;wd_mu&nbsp;*)</span>&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_inject">proper_mu_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;inj&nbsp;ge&nbsp;*)</span>&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_ge_init_inj">proper_mu_ge_init_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;ge&nbsp;match&nbsp;*)</span>&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#ge_match">ge_match</a></span>.<br/>
&nbsp;initial&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;- <span class="comment">(**&nbsp;TODO:&nbsp;this&nbsp;pattern&nbsp;is&nbsp;general&nbsp;enough...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">fid</span> <span class="id">args</span> <span class="id">args</span>' <span class="id">score</span> <span class="id">GE_INIT_INJ</span> <span class="id">INJID</span> <span class="id">GARG</span> <span class="id">ARGREL</span> <span class="id">INITCORE</span>.<br/>
&nbsp;this&nbsp;should&nbsp;be&nbsp;a&nbsp;property&nbsp;derived&nbsp;from&nbsp;TRANSF?&nbsp;*)</span>&nbsp;by&nbsp;properties&nbsp;of&nbsp;init_core_local&nbsp;?&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HSG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HTG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">auto</span>).    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="IS_local.html#init_core_local">init_core_local</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CminorSel_local.html#init_core">CminorSel_local.init_core</a></span>, <span class="id"><a href="RTL_local.html#init_core">init_core</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span> <span class="kwd">in</span> <span class="id">INITCORE</span> |- * .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HTG</span>, <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HSG</span> <span class="kwd">in</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id">fid</span>) <span class="id">eqn</span>: <span class="id">FIND</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id">b</span>) <span class="id">eqn</span>: <span class="id">FINDB</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#function_ptr_translated">function_ptr_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tf</span> &amp; <span class="id">FINDB</span>' &amp; <span class="id">TRANSF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">FINDB</span>'. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CminorSel_local.html#fundef_init">CminorSel_local.fundef_init</a></span> <span class="kwd">in</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tfd</span>, <span class="id">tf</span> = <span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id"><a href="rtlgen_proof.html#tfd">tfd</a></span>)  <span class="kwd">as</span> [<span class="id">tfd</span> <span class="id">INTERNAL</span>] <span class="tactic">by</span> (<span class="id">monadInv</span> <span class="id">TRANSF</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">tf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RTL_local.html#fundef_init">fundef_init</a></span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>;[|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id">args</span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="CminorSel.html#funsig">CminorSel.funsig</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">f</span>)))) <span class="id">eqn</span>: <span class="id">WDARGS</span>; [|<span class="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="val_casted.html#wd_args_inject">wd_args_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">sm0</span> <span class="id">tm0</span> <span class="id">INITSM</span> <span class="id">INITTM</span> <span class="id">MEMINITINJ</span> <span class="id">sm</span> <span class="id">tm</span> [<span class="id">HRELY</span> <span class="id">LRELY</span> <span class="id">MINJ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (0, 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">INITCORE</span>; <span class="tactic">clear</span> <span class="id">INITCORE</span>. <span class="tactic">simpl</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">args</span>' = <span class="id">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">ARGREL</span> <span class="id">GARG</span> <span class="id">MEMINITINJ</span>; <span class="tactic">clear</span>. <span class="id">revert</span> <span class="id">args</span>'. <span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">intros</span> <span class="id">args</span>' <span class="id">REL</span> <span class="id">G</span> <span class="id">MEMREL</span>; <span class="id">inv</span> <span class="id">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">G</span>. <span class="tactic">f_equal</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">MEMREL</span>. <span class="tactic">apply</span> <span class="id">inj_inject_id</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>. <span class="tactic">apply</span> <span class="id">IHargs</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">args</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">SG</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>; <span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MEMINITINJ</span>. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="id">inv</span> <span class="id">LRELY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#inject_implies_extends">inject_implies_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b0</span> <span class="id">A</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>, &lt;- <span class="id">dom_eq_src</span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">A</span>]. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">GE_INIT_INJ</span>. <span class="tactic">rewrite</span> <span class="id">mu_shared_src</span> <span class="kwd">in</span> <span class="id">dom_eq_src</span>. <span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">dom_eq_tgt</span>. <span class="tactic">rewrite</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.S_EQ">S_EQ</a></span> <span class="kwd">in</span> <span class="id">dom_eq_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">sm0</span>) &lt;-&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="rtlgen_proof.html#b">b</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">dom_eq_src</span>, &lt;- <span class="id">dom_eq_tgt</span>. <span class="tactic">tauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQNEXT</span>, <span class="id">EQNEXT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_total">Pos.lt_total</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">sm0</span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm0</span>)) <span class="kwd">as</span> [<span class="id">LT</span> | [<span class="id">EQ</span> | <span class="id">LT</span>]]; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">generalize</span> <span class="id">H3</span> <span class="id">LT</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">exfalso</span>; <span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">LT</span>; <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_irrefl">Pos.lt_irrefl</a></span>; <span class="tactic">eauto</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">apply</span> <span class="id">dom_eq_src</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>. <span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">apply</span> <span class="id">dom_eq_tgt</span>; <span class="tactic">auto</span>.    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? ? ? ? ? . <span class="id">exploit</span> <span class="id">inj_inject_id</span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>. <span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;tau&nbsp;step*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">Hfp</span>' <span class="id">Hcore</span>' <span class="id">Hm</span>' <span class="id">MS</span> <span class="id">STEP</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HSG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HTG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HSG</span> <span class="kwd">in</span> <span class="id">STEP</span>. <span class="tactic">rewrite</span> <span class="id">HTG</span>. <span class="id">revert</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">MS</span> <span class="id">HSG</span> <span class="id">HTG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">STEP</span>; <span class="tactic">intros</span> <span class="id">until</span> 1; <span class="id">inv</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;skip&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">TK</span>. <span class="tactic">intros</span>. <span class="id">Left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;skip&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">TK</span>. <span class="id">Left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;skip&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="RTL.html#fn_code">fn_code</a></span> <span class="id">tf</span>)!<span class="id">ncont</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="RTL.html#Ireturn">Ireturn</a></span> <span class="id">rret</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="rtlgen_proof.html#match_stacks">match_stacks</a></span> <span class="id">k</span> <span class="id">cs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TK</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">tf</span> = <span class="id"><a href="CminorSel.html#fn_stackspace">fn_stackspace</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TF</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H3</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Ireturn">exec_Ireturn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">resvalid</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;assign&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">HFP</span>]]]]]].<br/>
&nbsp;case&nbsp;study&nbsp;on&nbsp;A..&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">E</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>'' [<span class="id">fp</span>'' [<span class="id">F</span> [<span class="id">G</span> [<span class="id">J</span> [<span class="id">K</span> <span class="id">L</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id">vl</span> <span class="id">rs</span>''##<span class="id">rl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">rs</span>'' ## <span class="id">rl</span>) <span class="kwd">with</span> (<span class="id">rs</span>' ## <span class="id">rl</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_map_exten">list_map_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">K</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span> <span class="kwd">as</span> [<span class="id">vaddr</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.storev_extends">Mem.storev_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>''' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">eexact</span> <span class="id">F</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Istore">exec_Istore</a></span> <span class="kwd">with</span> (<span class="id">a</span> := <span class="id">vaddr</span>'). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id"><a href="Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vaddr</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">resvalid</span>. <span class="id">constructor</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id"><a href="CminorSel_local.html#eval_expr_det">eval_expr_det</a></span>. <span class="tactic">exact</span> <span class="id">H3</span>. <span class="tactic">exact</span> <span class="id">H6</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;indirect&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">X</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>'' [<span class="id">fp</span>'' [<span class="id">E</span> [<span class="id">F</span> [<span class="id">G</span> [<span class="id">J</span> <span class="id">Y</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tf</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">eexact</span> <span class="id">E</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Icall">exec_Icall</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">J</span>. <span class="tactic">destruct</span> <span class="id">C</span>. <span class="tactic">eauto</span>. <span class="tactic">discriminate</span> <span class="id">P</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>. <span class="id">FP</span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;direct&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>'' [<span class="id">fp</span>'' [<span class="id">E</span> [<span class="id">F</span> [<span class="id">G</span> [<span class="id">J</span> <span class="id">Y</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tf</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="id">eexact</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Icall">exec_Icall</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="id">eresolvfp</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id"><a href="CminorSel_local.html#eval_expr_det">eval_expr_det</a></span>. <span class="tactic">exact</span> <span class="id">H4</span>. <span class="tactic">exact</span> <span class="id">H7</span>. <span class="tactic">intro</span>; <span class="tactic">subst</span>.<br/>
&nbsp;indirect&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">X</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>'' [<span class="id">fp</span>'' [<span class="id">E</span> [<span class="id">F</span> [<span class="id">G</span> [<span class="id">J</span> <span class="id">Y</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tf</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_stacks_call_cont">match_stacks_call_cont</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">tf</span> = <span class="id"><a href="CminorSel.html#fn_stackspace">fn_stackspace</a></span> <span class="id">f</span>). <span class="id">inv</span> <span class="id">TF</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>''' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">eexact</span> <span class="id">E</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Itailcall">exec_Itailcall</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">J</span>. <span class="tactic">destruct</span> <span class="id">C</span>. <span class="tactic">eauto</span>. <span class="tactic">discriminate</span> <span class="id">P</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">FP</span>. <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">resvalid</span>.<br/>
&nbsp;direct&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>'' [<span class="id">fp</span>'' [<span class="id">E</span> [<span class="id">F</span> [<span class="id">G</span> [<span class="id">J</span> <span class="id">Y</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tf</span>' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_stacks_call_cont">match_stacks_call_cont</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">tf</span> = <span class="id"><a href="CminorSel.html#fn_stackspace">fn_stackspace</a></span> <span class="id">f</span>). <span class="id">inv</span> <span class="id">TF</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>''' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="id">eexact</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Itailcall">exec_Itailcall</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="rtlgen_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">rewrite</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#sig_transl_function">sig_transl_function</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">FP</span>. <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">resvalid</span>.<br/>
<br/>
&nbsp;builtin&nbsp;<br/>
&nbsp;&nbsp;inv&nbsp;TS.<br/>
&nbsp;&nbsp;exploit&nbsp;invert_eval_builtin_args;&nbsp;eauto.&nbsp;intros&nbsp;(vparams&nbsp;&amp;&nbsp;P&nbsp;&amp;&nbsp;Q).<br/>
&nbsp;&nbsp;exploit&nbsp;transl_exprlist_correct;&nbsp;eauto.<br/>
&nbsp;&nbsp;intros&nbsp;[rs'&nbsp;[tm'&nbsp;[E&nbsp;[F&nbsp;[G&nbsp;[J&nbsp;K]]]]]].<br/>
&nbsp;&nbsp;exploit&nbsp;transl_eval_builtin_args;&nbsp;eauto.<br/>
&nbsp;&nbsp;intros&nbsp;(vargs'&nbsp;&amp;&nbsp;U&nbsp;&amp;&nbsp;V).<br/>
&nbsp;&nbsp;exploit&nbsp;(@eval_builtin_args_lessdef&nbsp;_&nbsp;ge&nbsp;(fun&nbsp;r&nbsp;=&gt;&nbsp;rs'#r)&nbsp;(fun&nbsp;r&nbsp;=&gt;&nbsp;rs'#r));&nbsp;eauto.<br/>
&nbsp;&nbsp;intros&nbsp;(vargs''&nbsp;&amp;&nbsp;X&nbsp;&amp;&nbsp;Y).<br/>
&nbsp;&nbsp;assert&nbsp;(Z:&nbsp;Val.lessdef_list&nbsp;vl&nbsp;vargs'')&nbsp;by&nbsp;(eapply&nbsp;Val.lessdef_list_trans;&nbsp;eauto).<br/>
&nbsp;&nbsp;edestruct&nbsp;external_call_mem_extends&nbsp;as&nbsp;[tv&nbsp;[tm''&nbsp;[A&nbsp;[B&nbsp;[C&nbsp;D]]]]];&nbsp;eauto.<br/>
&nbsp;&nbsp;econstructor;&nbsp;split.<br/>
&nbsp;&nbsp;left.&nbsp;eapply&nbsp;plus_right.&nbsp;eexact&nbsp;E.<br/>
&nbsp;&nbsp;eapply&nbsp;exec_Ibuiltin.&nbsp;eauto.<br/>
&nbsp;&nbsp;eapply&nbsp;eval_builtin_args_preserved&nbsp;with&nbsp;(ge1&nbsp;:=&nbsp;ge);&nbsp;eauto.&nbsp;exact&nbsp;symbols_preserved.<br/>
&nbsp;&nbsp;eapply&nbsp;external_call_symbols_preserved.&nbsp;apply&nbsp;senv_preserved.&nbsp;eauto.<br/>
&nbsp;&nbsp;traceEq.<br/>
&nbsp;&nbsp;econstructor;&nbsp;eauto.&nbsp;constructor.<br/>
&nbsp;&nbsp;eapply&nbsp;match_env_update_res;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ifthenelse&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_condexpr_fp_correct">transl_condexpr_fp_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">TS</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Inop">exec_Inop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;exit&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">TK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;exit&nbsp;block&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">TK</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;exit&nbsp;block&nbsp;n+1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">inv</span> <span class="id">TK</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_exitexpr_fp_correct">transl_exitexpr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">nd</span> &amp; <span class="id">rs</span>' &amp; <span class="id">fp</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;return&nbsp;none&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_stacks_call_cont">match_stacks_call_cont</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">TF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> *. <span class="id">Right</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Ireturn">exec_Ireturn</a></span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">resvalid</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;return&nbsp;some&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">rs</span>' [<span class="id">fp</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> [<span class="id">D</span> <span class="id">E</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#match_stacks_call_cont">match_stacks_call_cont</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">TF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>'' []]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H5</span> <span class="kwd">in</span> *. <span class="id">Right</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Ireturn">exec_Ireturn</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">resvalid</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;label&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="id">Left</span>. <span class="id">resolvfp</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;goto&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TS</span>. <span class="tactic">inversion</span> <span class="id">TF</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="rtlgen_proof.html#tr_find_label">tr_find_label</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#tr_cont_call_cont">tr_cont_call_cont</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ns2</span> [<span class="id">nd2</span> [<span class="id">nexits2</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_Inop">exec_Inop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;internal&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TF</span>. <span class="id">exploit</span> <span class="id"><a href="RTLgenspec.html#transl_function_charact">transl_function_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">TRF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">TRF</span>. <span class="tactic">subst</span> <span class="id">f0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">e</span> := <span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> (<span class="id"><a href="CminorSel.html#fn_vars">fn_vars</a></span> <span class="id">f</span>) (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id">vargs</span> (<span class="id"><a href="CminorSel.html#fn_params">CminorSel.fn_params</a></span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">rs</span> := <span class="id"><a href="RTL.html#init_regs">init_regs</a></span> <span class="id">targs</span> <span class="id">rparams</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ME</span>: <span class="id"><a href="rtlgen_proof.html#match_env">match_env</a></span> <span class="id">map2</span> <span class="id">e</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">rs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rs</span>, <span class="id">e</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_init_env_init_reg">match_init_env_init_reg</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">MWF</span>: <span class="id"><a href="rtlgen_proof.html#map_wf">map_wf</a></span> <span class="id">map2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RTLgenspec.html#map_valid">map_valid</a></span> <span class="id">init_mapping</span> <span class="id">s0</span>) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="RTLgenspec.html#init_mapping_valid">init_mapping_valid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="RTLgenspec.html#add_vars_valid">add_vars_valid</a></span> (<span class="id"><a href="CminorSel.html#fn_params">CminorSel.fn_params</a></span> <span class="id">f</span>)); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_vars_wf">add_vars_wf</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#add_vars_wf">add_vars_wf</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#init_mapping_wf">init_mapping_wf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="Memory.html#Mem.alloc_extends">Mem.alloc_extends</a></span> <span class="kwd">as</span> [<span class="id">tm</span>' []]; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="RTL_local.html#exec_function_internal">exec_function_internal</a></span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span>. <span class="id">inv</span> <span class="id">MEXT</span>. <span class="tactic">rewrite</span> <span class="id">mext_next</span>. <span class="id">resolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">MS0</span>; <span class="tactic">subst</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">resvalid</span>. <span class="id">resvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;<span class="comment">(*&nbsp;external&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monadInv&nbsp;TF.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edestruct&nbsp;external_call_mem_extends&nbsp;as&nbsp;[tvres&nbsp;[tm'&nbsp;[A&nbsp;[B&nbsp;[C&nbsp;D]]]]];&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor;&nbsp;split.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left;&nbsp;apply&nbsp;plus_one.&nbsp;eapply&nbsp;exec_function_external;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;external_call_symbols_preserved;&nbsp;eauto.&nbsp;apply&nbsp;senv_preserved.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor;&nbsp;auto.<br/>
*)</span>&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#match_env_update_dest">match_env_update_dest</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;at&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="CminorSel_local.html#at_external">CminorSel_local.at_external</a></span>, <span class="id"><a href="RTL_local.html#at_external">at_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">f</span> <span class="id">sg</span> <span class="id">argSrc</span> <span class="id">MS</span> <span class="id">ATEXT</span> <span class="id">RC</span> <span class="id">GARG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HSG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HTG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HSG</span> <span class="kwd">in</span> <span class="id">ATEXT</span>. <span class="tactic">destruct</span> (<span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span> <span class="id">name</span>) <span class="id">eqn</span>:<span class="id">SYMBNAME</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">HSG</span> <span class="id">HTG</span>; <span class="id">inv</span> <span class="id">ATEXT</span>. <span class="id">inv</span> <span class="id">MS</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">TF</span>. <span class="id">inv</span> <span class="id">TF</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="CUAST.html#match_genvs_invert_symbol_from_string_preserved">match_genvs_invert_symbol_from_string_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ex_index</span>. <span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#arg_rel">LDSimDefs.arg_rel</a></span>. <span class="id">revert</span> <span class="id">targs</span> <span class="id">AGMU</span> <span class="id">LD</span> <span class="id">GARG</span>; <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">argSrc</span>; <span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">LD</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">LD</span>. <span class="id">inv</span> <span class="id">GARG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">clear</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">IHargSrc</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">v2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>. <span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closed_reach_closed_preserved_by_extends">MemClosures_local.unmapped_closed_reach_closed_preserved_by_extends</a></span>; <span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">Injections.fp_match_emp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HTG</span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f1</span>; <span class="id">monadInv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;after&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="CminorSel_local.html#after_external">CminorSel_local.after_external</a></span>, <span class="id"><a href="RTL_local.html#after_external">after_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">oresSrc</span> <span class="id">Hcore</span>' <span class="id">oresTgt</span> <span class="id">MS</span> <span class="id">GRES</span> <span class="id">AFTEXT</span> <span class="id">RESREL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HSG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sG">sG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.sge">sge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.GE_INIT">GE_INIT</a></span>; <span class="tactic">auto</span>). <span class="tactic">assert</span> (<span class="id">HTG</span>: <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tG">tG</a></span> = <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.tge">tge</a></span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS.TGE_INIT">TGE_INIT</a></span>; <span class="tactic">auto</span>). <span class="id">revert</span> <span class="id">HSG</span> <span class="id">HTG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS</span>. <span class="id">monadInv</span> <span class="id">TF</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hcore</span>' = <span class="id"><a href="CminorSel_local.html#Core_Returnstate">CminorSel_local.Core_Returnstate</a></span> (<span class="kwd">match</span> <span class="id">oresSrc</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id">v</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="kwd">end</span>) <span class="id">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">oresSrc</span>, (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>); <span class="id">inv</span> <span class="id">AFTEXT</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="val_casted.html#val_has_type_func">val_has_type_func</a></span> <span class="id">v</span> <span class="id">t</span>); <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>. } <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">match</span> <span class="id">oresSrc</span>, (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">ty</span> =&gt; <span class="id"><a href="Values.html#Val.has_type">Val.has_type</a></span> <span class="id">v</span> <span class="id">ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="kwd">as</span> <span class="id">HRES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">oresSrc</span>, (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>); <span class="id">inv</span> <span class="id">AFTEXT</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="val_casted.html#val_has_type_func">val_has_type_func</a></span> <span class="id">v</span> <span class="id">t</span>) <span class="id">eqn</span>:<span class="id">A</span>; <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">AFTEXT</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">AFTEXT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="RTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id">cs</span> (<span class="kwd">match</span> <span class="id">oresTgt</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id">v</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="kwd">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">oresSrc</span>, <span class="id">oresTgt</span>, (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>); <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RESREL</span>; <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">HRES</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hm</span>' <span class="id">Lm</span>' <span class="id">HLRELY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HLRELY</span> <span class="kwd">as</span> [<span class="id">HRELY</span> <span class="id">LRELY</span> <span class="id">INV</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">Ex_index</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">oresSrc</span>, (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>), <span class="id">oresTgt</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RESREL</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">apply</span> <span class="id">proper_mu_inject_incr</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_rely_extends">extends_rely_extends</a></span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">S</span>. <span class="tactic">apply</span> <span class="id">SVALID</span> <span class="kwd">in</span> <span class="id">S</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">T</span>. <span class="tactic">apply</span> <span class="id">TVALID</span> <span class="kwd">in</span> <span class="id">T</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>; <span class="tactic">eauto</span>.    <br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;halt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="CminorSel_local.html#halted">CminorSel_local.halted</a></span>, <span class="id"><a href="RTL_local.html#halted">halted</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">resSrc</span> <span class="id">MS</span> <span class="id">HALT</span> <span class="id">RC</span> <span class="id">GRES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">HALT</span>. <span class="id">inv</span> <span class="id">MS</span>. <span class="id">inv</span> <span class="id">MS0</span>. <span class="id">exists</span> <span class="id">resSrc</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">f_equal</span>. <span class="id">inv</span> <span class="id">LD</span>; <span class="tactic">auto</span>. <span class="id">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">revert</span> <span class="id">AGMU</span> <span class="id">GRES</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">resSrc</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">GRES</span>. <span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">GRES</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">GRES</span> <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">INJ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closed_reach_closed_preserved_by_extends">MemClosures_local.unmapped_closed_reach_closed_preserved_by_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="rtlgen_proof.html#CORRECTNESS">CORRECTNESS</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_local_ldsim">transf_local_ldsim</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">scu</span> <span class="id">tcu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="rtlgen.html#transf_program">rtlgen.transf_program</a></span> <span class="id"><a href="rtlgen_proof.html#scu">scu</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="rtlgen_proof.html#tcu">tcu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sge</span> <span class="id">sG</span> <span class="id">tge</span> <span class="id">tG</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span> <span class="id"><a href="CminorSel_local.html#CminorSel_IS">CminorSel_IS</a></span> <span class="id"><a href="rtlgen_proof.html#scu">scu</a></span> <span class="id"><a href="rtlgen_proof.html#sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#sG">sG</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span> <span class="id"><a href="RTL_local.html#RTL_IS">RTL_IS</a></span> <span class="id"><a href="rtlgen_proof.html#tcu">tcu</a></span> <span class="id"><a href="rtlgen_proof.html#tge">tge</a></span> <span class="id"><a href="rtlgen_proof.html#tG">tG</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="rtlgen_proof.html#sge">sge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="rtlgen_proof.html#tge">tge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim_local.html#local_ldsim">local_ldsim</a></span> <span class="id"><a href="rtlgen_proof.html#sG">sG</a></span> <span class="id"><a href="rtlgen_proof.html#tG">tG</a></span> <span class="id"><a href="rtlgen_proof.html#sge">sge</a></span> <span class="id"><a href="rtlgen_proof.html#tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7323')">Proof.</div>
<div class="proofscript" id="proof7323">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="rtlgen_proof.html#TRANSF_local_ldsim">TRANSF_local_ldsim</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="rtlgen_proof.html#transf_program_match">transf_program_match</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
