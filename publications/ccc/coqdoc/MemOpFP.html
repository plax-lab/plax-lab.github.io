<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module MemOpFP</title>
<meta name="description" content="Documentation of Coq module MemOpFP" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module MemOpFP</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FMemOpFP.html">FMemOpFP</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Memory.html">Memory</a></span>.<br/>
<br/>
<br/>
<br/>
<h2> relations on footprints </h2>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span> := <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span> := <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="locset">locset</a></span> := <span class="id"><a href="Footprint.html#Locs.t">Locs.t</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empls">empls</a></span> := <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="FP">FP</a></span> := <span class="id"><a href="Footprint.html#FP.Build_t">FP.Build_t</a></span>.<br/>
<br/>
<h1> Footprints of memory operations </h1>
<div class="doc">We define footprints for the following memory interfaces:
    - <span class="bracket"><span class="id">alloc</span></span>
    - <span class="bracket"><span class="id">free</span></span>
    - <span class="bracket"><span class="id">load</span></span>
    - <span class="bracket"><span class="id">store</span></span>
    - <span class="bracket"><span class="id">loadv</span></span>
    - <span class="bracket"><span class="id">storev</span></span>
    - <span class="bracket"><span class="id">loadbytes</span></span>
    - <span class="bracket"><span class="id">storebytes</span></span>
    - <span class="bracket"><span class="id">free_list</span></span>
    - <span class="bracket"><span class="id">drop_perm</span></span>
    - <span class="bracket"><span class="id">valid_pointer</span></span>
    - <span class="bracket"><span class="id">weak_valid_Pointer</span></span>
    - <span class="bracket"><span class="id">eval_builtin_args_fp</span></span>
 </div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">range_locset_loc</span> <span class="id">range_locset_inj_fp_mapped</span>.<br/>
<br/>
<h2> ALLOC </h2>
<div class="doc">The footprint for allocation is wierd. Since it requires the 
    highest priority which is called "frees".... </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="alloc_fp">alloc_fp</a></span> (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="MemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span>.(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id"><a href="MemOpFP.html#lo">lo</a></span> <span class="id"><a href="MemOpFP.html#hi">hi</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_fp_loc">alloc_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> (<span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#lo">lo</a></span> <span class="id"><a href="MemOpFP.html#hi">hi</a></span>)) <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="MemOpFP.html#m">m</a></span>.(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6691')">Proof.</div>
<div class="proofscript" id="proof6691">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span>, <span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intro</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_parallel_inj_fp_mapped">alloc_parallel_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#lo">lo</a></span> <span class="id"><a href="MemOpFP.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> (<span class="id"><a href="MemOpFP.html#lo">lo</a></span>+<span class="id"><a href="MemOpFP.html#delta">delta</a></span>) (<span class="id"><a href="MemOpFP.html#hi">hi</a></span>+<span class="id"><a href="MemOpFP.html#delta">delta</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6692')">Proof.</div>
<div class="proofscript" id="proof6692">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">alloc_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">intros</span>. <span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id">tofs</span> - <span class="id">delta</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">alloc_fp_loc</span> <span class="id">alloc_parallel_inj_fp_mapped</span>.<br/>
<h2> FREE </h2>
<span class="kwd">Notation</span> <span class="id"><a name="free_fp">free_fp</a></span> := <span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="free_fp_loc">free_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#free_fp_loc">free_fp_loc</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">free_fp_loc</span>.<br/>
<br/>
<h2> STORE </h2>
<span class="kwd">Notation</span> <span class="id"><a name="store_fp">store_fp</a></span> := <span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="store_fp_loc">store_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#store_fp_loc">store_fp_loc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_inj_fp_mapped">store_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="MemOpFP.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6693')">Proof.</div>
<div class="proofscript" id="proof6693">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span>. <span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">STORE</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_fp_loc</span> <span class="id">store_inj_fp_mapped</span>.<br/>
<br/>
<h2> LOADV </h2>
<span class="kwd">Notation</span> <span class="id"><a name="loadv_fp">loadv_fp</a></span> := <span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="loadv_fp_loc">loadv_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#loadv_fp_loc">loadv_fp_loc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadv_inj_fp_mapped">loadv_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="MemOpFP.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6694')">Proof.</div>
<div class="proofscript" id="proof6694">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">eauto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.load_valid_access">Mem.load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">loadv_fp_loc</span> <span class="id">loadv_inj_fp_mapped</span>.<br/>
<br/>
<h2> STOREV </h2>
<span class="kwd">Notation</span> <span class="id"><a name="storev_fp">storev_fp</a></span> := <span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="storev_fp_loc">storev_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#storev_fp_loc">storev_fp_loc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_inj_fp_mapped">storev_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#storev_fp">storev_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#storev_fp">storev_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6695')">Proof.</div>
<div class="proofscript" id="proof6695">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storev_fp_loc</span> <span class="id">storev_inj_fp_mapped</span>.<br/>
<br/>
<h2> LOADBYTES </h2>
<span class="kwd">Notation</span> <span class="id"><a name="loadbytes_fp">loadbytes_fp</a></span> := <span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="loadbytes_fp_loc">loadbytes_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#loadbytes_fp_loc">loadbytes_fp_loc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadbytes_inj_fp_mapped">loadbytes_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">bytes</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="MemOpFP.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#loadbytes_fp">loadbytes_fp</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#loadbytes_fp">loadbytes_fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>))) <span class="id"><a href="MemOpFP.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6696')">Proof.</div>
<div class="proofscript" id="proof6696">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">LOADBYTES</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.loadbytes_range_perm">Mem.loadbytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>). <span class="tactic">omega</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">omega</span>. <br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">loadbytes_fp_loc</span> <span class="id">loadbytes_inj_fp_mapped</span>.<br/>
<br/>
<br/>
<h2> STOREBYTES </h2>
<span class="kwd">Notation</span> <span class="id"><a name="storebytes_fp">storebytes_fp</a></span> := <span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="storebytes_fp_loc">storebytes_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#storebytes_fp_loc">storebytes_fp_loc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storebytes_inj_fp_mapped">storebytes_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#storebytes_fp">storebytes_fp</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="MemOpFP.html#bytes">bytes</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#storebytes_fp">storebytes_fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>))) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="MemOpFP.html#bytes">bytes</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6697')">Proof.</div>
<div class="proofscript" id="proof6697">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">STOREBYTES</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">bytes</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>). <br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">clear</span>. <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zgt_pos_0">Zgt_pos_0</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_succ_nat">Pos.of_succ_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">bytes</span>))). <span class="tactic">omega</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storebytes_fp_loc</span> <span class="id">storebytes_inj_fp_mapped</span>.<br/>
<br/>
<h2> FREE_LIST </h2>
<span class="kwd">Notation</span> <span class="id"><a name="free_list_fp">free_list_fp</a></span> := <span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="free_list_fp_loc">free_list_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#free_list_fp_loc">free_list_fp_loc</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="free_list_fp_frees">free_list_fp_frees</a></span> := <span class="id"><a href="FMemOpFP.html#free_list_fp_frees">free_list_fp_frees</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">free_list_fp_loc</span> <span class="id">free_list_fp_frees</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<h2> DROP </h2>
<div class="doc">Is drop used in step relations? 
    It seems drop is only used in constructing initial memory. </div>
<br/>
<h2> VALID_POINTER </h2>
<span class="kwd">Notation</span> <span class="id"><a name="valid_pointer_fp">valid_pointer_fp</a></span> := <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="valid_pointer_fp_loc">valid_pointer_fp_loc</a></span> := <span class="id"><a href="FMemOpFP.html#valid_pointer_fp_loc">valid_pointer_fp_loc</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6698')">Proof.</div>
<div class="proofscript" id="proof6698">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="MemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="MemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="MemOpFP.html#FP">FP</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> - 1) 2) <span class="id"><a href="MemOpFP.html#empls">empls</a></span> <span class="id"><a href="MemOpFP.html#empls">empls</a></span> <span class="id"><a href="MemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_pointer_fp_loc">weak_valid_pointer_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id">b</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">ofs</span>' = <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id">ofs</span>' = <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> \/ <span class="id">ofs</span>' = <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> - 1))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6699')">Proof.</div>
<div class="proofscript" id="proof6699">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>); <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="id">left</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">try</span> <span class="tactic">omega</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> [<span class="id">H</span>'|<span class="id">H</span>']]; <span class="tactic">intuition</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="id">right</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">try</span> <span class="tactic">omega</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> [<span class="id">H</span>'|<span class="id">H</span>']]; <span class="tactic">intuition</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_inj_fp_mapped">weak_valid_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6700')">Proof.</div>
<div class="proofscript" id="proof6700">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>, <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>, 2 <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>, 2 <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)) <span class="id">eqn</span>:<span class="id">VALID</span>.<br/>
&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject">Mem.valid_pointer_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="tactic">discriminate</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span> <span class="id">tb</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_inj_valid_fp_mapped">weak_valid_inj_valid_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6701')">Proof.</div>
<div class="proofscript" id="proof6701">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>, <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)) <span class="id">eqn</span>:<span class="id">VALID</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemOpFP.html#valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>. <span class="id">erewrite</span> <span class="id">H0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>. <span class="id">erewrite</span> <span class="id">H0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valid_inj_weak_valid_fp_mapped">valid_inj_weak_valid_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#f">f</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="MemOpFP.html#tb">tb</a></span>, <span class="id"><a href="MemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="MemOpFP.html#f">f</a></span> (<span class="id"><a href="MemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#tm">tm</a></span> <span class="id"><a href="MemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="MemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6702')">Proof.</div>
<div class="proofscript" id="proof6702">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject">Mem.valid_pointer_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 1. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="tactic">at</span> 1; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemOpFP.html#valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_pointer_extend_subset">weak_valid_pointer_extend_subset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id">m</span>' <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="MemOpFP.html#m">m</a></span> <span class="id"><a href="MemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6703')">Proof.</div>
<div class="proofscript" id="proof6703">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">mext_inj</span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> <span class="id">mi_perm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>, <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">Mem.perm_dec</a></span> <span class="id">m</span>), (<span class="id"><a href="Memory.html#Mem.perm_dec">Mem.perm_dec</a></span> <span class="id">m</span>'); <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_refl">FP.subset_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">p</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">p</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.subset_emp">Locs.subset_emp</a></span>. <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>; [|<span class="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>, <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>, <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Builtin Args </h2>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="Events.html">Events</a></span>.<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Senv.t">Senv.t</a></span>) (<span class="id">e</span>: <span class="id"><a href="MemOpFP.html#A">A</a></span> -&gt; <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#val">val</a></span>) : <span class="id"><a href="AST.html#builtin_arg">AST.builtin_arg</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="MemOpFP.html#footprint">footprint</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="eval_BA_fp">eval_BA_fp</a></span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA">BA</a></span> <span class="id"><a href="MemOpFP.html#x">x</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_int_fp">eval_BA_int_fp</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_int">BA_int</a></span> <span class="id"><a href="MemOpFP.html#n">n</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_long_fp">eval_BA_long_fp</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_long">BA_long</a></span> <span class="id"><a href="MemOpFP.html#n">n</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_float_fp">eval_BA_float_fp</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_float">BA_float</a></span> <span class="id"><a href="MemOpFP.html#n">n</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_single_fp">eval_BA_single_fp</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_single">BA_single</a></span> <span class="id"><a href="MemOpFP.html#n">n</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_loadstack_fp">eval_BA_loadstack_fp</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_loadstack">BA_loadstack</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) (<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id">sp</span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
| <span class="id"><a name="eval_BA_addrstack">eval_BA_addrstack</a></span>: <span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_loadglobal">eval_BA_loadglobal</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_loadglobal">BA_loadglobal</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) (<span class="id"><a href="MemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="MemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id">ge</span> <span class="id"><a href="MemOpFP.html#id">id</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>))<br/>
| <span class="id"><a name="eval_BA_addrglobal">eval_BA_addrglobal</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BA_splitlong">eval_BA_splitlong</a></span>: <span class="kwd">forall</span> <span class="id">hi</span> <span class="id">lo</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> <span class="id"><a href="MemOpFP.html#hi">hi</a></span> <span class="id"><a href="MemOpFP.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> <span class="id"><a href="MemOpFP.html#lo">lo</a></span> <span class="id"><a href="MemOpFP.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="MemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="MemOpFP.html#fp2">fp2</a></span> = <span class="id"><a href="MemOpFP.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="AST.html#BA_splitlong">BA_splitlong</a></span> <span class="id"><a href="MemOpFP.html#hi">hi</a></span> <span class="id"><a href="MemOpFP.html#lo">lo</a></span>) <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eval_builtin_args_fp">eval_builtin_args_fp</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Senv.t">Senv.t</a></span>) (<span class="id">e</span>: <span class="id"><a href="MemOpFP.html#A">A</a></span> -&gt; <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#val">val</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#builtin_arg">AST.builtin_arg</a></span> <span class="id">A</span>) -&gt; <span class="id"><a href="MemOpFP.html#footprint">footprint</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="eval_BAs_nil">eval_BAs_nil</a></span>: <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="MemOpFP.html#empfp">empfp</a></span><br/>
| <span class="id"><a name="eval_BAs_cons">eval_BAs_cons</a></span>: <span class="kwd">forall</span> <span class="id">a</span> <span class="id">al</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> <span class="id"><a href="MemOpFP.html#a">a</a></span> <span class="id"><a href="MemOpFP.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> <span class="id"><a href="MemOpFP.html#al">al</a></span> <span class="id"><a href="MemOpFP.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="MemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="MemOpFP.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id">ge</span> <span class="id">e</span> <span class="id">sp</span> (<span class="id"><a href="MemOpFP.html#a">a</a></span> :: <span class="id"><a href="MemOpFP.html#al">al</a></span>) <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED">EVAL_BUILTIN_ARG_PRESERVED</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.A">A</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.F1">F1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.V1">V1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.F2">F2</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.V2">V2</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.F1">F1</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.V1">V1</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.F2">F2</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.V2">V2</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span>: <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.A">A</a></span> -&gt; <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span>: <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_fp_preserved">eval_builtin_arg_fp_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">fp</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#a">a</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span> -&gt; <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#a">a</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6704')">Proof.</div>
<div class="proofscript" id="proof6704">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span> = <span class="id"><a href="Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="MemOpFP.html#id">id</a></span> <span class="id"><a href="MemOpFP.html#ofs">ofs</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.symbols_preserved">symbols_preserved</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">try</span> <span class="id">constructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">EQ</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_fp_preserved">eval_builtin_args_fp_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">fp</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#al">al</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span> -&gt; <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#al">al</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6705')">Proof.</div>
<div class="proofscript" id="proof6705">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp_preserved">eval_builtin_arg_fp_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_PRESERVED">EVAL_BUILTIN_ARG_PRESERVED</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF">EVAL_BUILTIN_ARG_LESSDEF</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.A">A</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span>: <span class="id"><a href="Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span>: <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.A">A</a></span> -&gt; <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span>: <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_fp_lessdef">eval_builtin_arg_fp_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">fp</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#a">a</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp">eval_builtin_arg_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#a">a</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6706')">Proof.</div>
<div class="proofscript" id="proof6706">
 <span class="tactic">induction</span> 1; <span class="id">econstructor</span>; <span class="tactic">eauto</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_fp_lessdef">eval_builtin_args_fp_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">fp</span>, <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#al">al</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">eval_builtin_args_fp</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="MemOpFP.html#al">al</a></span> <span class="id"><a href="MemOpFP.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6707')">Proof.</div>
<div class="proofscript" id="proof6707">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemOpFP.html#eval_builtin_arg_fp_lessdef">eval_builtin_arg_fp_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="MemOpFP.html#EVAL_BUILTIN_ARG_LESSDEF">EVAL_BUILTIN_ARG_LESSDEF</a></span>.<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
