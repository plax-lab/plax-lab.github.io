<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module cminorgen_proof</title>
<meta name="description" content="Documentation of Coq module cminorgen_proof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module cminorgen_proof</h1>
<div class="coq">
<br/>
<br/>
<div class="doc">Correctness proof for Cminor generation. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Equality.html">Coq.Program.Equality</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetAVL.html">FSetAVL</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.Orders.html">Orders</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Mergesort.html">Mergesort</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Ordered.html">Ordered</a></span> <span class="id"><a href="Errors.html">Errors</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Events.html">Events</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Csharpminor.html">Csharpminor</a></span> <span class="id"><a href="Switch.html">Switch</a></span> <span class="id"><a href="Cminor.html">Cminor</a></span> <span class="id">Cminorgen</span>.<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="LDSimDefs_local.html">LDSimDefs_local</a></span> <span class="id"><a href="LDSim_local.html">LDSim_local</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="IS_local.html">IS_local</a></span> <span class="id"><a href="val_casted.html">val_casted</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Op_fp.html">Op_fp</a></span> <span class="id"><a href="CminorLang.html">CminorLang</a></span> <span class="id"><a href="Cminor_op_footprint.html">Cminor_op_footprint</a></span> <span class="id"><a href="cminorgen.html">cminorgen</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span>  <span class="id"><a href="Cop.html">Cop</a></span>  <span class="id"><a href="Csharpminor.html">Csharpminor</a></span> <span class="id"><a href="Csharpminor_local.html">Csharpminor_local</a></span> <span class="id"><a href="Cminor.html">Cminor</a></span> <span class="id"><a href="Cminor_local.html">Cminor_local</a></span>  <span class="id"><a href="Cop_fp_local.html">Cop_fp_local</a></span> <span class="id"><a href="infp.html">infp</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span>:=<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<span class="kwd">Ltac</span> <span class="id">inv_eq</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> , <span class="id">H1</span>: ?<span class="id">P</span> |- <span class="id">_</span> =&gt; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?; <span class="tactic">inversion</span> <span class="id">H</span> ;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span>, <span class="id">H1</span>:<span class="id">context</span> [ ?<span class="id">P</span> ] |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span> |- <span class="id">context</span> [ ?<span class="id">P</span> ] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Hsimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>:?<span class="id">a</span>,<span class="id">H2</span>:?<span class="id">a</span>-&gt;?<span class="id">b</span>|-<span class="id">_</span>=&gt;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">H1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>/\<span class="id">_</span>|-<span class="id">_</span>=&gt; <span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>|-<span class="id">_</span>=&gt;<span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Esimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span>=&gt;<span class="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>=&gt;<span class="id">eexists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span> (<span class="id">p</span>: <span class="id"><a href="Csharpminor_local.html#comp_unit">Csharpminor_local.comp_unit</a></span>) (<span class="id">tp</span>: <span class="id"><a href="Cminor_local.html#cminor_comp_unit">Cminor_local.cminor_comp_unit</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> <span class="id"><a href="cminorgen_proof.html#tp">tp</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="cminorgen.html#transl_program">transl_program</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tp">tp</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#match_prog">match_prog</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> <span class="id"><a href="cminorgen_proof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8040')">Proof.</div>
<div class="proofscript" id="proof8040">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit">match_transform_partial_cunit</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION">TRANSLATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.prog">prog</a></span>: <span class="id"><a href="Csharpminor_local.html#comp_unit">Csharpminor_local.comp_unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.tprog">tprog</a></span>: <span class="id"><a href="Cminor_local.html#cminor_comp_unit">cminor_comp_unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.ge">ge</a></span> : <span class="id"><a href="Csharpminor.html#genv">Csharpminor.genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.tge">tge</a></span> : <span class="id"><a href="Cminor.html#genv">Cminor.genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.TRANSL">TRANSL</a></span>: <span class="id"><a href="cminorgen_proof.html#match_prog">match_prog</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.prog">prog</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tprog">tprog</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.SGEINIT">SGEINIT</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.prog">prog</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.TGEINIT">TGEINIT</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tprog">tprog</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.S_EQ">S_EQ</a></span>: <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>) = <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_match">ge_match</a></span>: <span class="id"><a href="LDSim_local.html#ge_match_strict">ge_match_strict</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8041')">Proof.</div>
<div class="proofscript" id="proof8041">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_ge_match_strict">match_cu_ge_match_strict</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="genv_match">genv_match</a></span>: <span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span>  (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>) <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8042')">Proof.</div>
<div class="proofscript" id="proof8042">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span>: <span class="id"><a href="AST.html#ident">ident</a></span>), <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8043')">Proof.</div>
<div class="proofscript" id="proof8043">
 <span class="tactic">destruct</span> <span class="id"><a href="cminorgen_proof.html#genv_match">genv_match</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="senv_preserved">senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8044')">Proof.</div>
<div class="proofscript" id="proof8044">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_senv_preserved">match_cu_senv_preserved</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="function_ptr_translated">function_ptr_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">f</span>: <span class="id"><a href="Csharpminor.html#fundef">Csharpminor.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> /\ <span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8045')">Proof.</div>
<div class="proofscript" id="proof8045">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="cminorgen_proof.html#genv_match">genv_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor.html#fundef">fundef</a></span>,<span class="id"><a href="Csharpminor.html#fundef">Csharpminor.fundef</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H0</span> <span class="kwd">in</span> <span class="id">Heqo</span>. <span class="id">inv</span> <span class="id">Heqo</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">Heqo</span>. <span class="id">inv</span> <span class="id">Heqo</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span>: <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">f</span>: <span class="id"><a href="Csharpminor.html#fundef">Csharpminor.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> /\ <span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8046')">Proof.</div>
<div class="proofscript" id="proof8046">
&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; [|<span class="tactic">discriminate</span>]. <br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#function_ptr_translated">function_ptr_translated</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved_body">sig_preserved_body</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">cenv</span> <span class="id">size</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#size">size</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_sig">fn_sig</a></span>) = <span class="id"><a href="Csharpminor.html#fn_sig">Csharpminor.fn_sig</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8047')">Proof.</div>
<div class="proofscript" id="proof8047">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">transl_funbody</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved">sig_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#funsig">Cminor.funsig</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> = <span class="id"><a href="Csharpminor.html#funsig">Csharpminor.funsig</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8048')">Proof.</div>
<div class="proofscript" id="proof8048">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">tf</span>; <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transl_function</span>. <span class="tactic">destruct</span> (<span class="id">build_compilenv</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="tactic">case</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">z</span> <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>); <span class="tactic">simpl</span> <span class="id">bind</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#sig_preserved_body">sig_preserved_body</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<h1> Derived properties of memory operations </h1>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="load_freelist">load_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">b</span>', <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>, <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) <span class="id"><a href="cminorgen_proof.html#fbl">fbl</a></span> -&gt; <span class="id">b</span>' &lt;&gt; <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> = <span class="id"><a href="Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8049')">Proof.</div>
<div class="proofscript" id="proof8049">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>] <span class="id">hi</span>].<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="id">case_eq</span> (<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m1</span> <span class="id">FR1</span> <span class="id">FRL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHfbl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.load_free">Mem.load_free</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_not_equal">sym_not_equal</a></span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="perm_freelist">perm_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8050')">Proof.</div>
<div class="proofscript" id="proof8050">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>] <span class="id">hi</span>]. <span class="id">case_eq</span> (<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nextblock_freelist">nextblock_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8051')">Proof.</div>
<div class="proofscript" id="proof8051">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">m</span>'; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span> <span class="id">lo</span>] <span class="id">hi</span>].<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_freeable">free_list_freeable</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>, <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) <span class="id"><a href="cminorgen_proof.html#l">l</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8052')">Proof.</div>
<div class="proofscript" id="proof8052">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>'] <span class="id">hi</span>'].<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>'); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m1</span> <span class="id">FREE1</span> <span class="id">FREE2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nextblock_storev">nextblock_storev</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#addr">addr</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8053')">Proof.</div>
<div class="proofscript" id="proof8053">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">addr</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Correspondence between C#minor's and Cminor's environments and memory states </h1>
<br/>
<div class="doc">In C#minor, every variable is stored in a separate memory block.
  In the corresponding Cminor code, these variables become sub-blocks
  of the stack data block.  We capture these changes in memory via a
  memory injection <span class="bracket"><span class="id">f</span></span>:
  <span class="bracket"><span class="id">f</span> <span class="id">b</span> = <span class="id">Some</span>(<span class="id">b</span>', <span class="id">ofs</span>)</span> means that C#minor block <span class="bracket"><span class="id">b</span></span> corresponds
  to a sub-block of Cminor block <span class="bracket"><span class="id">b</span></span> at offset <span class="bracket"><span class="id">ofs</span></span>.
  A memory injection <span class="bracket"><span class="id">f</span></span> defines a relation <span class="bracket"><span class="id">Val.inject</span> <span class="id">f</span></span> between
  values and a relation <span class="bracket"><span class="id">Mem.inject</span> <span class="id">f</span></span> between memory states.  These
  relations will be used intensively in our proof of simulation
  between C#minor and Cminor executions. </div>
<br/>
<h2> Matching between Cshaprminor's temporaries and Cminor's variables </h2>
<span class="kwd">Definition</span> <span class="id"><a name="match_temps">match_temps</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">le</span>: <span class="id"><a href="Csharpminor.html#temp_env">Csharpminor.temp_env</a></span>) (<span class="id">te</span>: <span class="id"><a href="Cminor.html#env">env</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span>, <span class="id"><a href="cminorgen_proof.html#le">le</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt; <span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="cminorgen_proof.html#te">te</a></span>!(<span class="id"><a href="cminorgen_proof.html#id">id</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id">v</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_temps_invariant">match_temps_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">le</span> <span class="id">te</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id">f</span>' <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8054')">Proof.</div>
<div class="proofscript" id="proof8054">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_temps_assign">match_temps_assign</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">le</span> <span class="id">te</span> <span class="id">id</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span>) (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8055')">Proof.</div>
<div class="proofscript" id="proof8055">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Matching between C#minor's variable environment and Cminor's stack pointer </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_var">match_var</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_local">match_var_local</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_var">match_var</a></span> <span class="id">f</span> <span class="id">sp</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_global">match_var_global</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_var">match_var</a></span> <span class="id">f</span> <span class="id">sp</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc">Matching between a C#minor environment <span class="bracket"><span class="id">e</span></span> and a Cminor
  stack pointer <span class="bracket"><span class="id">sp</span></span>. The <span class="bracket"><span class="id">lo</span></span> and <span class="bracket"><span class="id">hi</span></span> parameters delimit the range
  of addresses for the blocks referenced from <span class="bracket"><span class="id">te</span></span>. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="match_env">match_env</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">cenv</span>: <span class="id">compilenv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="Values.html#block">block</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_match_env">mk_match_env</a></span> {<br/>
<br/>
<div class="doc">C#minor local variables match sub-blocks of the Cminor stack data block. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_vars">me_vars</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="cminorgen_proof.html#match_var">match_var</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>) (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>);<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">lo</span>, <span class="id">hi</span></span> is a proper interval. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_low_high">me_low_high</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>;<br/>
<br/>
<div class="doc">Every block appearing in the C#minor environment <span class="bracket"><span class="id">e</span></span> must be
  in the range <span class="bracket"><span class="id">lo</span>, <span class="id">hi</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_bounded">me_bounded</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span>, <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> /\ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>;<br/>
<br/>
<div class="doc">All blocks mapped to sub-blocks of the Cminor stack data must be
    images of variables from the C#minor environment <span class="bracket"><span class="id">e</span></span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_inv">me_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id">exists</span> <span class="id">sz</span>, <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>);<br/>
<br/>
<div class="doc">All C#minor blocks below <span class="bracket"><span class="id">lo</span></span> (i.e. allocated before the blocks
  referenced from <span class="bracket"><span class="id">e</span></span>) must map to blocks that are below <span class="bracket"><span class="id">sp</span></span>
  (i.e. allocated before the stack data for the current Cminor function). </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_incr">me_incr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#tb">tb</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#tb">tb</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">geninv</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> (<span class="tactic">generalize</span> <span class="id">x</span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_invariant">match_env_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>, <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8056')">Proof.</div>
<div class="proofscript" id="proof8056">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;vars&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">geninv</span> (<span class="id">me_vars0</span> <span class="id">id</span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;bounded&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;below&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_env</span></span> and external calls </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inject_incr_separated_same">inject_incr_separated_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt; <span class="id"><a href="Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8057')">Proof.</div>
<div class="proofscript" id="proof8057">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">delta</span>] <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">EQ</span>. <span class="id">case_eq</span> (<span class="id">f2</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>'1 <span class="id">delta1</span>] <span class="id">EQ1</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C</span> <span class="id">D</span>]. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">inject_incr_separated_same</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt; <span class="id"><a href="Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span>' <span class="id">b</span>' -&gt; <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8058')">Proof.</div>
<div class="proofscript" id="proof8058">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>'1 <span class="id">delta1</span>] <span class="id">EQ</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C</span> <span class="id">D</span>]. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_external_call">match_env_external_call</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8059')">Proof.</div>
<div class="proofscript" id="proof8059">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> <span class="id">f1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">inject_incr_separated_same</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#inject_incr_separated_same">inject_incr_separated_same</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_env</span></span> and allocations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_alloc">match_env_alloc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">id</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">m1</span> <span class="id">sz</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> (<span class="id"><a href="Maps.html#PTree.remove">PTree.remove</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>) <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> 0 <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> = (<span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>, <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>', <span class="id">b</span>' &lt;&gt; <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id">b</span>' = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8060')">Proof.</div>
<div class="proofscript" id="proof8060">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">f2</span>; <span class="tactic">intros</span> <span class="id">ME</span> <span class="id">ALLOC</span> <span class="id">CENV</span> <span class="id">INCR</span> <span class="id">SAME</span> <span class="id">OTHER</span> <span class="id">ENV</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ME</span>; <span class="id">constructor</span>.<br/>
&nbsp;vars&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;the&nbsp;new&nbsp;var&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">rewrite</span> <span class="id">CENV</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_commut">Ptrofs.add_commut</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;old&nbsp;vars&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id0</span>). <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gro">PTree.gro</a></span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> <span class="id">M</span>; <span class="id">inv</span> <span class="id">M</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;low-high&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
&nbsp;bounded&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">me_bounded0</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id">SAME</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">id</span>; <span class="id">exists</span> <span class="id">sz</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">OTHER</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">exploit</span> <span class="id">me_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">id1</span> [<span class="id">sz1</span> <span class="id">EQ</span>]]. <span class="id">exists</span> <span class="id">id1</span>; <span class="id">exists</span> <span class="id">sz1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;incr&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">OTHER</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The sizes of blocks appearing in <span class="bracket"><span class="id">e</span></span> are respected. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_bounds">match_bounds</a></span> (<span class="id">e</span>: <span class="id"><a href="Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt; 0 &lt;= <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_bounds_invariant">match_bounds_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8061')">Proof.</div>
<div class="proofscript" id="proof8061">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Permissions on the Cminor stack block </h2>
<br/>
<div class="doc">The parts of the Cminor stack data block that are not images of
    C#minor local variable blocks remain freeable at all times. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="is_reachable_from_env">is_reachable_from_env</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">e</span>: <span class="id"><a href="Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="is_reachable_intro">is_reachable_intro</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">sp</span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#delta">delta</a></span> &lt;= <span class="id">ofs</span> &lt; <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span> + <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id">f</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">ofs</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="padding_freeable">padding_freeable</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">e</span>: <span class="id"><a href="Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">tm</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span> \/ <span class="id"><a href="cminorgen_proof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="padding_freeable_invariant">padding_freeable_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">e</span> <span class="id">tm1</span> <span class="id">sp</span> <span class="id">sz</span> <span class="id">cenv</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span> <span class="id">tm2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#padding_freeable">padding_freeable</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#padding_freeable">padding_freeable</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8062')">Proof.</div>
<div class="proofscript" id="proof8062">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">D</span> <span class="id">E</span>].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Decidability of the <span class="bracket"><span class="id">is_reachable_from_env</span></span> predicate. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_reachable_from_env_dec">is_reachable_from_env_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">ofs</span>, <span class="id"><a href="cminorgen_proof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> \/ ~<span class="id"><a href="cminorgen_proof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8063')">Proof.</div>
<div class="proofscript" id="proof8063">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">pred</span> := <span class="kwd">fun</span> <span class="id">id_b_sz</span> : <span class="id"><a href="AST.html#ident">ident</a></span> * (<span class="id"><a href="Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="cminorgen_proof.html#id_b_sz">id_b_sz</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">sp</span>', <span class="id">delta</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">sp</span> <span class="id">sp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">delta</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id">delta</span> + <span class="id">sz</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">List.existsb</a></span> <span class="id">pred</span> (<span class="id"><a href="Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">e</span>)) <span class="id">eqn</span>:?.<br/>
&nbsp;yes&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">List.existsb_exists</a></span> <span class="kwd">in</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Heqb</span> <span class="kwd">as</span> [[<span class="id">id</span> [<span class="id">b</span> <span class="id">sz</span>]] [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">sp</span>' <span class="id">delta</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">sp</span> <span class="id">sp</span>'); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_prop">andb_prop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#proj_sumbool_true">proj_sumbool_true</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;no&nbsp;*)</span>&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intro</span> <span class="id">NE</span>; <span class="id">inv</span> <span class="id">NE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">pred</span> (<span class="id"><a href="Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">e</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">List.existsb_exists</a></span>. <span class="id">exists</span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>)); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#zle_true">zle_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#zlt_true">zlt_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h1> Correspondence between global environments </h1>
<br/>
<div class="doc">Global environments match if the memory injection <span class="bracket"><span class="id">f</span></span> leaves unchanged
  the references to global symbols and functions. </div>
<span class="kwd">Inductive</span> <span class="id"><a name="match_globalenvs">match_globalenvs</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">bound</span>: <span class="id"><a href="Values.html#block">block</a></span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="mk_match_globalenvs">mk_match_globalenvs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GNEXT</span>: <span class="id">bound</span>=<span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DOMAIN</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id">bound</span> -&gt; <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IMAGE</span>: <span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b2">b2</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b2">b2</a></span> <span class="id">bound</span> -&gt; <span class="id"><a href="cminorgen_proof.html#b1">b1</a></span> = <span class="id"><a href="cminorgen_proof.html#b2">b2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SYMBOLS</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id">bound</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FUNCTIONS</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">fd</span>, <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#fd">fd</a></span> -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id">bound</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VARINFOS</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">gv</span>, <span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#gv">gv</a></span> -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id">bound</span>).<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inj_preserves_globals">inj_preserves_globals</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8064')">Proof.</div>
<div class="proofscript" id="proof8064">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">SYMBOLS</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">VARINFOS</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Invariant on abstract call stacks  </h1>
<br/>
<div class="doc">Call stacks represent abstractly the execution state of the current
  C#minor and Cminor functions, as well as the states of the
  calling functions.  A call stack is a list of frames, each frame
  collecting information on the current execution state of a C#minor
  function and its Cminor translation. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="frame">frame</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Frame">Frame</a></span>(<span class="id">cenv</span>: <span class="id">compilenv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">tf</span>: <span class="id"><a href="Cminor.html#function">Cminor.function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="Csharpminor.html#env">Csharpminor.env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="Csharpminor.html#temp_env">Csharpminor.temp_env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">te</span>: <span class="id"><a href="Cminor.html#env">Cminor.env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="Values.html#block">block</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="callstack">callstack</a></span> : <span class="kwd">Type</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="cminorgen_proof.html#frame">frame</a></span>.<br/>
<br/>
<div class="doc">Matching of call stacks imply:
<ul>
<li>
 matching of environments for each of the frames
</li>
<li>
 matching of the global environments
</li>
<li>
 separation conditions over the memory blocks allocated for C#minor local variables;
</li>
<li>
 separation conditions over the memory blocks allocated for Cminor stack data;
</li>
<li>
 freeable permissions on the parts of the Cminor stack data blocks
  that are not images of C#minor local variable blocks.
</li>
</ul>
</div>
<span class="kwd">Inductive</span> <span class="id"><a name="match_callstack">match_callstack</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) (<span class="id">tm</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#callstack">callstack</a></span> -&gt; <span class="id"><a href="Values.html#block">block</a></span> -&gt; <span class="id"><a href="Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="mcs_nil">mcs_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">hi</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_globalenvs">match_globalenvs</a></span> <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> -&gt; <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="mcs_cons">mcs_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TBOUND</span>: <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MTMP</span>: <span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MENV</span>: <span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id"><a href="cminorgen_proof.html#padding_freeable">padding_freeable</a></span> <span class="id">f</span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id">tm</span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLT</span>:~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>) <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_ple_ge">match_callstack_ple_ge</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">b</span> <span class="id">tb</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#tb">tb</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8065')">Proof.</div>
<div class="proofscript" id="proof8065">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">IHcs</span> <span class="kwd">in</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>. <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="doc"><span class="bracket"><span class="id">match_callstack</span></span> implies <span class="bracket"><span class="id">match_globalenvs</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">hi</span>, <span class="id"><a href="cminorgen_proof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8066')">Proof.</div>
<div class="proofscript" id="proof8066">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance properties for <span class="bracket"><span class="id">match_callstack</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_invariant">match_callstack_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">m1</span> <span class="id">tm1</span> <span class="id">f2</span> <span class="id">m2</span> <span class="id">tm2</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">sp</span> <span class="id">ofs</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8067')">Proof.</div>
<div class="proofscript" id="proof8067">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;base&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;inductive&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> <span class="id">hi</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_env_invariant">match_env_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_bounds_invariant">match_bounds_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#padding_freeable_invariant">padding_freeable_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHmatch_callstack</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_incr_bound">match_callstack_incr_bound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">bound</span>' <span class="id">tbound</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id">bound</span>' -&gt; <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> <span class="id">tbound</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id">bound</span>' <span class="id">tbound</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8068')">Proof.</div>
<div class="proofscript" id="proof8068">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Assigning a temporary variable. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_set_temp">match_callstack_set_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">tf</span> <span class="id">id</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>) <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span>) (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>) <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>) <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8069')">Proof.</div>
<div class="proofscript" id="proof8069">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_temps_assign">match_temps_assign</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">match_callstack</span></span> by freeing all blocks allocated
  for local variables at function entry (on the C#minor side)
  and simultaneously freeing the Cminor stack data block. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_blocks_of_env">in_blocks_of_env</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, 0, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8070')">Proof.</div>
<div class="proofscript" id="proof8070">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">b</span>, 0, <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id"><a href="Csharpminor.html#block_of_binding">block_of_binding</a></span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_blocks_of_env_inv">in_blocks_of_env_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>, <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) /\ <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> = 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8071')">Proof.</div>
<div class="proofscript" id="proof8071">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">id</span> [<span class="id">b</span>' <span class="id">sz</span>]] [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor.html#block_of_binding">block_of_binding</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_freelist">match_callstack_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> 0 <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>' <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8072')">Proof.</div>
<div class="proofscript" id="proof8072">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">tm</span>; <span class="tactic">intros</span> <span class="id">INJ</span> <span class="id">FREELIST</span> <span class="id">MCS</span>. <span class="id">inv</span> <span class="id">MCS</span>. <span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ({<span class="id">tm</span>' | <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">tm</span> <span class="id">sp</span> 0 (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id">tf</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>'}).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>. <span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#free_list_freeable">free_list_freeable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env">in_blocks_of_env</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> ((<span class="id">ofs</span> - <span class="id">delta</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_inject">Mem.perm_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span> <span class="kwd">as</span>  [<span class="id">tm</span>' <span class="id">FREE</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#nextblock_freelist">nextblock_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NEXT</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>:<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">f</span> <span class="id">m</span>' <span class="id">tm</span>' <span class="id">cs</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>') /\ <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span> <span class="id">m</span>' <span class="id">tm</span>').<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NEXT</span>; <span class="tactic">rewrite</span> <span class="id">NEXT</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_incr_bound">match_callstack_incr_bound</a></span> <span class="kwd">with</span> <span class="id">lo</span> <span class="id">sp</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#perm_freelist">perm_freelist</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>; <span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span>; <span class="id">xomega</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.free_inject">Mem.free_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">me_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id</span> [<span class="id">sz</span> <span class="id">A</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> 0; <span class="id">exists</span> <span class="id">sz</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env">in_blocks_of_env</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_max">Mem.perm_max</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [<span class="id">MCS</span>' <span class="id">MINJ</span>'].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'. <span class="id">Esimpl</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">match_callstack</span></span> by external calls. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_external_call">match_callstack_external_call</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span>) <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id">m2</span>' <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> <span class="id"><a href="cminorgen_proof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8073')">Proof.</div>
<div class="proofscript" id="proof8073">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">m2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">UNMAPPED</span> <span class="id">OUTOFREACH</span> <span class="id">INCR</span> <span class="id">SEPARATED</span> <span class="id">MAXPERMS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;base&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#mcs_nil">mcs_nil</a></span> <span class="kwd">with</span> <span class="id">hi</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.  <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b2</span>' <span class="id">delta</span>'] <span class="id">EQ</span>. <span class="tactic">rewrite</span> (<span class="id">INCR</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">EQ</span>) <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">EQ</span>. <span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">B</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
&nbsp;inductive&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_env_invariant">match_env_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">SEPARATED</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">B</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> <span class="id">hi</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">INCR</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f2</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_bounds_invariant">match_bounds_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">MAXPERMS</span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>. <span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;padding-freeable&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="cminorgen_proof.html#is_reachable_from_env_dec">is_reachable_from_env_dec</a></span> <span class="id">f1</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">right</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#me_inv">me_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id</span> [<span class="id">lv</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b0</span> <span class="id">lv</span> <span class="id">delta</span>; <span class="tactic">auto</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;induction&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHmatch_callstack</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MENV</span>; <span class="id">xomega</span>. <span class="id">xomega</span>.  <span class="id">xomega</span>.  <br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_callstack</span></span> and allocations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_right">match_callstack_alloc_right</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">tf</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">le</span> <span class="id">te</span> <span class="id">cenv</span> (<span class="id">PROMEM</span>:~<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> 0 <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>) = (<span class="id">tm</span>', <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id">tm</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="Csharpminor.html#empty_env">empty_env</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8074')">Proof.</div>
<div class="proofscript" id="proof8074">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">RES</span>. <span class="id">change</span> (<span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tb</span>). <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> (<span class="id">tm1</span> := <span class="id">tm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">RES</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_left">match_callstack_alloc_left</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">m1</span> <span class="id">tm</span> <span class="id">id</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">f2</span> <span class="id">ofs</span> (<span class="id">PROMEM</span>:~<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)) ,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> (<span class="id"><a href="Maps.html#PTree.remove">PTree.remove</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>) <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> 0 <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> = (<span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>, <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>', <span class="id">b</span>' &lt;&gt; <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id">b</span>' = <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8075')">Proof.</div>
<div class="proofscript" id="proof8075">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LO</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_env_alloc">match_env_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">sz0</span> <span class="id">id0</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]. <span class="tactic">auto</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id0</span> <span class="id">b0</span> <span class="id">sz0</span> <span class="id">delta</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H4</span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">xomegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Correctness of stack allocation of local variables </h1>
<br/>
<div class="doc">This section shows the correctness of the translation of Csharpminor
  local variables as sub-blocks of the Cminor stack data.  This is the most difficult part of the proof. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_remove">cenv_remove</a></span> (<span class="id">cenv</span>: <span class="id">compilenv</span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="id">compilenv</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> (<span class="kwd">fun</span> <span class="id">id_lv</span> <span class="id">ce</span> =&gt; <span class="id"><a href="Maps.html#PTree.remove">PTree.remove</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#id_lv">id_lv</a></span>) <span class="id"><a href="cminorgen_proof.html#ce">ce</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="cenv_remove_gso">cenv_remove_gso</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="cminorgen_proof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) = <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8076')">Proof.</div>
<div class="proofscript" id="proof8076">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gro">PTree.gro</a></span>. <span class="tactic">apply</span> <span class="id">IHvars</span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="cenv_remove_gss">cenv_remove_gss</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="cminorgen_proof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8077')">Proof.</div>
<div class="proofscript" id="proof8077">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.grspec">PTree.grspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">a</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">intuition</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_compat">cenv_compat</a></span> (<span class="id">cenv</span>: <span class="id">compilenv</span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) (<span class="id">tsz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ 0 &lt;= <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> 0 <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> &lt;= <span class="id"><a href="cminorgen_proof.html#tsz">tsz</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_separated">cenv_separated</a></span> (<span class="id">cenv</span>: <span class="id">compilenv</span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id1</span> <span class="id">sz1</span> <span class="id">ofs1</span> <span class="id">id2</span> <span class="id">sz2</span> <span class="id">ofs2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#id1">id1</a></span>, <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#id2">id2</a></span>, <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id1">id1</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs1">ofs1</a></span> -&gt; <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id2">id2</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs2">ofs2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="cminorgen_proof.html#id2">id2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#ofs1">ofs1</a></span> + <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span> &lt;= <span class="id"><a href="cminorgen_proof.html#ofs2">ofs2</a></span> \/ <span class="id"><a href="cminorgen_proof.html#ofs2">ofs2</a></span> + <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span> &lt;= <span class="id"><a href="cminorgen_proof.html#ofs1">ofs1</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_mem_separated">cenv_mem_separated</a></span> (<span class="id">cenv</span>: <span class="id">compilenv</span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">b</span> <span class="id">delta</span> <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt; <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>, <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id">ofs</span>' <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="cminorgen_proof.html#delta">delta</a></span> &lt; <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> + <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_variables_rec">match_callstack_alloc_variables_rec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span> <span class="id">sp</span> <span class="id">tf</span> <span class="id">cenv</span> <span class="id">le</span> <span class="id">te</span> <span class="id">lo</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span> -&gt; 0 &lt;= <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, 0 &lt;= <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">m1</span> <span class="id">vars</span> <span class="id">e2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="cminorgen_proof.html#e1">e1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#e2">e2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">mu</span> (<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)(<span class="id">PROMEM</span>:~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_mem_separated">cenv_mem_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt; <span class="id"><a href="cminorgen_proof.html#e1">e1</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> (<span class="id"><a href="cminorgen_proof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e1">e1</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e2">e2</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> /\ <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8078')">Proof.</div>
<div class="proofscript" id="proof8078">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">cs</span>; <span class="tactic">intros</span> <span class="id">VALID</span> <span class="id">REPRES</span> <span class="id">STKSIZE</span> <span class="id">STKPERMS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">f1</span> <span class="id">mu</span> <span class="id">AGMU</span> <span class="id">PROMEM</span> <span class="id">NOREPET</span> <span class="id">COMPAT</span> <span class="id">SEP1</span> <span class="id">SEP2</span> <span class="id">UNBOUND</span> <span class="id">MCS</span> <span class="id">MINJ</span>.<br/>
&nbsp;base&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">MCS</span>. <span class="id">exists</span> <span class="id">f1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;inductive&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NOREPET</span>. <span class="id">inv</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">COMPAT</span> <span class="id">id</span> <span class="id">sz</span>). <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">CENV</span> [<span class="id">ALIGNED</span> [<span class="id">LOB</span> <span class="id">HIB</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.alloc_left_mapped_inject">Mem.alloc_left_mapped_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">MINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">VALID</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">ofs</span>). <span class="id">zify</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">STKSIZE</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">STKPERMS</span>. <span class="id">zify</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">sz</span> - 0) <span class="kwd">with</span> <span class="id">sz</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">SEP2</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="id">eexact</span> <span class="id">CENV</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f2</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">E</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id">f2</span> <span class="id">mu</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b</span>' (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">n</span>. <span class="tactic">rewrite</span> <span class="id">n</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">C</span>;<span class="id">inv</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span> <span class="kwd">in</span> <span class="id">MCS</span> <span class="kwd">as</span> [? <span class="id">MCS</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_inject</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inj_range</span>' <span class="kwd">in</span> <span class="id">Heqo</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHalloc_variables</span> <span class="id">f2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">COMPAT</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">SEP1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id">C</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEP1</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_eq">in_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">elim</span> <span class="id">H3</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEP2</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">eapply</span> <span class="id">UNBOUND</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">elim</span> <span class="id">H3</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_alloc_left">match_callstack_alloc_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#cenv_remove_gso">cenv_remove_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">UNBOUND</span> <span class="kwd">with</span> <span class="id">sz</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_variables">match_callstack_alloc_variables</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm1</span> <span class="id">sp</span> <span class="id">tm2</span> <span class="id">m1</span> <span class="id">vars</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">cenv</span> <span class="id">f1</span> <span class="id">cs</span> <span class="id">fn</span> <span class="id">le</span> <span class="id">te</span> <span class="id">mu</span> (<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)(<span class="id">PROMEM</span>:~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> 0 (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) = (<span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span>, <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="Csharpminor.html#empty_env">empty_env</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm1">tm1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f1">f1</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m1">m1</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#m2">m2</a></span> <span class="id"><a href="cminorgen_proof.html#tm2">tm2</a></span> /\ <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f2">f2</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8079')">Proof.</div>
<div class="proofscript" id="proof8079">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_alloc_variables_rec">match_callstack_alloc_variables_rec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">eelim</span> <span class="id"><a href="Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_alloc_right">match_callstack_alloc_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#cenv_remove_gss">cenv_remove_gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#cenv_remove_gso">cenv_remove_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">cenv</span>!<span class="id">id</span>) <span class="kwd">as</span> [<span class="id">ofs</span>|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>. <span class="tactic">elim</span> <span class="id">n</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_right_inject">Mem.alloc_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of the compilation environment produced by <span class="bracket"><span class="id">build_compilenv</span></span> </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="block_alignment_pos">block_alignment_pos</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sz</span>, <span class="id">block_alignment</span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> &gt; 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8080')">Proof.</div>
<div class="proofscript" id="proof8080">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">block_alignment</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 2). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 4). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 8); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="assign_variable_incr">assign_variable_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">cenv</span> <span class="id">stksz</span> <span class="id">cenv</span>' <span class="id">stksz</span>',<br/>
&nbsp;&nbsp;<span class="id">assign_variable</span> (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>, <span class="id"><a href="cminorgen_proof.html#stksz">stksz</a></span>) (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) = (<span class="id">cenv</span>', <span class="id">stksz</span>') -&gt; <span class="id"><a href="cminorgen_proof.html#stksz">stksz</a></span> &lt;= <span class="id">stksz</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8081')">Proof.</div>
<div class="proofscript" id="proof8081">
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Coqlib.html#align_le">align_le</a></span> <span class="id">stksz</span> (<span class="id">block_alignment</span> <span class="id">sz</span>) (<span class="id"><a href="cminorgen_proof.html#block_alignment_pos">block_alignment_pos</a></span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> 0 <span class="id">sz</span>). <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Zmax_bound_l">Zmax_bound_l</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="assign_variables_incr">assign_variables_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">cenv</span> <span class="id">sz</span> <span class="id">cenv</span>' <span class="id">sz</span>',<br/>
&nbsp;&nbsp;<span class="id">assign_variables</span> (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> = (<span class="id">cenv</span>', <span class="id">sz</span>') -&gt; <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> &lt;= <span class="id">sz</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8082')">Proof.</div>
<div class="proofscript" id="proof8082">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">sz</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
<span class="id">Opaque</span> <span class="id">assign_variable</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">s</span>]. <span class="tactic">simpl</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">assign_variable</span> (<span class="id">cenv</span>, <span class="id">sz</span>) (<span class="id">id</span>, <span class="id">s</span>)) <span class="kwd">as</span> [<span class="id">cenv1</span> <span class="id">sz1</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> <span class="id">sz1</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#assign_variable_incr">assign_variable_incr</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
<span class="id">Transparent</span> <span class="id">assign_variable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inj_offset_aligned_block">inj_offset_aligned_block</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">stacksize</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> (<span class="id"><a href="Coqlib.html#align">align</a></span> <span class="id"><a href="cminorgen_proof.html#stacksize">stacksize</a></span> (<span class="id">block_alignment</span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>)) <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8083')">Proof.</div>
<div class="proofscript" id="proof8083">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> (<span class="id">block_alignment</span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#align_chunk">align_chunk</a></span>.  <span class="tactic">unfold</span> <span class="id">block_alignment</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zone_divide">Zone_divide</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zdivide_refl">Zdivide_refl</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (2 | 4). <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (2 | 8). <span class="id">exists</span> 4; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (4 | 8). <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 2).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 4).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 8).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#align_divides">align_divides</a></span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#block_alignment_pos">block_alignment_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">inj_offset_aligned_block</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">stacksize</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> (<span class="id"><a href="Coqlib.html#align">align</a></span> <span class="id"><a href="cminorgen_proof.html#stacksize">stacksize</a></span> (<span class="id">block_alignment</span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> 0 <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8084')">Proof.</div>
<div class="proofscript" id="proof8084">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">block_alignment</span> <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id">block_alignment</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> 0 <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#inj_offset_aligned_block">inj_offset_aligned_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#Zmax_spec">Zmax_spec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 0); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> 1. <span class="tactic">reflexivity</span>. <span class="tactic">unfold</span> <span class="id">block_alignment</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variable_sound">assign_variable_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv1</span> <span class="id">sz1</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">cenv2</span> <span class="id">sz2</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id">assign_variable</span> (<span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span>, <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span>) (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) = (<span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span>, <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span>) -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span> (<span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> ++ (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span> (<span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> ++ (<span class="id"><a href="cminorgen_proof.html#id">id</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8085')">Proof.</div>
<div class="proofscript" id="proof8085">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">assign_variable</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">vars</span>; <span class="tactic">intros</span> <span class="id">ASV</span> <span class="id">NOREPET</span> <span class="id">POS</span> <span class="id">COMPAT</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ASV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LE</span>: <span class="id">sz1</span> &lt;= <span class="id"><a href="Coqlib.html#align">align</a></span> <span class="id">sz1</span> (<span class="id">block_alignment</span> <span class="id">sz</span>)). <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#align_le">align_le</a></span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#block_alignment_pos">block_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="kwd">forall</span> <span class="id">id</span>' <span class="id">sz</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">id</span>', <span class="id">sz</span>') (<span class="id">vars</span> ++ (<span class="id">id</span>, <span class="id">sz</span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">id</span>', <span class="id">sz</span>') <span class="id">vars</span> /\ <span class="id">id</span>' &lt;&gt; <span class="id">id</span> \/ (<span class="id">id</span>', <span class="id">sz</span>') = (<span class="id">id</span>, <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id</span>'. <span class="tactic">elim</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz</span>')). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">P</span> <span class="id">Q</span>] | <span class="id">P</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">P</span>. <span class="id">exists</span> (<span class="id"><a href="Coqlib.html#align">align</a></span> <span class="id">sz1</span> (<span class="id">block_alignment</span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#inj_offset_aligned_block">inj_offset_aligned_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">P</span> <span class="id">Q</span>] | <span class="id">P</span>]; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [[<span class="id">R</span> <span class="id">S</span>] | <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">R</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs</span> = <span class="id">ofs1</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">P</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs</span> = <span class="id">ofs2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variables_sound">assign_variables_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span>' <span class="id">cenv1</span> <span class="id">sz1</span> <span class="id">cenv2</span> <span class="id">sz2</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id">assign_variables</span> (<span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span>, <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span>) <span class="id">vars</span>' = (<span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span>, <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars</span>' ++ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv1">cenv1</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span> (<span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> ++ <span class="id">vars</span>') <span class="id"><a href="cminorgen_proof.html#sz2">sz2</a></span> /\ <span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv2">cenv2</a></span> (<span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> ++ <span class="id">vars</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8086')">Proof.</div>
<div class="proofscript" id="proof8086">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>'; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">sz</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#list_norepet_app">list_norepet_app</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">assign_variable</span> (<span class="id">cenv1</span>, <span class="id">sz1</span>) (<span class="id">id</span>, <span class="id">sz</span>)) <span class="kwd">as</span> [<span class="id">cenv</span>' <span class="id">sz</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#assign_variable_sound">assign_variable_sound</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">vars</span>). <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHvars</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">vars</span> ++ ((<span class="id">id</span>, <span class="id">sz</span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#list_norepet_app">list_norepet_app</a></span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_norepet_append_commut">list_norepet_append_commut</a></span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">simpl</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">subst</span> <span class="id">y</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">x</span>. <span class="tactic">tauto</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="cminorgen_proof.html#assign_variable_incr">assign_variable_incr</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqp</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="permutation_norepet">permutation_norepet</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">l</span> <span class="id">l</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="cminorgen_proof.html#A">A</a></span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id"><a href="cminorgen_proof.html#l">l</a></span> <span class="id">l</span>' -&gt; <span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="cminorgen_proof.html#l">l</a></span> -&gt; <span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> <span class="id">l</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8087')">Proof.</div>
<div class="proofscript" id="proof8087">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">l</span>'; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_sym">Permutation_sym</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">constructor</span>. <span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="build_compilenv_sound">build_compilenv_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id">build_compilenv</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>) <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> /\ <span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8088')">Proof.</div>
<div class="proofscript" id="proof8088">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">build_compilenv</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars1</span> := <span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id">f</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">VarSort.Permuted_sort</span> <span class="id">vars1</span>). <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars2</span> := <span class="id">VarSort.sort</span> <span class="id">vars1</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="cminorgen_proof.html#cenv_compat">cenv_compat</a></span> <span class="id">cenv</span> <span class="id">vars2</span> <span class="id">sz</span> /\ <span class="id"><a href="cminorgen_proof.html#cenv_separated">cenv_separated</a></span> <span class="id">cenv</span> <span class="id">vars2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">vars2</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> ++ <span class="id">vars2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#assign_variables_sound">assign_variables_sound</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#permutation_norepet">permutation_norepet</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation_map</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">vars1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">B</span>; <span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">vars1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variables_domain">assign_variables_domain</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cesz</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">assign_variables</span> <span class="id"><a href="cminorgen_proof.html#cesz">cesz</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>))!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#cesz">cesz</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8089')">Proof.</div>
<div class="proofscript" id="proof8089">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">assign_variable</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">sz1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cesz</span> <span class="kwd">as</span> [<span class="id">cenv</span> <span class="id">stksz</span>]. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>). <span class="tactic">auto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="build_compilenv_domain">build_compilenv_domain</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">sz</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id">build_compilenv</span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>, <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8090')">Proof.</div>
<div class="proofscript" id="proof8090">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">build_compilenv</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars1</span> := <span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id">f</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">VarSort.Permuted_sort</span> <span class="id">vars1</span>). <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars2</span> := <span class="id">VarSort.sort</span> <span class="id">vars1</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="cminorgen_proof.html#assign_variables_domain">assign_variables_domain</a></span> <span class="id">id</span> <span class="id">vars2</span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, 0)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars2</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_sym">Permutation_sym</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Initialization of C#minor temporaries and Cminor local variables. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_val">create_undef_temps_val</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span> <span class="id">temps</span>, (<span class="id"><a href="Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="cminorgen_proof.html#temps">temps</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#temps">temps</a></span> /\ <span class="id"><a href="cminorgen_proof.html#v">v</a></span> = <span class="id"><a href="Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8091')">Proof.</div>
<div class="proofscript" id="proof8091">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">temps</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHtemps</span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">set_params</span>' (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#ident">ident</a></span>) (<span class="id">te</span>: <span class="id"><a href="Cminor.html#env">Cminor.env</a></span>) : <span class="id"><a href="Cminor.html#env">Cminor.env</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span>, <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">i1</span> :: <span class="id">is</span>, <span class="id">v1</span> :: <span class="id">vs</span> =&gt; <span class="id">set_params</span>' <span class="id">vs</span> <span class="id">is</span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id">i1</span> <span class="id">v1</span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">i1</span> :: <span class="id">is</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id">set_params</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">is</span> (<span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span> <span class="id">i1</span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="cminorgen_proof.html#te">te</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_agree_rec">bind_parameters_agree_rec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">vars</span> <span class="id">vals</span> <span class="id">tvals</span> <span class="id">le1</span> <span class="id">le2</span> <span class="id">te</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> <span class="id"><a href="cminorgen_proof.html#le1">le1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#le2">le2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> <span class="id"><a href="cminorgen_proof.html#tvals">tvals</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le1">le1</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le2">le2</a></span> (<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#tvals">tvals</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8092')">Proof.</div>
<div class="proofscript" id="proof8092">
<span class="id">Opaque</span> <span class="id"><a href="Maps.html#PTree.set">PTree.set</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vals</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vals</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params</span>'<span class="id">_outside</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">te</span>, ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> -&gt; (<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="cminorgen_proof.html#te">te</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8093')">Proof.</div>
<div class="proofscript" id="proof8093">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vl</span>; <span class="tactic">rewrite</span> <span class="id">IHil</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params</span>'<span class="id">_inside</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">te1</span> <span class="id">te2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> <span class="id"><a href="cminorgen_proof.html#te1">te1</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = (<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> <span class="id"><a href="cminorgen_proof.html#te2">te2</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8094')">Proof.</div>
<div class="proofscript" id="proof8094">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vl</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>); <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">a</span> = <span class="id">id</span>) <span class="tactic">by</span> <span class="tactic">intuition</span>; <span class="tactic">subst</span> <span class="id">a</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params_set_params</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = (<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#vl">vl</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="Values.html#val">val</a></span>))!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8095')">Proof.</div>
<div class="proofscript" id="proof8095">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">vl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHil</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>). <span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHil</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>). <span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_locals_outside">set_locals_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">il</span>,<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> -&gt; (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="cminorgen_proof.html#e">e</a></span>!<span class="id"><a href="cminorgen_proof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8096')">Proof.</div>
<div class="proofscript" id="proof8096">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">apply</span> <span class="id">IHil</span>. <span class="tactic">tauto</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_locals_inside">set_locals_inside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">il</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> -&gt; (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="cminorgen_proof.html#il">il</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>)!<span class="id"><a href="cminorgen_proof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8097')">Proof.</div>
<div class="proofscript" id="proof8097">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>). <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_locals_set_params</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">vals</span> <span class="id">params</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_disjoint">list_disjoint</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span>)) ! <span class="id"><a href="cminorgen_proof.html#id">id</a></span> =<br/>
&nbsp;&nbsp;(<span class="id">set_params</span>' <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="Values.html#val">val</a></span>))) ! <span class="id"><a href="cminorgen_proof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8098')">Proof.</div>
<div class="proofscript" id="proof8098">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">vars</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id</span> <span class="id">params</span>). <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_disjoint_notin">list_disjoint_notin</a></span> <span class="kwd">with</span> <span class="id">vars</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_disjoint_sym">list_disjoint_sym</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#set_locals_outside">set_locals_outside</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">set_params_set_params</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">params</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#set_locals_outside">set_locals_outside</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_agree">bind_parameters_agree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">params</span> <span class="id">temps</span> <span class="id">vals</span> <span class="id">tvals</span> <span class="id">le</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> (<span class="id"><a href="Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="cminorgen_proof.html#temps">temps</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#vals">vals</a></span> <span class="id"><a href="cminorgen_proof.html#tvals">tvals</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_disjoint">list_disjoint</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span> <span class="id"><a href="cminorgen_proof.html#temps">temps</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_temps">match_temps</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> (<span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="cminorgen_proof.html#temps">temps</a></span> (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="cminorgen_proof.html#tvals">tvals</a></span> <span class="id"><a href="cminorgen_proof.html#params">params</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8099')">Proof.</div>
<div class="proofscript" id="proof8099">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#bind_parameters_agree_rec">bind_parameters_agree_rec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> <span class="id">temps</span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="Values.html#val">val</a></span>)).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#create_undef_temps_val">create_undef_temps_val</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">subst</span> <span class="id">v0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id">set_locals_set_params</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The main result in this section. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_callstack_function_entry">match_callstack_function_entry</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">m</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">tm</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">args</span> <span class="id">targs</span> <span class="id">le</span> <span class="id">mu</span> (<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)(<span class="id">PROMEM</span>:~<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;<span class="id">build_compilenv</span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> = (<span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span>, <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>) &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_disjoint">list_disjoint</a></span> (<span class="id"><a href="Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) (<span class="id"><a href="Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="Csharpminor.html#empty_env">Csharpminor.empty_env</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> (<span class="id"><a href="Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#bind_parameters">bind_parameters</a></span> (<span class="id"><a href="Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) <span class="id"><a href="cminorgen_proof.html#args">args</a></span> (<span class="id"><a href="Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>.(<span class="id"><a href="Csharpminor.html#fn_temps">fn_temps</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#args">args</a></span> <span class="id"><a href="cminorgen_proof.html#targs">targs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> 0 <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span>) = (<span class="id">tm</span>', <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">te</span> := <span class="id"><a href="Cminor.html#set_locals">set_locals</a></span> (<span class="id"><a href="Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>) (<span class="id"><a href="Cminor.html#set_params">set_params</a></span> <span class="id"><a href="cminorgen_proof.html#targs">targs</a></span> (<span class="id"><a href="Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">tm</span>' /\ <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id">f</span>' <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8100')">Proof.</div>
<div class="proofscript" id="proof8100">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#build_compilenv_sound">build_compilenv_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C1</span> <span class="id">C2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_alloc_variables">match_callstack_alloc_variables</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#build_compilenv_domain">build_compilenv_domain</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#bind_parameters_agree">bind_parameters_agree</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Compatibility of evaluation functions with respect to memory injections. </h1>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_val_of_bool">val_inject_val_of_bool</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">b</span>, <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Values.html#Val.of_bool">Val.of_bool</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) (<span class="id"><a href="Values.html#Val.of_bool">Val.of_bool</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8101')">Proof.</div>
<div class="proofscript" id="proof8101">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ob</span>, <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Values.html#Val.of_optbool">Val.of_optbool</a></span> <span class="id"><a href="cminorgen_proof.html#ob">ob</a></span>) (<span class="id"><a href="Values.html#Val.of_optbool">Val.of_optbool</a></span> <span class="id"><a href="cminorgen_proof.html#ob">ob</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8102')">Proof.</div>
<div class="proofscript" id="proof8102">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">ob</span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">TrivialExists</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#y">y</a></span> /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span> | <span class="tactic">try</span>(<span class="id">econstructor</span>; <span class="tactic">eauto</span>)]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Compatibility of <span class="bracket"><span class="id">eval_unop</span></span> with respect to <span class="bracket"><span class="id">Val.inject</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_unop_compat">eval_unop_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">tv1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_unop">eval_unop</a></span> <span class="id"><a href="cminorgen_proof.html#op">op</a></span> <span class="id"><a href="cminorgen_proof.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v1">v1</a></span> <span class="id"><a href="cminorgen_proof.html#tv1">tv1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_unop">eval_unop</a></span> <span class="id"><a href="cminorgen_proof.html#op">op</a></span> <span class="id"><a href="cminorgen_proof.html#tv1">tv1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8103')">Proof.</div>
<div class="proofscript" id="proof8103">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">inv</span> <span class="id">H</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="id">TrivialExists</span>;<span class="tactic">unfold</span> <span class="id"><a href="Coqlib.html#option_map">option_map</a></span> <span class="kwd">in</span> *;<span class="id">inv_eq</span>;<span class="id">inv</span> <span class="id">H2</span>; <span class="id">TrivialExists</span>;<span class="tactic">try</span> <span class="id">constructor</span>; <span class="tactic">fail</span>).<br/>
Qed.</div>
<br/>
<div class="doc">Compatibility of <span class="bracket"><span class="id">eval_binop</span></span> with respect to <span class="bracket"><span class="id">Val.inject</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_binop_compat">eval_binop_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">tv1</span> <span class="id">v2</span> <span class="id">tv2</span> <span class="id">v</span> <span class="id">m</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_binop">eval_binop</a></span> <span class="id"><a href="cminorgen_proof.html#op">op</a></span> <span class="id"><a href="cminorgen_proof.html#v1">v1</a></span> <span class="id"><a href="cminorgen_proof.html#v2">v2</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v1">v1</a></span> <span class="id"><a href="cminorgen_proof.html#tv1">tv1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v2">v2</a></span> <span class="id"><a href="cminorgen_proof.html#tv2">tv2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_binop">eval_binop</a></span> <span class="id"><a href="cminorgen_proof.html#op">op</a></span> <span class="id"><a href="cminorgen_proof.html#tv1">tv1</a></span> <span class="id"><a href="cminorgen_proof.html#tv2">tv2</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8104')">Proof.</div>
<div class="proofscript" id="proof8104">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">TrivialExists</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H1</span>;<span class="id">constructor</span>;<span class="tactic">fail</span>).<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.add_inject">Val.add_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.sub_inject">Val.sub_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.mone">Int.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.mone">Int.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;cmp&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="id">eexists</span>; <span class="tactic">split</span>; [<span class="tactic">eauto</span>|]. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>) <span class="id">c</span> <span class="id">v1</span> <span class="id">v2</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span>) <span class="id">c</span> <span class="id">tv1</span> <span class="id">tv2</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="Values.html#Val.cmpu_bool_inject">Val.cmpu_bool_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
- <span class="comment">(*&nbsp;cmpf&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpfs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmpl">Val.cmpl</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmplu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmplu">Val.cmplu</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.cmplu_bool">Val.cmplu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>) <span class="id">c</span> <span class="id">v1</span> <span class="id">v2</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Values.html#Val.cmplu_bool">Val.cmplu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span>) <span class="id">c</span> <span class="id">tv1</span> <span class="id">tv2</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="Values.html#Val.cmplu_bool_inject">Val.cmplu_bool_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<br/>
<h1> Correctness of Cminor construction functions </h1>
<br/>
<div class="doc">Correctness of the variable accessor <span class="bracket"><span class="id">var_addr</span></span> </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="var_addr_correct">var_addr_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">id</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span> <span class="id">cs</span> <span class="id">tm</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> (<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#eval_var_addr">eval_var_addr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_expr">eval_expr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> (<span class="id">var_addr</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#id">id</a></span>) <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8105')">Proof.</div>
<div class="proofscript" id="proof8105">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">var_addr</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="cminorgen_proof.html#match_var">match_var</a></span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span>!<span class="id">id</span> <span class="id">cenv</span>!<span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">MENV</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;local&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">ofs</span>)); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;global&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bnd</span> <span class="id">MG</span>]. <span class="id">inv</span> <span class="id">MG</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Semantic preservation for the translation </h1>
<br/>
<div class="doc">The proof of semantic preservation uses simulation diagrams of the
  following form:
<pre>
       e, m1, s ----------------- sp, te1, tm1, ts
          |                                |
         t|                                |t
          v                                v
       e, m2, out --------------- sp, te2, tm2, tout</pre>
  where <span class="bracket"><span class="id">ts</span></span> is the Cminor statement obtained by translating the
  C#minor statement <span class="bracket"><span class="id">s</span></span>.  The left vertical arrow is an execution
  of a C#minor statement.  The right vertical arrow is an execution
  of a Cminor statement.  The precondition (top vertical bar)
  includes a <span class="bracket"><span class="id">mem_inject</span></span> relation between the memory states <span class="bracket"><span class="id">m1</span></span> and <span class="bracket"><span class="id">tm1</span></span>,
  and a <span class="bracket"><span class="id">match_callstack</span></span> relation for any callstack having
  <span class="bracket"><span class="id">e</span></span>, <span class="bracket"><span class="id">te1</span></span>, <span class="bracket"><span class="id">sp</span></span> as top frame.  The postcondition (bottom vertical bar)
  is the existence of a memory injection <span class="bracket"><span class="id">f2</span></span> that extends the injection
  <span class="bracket"><span class="id">f1</span></span> we started with, preserves the <span class="bracket"><span class="id">match_callstack</span></span> relation for
  the transformed callstack at the final state, and validates a
  <span class="bracket"><span class="id">outcome_inject</span></span> relation between the outcomes <span class="bracket"><span class="id">out</span></span> and <span class="bracket"><span class="id">tout</span></span>.
</div>
<br/>
<h2> Semantic preservation for expressions </h2>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bool_of_val_inject">bool_of_val_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.bool_of_val">Val.bool_of_val</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> -&gt; <span class="id"><a href="Values.html#Val.bool_of_val">Val.bool_of_val</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8106')">Proof.</div>
<div class="proofscript" id="proof8106">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_constant_correct">transl_constant_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">cst</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#eval_constant">Csharpminor.eval_constant</a></span> <span class="id"><a href="cminorgen_proof.html#cst">cst</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_constant">eval_constant</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id">transl_constant</span> <span class="id"><a href="cminorgen_proof.html#cst">cst</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8107')">Proof.</div>
<div class="proofscript" id="proof8107">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cst</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id">f0</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vsingle">Vsingle</a></span> <span class="id">f0</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_correct">transl_expr_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#eval_expr">Csharpminor.eval_expr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_expr</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_expr">eval_expr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8108')">Proof.</div>
<div class="proofscript" id="proof8108">
&nbsp;&nbsp;<span class="tactic">induction</span> 3; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">TR</span>; <span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">TR</span>).<br/>
&nbsp;Etempvar&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">exploit</span> <span class="id">MTMP</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Eaddrof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#var_addr_correct">var_addr_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Econst&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_constant_correct">transl_constant_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Eunop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#eval_unop_compat">eval_unop_compat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Ebinop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">EVAL2</span> <span class="id">INJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#eval_binop_compat">eval_binop_compat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Eload&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">LOAD</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AGMU_Tgt_plt">AGMU_Tgt_plt</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">mu</span> (<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)(<span class="id">S_EQ</span>:<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8109')">Proof.</div>
<div class="proofscript" id="proof8109">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>. <span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_fp_match">store_fp_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>)(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>))(<span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> <span class="id">b</span>' (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8110')">Proof.</div>
<div class="proofscript" id="proof8110">
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>,<span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span>,<span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">intros</span>;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span> <span class="kwd">in</span> <span class="id">MATCH</span> <span class="kwd">as</span> [? <span class="id">MATCH</span>].<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">auto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>';<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">R</span>';<span class="id">inv</span> <span class="id">R</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_fp_match">storev_fp_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>)(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span>))(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="cminorgen_proof.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8111')">Proof.</div>
<div class="proofscript" id="proof8111">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#store_fp_match">store_fp_match</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_fp_correct">transl_expr_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Csharpminor_local.html#eval_expr_fp">Csharpminor_local.eval_expr_fp</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_expr</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8112')">Proof.</div>
<div class="proofscript" id="proof8112">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 3;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>. <br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#var_addr_correct">var_addr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">var_addr</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">cenv</span> ! <span class="id">id</span>) <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_constant_correct">transl_constant_correct</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHeval_expr_fp</span> <span class="kwd">in</span> <span class="id">EQ</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#eval_unop_compat">eval_unop_compat</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHeval_expr_fp1</span> <span class="kwd">in</span> <span class="id">EQ</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHeval_expr_fp2</span> <span class="kwd">in</span> <span class="id">EQ1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#eval_binop_compat">eval_binop_compat</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id">exists</span> <span class="id">tfp</span>', <span class="id"><a href="Csharpminor_local.html#eval_binop_fp">eval_binop_fp</a></span> <span class="id">op</span> <span class="id">x4</span> <span class="id">x3</span> <span class="id">tm</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tfp</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#ofs">ofs</a></span> <span class="id">fp3</span> <span class="id">tfp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H8</span> <span class="id">_</span> <span class="id">ofs</span> <span class="id">H17</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">_</span> <span class="id">ofs</span> <span class="id">H17</span>). <span class="tactic">rewrite</span>&lt;- <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H16</span> <span class="id">_</span> <span class="id">ofs</span> <span class="id">H17</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_union">in_fps_union</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_union">in_fps_union</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor.html#eval_binop">eval_binop</a></span>,<span class="id"><a href="Csharpminor_local.html#eval_binop_fp">eval_binop_fp</a></span>, <span class="id"><a href="Cminor_op_footprint.html#eval_binop_fp">Cminor_op_footprint.eval_binop_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">exists</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span>;<span class="tactic">split</span>;[<span class="tactic">reflexivity</span>|<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>];<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">inv</span> <span class="id">H11</span>;<span class="id">inv</span> <span class="id">H12</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="id">inv_eq</span>;<span class="id">exists</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span>;<span class="tactic">split</span>;[<span class="tactic">reflexivity</span>|<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>]).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span> <span class="kwd">in</span> <span class="id">MATCH</span> <span class="kwd">as</span> <span class="id">MATCHG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MATCHG</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span> <span class="kwd">in</span> <span class="id">IMAGE</span>,<span class="id">DOMAIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#cmpu_fp_infps">cmpu_fp_infps</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHeval_expr_fp</span> <span class="id">_</span> <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span> <span class="kwd">in</span> <span class="id">MATCH</span> <span class="kwd">as</span> <span class="id">MATCHG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MATCHG</span> <span class="kwd">as</span> [? <span class="id">MATCHG</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCHG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_union">in_fps_union</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#load_fp">FMemOpFP.load_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="tactic">simpl</span>;<span class="id">Esimpl</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">subst</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_exprlist_correct">transl_exprlist_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#eval_exprlist">Csharpminor.eval_exprlist</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_exprlist</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8113')">Proof.</div>
<div class="proofscript" id="proof8113">
&nbsp;&nbsp;<span class="tactic">induction</span> 3; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Values.html#val">val</a></span>); <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">VINJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exprlist</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">EVAL2</span> <span class="id">VINJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tv1</span> :: <span class="id">tv2</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Csharpminor_local.html#eval_exprlist_fp">Csharpminor_local.eval_exprlist_fp</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#eval_exprlist">Csharpminor.eval_exprlist</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_exprlist</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#a">a</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor_local.html#eval_exprlist_fp">eval_exprlist_fp</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#ta">ta</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8114')">Proof.</div>
<div class="proofscript" id="proof8114">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 3;<span class="tactic">intros</span>;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>. <br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exprlist_fp</span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_exprlist_correct">transl_exprlist_correct</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_union">in_fps_union</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id">fp_match_FPMatch</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">tfp</span> <span class="id">mu</span> <span class="id">f</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H</span>:<span class="id"><a href="infp.html#fp_match">fp_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MGE</span>:<span class="id"><a href="cminorgen_proof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Injections.FPMatch</span>' <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> <span class="id"><a href="cminorgen_proof.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8115')">Proof.</div>
<div class="proofscript" id="proof8115">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>;<span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">AGMU</span>;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>;<span class="id">inv</span> <span class="id">MGE</span>; <span class="id">constructor</span>;<span class="id">constructor</span>;<span class="tactic">intros</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inject_block">Bset.inject_block</a></span>; [<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_cmps">FP.ge_cmps</a></span>|<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_reads">FP.ge_reads</a></span>|<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_writes">FP.ge_writes</a></span>|<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_frees">FP.ge_frees</a></span>]; <span class="tactic">apply</span> <span class="id"><a href="InjRels.html#proper_mu_inject">proper_mu_inject</a></span> <span class="kwd">in</span> <span class="id">R</span> <span class="kwd">as</span> [? <span class="id">R</span>];<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">R</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span> <span class="id">R2</span>;<span class="tactic">apply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">R2</span>;<span class="tactic">auto</span>; <span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;  <span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<h2> Semantic preservation for statements and functions </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_cont">match_cont</a></span>: <span class="id"><a href="Csharpminor.html#cont">Csharpminor.cont</a></span> -&gt; <span class="id"><a href="Cminor.html#cont">Cminor.cont</a></span> -&gt; <span class="id">compilenv</span> -&gt; <span class="id">exit_env</span> -&gt; <span class="id"><a href="cminorgen_proof.html#callstack">callstack</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kstop">match_Kstop</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="Csharpminor.html#Kstop">Csharpminor.Kstop</a></span> <span class="id"><a href="Cminor.html#Kstop">Kstop</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kseq">match_Kseq</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) (<span class="id"><a href="Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kseq2">match_Kseq2</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">ts1</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#s1">s1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts1">ts1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#s2">s2</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id"><a href="cminorgen_proof.html#s1">s1</a></span> <span class="id"><a href="cminorgen_proof.html#s2">s2</a></span>) <span class="id"><a href="cminorgen_proof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#ts1">ts1</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kblock">match_Kblock</a></span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kblock">Csharpminor.Kblock</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) (<span class="id"><a href="Cminor.html#Kblock">Kblock</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> :: <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kblock2">match_Kblock2</a></span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> (<span class="id"><a href="Cminor.html#Kblock">Kblock</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> :: <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kcall">match_Kcall</a></span>: <span class="kwd">forall</span> <span class="id">optid</span> <span class="id">fn</span> <span class="id">e</span> <span class="id">le</span> <span class="id">k</span> <span class="id">tfn</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">cenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kcall">Csharpminor.Kcall</a></span> <span class="id"><a href="cminorgen_proof.html#optid">optid</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor.html#Kcall">Kcall</a></span> <span class="id"><a href="cminorgen_proof.html#optid">optid</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cenv</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>-&gt;<span class="id"><a href="Csharpminor_local.html#core">Csharpminor_local.core</a></span>*<span class="id"><a href="Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="Cminor_local.html#core">Cminor_local.core</a></span>*<span class="id"><a href="Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_state">match_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NGE</span>: ~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Csharpminor_local.html#Core_State">Csharpminor_local.Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span>, <span class="id"><a href="cminorgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span>, <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_state_seq">match_state_seq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts1</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#s1">s1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts1">ts1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NGE</span>: ~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#s2">s2</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Csharpminor_local.html#Core_State">Csharpminor_local.Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> (<span class="id"><a href="Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id"><a href="cminorgen_proof.html#s1">s1</a></span> <span class="id"><a href="cminorgen_proof.html#s2">s2</a></span>) <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span>, <span class="id"><a href="cminorgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#ts1">ts1</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span>, <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_callstate">match_callstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tfd</span> <span class="id">targs</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">cenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_fundef</span> <span class="id"><a href="cminorgen_proof.html#fd">fd</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tfd">tfd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ISCC</span>: <span class="id"><a href="Csharpminor.html#is_call_cont">Csharpminor.is_call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ARGSINJ</span>: <span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#args">args</a></span> <span class="id"><a href="cminorgen_proof.html#targs">targs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Csharpminor_local.html#Core_Callstate">Csharpminor_local.Core_Callstate</a></span> <span class="id"><a href="cminorgen_proof.html#fd">fd</a></span> <span class="id"><a href="cminorgen_proof.html#args">args</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>,<span class="id"><a href="cminorgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor_local.html#Core_Callstate">Core_Callstate</a></span> <span class="id"><a href="cminorgen_proof.html#tfd">tfd</a></span> <span class="id"><a href="cminorgen_proof.html#targs">targs</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>,<span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_returnstate">match_returnstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tv</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">cenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RESINJ</span>: <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Csharpminor_local.html#Core_Returnstate">Csharpminor_local.Core_Returnstate</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>,<span class="id"><a href="cminorgen_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Cminor_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>,<span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>).<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_function_pointer">val_inject_function_pointer</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bound</span> <span class="id">v</span> <span class="id">fd</span> <span class="id">f</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="cminorgen_proof.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#bound">bound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#v">v</a></span> <span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#tv">tv</a></span> = <span class="id"><a href="cminorgen_proof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8116')">Proof.</div>
<div class="proofscript" id="proof8116">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">EQ</span>]. <span class="tactic">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>, 0)). <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">FUNCTIONS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_call_cont">match_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#call_cont">Csharpminor.call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) (<span class="id"><a href="Cminor.html#call_cont">call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8117')">Proof.</div>
<div class="proofscript" id="proof8117">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_is_call_cont">match_is_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tfn</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">tm</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#is_call_cont">Csharpminor.is_call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="Cminor_local.html#step">step</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="Cminor.html#Sskip">Sskip</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>) <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="Cminor.html#Sskip">Sskip</a></span> <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span>) <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Cminor.html#is_call_cont">is_call_cont</a></span> <span class="id">tk</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8118')">Proof.</div>
<div class="proofscript" id="proof8118">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_refl">star_refl</a></span>. <span class="tactic">split</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHmatch_cont</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tk</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">tk</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_refl">star_refl</a></span>. <span class="tactic">split</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="seq_left_depth">seq_left_depth</a></span> (<span class="id">s</span>: <span class="id"><a href="Csharpminor.html#stmt">Csharpminor.stmt</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="cminorgen_proof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="kwd">measure</span> (<span class="id">S</span>: <span class="id"><a href="Csharpminor_local.html#core">Csharpminor_local.core</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="cminorgen_proof.html#S">S</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Csharpminor_local.html#Core_State">Csharpminor_local.Core_State</a></span> <span class="id">fn</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> =&gt; <span class="id"><a href="cminorgen_proof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inj_mu">inj_mu</a></span> (<span class="id">f</span>:<span class="id"><a href="Values.html#meminj">meminj</a></span>)(<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Injections.Mu</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="MS">MS</a></span> <span class="id">i</span> <span class="id">mu</span> <span class="id">fp</span> <span class="id">fp</span>' <span class="id">cm</span> <span class="id">cm</span>' :<span class="kwd">Prop</span>:= <span class="id">exists</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#cm">cm</a></span> <span class="id">cm</span>' /\<br/>
&nbsp;&nbsp;<span class="id">Injections.FPMatch</span>' <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id"><a href="cminorgen_proof.html#fp">fp</a></span> <span class="id">fp</span>' /\<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">c</span>, <span class="id">m</span>) := <span class="id"><a href="cminorgen_proof.html#cm">cm</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">c</span>', <span class="id">m</span>') := <span class="id">cm</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">measure</span> <span class="id"><a href="cminorgen_proof.html#c">c</a></span> = <span class="id"><a href="cminorgen_proof.html#i">i</a></span> /\<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="cminorgen_proof.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id">m</span>').<br/>
<br/>
<div class="doc">Properties of <span class="bracket"><span class="id">switch</span></span> compilation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="lbl_stmt_tail">lbl_stmt_tail</a></span>: <span class="id"><a href="Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="lstail_O">lstail_O</a></span>: <span class="kwd">forall</span> <span class="id">sl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="lstail_S">lstail_S</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">s</span> <span class="id">sl</span> <span class="id">n</span> <span class="id">sl</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span> <span class="id">sl</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> (<span class="id"><a href="Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="cminorgen_proof.html#c">c</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span>) <span class="id">sl</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_default">switch_table_default</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sl</span> <span class="id">base</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span> (<span class="id"><a href="Csharpminor.html#select_switch_default">select_switch_default</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">switch_table</span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#base">base</a></span>) = (<span class="id"><a href="cminorgen_proof.html#n">n</a></span> + <span class="id"><a href="cminorgen_proof.html#base">base</a></span>)%<span class="id">nat</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8119')">Proof.</div>
<div class="proofscript" id="proof8119">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">switch_table</span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">switch_table</span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_case">switch_table_case</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">sl</span> <span class="id">base</span> <span class="id">dfl</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#dfl">dfl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">switch_table</span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#base">base</a></span>)) = <span class="id"><a href="cminorgen_proof.html#dfl">dfl</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">sl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span> <span class="id">sl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#dfl">dfl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">switch_table</span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="cminorgen_proof.html#base">base</a></span>)) = (<span class="id"><a href="cminorgen_proof.html#n">n</a></span> + <span class="id"><a href="cminorgen_proof.html#base">base</a></span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8120')">Proof.</div>
<div class="proofscript" id="proof8120">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id">switch_table</span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl1</span> <span class="id">dfl1</span>] <span class="id">eqn</span>:<span class="id">ST</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#dec_eq_sym">dec_eq_sym</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zeq">zeq</a></span> <span class="id">i</span> <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>) <span class="id">dfl</span>). <span class="tactic">rewrite</span> <span class="id">ST</span> <span class="kwd">in</span> <span class="id">IHsl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsl</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>) <span class="id">dfl</span>). <span class="tactic">rewrite</span> <span class="id">ST</span> <span class="kwd">in</span> <span class="id">IHsl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsl</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_select">switch_table_select</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">sl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">switch_table</span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">switch_table</span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Csharpminor.html#select_switch">select_switch</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#sl">sl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8121')">Proof.</div>
<div class="proofscript" id="proof8121">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor.html#select_switch">select_switch</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="cminorgen_proof.html#switch_table_case">switch_table_case</a></span> <span class="id">i</span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">switch_table</span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>))).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>) <span class="kwd">as</span> [<span class="id">sl</span>'|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">replace</span> (<span class="id">n</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)%<span class="id">nat</span> <span class="kwd">with</span> <span class="id">n</span> <span class="kwd">in</span> <span class="id">Q</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="cminorgen_proof.html#switch_table_default">switch_table_default</a></span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">n</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)%<span class="id">nat</span> <span class="kwd">with</span> <span class="id">n</span> <span class="kwd">in</span> <span class="id">Q</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="transl_lblstmt_cont">transl_lblstmt_cont</a></span>(<span class="id">cenv</span>: <span class="id">compilenv</span>) (<span class="id">xenv</span>: <span class="id">exit_env</span>): <span class="id"><a href="Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="id"><a href="Cminor.html#cont">cont</a></span> -&gt; <span class="id"><a href="Cminor.html#cont">cont</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tlsc_default">tlsc_default</a></span>: <span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id"><a href="Csharpminor.html#LSnil">LSnil</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> (<span class="id"><a href="Cminor.html#Kblock">Kblock</a></span> (<span class="id"><a href="Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="Cminor.html#Sskip">Sskip</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>))<br/>
&nbsp;&nbsp;| <span class="id"><a name="tlsc_case">tlsc_case</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s</span> <span class="id">ls</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_stmt</span> <span class="id">cenv</span> (<span class="id">switch_env</span> (<span class="id"><a href="Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span>) <span class="id">xenv</span>) <span class="id"><a href="cminorgen_proof.html#s">s</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id">k</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id">cenv</span> <span class="id">xenv</span> (<span class="id"><a href="Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="cminorgen_proof.html#i">i</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span>) <span class="id"><a href="cminorgen_proof.html#k">k</a></span> (<span class="id"><a href="Cminor.html#Kblock">Kblock</a></span> (<span class="id"><a href="Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id">k</span>')).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_descent">switch_descent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">k</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id">k</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#plus">plus</a></span> (<span class="id"><a href="Cminor_local.html#step">step</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> <span class="id">k</span>' <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>)<span class="id"><a href="cminorgen_proof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8122')">Proof.</div>
<div class="proofscript" id="proof8122">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_two">plus_two</a></span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHls</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_one">star_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_ascent">switch_ascent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">m</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">n</span> <span class="id">ls</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span> <span class="id">ls</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">k1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#k1">k1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">star</a></span> (<span class="id"><a href="Cminor_local.html#step">step</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span>) <span class="id"><a href="cminorgen_proof.html#k1">k1</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) <span class="id"><a href="cminorgen_proof.html#m">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id"><a href="cminorgen_proof.html#k2">k2</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>) <span class="id"><a href="cminorgen_proof.html#m">m</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id">ls</span>' <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8123')">Proof.</div>
<div class="proofscript" id="proof8123">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">k1</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_refl">star_refl</a></span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">IHlbl_stmt_tail</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">k2</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="id">eexact</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_match_cont">switch_match_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">k</span> <span class="id">cs</span> <span class="id">tk</span> <span class="id">ls</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id">tk</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span>) <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> :: <span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8124')">Proof.</div>
<div class="proofscript" id="proof8124">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_Kblock2">match_Kblock2</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_Kblock2">match_Kblock2</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_Kseq2">match_Kseq2</a></span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_match_states">switch_match_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">tk</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#sz">sz</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="cminorgen_proof.html#Frame">Frame</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span> <span class="id"><a href="cminorgen_proof.html#te">te</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> :: <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TK</span>: <span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id">tk</span>'),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#plus">plus</a></span> (<span class="id"><a href="Cminor_local.html#step">step</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>) (<span class="id"><a href="Cminor_local.html#Core_State">Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span> (<span class="id"><a href="Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">tk</span>' (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="cminorgen_proof.html#te">te</a></span>) <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> <span class="id"><a href="cminorgen_proof.html#S">S</a></span> <span class="id"><a href="cminorgen_proof.html#tm">tm</a></span> /\ <span class="id"><a href="cminorgen_proof.html#match_states">match_states</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> (<span class="id"><a href="Csharpminor_local.html#Core_State">Csharpminor_local.Core_State</a></span> <span class="id"><a href="cminorgen_proof.html#fn">fn</a></span> (<span class="id"><a href="Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span>) <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#le">le</a></span>, <span class="id"><a href="cminorgen_proof.html#m">m</a></span>) (<span class="id"><a href="cminorgen_proof.html#S">S</a></span>,<span class="id"><a href="cminorgen_proof.html#tm">tm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8125')">Proof.</div>
<div class="proofscript" id="proof8125">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TK</span>.<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_two">plus_two</a></span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_state">match_state</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#star_one">star_one</a></span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_state_seq">match_state_seq</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#switch_match_cont">switch_match_cont</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_lblstmt_suffix">transl_lblstmt_suffix</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">n</span> <span class="id">ls</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#n">n</a></span> <span class="id">ls</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">body</span> <span class="id">ts</span>, <span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">body</span>', <span class="id">exists</span> <span class="id">ts</span>', <span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id">ls</span>' <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id">ls</span>' <span class="id">body</span>' = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id">ts</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8126')">Proof.</div>
<div class="proofscript" id="proof8126">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">body</span>, <span class="id">ts</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Commutation between <span class="bracket"><span class="id">find_label</span></span> and compilation </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.FIND_LABEL.lbl">lbl</a></span>: <span class="id"><a href="Cminor.html#label">label</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.FIND_LABEL.cenv">cenv</a></span>: <span class="id">compilenv</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.FIND_LABEL.cs">cs</a></span>: <span class="id"><a href="cminorgen_proof.html#callstack">callstack</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_lblstmt_find_label_context">transl_lblstmt_find_label_context</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">ts</span> <span class="id">tk1</span> <span class="id">tk2</span> <span class="id">ts</span>' <span class="id">tk</span>',<br/>
&nbsp;&nbsp;<span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#tk1">tk1</a></span> <span class="id"><a href="cminorgen_proof.html#tk2">tk2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> <span class="id"><a href="cminorgen_proof.html#tk2">tk2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">ts</span>', <span class="id">tk</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk1">tk1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">ts</span>', <span class="id">tk</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8127')">Proof.</div>
<div class="proofscript" id="proof8127">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id">IHls</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_find_label">transl_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">xenv</span> <span class="id">ts</span> <span class="id">tk</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#s">s</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cs">cs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="transl_lblstmt_find_label">transl_lblstmt_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span> <span class="id">xenv</span> <span class="id">body</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">tk1</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_lblstmt</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> (<span class="id">switch_env</span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span>) <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#tk1">tk1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#body">body</a></span> <span class="id"><a href="cminorgen_proof.html#tk1">tk1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Csharpminor.html#find_label_ls">Csharpminor.find_label_ls</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ls">ls</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#ts">ts</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.cs">cs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8128')">Proof.</div>
<div class="proofscript" id="proof8128">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">H</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;seq&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s1</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_Kseq">match_Kseq</a></span>. <span class="id">eexact</span> <span class="id">EQ1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>'] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'. <span class="tactic">intuition</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;ifthenelse&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s1</span>). <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> <span class="id">k</span>) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>'] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'. <span class="tactic">intuition</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;block&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> :: <span class="id">xenv</span>). <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;switch&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">switch_table</span> <span class="id">l</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]. <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#switch_descent">switch_descent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">transl_lblstmt_find_label</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;return&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;label&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="AST.html#ident_eq">ident_eq</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>; <span class="id">exists</span> <span class="id">tk</span>; <span class="id">exists</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ls</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;nil&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;cons&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#switch_match_cont">switch_match_cont</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL.lbl">lbl</a></span> <span class="id">s</span> (<span class="id"><a href="Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id">ls</span>) <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>''] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_lblstmt_find_label_context">transl_lblstmt_find_label_context</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">transl_lblstmt_find_label</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_find_label_body">transl_find_label_body</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">size</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cs</span> <span class="id">lbl</span> <span class="id">s</span>' <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id">transl_funbody</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#size">size</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#xenv">xenv</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="cminorgen_proof.html#lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span>.(<span class="id"><a href="Csharpminor.html#fn_body">Csharpminor.fn_body</a></span>) (<span class="id"><a href="Csharpminor.html#call_cont">Csharpminor.call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#k">k</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">s</span>', <span class="id">k</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cminor.html#find_label">find_label</a></span> <span class="id"><a href="cminorgen_proof.html#lbl">lbl</a></span> <span class="id"><a href="cminorgen_proof.html#tf">tf</a></span>.(<span class="id"><a href="Cminor.html#fn_body">fn_body</a></span>) (<span class="id"><a href="Cminor.html#call_cont">call_cont</a></span> <span class="id"><a href="cminorgen_proof.html#tk">tk</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;/\ <span class="id">transl_stmt</span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="cminorgen_proof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8129')">Proof.</div>
<div class="proofscript" id="proof8129">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_find_label">transl_find_label</a></span>. <span class="id">eexact</span> <span class="id">EQ</span>. <span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_call_cont">match_call_cont</a></span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">lbl</span>). <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">resolvfp</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">_</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="infp.html#fp_match">fp_match</a></span> <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp2</span>, <span class="id">H2</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> ,<span class="id">H3</span>: <span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>|- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">fp_match_FPMatch</span>';<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>;<span class="tactic">clear</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp1</span>' |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>'; <span class="tactic">auto</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp1</span>' |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) ?<span class="id">fp1</span>' =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="tactic">auto</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) <span class="id">_</span>)=&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>' |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> ?<span class="id">fp</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>' |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp</span>' <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_union_subset">FP.subset_union_subset</a></span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;| |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="cminorgen_proof.html#empfp">empfp</a></span> =&gt; <span class="tactic">apply</span> <span class="id">Injections.fp_match_emp</span>'<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span> ?<span class="id">fp2</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_subset_T</span>' <span class="kwd">with</span> <span class="id">fp2</span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) ?<span class="id">fp2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_T</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_T</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span>                                          <br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> ?<span class="id">fp2</span>) <span class="id">_</span> -&gt; ~ <span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> ?<span class="id">mu</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> <span class="id">_</span> ?<span class="id">fp2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Injections.html#fp_match_local_block">Injections.fp_match_local_block</a></span>; <span class="tactic">auto</span>                                          <br/>
&nbsp;&nbsp;| |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_refl">FP.subset_refl</a></span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Op_fp.html#fp_inject">fp_inject</a></span> <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span>', <span class="id">H</span>': <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Op_fp.html#fp_inject_fp_match">fp_inject_fp_match</a></span>; <span class="id">inv</span> <span class="id">H</span>'; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Op_fp.html#fp_inject">fp_inject</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>'|- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span>' ?<span class="id">fp</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Op_fp.html#fp_inject_id_fp_subset">fp_inject_id_fp_subset</a></span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eresolvfp</span>:= <span class="id">resolvfp</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">resvalid</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
<div class="doc">valid blocks </div>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>,<span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="cminorgen_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span><br/>
<div class="doc">Mem inv </div>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#free_inject_unmapped_closed_preserved">MemClosures_local.free_inject_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>, <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>', <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">invMS</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>  ?<span class="id">cm1</span> ?<span class="id">cm2</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cm1</span> <span class="kwd">as</span> [<span class="id">sc</span> <span class="id">Hm</span>]; <span class="tactic">destruct</span> <span class="id">cm2</span> <span class="kwd">as</span> [<span class="id">tc</span> <span class="id">Lm</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f0</span> [<span class="id">MS</span> [<span class="id">FPMATCH</span> [<span class="id">EQI</span> [<span class="id">SVALID</span> [<span class="id">TVALID</span> [<span class="id">AGMU</span> <span class="id">RCPRESV</span>]]]]]]]<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>  ?<span class="id">cm1</span> ?<span class="id">cm2</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">f0</span> [<span class="id">MS</span> [<span class="id">FPMATCH</span> [<span class="id">EQI</span> [<span class="id">SVALID</span> [<span class="id">TVALID</span> [<span class="id">AGMU</span> <span class="id">RCPRESV</span>]]]]]]]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">splitMS</span> :=<br/>
&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;[<span class="id">econstructor</span>; <span class="id">eresolvfp</span> |<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="id">eresolvfp</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">auto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">split</span>; [<span class="tactic">auto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">eauto</span>]]]]]];<span class="tactic">auto</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_bounds_rely">match_bounds_rely</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Hm</span>' <span class="id">e</span> <span class="id">cenv</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLGE</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLE</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MENV</span>: <span class="id"><a href="cminorgen_proof.html#match_env">match_env</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#cenv">cenv</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> <span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MB</span>:<span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HRELY</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Rely">LDefs.Rely</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id">Hm</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id">Hm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8130')">Proof.</div>
<div class="proofscript" id="proof8130">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#match_bounds">match_bounds</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">me_bounded0</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">HRELY</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">MB</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_src</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_ne">Plt_ne</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_rely">inject_rely</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Hm</span>' <span class="id">Lm</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HRELY</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Rely">LDefs.Rely</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id">Hm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LRELY</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Rely">LDefs.Rely</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span> <span class="id">Lm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INV</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Inv">LDefs.Inv</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>:<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8131')">Proof.</div>
<div class="proofscript" id="proof8131">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>;<span class="id">inv</span> <span class="id">HRELY</span>;<span class="id">inv</span> <span class="id">LRELY</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#sep_inject_rely_inject">MemClosures_local.sep_inject_rely_inject</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_rely">match_callstack_rely</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Hm</span>' <span class="id">Lm</span>' <span class="id">cs</span> <span class="id">b</span> <span class="id">tb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>:<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span> <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#tb">tb</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PLE</span>:<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HRELY</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Rely">LDefs.Rely</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id">Hm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LRELY</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Rely">LDefs.Rely</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span> <span class="id">Lm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INV</span>:<span class="id"><a href="LDSimDefs_local.html#LDefs.Inv">LDefs.Inv</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>:<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>':<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="cminorgen_proof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="cminorgen_proof.html#f">f</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>' <span class="id"><a href="cminorgen_proof.html#cs">cs</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> <span class="id"><a href="cminorgen_proof.html#tb">tb</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8132')">Proof.</div>
<div class="proofscript" id="proof8132">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cs</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>. <span class="id">exploit</span> <span class="id">IHcs</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>. <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_ple_ge">match_callstack_ple_ge</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_bounds_rely">match_bounds_rely</a></span> <span class="kwd">in</span> <span class="id">BOUND0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MENV</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Ple_trans">Ple_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#padding_freeable_invariant">padding_freeable_invariant</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LRELY</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">PLT</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>. <span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span>;<span class="tactic">clear</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Lm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Mem.perm_order</span>' <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">mem_access</span> !! <span class="id">sp</span> <span class="id">ofs</span> <span class="id"><a href="Memtype.html#Cur">Cur</a></span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">sp</span> <span class="id">nextblock</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">nextblock_noaccess</span> <span class="kwd">in</span> <span class="id">n</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Heqo</span> <span class="kwd">in</span> <span class="id">n</span>. <span class="id">inv</span> <span class="id">n</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unmapped_closed_alloc_variables">unmapped_closed_alloc_variables</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">e</span> <span class="id">e2</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Hm</span>' <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) <span class="id"><a href="cminorgen_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span> <span class="id"><a href="cminorgen_proof.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span> <span class="id"><a href="cminorgen_proof.html#Hm">Hm</a></span> <span class="id"><a href="cminorgen_proof.html#vars">vars</a></span> <span class="id"><a href="cminorgen_proof.html#e2">e2</a></span> <span class="id">Hm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> <span class="id">Hm</span>' <span class="id"><a href="cminorgen_proof.html#Lm">Lm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8133')">Proof.</div>
<div class="proofscript" id="proof8133">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">SVALID</span>': <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id">mu</span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span>-&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">resvalid</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#unmapped_closed_alloc_1">unmapped_closed_alloc_1</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="TRANSF_local_ldsim">TRANSF_local_ldsim</a></span>:<br/>
&nbsp;&nbsp;@<span class="id"><a href="LDSim_local.html#local_ldsim">local_ldsim</a></span> <span class="id"><a href="Csharpminor_local.html#Csharpminor_IS">Csharpminor_IS</a></span> <span class="id"><a href="Cminor_local.html#Cminor_IS">Cminor_IS</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8134')">Proof.</div>
<div class="proofscript" id="proof8134">
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="kwd">fun</span> <span class="id">b</span> =&gt;<span class="id"><a href="cminorgen_proof.html#MS">MS</a></span>).<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">invMS</span>;<span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_inject">proper_mu_inject</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">invMS</span>;<span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_ge_init_inj">proper_mu_ge_init_inj</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#ge_match">ge_match</a></span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">fid</span> <span class="id">args</span> <span class="id">args</span>' <span class="id">score</span> <span class="id">GE_INIT_INJ</span> <span class="id">INJID</span> <span class="id">GARG</span> <span class="id">ARGREL</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="IS_local.html#init_core_local">init_core_local</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor_local.html#init_core">init_core</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor_local.html#init_core">Csharpminor_local.init_core</a></span> <span class="kwd">in</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span> <span class="kwd">in</span> <span class="id">INITCORE</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="cminorgen_proof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">eqn</span>:?;[|<span class="id">inv</span> <span class="id">INITCORE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id">b</span>) <span class="id">eqn</span>:?;[|<span class="id">inv</span> <span class="id">INITCORE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#function_ptr_translated">function_ptr_translated</a></span> <span class="kwd">in</span> <span class="id">Heqo0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">tf</span>[<span class="id">Heqo</span>' <span class="id">FUNDEFMATCH</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span> <span class="id">eqn</span>:?;[|<span class="id">inv</span> <span class="id">INITCORE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Csharpminor_local.html#fundef_init">Csharpminor_local.fundef_init</a></span> <span class="kwd">in</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id">args</span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="Csharpminor.html#funsig">Csharpminor.funsig</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">f0</span>))) &amp;&amp;  <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">args</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> (4 * (2 * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength">Zlength</a></span> <span class="id">args</span>)) <span class="id"><a href="Integers.html#Int.max_unsigned">Int.max_unsigned</a></span>) <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">INITCORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id">args</span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="Csharpminor.html#funsig">Csharpminor.funsig</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">f0</span>))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">clear</span> <span class="id">Heqb0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor_local.html#fundef_init">fundef_init</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="cminorgen_proof.html#sig_preserved">sig_preserved</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">FUNDEFMATCH</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="val_casted.html#wd_args_inject">wd_args_inject</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">sm0</span> <span class="id">tm0</span> <span class="id">INITSM</span> <span class="id">INITTM</span> <span class="id">MEMINITINJ</span> <span class="id">sm</span> <span class="id">tm</span> [<span class="id">HRELY</span> <span class="id">LRELY</span> <span class="id">MINJ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">args</span>' = <span class="id">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">ARGREL</span> <span class="id">GARG</span> <span class="id">MEMINITINJ</span>; <span class="tactic">clear</span>. <span class="id">revert</span> <span class="id">args</span>'. <span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">intros</span> <span class="id">args</span>' <span class="id">REL</span> <span class="id">G</span> <span class="id">MEMREL</span>; <span class="id">inv</span> <span class="id">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">G</span>. <span class="tactic">f_equal</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">MEMREL</span>. <span class="tactic">apply</span> <span class="id">inj_inject_id</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>. <span class="tactic">apply</span> <span class="id">IHargs</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#inj_mu">inj_mu</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#match_Kstop">match_Kstop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">hi</span>:=<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">INITSM</span>. <span class="tactic">rewrite</span> <span class="id">dom_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">INITTM</span>. <span class="tactic">rewrite</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>,<span class="id">dom_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">sm0</span> <span class="id">b0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="id">inv</span> <span class="id">INITSM</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">dom_eq_src</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">wd_mu_init</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_dom</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id">mu</span>) <span class="id">b0</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">x0</span>,0)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">INJID</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">INJID</span> <span class="kwd">in</span> <span class="id">H0</span> ;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">apply</span> <span class="id">dom_eq_src</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>. <span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">apply</span> <span class="id">dom_eq_tgt</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMINITINJ</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? ? ? ? ?. <span class="id">exploit</span> <span class="id">inj_inject_id</span>. <span class="tactic">exact</span> <span class="id">H0</span>. <span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>. <span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">Hfp</span>' <span class="id">Hcore</span>' <span class="id">Hm</span>' <span class="id">MS</span> <span class="id">STEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">STEP</span> <span class="kwd">as</span> <span class="id">STEP_bk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">STEP</span>;<span class="tactic">intros</span>;<span class="id">invMS</span>;<span class="id">inv</span> <span class="id">MS</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> (<span class="id"><a href="cminorgen_proof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>; <span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.  <span class="id">splitMS</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_state_seq">match_state_seq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.  <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> 0%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>; <span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.  <span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> 0%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_freelist">match_callstack_freelist</a></span> <span class="kwd">in</span> <span class="id">MCS</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_is_call_cont">match_is_call_cont</a></span> <span class="kwd">in</span> <span class="id">MK</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_right">plus_right</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="freelist_free_fpmatch">freelist_free_fpmatch</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">f0</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">tfn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.tge">tge</a></span> <span class="id"><a href="cminorgen_proof.html#f0">f0</a></span> <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NGE</span>: ~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Injections.FPMatch</span>' <span class="id"><a href="cminorgen_proof.html#mu">mu</a></span> (<span class="id"><a href="FMemOpFP.html#free_list_fp">FMemOpFP.free_list_fp</a></span> (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="cminorgen_proof.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="cminorgen_proof.html#sp">sp</a></span> 0 (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="cminorgen_proof.html#tfn">tfn</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8135')">Proof.</div>
<div class="proofscript" id="proof8135">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>. <span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv_eq</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>. <span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_inject">proper_mu_inject</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InjRels.html#proper_mu_inject_incr">proper_mu_inject_incr</a></span> <span class="kwd">in</span> <span class="id">AGMU</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H8</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H7</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;  <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) /\  <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> = 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span>  <span class="id"><a href="cminorgen_proof.html#match_callstack_ple_ge">match_callstack_ple_ge</a></span> <span class="kwd">in</span> <span class="id">MCS0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">me_bounded0</span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>)(<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f0</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">sp</span>,<span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">me_vars0</span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">me_vars0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="id">inv</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H10</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#freelist_free_unmapped_closed">freelist_free_unmapped_closed</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> 0%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_set_temp">match_callstack_set_temp</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> 0%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#nextblock_storev">nextblock_storev</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#nextblock_storev">nextblock_storev</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#storev_fp_match">storev_fp_match</a></span> <span class="kwd">in</span> <span class="id">MCS</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R1</span>,  <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_invariant">match_callstack_invariant</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">Mem.perm_store_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">resvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">resvalid</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span>&lt;- <span class="id">Mem.address_inject</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">chunk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Mem.perm_order</span>' <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> 0%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tfd</span> [<span class="id">FIND</span> <span class="id">TRANS</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x2</span> = <span class="id">vf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bnd</span> <span class="id">MG</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#val_inject_function_pointer">val_inject_function_pointer</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">x2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_exprlist_correct">transl_exprlist_correct</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_exprlist_fp_correct">transl_exprlist_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="cminorgen_proof.html#sig_preserved">sig_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_Kcall">match_Kcall</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> (<span class="id"><a href="cminorgen_proof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="cminorgen_proof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#bool_of_val_inject">bool_of_val_inject</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">STEP_bk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">STEP_bk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">STEP_bk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">IHMK</span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">TR</span>. <span class="tactic">destruct</span> (<span class="id">switch_table</span> <span class="id">cases</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>] <span class="id">eqn</span>:<span class="id">STBL</span>. <span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">VINJ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tfp</span>[<span class="id">EVALFP</span> <span class="id">MATCH</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SA</span>: <span class="id"><a href="Switch.html#switch_argument">switch_argument</a></span> <span class="id">islong</span> <span class="id">tv</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">VINJ</span>;<span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#switch_descent">switch_descent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#switch_ascent">switch_ascent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> (<span class="id"><a href="cminorgen_proof.html#switch_table_select">switch_table_select</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">STBL</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">k2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_lblstmt_suffix">transl_lblstmt_suffix</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> (<span class="id"><a href="cminorgen_proof.html#switch_table_select">switch_table_select</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">body</span>' [<span class="id">ts</span>' <span class="id">E</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#switch_match_states">switch_match_states</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">eapply</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_left">star_left</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_star">plus_star</a></span>. <span class="id">eexact</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="cminorgen_proof.html#MS">MS</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_freelist">match_callstack_freelist</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_call_cont">match_call_cont</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">AGMU</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) /\  <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> = 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span>  <span class="id"><a href="cminorgen_proof.html#match_callstack_ple_ge">match_callstack_ple_ge</a></span> <span class="kwd">in</span> <span class="id">MCS0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">me_bounded0</span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>)(<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f0</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">sp</span>,<span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">me_vars0</span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">me_vars0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#freelist_free_unmapped_closed">freelist_free_unmapped_closed</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_freelist">match_callstack_freelist</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_correct">transl_expr_correct</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_expr_fp_correct">transl_expr_fp_correct</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_call_cont">match_call_cont</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#freelist_free_fpmatch">freelist_free_fpmatch</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>) (<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>) /\  <span class="id"><a href="cminorgen_proof.html#lo">lo</a></span> = 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span>  <span class="id"><a href="cminorgen_proof.html#match_callstack_ple_ge">match_callstack_ple_ge</a></span> <span class="kwd">in</span> <span class="id">MCS0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">me_bounded0</span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="cminorgen_proof.html#b">b</a></span>,<span class="id"><a href="cminorgen_proof.html#lo">lo</a></span>,<span class="id"><a href="cminorgen_proof.html#hi">hi</a></span>)(<span class="id"><a href="Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id">e</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f0</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">sp</span>,<span class="id"><a href="cminorgen_proof.html#delta">delta</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#in_blocks_of_env_inv">in_blocks_of_env_inv</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [?[]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">me_vars0</span> <span class="id">x3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">me_vars0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="id">inv</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H12</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#freelist_free_unmapped_closed">freelist_free_unmapped_closed</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#transl_find_label_body">transl_find_label_body</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="tactic">generalize</span> <span class="id">EQ</span>; <span class="tactic">clear</span> <span class="id">EQ</span>; <span class="tactic">unfold</span> <span class="id">transl_function</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id">build_compilenv</span> <span class="id">f</span>). <span class="tactic">intros</span> <span class="id">ce</span> <span class="id">sz</span> <span class="id">BC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">TRBODY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">TRBODY</span>; <span class="tactic">intro</span> <span class="id">TMP</span>. <span class="id">monadInv</span> <span class="id">TMP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">tf</span> := <span class="id"><a href="Cminor.html#mkfunction">mkfunction</a></span> (<span class="id"><a href="Csharpminor.html#fn_sig">Csharpminor.fn_sig</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x0</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">Lm</span> 0 (<span class="id"><a href="Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id">tf</span>)). <span class="tactic">intros</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">ALLOC</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R2</span>:<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)(<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Coqlib.html#Ple">Ple</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_nlt">Pos.le_nlt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id">mu</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_src</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">SVALID</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_ne">Plt_ne</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>:~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id">sp</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION.ge">ge</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">ALLOC</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">sp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">TVALID</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="cminorgen_proof.html#TRANSLATION.S_EQ">S_EQ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_ne">Plt_ne</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_function_entry">match_callstack_function_entry</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">MemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TVALID</span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_ne">Plt_ne</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">SVALID</span>':  <span class="kwd">forall</span> <span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id">mu</span>) <span class="id"><a href="cminorgen_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span> <span class="id"><a href="cminorgen_proof.html#b">b</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MK</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">ISCC</span>; <span class="id">contradiction</span> || <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">MemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TVALID</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_ne">Plt_ne</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#unmapped_closed_alloc_2">unmapped_closed_alloc_2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#unmapped_closed_alloc_variables">unmapped_closed_alloc_variables</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">MCS</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.  <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor.html#set_optvar">set_optvar</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">optid</span>;<span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_set_temp">match_callstack_set_temp</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">f</span> <span class="id">sg</span> <span class="id">argSrc</span> <span class="id">MS</span> <span class="id">ATEXT</span> <span class="id">RC</span> <span class="id">GARG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor_local.html#at_external">at_external</a></span>,<span class="id"><a href="Csharpminor_local.html#at_external">Csharpminor_local.at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span>) <span class="id">eqn</span>:<span class="id">SYMBNAME</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ATEXT</span>. <span class="id">invMS</span>. <span class="id">inv</span> <span class="id">MS</span>. <span class="id">monadInv</span> <span class="id">TR</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="CUAST.html#match_genvs_invert_symbol_from_string_preserved">match_genvs_invert_symbol_from_string_preserved</a></span>;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="cminorgen_proof.html#genv_match">genv_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#arg_rel">LDSimDefs.arg_rel</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">targs</span> <span class="id">AGMU</span> <span class="id">GARG</span> <span class="id">ARGSINJ</span> ; <span class="tactic">clear</span>.<br/>
<div class="doc">should be extracted as a lemma ... </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">argSrc</span>; <span class="tactic">intros</span> <span class="id">args</span>' <span class="id">AGMU</span> <span class="id">GARG</span> <span class="id">LD</span>. <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">LD</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">LD</span>. <span class="id">inv</span> <span class="id">GARG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">clear</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">IHargSrc</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">AGMU</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>. <span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">eapply</span> <span class="id">MemClosures_local.unmapped_closed_reach_closed_preserved_by_injection</span>'';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs_local.html#LDefs.Inv">LDefs.Inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#sep_inject_rc_inject">MemClosures_local.sep_inject_rc_inject</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">f1</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="IS_local.html#after_external_local">after_external_local</a></span>,<span class="id"><a href="Csharpminor_local.html#after_external">Csharpminor_local.after_external</a></span>,<span class="id"><a href="Cminor_local.html#after_external">after_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">oresSrc</span> <span class="id">Hcore</span>' <span class="id">oresTgt</span> <span class="id">MS</span> <span class="id">GRES</span> <span class="id">AFTEXT</span> <span class="id">RESREL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invMS</span>. <span class="id">inv</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="kwd">match</span> <span class="id">oresTgt</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="Cminor_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id">v</span> <span class="id">tk</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="Cminor_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id">tk</span> <span class="kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqb</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hm</span>' <span class="id">Lm</span>' [<span class="id">HRELY</span> <span class="id">LRELY</span> <span class="id">INV</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#ores_rel">LDSimDefs.ores_rel</a></span> <span class="kwd">in</span> <span class="id">RESREL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">oresSrc</span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">AFTEXT</span>; <span class="tactic">destruct</span> <span class="id">oresTgt</span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#inject_rely">inject_rely</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">LRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_rely">match_callstack_rely</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RESREL</span>;<span class="tactic">try</span> <span class="id">constructor</span>.   <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>;<span class="tactic">apply</span> <span class="id"><a href="InjRels.html#proper_mu_inject_incr">proper_mu_inject_incr</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">S</span>; <span class="tactic">apply</span> <span class="id">SVALID</span> <span class="kwd">in</span> <span class="id">S</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">T</span>; <span class="tactic">apply</span> <span class="id">TVALID</span> <span class="kwd">in</span> <span class="id">T</span>;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *;<span class="id">inv</span> <span class="id">LRELY</span>;<span class="tactic">rewrite</span> <span class="id">EQNEXT</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="cminorgen_proof.html#inject_rely">inject_rely</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">LRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="cminorgen_proof.html#match_callstack_rely">match_callstack_rely</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">S</span>; <span class="tactic">apply</span> <span class="id">SVALID</span> <span class="kwd">in</span> <span class="id">S</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">HRELY</span>. <span class="tactic">rewrite</span> <span class="id">EQNEXT</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">T</span>; <span class="tactic">apply</span> <span class="id">TVALID</span> <span class="kwd">in</span> <span class="id">T</span>;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *;<span class="id">inv</span> <span class="id">LRELY</span>;<span class="tactic">rewrite</span> <span class="id">EQNEXT</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LRELY</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cminor_local.html#halted">halted</a></span>,<span class="id"><a href="Csharpminor_local.html#halted">Csharpminor_local.halted</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">mu</span> <span class="id">Hfp</span> <span class="id">Lfp</span> <span class="id">Hcore</span> <span class="id">Hm</span> <span class="id">Lcore</span> <span class="id">Lm</span> <span class="id">resSrc</span> <span class="id">MS</span> <span class="id">HALT</span> <span class="id">RC</span> <span class="id">GRES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">HALT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invMS</span>. <span class="id">inv</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>. <span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#G_arg">LDSimDefs.G_arg</a></span> <span class="kwd">in</span> <span class="id">GRES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">resSrc</span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#res_rel">LDSimDefs.res_rel</a></span>;<span class="id">inv</span> <span class="id">RESINJ</span>;<span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">GRES</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">proper_mu_inject_incr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">eapply</span> <span class="id">MemClosures_local.unmapped_closed_reach_closed_preserved_by_injection</span>'';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#sep_inject_rc_inject">MemClosures_local.sep_inject_rc_inject</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="cminorgen_proof.html#TRANSLATION">TRANSLATION</a></span>.<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
