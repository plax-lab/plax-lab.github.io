<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module GlobSim</title>
<meta name="description" content="Documentation of Coq module GlobSim" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module GlobSim</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Values.html">Values</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="GAST.html">GAST</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="GSimDefs.html">GSimDefs</a></span> <span class="id"><a href="GlobDSim.html">GlobDSim</a></span> <span class="id"><a href="GlobUSim.html">GlobUSim</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span> <span class="id"><a href="GDefLemmas.html">GDefLemmas</a></span>  <span class="id"><a href="NPDet.html">NPDet</a></span>. <br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Wf.html">Wf</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html">Classical_Prop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">FunctionalExtensionality</a></span>.<br/>
<div class="doc">This file contains proof for flipping.</div>
<span class="kwd">Module</span> <span class="id"><a name="GlobSim">GlobSim</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Notation</span> "{ <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> } " := {|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">A</span>;<span class="id">cur_tid</span>:=<span class="id">B</span>;<span class="id">gm</span>:=<span class="id">C</span>;<span class="id">atom_bit</span>:=<span class="id">D</span>|} (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Notation</span> "{'<span class="id">FP</span>'| <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> } " := {|<span class="id"><a href="Footprint.html#FP.Build_t">FP.cmps</a></span>:=<span class="id">A</span>;<span class="id">FP.reads</span>:=<span class="id">B</span>;<span class="id">FP.writes</span>:=<span class="id">C</span>;<span class="id">FP.frees</span>:=<span class="id">D</span>|} (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := <br/>
&nbsp;&nbsp;({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |})  (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">clearfp</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.inv">inv</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>):= <span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).    <br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.init_config_inv_thp">init_config_inv_thp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="GlobSim.html#NL">NL</a></span> <span class="id"><a href="GlobSim.html#L">L</a></span> <span class="id"><a href="GlobSim.html#p">p</a></span> <span class="id"><a href="GlobSim.html#gm">gm</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9066')">Proof.</div>
<div class="proofscript" id="proof9066">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">o</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9067')">Proof.</div>
<div class="proofscript" id="proof9067">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">pc</span>, <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;core&nbsp;step&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;call&nbsp;ext&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push_inv">ThreadPool.push_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;return&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;thread&nbsp;halt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;all&nbsp;halt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;primitives&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9068')">Proof.</div>
<div class="proofscript" id="proof9068">
 <span class="tactic">intros</span>;<span class="tactic">induction</span> <span class="id">H0</span>;[|<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>];<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">thrddom_eq</span>'<span class="id">_thrd_valid_tid_preservation</span> {<span class="id">sge</span> <span class="id">tge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; @<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="GlobSim.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="GlobSim.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9069')">Proof.</div>
<div class="proofscript" id="proof9069">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H5</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tp_valid</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">thrddom_eq</span>'<span class="id">_final_state_preservation</span> {<span class="id">sge</span> <span class="id">tge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; @<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9070')">Proof.</div>
<div class="proofscript" id="proof9070">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">TP</span>:=<span class="id">spc</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>));<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_thrd_valid_tid_preservation</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H4</span> <span class="id">i</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">thrddom_eq</span>'<span class="id">_valid_tid_preservation</span>{<span class="id">sge</span> <span class="id">tge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, @<span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9071')">Proof.</div>
<div class="proofscript" id="proof9071">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H6</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.Halted">ThreadPool.Halted</a></span>; <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="GlobSim.Lemmas">Lemmas</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.sw_step_det">sw_step_det</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">o</span> <span class="id">fp</span> <span class="id">pc2</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp2">fp2</a></span> <span class="id"><a href="GlobSim.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#o">o</a></span>&lt;&gt; <span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> /\ <span class="id"><a href="GlobSim.html#fp2">fp2</a></span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) = <span class="id"><a href="GlobSim.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) = <span class="id"><a href="GlobSim.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>) = <span class="id"><a href="GlobSim.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9072')">Proof.</div>
<div class="proofscript" id="proof9072">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_pop</span> <span class="kwd">in</span> <span class="id">H_tp_pop0</span>;<span class="tactic">inversion</span> <span class="id">H_tp_pop0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H_tp_core0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_core0</span>;<span class="tactic">clear</span> <span class="id">H_tp_core0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_core_aftext</span> <span class="kwd">in</span> <span class="id">H_core_aftext0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_core_atext</span> <span class="kwd">in</span> <span class="id">H_core_atext0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_aftext0</span>;<span class="tactic">clear</span> <span class="id">H_core_aftext0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_atext0</span>;<span class="tactic">clear</span> <span class="id">H_core_atext0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">c</span>'=<span class="id">c</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>',<span class="id">c</span>'0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_update</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_update0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">clear</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H_tp_core0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_core0</span>;<span class="tactic">clear</span> <span class="id">H_tp_core0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_core_aftext</span> <span class="kwd">in</span> <span class="id">H_core_aftext0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_core_atext</span> <span class="kwd">in</span> <span class="id">H_core_atext0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_aftext0</span>;<span class="tactic">clear</span> <span class="id">H_core_aftext0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_atext0</span>;<span class="tactic">clear</span> <span class="id">H_core_atext0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">c</span>'=<span class="id">c</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>',<span class="id">c</span>'0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_update</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_update0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">clear</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.switch_any">switch_any</a></span> :  <span class="kwd">forall</span>(<span class="id">ges</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">spc</span> <span class="id">spc1</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ges">ges</a></span>)<span class="id">o</span> <span class="id">fpS</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#o">o</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> ({-|<span class="id"><a href="GlobSim.html#spc1">spc1</a></span>,<span class="id"><a href="GlobSim.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9073')">Proof.</div>
<div class="proofscript" id="proof9073">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;[<span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Thrd_Halt">Thrd_Halt</a></span>|<span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Ext_Atom">Ext_Atom</a></span>|<span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#EF_Print">EF_Print</a></span>];<span class="tactic">simpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.language_det">language_det</a></span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>): <span class="kwd">Prop</span> := @<span class="id"><a href="NPDet.html#NPDet.language_det">NPDet.language_det</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.np_step_det">np_step_det</a></span>: <span class="kwd">forall</span>(<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>' <span class="id">pc</span>'':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span> <span class="id">fp</span>' <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#l1">l1</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#l2">l2</a></span> <span class="id">fp</span>' <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#l1">l1</a></span> = <span class="id"><a href="GlobSim.html#l2">l2</a></span> /\ <span class="id"><a href="GlobSim.html#fp">fp</a></span> = <span class="id">fp</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) = <span class="id">pc</span>''.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) = <span class="id">pc</span>''.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>) = <span class="id">pc</span>''.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobSim.html#l1">l1</a></span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>-&gt;<span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)=<span class="id">pc</span>''.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9074')">Proof.</div>
<div class="proofscript" id="proof9074">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> @<span class="id"><a href="NPDet.html#NPDet.np_step_det">NPDet.np_step_det</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">inversion</span> <span class="id">L</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id"><a name="GlobSim.tau_step_det">tau_step_det</a></span>:  <span class="kwd">forall</span>(<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>' <span class="id">pc</span>'':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span> <span class="id">fp</span>' <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#l">l</a></span> <span class="id">fp</span>' <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#l">l</a></span> = <span class="id"><a href="ETrace.html#tau">tau</a></span> /\ <span class="id"><a href="GlobSim.html#fp">fp</a></span> = <span class="id">fp</span>' /\ <span class="id">pc</span>'=<span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9075')">Proof.</div>
<div class="proofscript" id="proof9075">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">H1</span>[<span class="id">H2</span>[<span class="id">H3</span>[<span class="id">H4</span> [<span class="id">H5</span> <span class="id">H6</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id"><a href="ETrace.html#tau">tau</a></span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>'. <span class="tactic">destruct</span> <span class="id">pc</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">L</span>,<span class="id">H3</span>,<span class="id">H4</span>,<span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span> <span class="id">label</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#label">label</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#label">label</a></span> = <span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9076')">Proof.</div>
<div class="proofscript" id="proof9076">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">compute</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="GlobSim.EntAx_bit_rule">EntAx_bit_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9077')">Proof.</div>
<div class="proofscript" id="proof9077">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">auto</span>;<span class="tactic">try</span>(<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="GlobSim.tau_step_bit_backwards_preservation">tau_step_bit_backwards_preservation</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span> <span class="id">label</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#label">label</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="GlobSim.html#label">label</a></span>=<span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9078')">Proof.</div>
<div class="proofscript" id="proof9078">
 <span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="GlobSim.tau_step_bit_I_preservation">tau_step_bit_I_preservation</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span> <span class="id">label</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#label">label</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="GlobSim.html#label">label</a></span>=<span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> -&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9079')">Proof.</div>
<div class="proofscript" id="proof9079">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">inversion</span> <span class="id">H1</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_N_bit_rule">tau_N_bit_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9080')">Proof.</div>
<div class="proofscript" id="proof9080">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">atom_bit</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">pc</span>',<span class="id">s</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span>. <span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">H1</span>,<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">atom_bit</span>,<span class="id">atom_bit0</span>,<span class="id">atom_bit1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>' <span class="id">pce</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp1">fp1</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id">pc</span>' <span class="id"><a href="GlobSim.html#fp2">fp2</a></span> <span class="id"><a href="GlobSim.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9081')">Proof.</div>
<div class="proofscript" id="proof9081">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">pce</span>,<span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_bit_rule">tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_bit_rule">tau_N_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">atom_bit0</span>,<span class="id">atom_bit1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_N_bit_backwards_preservation">tau_N_bit_backwards_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9082')">Proof.</div>
<div class="proofscript" id="proof9082">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_bit_rule">tau_N_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_N_bit_I_preservation">tau_N_bit_I_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9083')">Proof.</div>
<div class="proofscript" id="proof9083">
 <span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_bit_rule">tau_N_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span>[[]|[[]|[]]];<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">inversion</span> <span class="id">H0</span>);<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.inv_thdp_gettop_valid_tid">inv_thdp_gettop_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9084')">Proof.</div>
<div class="proofscript" id="proof9084">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">bit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Coqlib.html#Plt">Coqlib.Plt</a></span> <span class="id">t</span> <span class="id">thdp</span>.(<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span>) \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pge">BinPos.Pge</a></span> <span class="id">t</span> <span class="id">thdp</span>.(<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">tp_finite</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tp_finite</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">tp_finite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.inv_step_valid_tid">inv_step_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc1</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>) <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9085')">Proof.</div>
<div class="proofscript" id="proof9085">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.inv_thdp_gettop_valid_tid">inv_thdp_gettop_valid_tid</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.step_no_final">step_no_final</a></span>:<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">fp</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9086')">Proof.</div>
<div class="proofscript" id="proof9086">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.inv_step_valid_tid">inv_step_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.safe_rule">safe_rule</a></span>: <span class="kwd">forall</span>(<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> -&gt; <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> \/(<span class="id">exists</span> <span class="id">gl</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#gl">gl</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9087')">Proof.</div>
<div class="proofscript" id="proof9087">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#not_all_ex_not">Classical_Pred_Type.not_all_ex_not</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>[<span class="id">gl</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#not_all_ex_not">Classical_Pred_Type.not_all_ex_not</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>[<span class="id">fp</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#not_all_ex_not">Classical_Pred_Type.not_all_ex_not</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>[<span class="id">pc</span>' <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">gl</span>,<span class="id">fp</span>,<span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.safe_succession">safe_succession</a></span>: <span class="kwd">forall</span> <span class="id">sge</span> (<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>) (<span class="id">spc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>) (<span class="id">fpS</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id">spc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9088')">Proof.</div>
<div class="proofscript" id="proof9088">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">spc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">spc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">fpS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">IHx</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_step_tid_preservation">tau_step_tid_preservation</a></span>:<span class="kwd">forall</span>(<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9089')">Proof.</div>
<div class="proofscript" id="proof9089">
 <span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">compute</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span>: <span class="kwd">forall</span>(<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9090')">Proof.</div>
<div class="proofscript" id="proof9090">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span>[<span class="id">i</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">pc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_tid_preservation">tau_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="GlobSim.tau_star_tideq_preservation">tau_star_tideq_preservation</a></span> :<span class="kwd">forall</span> (<span class="id">ges</span> <span class="id">get</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">spc</span> <span class="id">spc1</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ges">ges</a></span>)(<span class="id">tpc</span> <span class="id">tpc1</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#get">get</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> &lt;-&gt; <span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9091')">Proof.</div>
<div class="proofscript" id="proof9091">
 <span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="id">constructor</span>;<span class="tactic">destruct</span> <span class="id">spc</span>,<span class="id">spc1</span>,<span class="id">tpc</span>,<span class="id">tpc1</span>;<span class="tactic">compute</span>;<span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">H</span>,<span class="id">H0</span>,<span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.cs_match_comm">cs_match_comm</a></span>:  <span class="kwd">forall</span> <span class="id">G1</span> <span class="id">G2</span> <span class="id">A</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id">cs_match</span>' <span class="id"><a href="GlobSim.html#G1">G1</a></span> <span class="id"><a href="GlobSim.html#G2">G2</a></span> <span class="id"><a href="GlobSim.html#A">A</a></span> <span class="id"><a href="GlobSim.html#B">B</a></span> -&gt; <span class="id">cs_match</span>' <span class="id"><a href="GlobSim.html#B">B</a></span> <span class="id"><a href="GlobSim.html#A">A</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9092')">Proof.</div>
<div class="proofscript" id="proof9092">
 <span class="tactic">intros</span>;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id">match_cs_emp</span>';<span class="tactic">assumption</span>);<span class="id">constructor</span> 2;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.ocs_match_comm">ocs_match_comm</a></span> : <span class="kwd">forall</span> <span class="id">G1</span> <span class="id">G2</span> <span class="id">A</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id">ocs_match</span>' <span class="id"><a href="GlobSim.html#G1">G1</a></span> <span class="id"><a href="GlobSim.html#G2">G2</a></span> <span class="id"><a href="GlobSim.html#A">A</a></span> <span class="id"><a href="GlobSim.html#B">B</a></span> -&gt; <span class="id">ocs_match</span>' <span class="id"><a href="GlobSim.html#B">B</a></span> <span class="id"><a href="GlobSim.html#A">A</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9093')">Proof.</div>
<div class="proofscript" id="proof9093">
 <span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="id">constructor</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.cs_match_comm">cs_match_comm</a></span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span>: <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span> (<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)(<span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9094')">Proof.</div>
<div class="proofscript" id="proof9094">
 <span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>;<span class="tactic">intro</span> <span class="id">t</span>;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span>);<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.ocs_match_comm">ocs_match_comm</a></span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">scs_upd_cs_match</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">TGE</span> (<span class="id">scs</span>: @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="GlobSim.html#SGE">SGE</a></span>) (<span class="id">tcs</span>: @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs_match</span>' <span class="id"><a href="GlobSim.html#scs">scs</a></span> <span class="id"><a href="GlobSim.html#tcs">tcs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span>' <span class="id">scs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span> <span class="id"><a href="GlobSim.html#scs">scs</a></span> <span class="id">c</span>' <span class="id">scs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs_match</span>' <span class="id">scs</span>' <span class="id"><a href="GlobSim.html#tcs">tcs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9095')">Proof.</div>
<div class="proofscript" id="proof9095">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">stp_upd_ocs_match</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">TGE</span> (<span class="id">sthdp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="GlobSim.html#SGE">SGE</a></span>) (<span class="id">tthdp</span>:@<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span>) <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ocs_match</span>' (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#tthdp">tthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>' <span class="id">c</span>' <span class="id">sthdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id">i</span>' <span class="id">c</span>' <span class="id">sthdp</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ocs_match</span>' (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span>' <span class="id"><a href="GlobSim.html#i">i</a></span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#tthdp">tthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9096')">Proof.</div>
<div class="proofscript" id="proof9096">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">SGE0</span> <span class="id">TGE0</span> <span class="id">sthdp</span> <span class="id">tthdp</span> <span class="id">i</span> <span class="id">H</span> <span class="id">i</span>' <span class="id">c</span>' <span class="id">sthdp</span>' <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>; [<span class="tactic">subst</span>|<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span> <span class="id">H3</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id">scs_upd_cs_match</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tcs_upd_cs_match">tcs_upd_cs_match</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">TGE</span> (<span class="id">scs</span>: @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="GlobSim.html#SGE">SGE</a></span>) (<span class="id">tcs</span>: @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs_match</span>' <span class="id"><a href="GlobSim.html#scs">scs</a></span> <span class="id"><a href="GlobSim.html#tcs">tcs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span>' <span class="id">tcs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span> <span class="id"><a href="GlobSim.html#tcs">tcs</a></span> <span class="id">c</span>' <span class="id">tcs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs_match</span>' <span class="id"><a href="GlobSim.html#scs">scs</a></span> <span class="id">tcs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9097')">Proof.</div>
<div class="proofscript" id="proof9097">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.cs_match_comm">cs_match_comm</a></span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.cs_match_comm">cs_match_comm</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id">scs_upd_cs_match</span>';<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">ttp_upd_ocs_match</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">TGE</span> (<span class="id">sthdp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="GlobSim.html#SGE">SGE</a></span>) (<span class="id">tthdp</span>:@<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span>) <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ocs_match</span>' (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#tthdp">tthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>' <span class="id">c</span>' <span class="id">tthdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSim.html#tthdp">tthdp</a></span> <span class="id">i</span>' <span class="id">c</span>' <span class="id">tthdp</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ocs_match</span>' (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id"><a href="GlobSim.html#i">i</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9098')">Proof.</div>
<div class="proofscript" id="proof9098">
 <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.ocs_match_comm">ocs_match_comm</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id">stp_upd_ocs_match</span>';<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">call_ocs_match</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">TGE</span> <span class="id">sthdp</span> <span class="id">thdp</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id">ocs_match</span>' <span class="id"><a href="GlobSim.html#SGE">SGE</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>)(<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">c</span> <span class="id">funid</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">new_ix</span> <span class="id">cc</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GlobSim.html#funid">funid</a></span>, <span class="id"><a href="GlobSim.html#sg">sg</a></span>, <span class="id"><a href="GlobSim.html#args">args</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_mod_id</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span> <span class="id"><a href="GlobSim.html#funid">funid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSim.html#new_ix">new_ix</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSim.html#TGE">TGE</a></span> <span class="id"><a href="GlobSim.html#new_ix">new_ix</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_new_core</span>: <span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">new_lang</span> <span class="id">new_Ge</span> <span class="id"><a href="GlobSim.html#funid">funid</a></span> <span class="id"><a href="GlobSim.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_push</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> <span class="id"><a href="GlobSim.html#new_ix">new_ix</a></span> <span class="id">cc</span>' <span class="id"><a href="GlobSim.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ocs_match</span>' (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>)(<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSim.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9099')">Proof.</div>
<div class="proofscript" id="proof9099">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">p</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span> <span class="id">eqn</span>:?; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">Heqo</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.is_emp">CallStack.is_emp</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.push">CallStack.push</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span> 2;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">return_ocs_match</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">SGE</span> <span class="id">GE</span> <span class="id">sthdp</span> <span class="id">thdp</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id">ocs_match</span>' <span class="id"><a href="GlobSim.html#SGE">SGE</a></span> <span class="id"><a href="GlobSim.html#GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>)(<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>  <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>' <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSim.html#GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSim.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_caller</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSim.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span>' := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSim.html#GE">GE</a></span> <span class="id">c</span>'<span class="id">_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span>' := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c</span>'<span class="id">_lang</span> <span class="id">cc</span>' (<span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="id">c_sg</span> <span class="id"><a href="GlobSim.html#res">res</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSim.html#t">t</a></span> <span class="id">c</span>'' <span class="id">thdp</span>''),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id">ocs_match</span>' <span class="id"><a href="GlobSim.html#SGE">SGE</a></span> <span class="id"><a href="GlobSim.html#GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="GlobSim.html#sthdp">sthdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>)(<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>'' <span class="id"><a href="GlobSim.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9100')">Proof.</div>
<div class="proofscript" id="proof9100">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">p</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span> <span class="id">eqn</span>:?; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">Heqo</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>);[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Heqo</span>;<span class="tactic">clear</span> <span class="id">e</span> <span class="id">Heqo</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span>=<span class="id">t</span>\/<span class="id">i</span>&lt;&gt;<span class="id">t</span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo0</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">Heqo1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span> 2;<span class="tactic">auto</span>;<span class="tactic">intro</span> <span class="id">S</span>;<span class="tactic">inversion</span> <span class="id">S</span>;<span class="tactic">clear</span> <span class="id">e</span> <span class="id">S</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[<span class="id">contradiction</span>|];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.final_pool">final_pool</a></span> {<span class="id">ge</span>}(<span class="id">thdp</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>, @<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> -&gt; <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="GlobSim.html#thdp">thdp</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.final_state_rule1">final_state_rule1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">p1</span> <span class="id">t</span> <span class="id">c</span> <span class="id">p2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#p2">p2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSim.html#p1">p1</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="id"><a href="GlobSim.html#p2">p2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#p1">p1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9101')">Proof.</div>
<div class="proofscript" id="proof9101">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> {|<span class="id"><a href="GlobDefs.html#ThreadPool.Build_t">ThreadPool.content</a></span> := <span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cs</span>') (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">p1</span>);<span class="id">ThreadPool.next_tid</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">p1</span>;<span class="id">ThreadPool.next_fmap</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">p1</span> |} <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">i</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.final_state_rule2">final_state_rule2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">p</span> <span class="id">t</span> <span class="id">ix</span> <span class="id">cc</span> <span class="id">sg</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id">p</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="GlobSim.html#p">p</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> <span class="id"><a href="GlobSim.html#ix">ix</a></span> <span class="id"><a href="GlobSim.html#cc">cc</a></span> <span class="id"><a href="GlobSim.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9102')">Proof.</div>
<div class="proofscript" id="proof9102">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">t</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">p</span>));<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">p</span>' <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="kwd">in</span> *;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">i</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.final_state_rule3">final_state_rule3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">p</span> <span class="id">t</span> <span class="id">p</span>' <span class="id">c</span> <span class="id">p</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id">p</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="GlobSim.html#p">p</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">p</span>' <span class="id"><a href="GlobSim.html#t">t</a></span> <span class="id"><a href="GlobSim.html#c">c</a></span> <span class="id">p</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9103')">Proof.</div>
<div class="proofscript" id="proof9103">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">t</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">p</span>)) <span class="id">eqn</span>:<span class="id">eq1</span>;[|<span class="tactic">inversion</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t0</span>) <span class="id">eqn</span>:<span class="id">eq2</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span>  {|<span class="id"><a href="GlobDefs.html#ThreadPool.Build_t">ThreadPool.content</a></span> := <span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cs</span>') (<span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t1</span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">p</span>)); <span class="id">ThreadPool.next_tid</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">p</span>; <span class="id">ThreadPool.next_fmap</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">p</span> |} <span class="id">i</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">e</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>: <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span> (<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>) <span class="id">tpc</span> <span class="id">tpc1</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt; ~<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9104')">Proof.</div>
<div class="proofscript" id="proof9104">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">tp1</span>:=<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">spc</span>)(<span class="id">tp2</span>:=<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">tpc1</span>);<span class="tactic">auto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H4</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="tactic">eapply</span> <span class="id">ttp_upd_ocs_match</span>'|<span class="tactic">eapply</span> <span class="id">call_ocs_match</span>'|<span class="tactic">eapply</span> <span class="id">return_ocs_match</span>'|<span class="id">contradict</span> <span class="id">H0</span> |<span class="tactic">eapply</span> <span class="id">ttp_upd_ocs_match</span>'];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">TP</span>:=<span class="id">thdp</span>');<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> &lt;-&gt; <span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9105')">Proof.</div>
<div class="proofscript" id="proof9105">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool">final_pool</a></span>;<span class="tactic">simpl</span>;<span class="tactic">split</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span> (<span class="id">TP</span>:=(<span class="id">thread_pool</span>));<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.halt_step_thrddom_eq_preservation">halt_step_thrddom_eq_preservation</a></span>: <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id">spc</span> <span class="id">spc1</span> <span class="id">tpc</span> <span class="id">tpc1</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp1">fp1</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> -&gt; <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSim.html#fp2">fp2</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt; <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#spc">spc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) = <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9106')">Proof.</div>
<div class="proofscript" id="proof9106">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span> <span class="kwd">as</span> [<span class="id">sthp</span> <span class="id">sid</span> <span class="id">sgm</span> <span class="id">sbit</span>] <span class="id">eqn</span>:<span class="id">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule1">final_state_rule1</a></span> <span class="kwd">in</span> <span class="id">H0</span>|<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule2">final_state_rule2</a></span> <span class="kwd">in</span> <span class="id">H0</span>|<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule3">final_state_rule3</a></span> <span class="kwd">in</span> <span class="id">H0</span>| |<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule1">final_state_rule1</a></span> <span class="kwd">in</span> <span class="id">H0</span>];<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">auto</span>;[<span class="id">contradict</span> <span class="id">L</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>|<span class="id">contradict</span> <span class="id">L</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>|<span class="id">contradict</span> <span class="id">L</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>| |<span class="id">contradict</span> <span class="id">L</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span> <span class="kwd">as</span> [<span class="id">tthp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] <span class="id">eqn</span>:<span class="id">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;[<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule1">final_state_rule1</a></span> <span class="kwd">in</span> <span class="id">H3</span>|<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule2">final_state_rule2</a></span> <span class="kwd">in</span> <span class="id">H3</span>|<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule3">final_state_rule3</a></span> <span class="kwd">in</span> <span class="id">H3</span>| |<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_state_rule1">final_state_rule1</a></span> <span class="kwd">in</span> <span class="id">H3</span>];<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">auto</span>;[<span class="id">contradict</span> <span class="id">R</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>|<span class="id">contradict</span> <span class="id">R</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>|<span class="id">contradict</span> <span class="id">R</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>| |<span class="id">contradict</span> <span class="id">R</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.final_pool_final_state_equiv">final_pool_final_state_equiv</a></span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1  <span class="kwd">with</span>(<span class="id">tp1</span>:=<span class="id">thdp</span>')(<span class="id">tp2</span>:=<span class="id">thdp</span>'0);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H8</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">t</span> = <span class="id">tid</span> \/ <span class="id">t</span> &lt;&gt; <span class="id">tid</span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_thread_halt0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_thread_halt</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H5</span>,<span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span>,<span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">tid</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">sthp</span>)) <span class="id">eqn</span>:<span class="id">eq1</span>;[|<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t0</span>) <span class="id">eqn</span>:<span class="id">eq2</span>;<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">tid</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">tthp</span>)) <span class="id">eqn</span>:<span class="id">eq3</span>;[|<span class="tactic">inversion</span> <span class="id">H_tp_pop0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t2</span>) <span class="id">eqn</span>:<span class="id">eq4</span>;<span class="tactic">inversion</span> <span class="id">H_tp_pop0</span>;<span class="tactic">clear</span> <span class="id">H_tp_pop0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_star_thrddom_eq_preservation">tau_star_thrddom_eq_preservation</a></span>: <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span> (<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>) <span class="id">tpc</span> <span class="id">tpc1</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>) <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt; ~ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9107')">Proof.</div>
<div class="proofscript" id="proof9107">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">induction</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.tau_star_finalstate_thrddom_eq_preservation">tau_star_finalstate_thrddom_eq_preservation</a></span> : <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">spc1</span> <span class="id">tpc1</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>) <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#fp1">fp1</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>) <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#fp2">fp2</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> -&gt; <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9108')">Proof.</div>
<div class="proofscript" id="proof9108">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">fp2</span>;<span class="tactic">intro</span> <span class="id">TMP</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">spc1</span>). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc1</span>). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>,<span class="id">x0</span>; <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_final_state_preservation</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_final_state_preservation</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">eauto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">s</span>' <span class="id">H11</span> <span class="id">H12</span> <span class="id">s</span>'0 <span class="id">H17</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span> = <span class="id">x</span> + 1). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x0</span>=<span class="id">x0</span>+1). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H10</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_N_split">tau_N_split</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">spc</span>'&amp;<span class="id">fp1</span>&amp;<span class="id">fp2</span>&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_N_split">tau_N_split</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">tpc</span>'&amp;<span class="id">fp3</span>&amp;<span class="id">gp4</span>&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H10</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc</span>'). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">tpc</span>);<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">spc</span>'). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">spc</span>);<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id">exists</span> <span class="id">x</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#x">x</a></span> <span class="id">spc</span> <span class="id">fp1</span> <span class="id">spc</span>'). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L2</span>:<span class="id">exists</span> <span class="id">x</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#x">x</a></span> <span class="id">tpc</span> <span class="id">fp3</span> <span class="id">tpc</span>'). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">spc</span>'). <span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">tpc</span>'). <span class="tactic">intro</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H19</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_thrddom_eq_preservation">tau_star_thrddom_eq_preservation</a></span> <span class="id">sge</span> <span class="id">tge</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">tpc</span>' <span class="id">fp3</span> <span class="id">H0</span> <span class="id">H4</span> <span class="id">L2</span> <span class="id">H17</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span> <span class="kwd">in</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_thrddom_eq_preservation">tau_star_thrddom_eq_preservation</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span> <span class="kwd">in</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H21</span>;<span class="tactic">inversion</span> <span class="id">H27</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="GlobSim.html#GlobSim.halt_step_thrddom_eq_preservation">halt_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.valid_tid">valid_tid</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>) :<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="GlobSim.html#t">t</a></span> /\ ~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="GlobSim.html#t">t</a></span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">match_tp_one</span>' : <span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span>(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)( <span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>) (<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9109')">Proof.</div>
<div class="proofscript" id="proof9109">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_valid_tid_preservation</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">match_tp_ano</span>' :<span class="kwd">forall</span> <span class="id">sge</span> <span class="id">tge</span>(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)( <span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>) (<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span> -&gt; <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9110')">Proof.</div>
<div class="proofscript" id="proof9110">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_valid_tid_preservation</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.non_tau_step_tid_rule">non_tau_step_tid_rule</a></span>: <span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">o</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="GlobSim.html#fp">fp</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span> -&gt; <span class="id"><a href="GlobSim.html#o">o</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#tau">tau</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span> <span class="id"><a href="GlobSim.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9111')">Proof.</div>
<div class="proofscript" id="proof9111">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="GlobSim.html#GlobSim.Lemmas">Lemmas</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="GlobSim.Simulation">Simulation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.Sim_tau_step_case">Sim_tau_step_case</a></span> (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span> <span class="id">fpT1</span> <span class="id">spc1</span> <span class="id">tpc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> /\ <span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span>) <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.Sim_EntAtom_case">Sim_EntAtom_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>' <span class="id">fpT</span>' <span class="id">fpS</span>'' <span class="id">fpT</span>'' <span class="id">spc</span>' <span class="id">tpc</span>' <span class="id">spc</span>'' <span class="id">tpc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">spc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpS</span>'' <span class="id">spc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">tpc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpT</span>'' <span class="id">tpc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>'' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>'' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS</span>'')) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span>' <span class="id">fpT</span>'')) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">spc</span>'' <span class="id">tpc</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.Sim_final_case">Sim_final_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)( <span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>' <span class="id">fpT</span>' <span class="id">spc</span>' <span class="id">tpc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">spc</span>' /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id">fpT</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.Sim_npsw_case">Sim_npsw_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc</span>' <span class="id">fpS</span>' <span class="id">tpc</span>' <span class="id">fpT</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">o</span> <span class="id">t</span> <span class="id">spc</span>'' <span class="id">tpc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id">spc</span>'' <span class="id"><a href="GlobSim.html#t">t</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>,  <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id">spc</span>'' <span class="id"><a href="GlobSim.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#o">o</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#tau">tau</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})({-|<span class="id">tpc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>}) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">spc</span>' <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">tpc</span>' <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">tpc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id">fpT</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="GlobSim.GSim">GSim</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_state</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="GlobSim.match_tp">match_tp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">spc</span> <span class="id">tpc</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span>  <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inj_inject">Bset.inj_inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span>) /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\ <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#atombit_eq">atombit_eq</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="GlobSim.match_step">match_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.Sim_final_case">Sim_final_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.Sim_npsw_case">Sim_npsw_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.Sim_tau_step_case">Sim_tau_step_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.Sim_EntAtom_case">Sim_EntAtom_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.d2s_match">d2s_match</a></span>{<span class="id">sge</span> <span class="id">tge</span>}(<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)(<span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">I</span> <span class="id">order</span> <span class="id">i</span> <span class="id">match_state</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDSim.html#GConfigDSim">GConfigDSim</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#I">I</a></span> <span class="id"><a href="GlobSim.html#order">order</a></span> <span class="id"><a href="GlobSim.html#match_state">match_state</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\ <span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\ <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>/\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.GSim_d2s_match">GSim_d2s_match</a></span>{<span class="id">sge</span> <span class="id">tge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSim.html#GlobSim.GSim">GSim</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9112')">Proof.</div>
<div class="proofscript" id="proof9112">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">I</span>[<span class="id">ord</span>[<span class="id">i</span>[<span class="id">match_state</span>[<span class="id">GDSim</span>[<span class="id">match_spc_tpc</span>[<span class="id">safe_spc</span> [<span class="id">LDet</span>[<span class="id">invspc</span> [<span class="id">invtpc</span> [<span class="id">wd1</span> <span class="id">wd2</span>]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">GDSim</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">R</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">L</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">eapply</span> <span class="id">L</span>|<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id">R</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">GDSim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">mu</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">GDSim</span> <span class="id">match_spc_tpc</span> <span class="id">safe_spc</span> <span class="id">LDet</span> <span class="id">invspc</span> <span class="id">invtpc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span> <span class="kwd">using</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id">index_wf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">safe_spc</span> <span class="kwd">as</span> [<span class="id">nabort</span> <span class="id">safe_succ</span>];<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.safe_rule">safe_rule</a></span> <span class="kwd">in</span> <span class="id">nabort</span> <span class="kwd">as</span> [<span class="id">final</span>|[<span class="id">l</span>[<span class="id">fpS</span>'[<span class="id">spc</span>' <span class="id">step_spc_spc</span>']]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_final_case">Sim_final_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">final</span> <span class="kwd">as</span> <span class="id">Tmp1</span>;<span class="tactic">eapply</span> <span class="id">match_final</span> <span class="kwd">in</span> <span class="id">Tmp1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Tmp1</span> <span class="kwd">as</span> [<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span> <span class="id">S4</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">fpT1</span>,<span class="id">spc</span>,<span class="id">tpc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id">l</span>&lt;&gt;<span class="id"><a href="ETrace.html#tau">tau</a></span>\/<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>;[<span class="tactic">auto</span>|<span class="id">left</span>|<span class="id">left</span>];<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> [<span class="id">ntau</span>|];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_npsw_case">Sim_npsw_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">step_spc_spc</span>' <span class="kwd">as</span> <span class="id">Tmp1</span>;<span class="tactic">eapply</span> <span class="id">match_npsw_step</span> <span class="kwd">in</span> <span class="id">Tmp1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Tmp1</span> <span class="kwd">as</span> [<span class="id">fpT</span>'[<span class="id">tpc</span>'[<span class="id">i</span>'[<span class="id">step_tpc_tpc</span>'[<span class="id">lfpg</span> <span class="id">match_spc</span>'<span class="id">_tpc</span>']]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc</span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">tpc</span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">spc</span>'),<span class="id">spc</span>',<span class="id">tpc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">step_spc_spc</span>';<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">id</span> <span class="id">valid_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.switch_any">switch_any</a></span> <span class="kwd">in</span> <span class="id">valid_id</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fpS</span>'=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">valid_id</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">valid_id</span> <span class="kwd">as</span> <span class="id">step2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_npsw_step</span> <span class="kwd">in</span> <span class="id">valid_id</span> <span class="kwd">as</span> [<span class="id">fpTq</span>'[<span class="id">tpcq</span>'[<span class="id">iq</span>'[<span class="id">step_tpc_tpcq</span>'[<span class="id">lfpgq</span> <span class="id">match_spcq</span>'<span class="id">_tpcq</span>']]]]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">step_tpc_tpcq</span>' <span class="kwd">as</span> <span class="id">step3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.sw_step_det">sw_step_det</a></span> <span class="kwd">in</span> <span class="id">step_tpc_tpcq</span>';<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">step_tpc_tpc</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">step_tpc_tpcq</span>' <span class="kwd">as</span> [<span class="id">eq1</span>[<span class="id">eq2</span>[<span class="id">eq3</span> [<span class="id">eq4</span> <span class="id">eq5</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tpcq</span>' = {-|<span class="id">tpc</span>',<span class="id">id</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpcq</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq3</span>,<span class="id">eq4</span>,<span class="id">eq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">match_tp0</span> <span class="kwd">in</span> <span class="id">match_spcq</span>'<span class="id">_tpcq</span>' <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span> <span class="id">Eq</span>]];<span class="tactic">inversion</span> <span class="id">Eq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">eq3</span> <span class="id">eq4</span> <span class="id">eq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span> <span class="id">mu</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>', <span class="id">id</span>}) ({-|<span class="id">tpc</span>', <span class="id">id</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">I</span>,<span class="id">ord</span>,<span class="id">iq</span>',<span class="id">match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">step2</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">safe_succ</span> <span class="kwd">in</span> <span class="id">step2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span> <span class="kwd">in</span> <span class="id">step3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">auto</span>.          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span> &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' \/ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span>,<span class="id">spc</span>';<span class="tactic">destruct</span> <span class="id">atom_bit</span>,<span class="id">atom_bit0</span>;<span class="tactic">compute</span>;<span class="tactic">auto</span>;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> [<span class="id">neqbit</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_EntAtom_case">Sim_EntAtom_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">neqbit</span> <span class="kwd">as</span> <span class="id">Tmp1</span>;<span class="tactic">eapply</span> <span class="id">match_ent_atom</span> <span class="kwd">in</span> <span class="id">neqbit</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">neqbit</span> <span class="kwd">as</span> [<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">tpc2</span>[<span class="id">fpT2</span>[<span class="id">j</span> [<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">fpT1</span>,<span class="id">fpS</span>',<span class="id">fpT2</span>,<span class="id">spc</span>,<span class="id">tpc1</span>,<span class="id">spc</span>',<span class="id">tpc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">match_tp0</span> <span class="kwd">in</span> <span class="id">S5</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">Eq</span> <span class="id">_</span>]];<span class="tactic">inversion</span> <span class="id">Eq</span>;<span class="tactic">clear</span> <span class="id">Eq</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">match_tp0</span> <span class="kwd">in</span> <span class="id">match_spc_tpc</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">Eq</span> <span class="id">_</span>]];<span class="tactic">inversion</span> <span class="id">Eq</span>;<span class="tactic">clear</span> <span class="id">Eq</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H0</span>;<span class="tactic">rewrite</span> &lt;-<span class="id">S2</span>;<span class="tactic">rewrite</span> &lt;-<span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">I</span>,<span class="id">ord</span>,<span class="id">j</span>,<span class="id">match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id">spc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">safe_succ</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">spc</span>'). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc2</span>). <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span> <span class="kwd">in</span> <span class="id">S1</span>;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_tau_step</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [[<span class="id">tpc</span>'[<span class="id">fpT</span>'[<span class="id">i</span>'[<span class="id">S1</span>[<span class="id">S2</span> <span class="id">S3</span>]]]]]|[<span class="id">j</span>[<span class="id">S1</span> <span class="id">S2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_tau_step_case">Sim_tau_step_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>',<span class="id">fpT</span>',<span class="id">spc</span>',<span class="id">tpc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">I</span>,<span class="id">ord</span>,<span class="id">i</span>',<span class="id">match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">step_spc_spc</span>' <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">safe_succ</span> <span class="kwd">in</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span>(<span class="tactic">split</span>;[<span class="tactic">auto</span>|]);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">S1</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invspc</span>':<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">spc</span>'). <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">safe_succ</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' <span class="id">step_spc_spc</span>' <span class="kwd">as</span> <span class="id">safe_spc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="id">j</span> <span class="id">S1</span> <span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>') <span class="id">fpT</span> <span class="id">spc</span>' <span class="id">tpc</span> <span class="id">GDSim</span> <span class="id">S2</span> <span class="id">safe_spc</span>' <span class="id">LDet</span> <span class="id">invspc</span>' <span class="id">invtpc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_final_case">Sim_final_case</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">fpS</span>'1[<span class="id">fpT</span>'1[<span class="id">spc</span>'1[<span class="id">tpc</span>'1[<span class="id">Q1</span>[<span class="id">Q2</span>[<span class="id">Q3</span>[<span class="id">Q4</span>[<span class="id">Q5</span>[<span class="id">Q6</span> <span class="id">Q7</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS</span>'1),<span class="id">fpT</span>'1,<span class="id">spc</span>'1,<span class="id">tpc</span>'1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">econstructor</span> 2|<span class="tactic">split</span>];<span class="tactic">eauto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_npsw_case">Sim_npsw_case</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">spc1</span>[<span class="id">fpS1</span>[<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">star1</span>[<span class="id">eq1</span>[<span class="id">star2</span>[<span class="id">eq2</span>[<span class="id">o</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc1</span>,(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS1</span>),<span class="id">tpc1</span>,<span class="id">fpT1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>|<span class="tactic">split</span>;[<span class="tactic">congruence</span>|<span class="tactic">split</span>];<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">o</span>,<span class="id">t</span>,<span class="id">spc2</span>,<span class="id">tpc2</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.                <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_tau_step_case">Sim_tau_step_case</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS1</span>),<span class="id">fpT1</span>,<span class="id">spc1</span>,<span class="id">tpc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">econstructor</span> 2|];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_EntAtom_case">Sim_EntAtom_case</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">fpS2</span>[<span class="id">fpT2</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS1</span>),<span class="id">fpT1</span>,<span class="id">fpS2</span>,<span class="id">fpT2</span>,<span class="id">spc1</span>,<span class="id">tpc1</span>,<span class="id">spc2</span>,<span class="id">tpc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">econstructor</span> 2|];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="GlobSim.html#GlobSim.Simulation">Simulation</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="GlobSim.GlobIndexSim">GlobIndexSim</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>)(<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span> <span class="id">fpT1</span> <span class="id">spc1</span> <span class="id">tpc1</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> /\ <span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span>) <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#j">j</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpS1">fpS1</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#fpT1">fpT1</a></span>) <span class="id"><a href="GlobSim.html#spc1">spc1</a></span> <span class="id"><a href="GlobSim.html#tpc1">tpc1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>)(<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>' <span class="id">fpT</span>' <span class="id">fpS</span>'' <span class="id">fpT</span>'' <span class="id">spc</span>' <span class="id">tpc</span>' <span class="id">spc</span>'' <span class="id">tpc</span>'' <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">spc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpS</span>'' <span class="id">spc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">tpc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpT</span>'' <span class="id">tpc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>'' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>'' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span>' <span class="id">fpS</span>'')) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span>' <span class="id">fpT</span>'')) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#j">j</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">spc</span>'' <span class="id">tpc</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.ISim_final_case">ISim_final_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)(<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)( <span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>' <span class="id">fpT</span>' <span class="id">spc</span>' <span class="id">tpc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">spc</span>' /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id">fpT</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.ISim_npsw_case">ISim_npsw_case</a></span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">match_state</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> -&gt; <span class="kwd">Prop</span>)(<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span> <span class="id">tpc</span>:<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc</span>' <span class="id">fpS</span>' <span class="id">tpc</span>' <span class="id">fpT</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">o</span> <span class="id">t</span> <span class="id">spc</span>'' <span class="id">tpc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id">spc</span>'' <span class="id"><a href="GlobSim.html#t">t</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>,  <span class="id"><a href="GlobSim.html#GlobSim.valid_tid">valid_tid</a></span> <span class="id">spc</span>'' <span class="id"><a href="GlobSim.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#o">o</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#tau">tau</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span>,<span class="id"><a href="GlobSim.html#match_state">match_state</a></span> <span class="id"><a href="GlobSim.html#j">j</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})({-|<span class="id">tpc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>}) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">spc</span>' <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">tpc</span>' <span class="id"><a href="GlobSim.html#o">o</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">tpc</span>'',<span class="id"><a href="GlobSim.html#id">id</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id">fpT</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobSim.d2s_match_index">d2s_match_index</a></span> {<span class="id">sge</span> <span class="id">tge</span>}(<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>):= @<span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="GlobSim.index_match">index_match</a></span> {<span class="id">sge</span> <span class="id">tge</span>} (<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)(<span class="id">mu</span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>)(<span class="id">fpS</span> <span class="id">fpT</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)(<span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_tp</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inj_inject">Bset.inj_inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span>) /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> /\ <span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<span class="id">thrddom_eq</span>' <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#atombit_eq">atombit_eq</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_step</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.d2s_match_index_exists">d2s_match_index_exists</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  (<span class="id">sge</span> <span class="id">tge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">spc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span>)(<span class="id">tpc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span>) <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">mu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>, <span class="id"><a href="GlobSim.html#GlobSim.index_match">index_match</a></span> <span class="id"><a href="GlobSim.html#i">i</a></span> <span class="id"><a href="GlobSim.html#mu">mu</a></span> <span class="id"><a href="GlobSim.html#fpS">fpS</a></span> <span class="id"><a href="GlobSim.html#fpT">fpT</a></span> <span class="id"><a href="GlobSim.html#spc">spc</a></span> <span class="id"><a href="GlobSim.html#tpc">tpc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9113')">Proof.</div>
<div class="proofscript" id="proof9113">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> @<span class="id"><a href="GlobSim.html#GlobSim.GSim_d2s_match">GSim_d2s_match</a></span> <span class="id">sge</span> <span class="id">tge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">match_step0</span> <span class="id">mu</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">match_step0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step0</span> <span class="kwd">as</span> [<span class="id">final</span>|[<span class="id">sw</span>|[<span class="id">tau</span>|<span class="id">EntAx</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">final</span> <span class="kwd">as</span> [<span class="id">fpS</span>' [<span class="id">fpT</span>'[<span class="id">spc</span>'[<span class="id">tpc</span>'[<span class="id">star_spc_spc</span>'[<span class="id">final_spc</span>'[<span class="id">star_tpc_tpc</span>'[<span class="id">final_tpc</span>' <span class="id">lfpg</span>]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">star_tpc_tpc</span>' <span class="kwd">as</span> [<span class="id">n</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>. <span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_tp0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">exists</span> <span class="id">fpS</span>',<span class="id">fpT</span>',<span class="id">spc</span>',<span class="id">tpc</span>'. <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.Sim_npsw_case">Sim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">sw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sw</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc</span>'[<span class="id">fpT</span>'[<span class="id">star1</span>[<span class="id">b1</span>[<span class="id">star2</span>[<span class="id">b2</span>[<span class="id">o</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> [<span class="id">x</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_tp0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc</span>',<span class="id">fpS</span>',<span class="id">tpc</span>',<span class="id">fpT</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">o</span>,<span class="id">t</span>,<span class="id">spc2</span>,<span class="id">tpc2</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">id</span> <span class="id">H3</span>) <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tau</span> <span class="kwd">as</span>[<span class="id">fpS</span>'[<span class="id">fpT</span>'[<span class="id">spc</span>'[<span class="id">tpc</span>'[<span class="id">plus_spc_spc</span>'[<span class="id">plus_tpc_tpc</span>']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_tau_N_equiv">tau_plus_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">plus_tpc_tpc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">plus_tpc_tpc</span>' <span class="kwd">as</span>[<span class="id">n</span> <span class="id">plus_tpc_tpc</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>. <span class="id">constructor</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_tp0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>; <span class="id">left</span>;<span class="id">exists</span> <span class="id">fpS</span>',<span class="id">fpT</span>',<span class="id">spc</span>',<span class="id">tpc</span>',0;<span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EntAx</span> <span class="kwd">as</span>[<span class="id">fpS</span>'[<span class="id">fpT</span>'[<span class="id">fpS</span>''[<span class="id">fpT</span>''[<span class="id">spc</span>'[<span class="id">tpc</span>'[<span class="id">spc</span>''[<span class="id">tpc</span>''[<span class="id">star_spc_spc</span>'[<span class="id">step_spc</span>'<span class="id">_spc</span>''[<span class="id">star_tpc_tpc</span>'[<span class="id">step_tpc</span>'<span class="id">_tpc</span>''[<span class="id">bit_neq_spc</span>'<span class="id">_spc</span>''[<span class="id">bit_eq_spc_spc</span>'[<span class="id">lfpg</span> <span class="id">match_spc</span>''<span class="id">_tpc</span>'']]]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">star_tpc_tpc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">star_tpc_tpc</span>' <span class="kwd">as</span>[<span class="id">x</span> <span class="id">star_tpc_tpc</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">match_tp0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>',<span class="id">fpT</span>',<span class="id">fpS</span>'',<span class="id">fpT</span>'',<span class="id">spc</span>',<span class="id">tpc</span>',<span class="id">spc</span>'',<span class="id">tpc</span>'',0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.GUSim_index_match">GUSim_index_match</a></span>{<span class="id">sge</span> <span class="id">tge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobUSim.html#GConfigUSim">GConfigUSim</a></span> <span class="id"><a href="GlobSim.html#sge">sge</a></span> <span class="id"><a href="GlobSim.html#tge">tge</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span> <span class="id"><a href="GlobSim.html#GlobSim.index_match">index_match</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9114')">Proof.</div>
<div class="proofscript" id="proof9114">
 {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 6.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">H0</span>[<span class="id">wd1</span>[<span class="id">wd2</span>[[<span class="id">H1</span> <span class="id">_</span>][<span class="id">ldet</span>[<span class="id">inv1</span>[<span class="id">inv2</span>[<span class="id">theq1</span>[<span class="id">biteq1</span> <span class="id">tideq1</span>]]]]]]]]];<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step</span>'0 <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">fpT</span>'[<span class="id">_</span>[<span class="id">tpc</span>'[<span class="id">_</span>[<span class="id">_</span>[<span class="id">S1</span>[<span class="id">S2</span> <span class="id">_</span>]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S1</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S1</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc</span>'[<span class="id">fpT</span>'[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">o</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> [<span class="id">ntau</span>[<span class="id">j</span>[<span class="id">S5</span>[<span class="id">S6</span>[<span class="id">S7</span> <span class="id">S8</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">S7</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>;<span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">fpT1</span>[<span class="id">_</span>[<span class="id">fpT2</span>[<span class="id">_</span>[<span class="id">tpc1</span>[<span class="id">_</span>[<span class="id">tpc2</span>[<span class="id">j</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">N1</span>[<span class="id">N2</span> <span class="id">_</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">N2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unfocus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invtpc</span>:<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc</span>). <span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span> []]]]]]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step</span>'0 <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">fpS</span>'[<span class="id">fpT</span>'[<span class="id">spc</span>'[<span class="id">tpc</span>'[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">S5</span>[<span class="id">S6</span> <span class="id">S7</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>;<span class="id">clearfp</span>. <span class="id">exists</span> <span class="id">spc</span>',<span class="id">fpS</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc</span>'[<span class="id">fpT</span>'[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">o</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> [<span class="id">ntau</span>[<span class="id">j</span>[<span class="id">S5</span>[<span class="id">S6</span>[<span class="id">S7</span> <span class="id">S8</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">S7</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">fpT1</span>[<span class="id">_</span>[<span class="id">fpT2</span>[<span class="id">_</span>[<span class="id">tpc1</span>[<span class="id">_</span>[<span class="id">tpc2</span>[<span class="id">j</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">N1</span>[<span class="id">N2</span> <span class="id">_</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">N2</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unfocus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invtpc</span>:<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc</span>). <span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step</span>'0 <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">S5</span>[<span class="id">S6</span> <span class="id">S7</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span>[<span class="id">contra</span> <span class="id">_</span>];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[]]]]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">l</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> [<span class="id">ntau</span>[<span class="id">j</span>[<span class="id">S5</span>[<span class="id">S6</span>[<span class="id">S7</span> <span class="id">S8</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">clear</span> <span class="id">S3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">S7</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S7</span> <span class="kwd">as</span> [<span class="id">E1</span>[<span class="id">E2</span>[<span class="id">E3</span>[<span class="id">E4</span>[<span class="id">E5</span> <span class="id">_</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span>',<span class="id">spc</span>',<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,({-|<span class="id">spc2</span>,<span class="id">t</span>}),<span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">St</span> <span class="id">_</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">t2</span> <span class="id">vt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t2</span> <span class="id">vt2</span>) <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">j2</span>[<span class="id">Q1</span>[<span class="id">Q2</span>[<span class="id">Q3</span> <span class="id">Q4</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index_exists">d2s_match_index_exists</a></span> <span class="kwd">in</span> <span class="id">Q1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>({-|<span class="id">tpc2</span>,<span class="id">t2</span>} = {-|<span class="id">tpc</span>',<span class="id">t2</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc2</span>,<span class="id">tpc</span>';<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[]]]]];<span class="tactic">auto</span>.            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">contra</span> <span class="id">_</span>];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;?&amp;<span class="id">_</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;?&amp;<span class="id">_</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">fpT1</span>[<span class="id">_</span>[<span class="id">fpT2</span>[<span class="id">_</span>[<span class="id">tpc1</span>[<span class="id">_</span>[<span class="id">tpc2</span>[<span class="id">j</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">N1</span>[<span class="id">N2</span> <span class="id">_</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>;[<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">N2</span> <span class="kwd">as</span> []|<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> []];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;?&amp;<span class="id">_</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unfocus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">LDET</span>&amp;<span class="id">_</span>&amp;<span class="id">invtpc</span>&amp;<span class="id">_</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step</span>'0 <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">S5</span>[<span class="id">S6</span> <span class="id">S7</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">l</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> [<span class="id">ntau</span>[<span class="id">j</span>[<span class="id">S5</span>[<span class="id">S6</span>[<span class="id">S7</span> <span class="id">S8</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">S7</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index">d2s_match_index</a></span> <span class="kwd">in</span> <span class="id">S5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span> <span class="kwd">in</span> <span class="id">S5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S5</span> <span class="kwd">as</span> [<span class="id">I</span>'[<span class="id">ord</span>'[<span class="id">i</span>'[<span class="id">matchstate</span>'[[<span class="id">_</span> <span class="id">R</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>][<span class="kwd">match</span>' <span class="id">_</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">R</span> <span class="kwd">in</span> <span class="kwd">match</span>' <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">E</span> <span class="id">_</span>]];<span class="tactic">inversion</span> <span class="id">E</span>;<span class="tactic">clear</span> <span class="id">E</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">_</span>[<span class="id">E</span> <span class="id">_</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">E</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">fpS2</span>[<span class="id">fpT2</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">j</span>[<span class="id">N1</span>[<span class="id">N2</span>[<span class="id">N3</span>[<span class="id">N4</span>[<span class="id">N5</span>[<span class="id">N6</span>[<span class="id">N7</span>[<span class="id">N8</span>[<span class="id">N9</span> <span class="id">N10</span>]]]]]]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N3</span>;<span class="tactic">clear</span> <span class="id">N3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">N4</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index_exists">d2s_match_index_exists</a></span> <span class="kwd">in</span> <span class="id">N10</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span>,<span class="id">spc1</span>,<span class="id">fpS2</span>,<span class="id">spc2</span>,<span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N3</span>;<span class="tactic">clear</span> <span class="id">N3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">_</span>]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unfocus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invtpc</span>:<span class="id"><a href="GlobSim.html#GlobSim.inv">inv</a></span> <span class="id">tpc</span>). <span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">LT</span>:<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span>'). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">_</span>[<span class="id">wd1</span>[<span class="id">wd2</span>[<span class="id">_</span>[<span class="id">LDet</span> <span class="id">_</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_step</span>'0 <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">S5</span>[<span class="id">S6</span> <span class="id">S7</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">LDET</span>:<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id">tge</span>). <span class="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">S1</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">L</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">E1</span>&amp;<span class="id">E2</span>&amp;<span class="id">E3</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.thrddom_eq_comm">thrddom_eq_comm</a></span> <span class="kwd">in</span> <span class="id">E3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thrddom_eq</span>'<span class="id">_final_state_preservation</span> <span class="kwd">in</span> <span class="id">S2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc1</span>,<span class="id">fpS1</span>,0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_tau_N_equiv">tau_plus_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">clearfp</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.safe_succession">safe_succession</a></span> <span class="kwd">in</span> <span class="id">S1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_tau_star_preservation">thp_inv_tau_star_preservation</a></span> <span class="kwd">in</span> <span class="id">S1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_finalstate_thrddom_eq_preservation">tau_star_finalstate_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">subst</span>. <span class="id">constructor</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H13</span>;<span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">LT</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">spc1</span>,<span class="id">tpc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_star_tid_preservation">tau_star_tid_preservation</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span>). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">E1</span>[<span class="id">E2</span>[<span class="id">E0</span>[<span class="id">E3</span>[<span class="id">E4</span> [<span class="id">E5</span> [<span class="id">E6</span> [<span class="id">E7</span> [<span class="id">E8</span> <span class="id">E9</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">auto</span>|]);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">inversion</span> <span class="id">E8</span>;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E9</span>;<span class="tactic">subst</span>;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_final_case">ISim_final_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">L</span> <span class="kwd">as</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_N_tau_step_bit_rule">tau_N_tau_step_bit_rule</a></span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_tid_preservation">tau_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">L</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span>,<span class="id">fp</span>',<span class="id">spc1</span>,<span class="id">tpc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">spc</span>'[<span class="id">fpS</span>'[<span class="id">tpc1</span>[<span class="id">fpT1</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">l</span>[<span class="id">t</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">vt</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span>&gt;0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">try</span> <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> [<span class="id">nt</span>[<span class="id">j</span>[<span class="id">Q1</span>[<span class="id">Q2</span>[<span class="id">Q3</span> <span class="id">Q4</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.np_step_det">np_step_det</a></span> <span class="kwd">in</span> <span class="id">Q3</span> <span class="kwd">as</span> [];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">nt</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>. <span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">E1</span>[<span class="id">E2</span>[<span class="id">_</span>[<span class="id">E3</span>[<span class="id">E4</span>[<span class="id">E5</span>[<span class="id">E6</span>[<span class="id">E7</span>[<span class="id">E8</span> <span class="id">E9</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span> <span class="id">vt</span>) <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">s</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>. <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">s</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">S3</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E8</span>;<span class="tactic">subst</span>;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E9</span>;<span class="tactic">subst</span>;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_npsw_case">ISim_npsw_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc</span>',<span class="id">fpS</span>',<span class="id">tpc1</span>, <span class="id">fp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">S4</span>;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id">t</span>,<span class="id">spc2</span>,<span class="id">tpc2</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">LT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">S3</span>[<span class="id">S4</span> <span class="id">S5</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">clear</span> <span class="id">S2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">clear</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index_exists">d2s_match_index_exists</a></span> <span class="kwd">in</span> <span class="id">S5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">spc1</span>,<span class="id">fpS1</span>,<span class="id">x</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">E1</span>[<span class="id">E2</span>[<span class="id">_</span>[<span class="id">E3</span>[<span class="id">E4</span>[<span class="id">E5</span>[<span class="id">E6</span>[<span class="id">E7</span>[<span class="id">E8</span> <span class="id">E9</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E8</span>;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E9</span>;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_tau_step_case">ISim_tau_step_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">S2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span>,<span class="id">fp</span>',<span class="id">spc1</span>,<span class="id">tpc1</span>,<span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>;<span class="tactic">rewrite</span> &lt;- <span class="id">LT</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">fpS1</span>[<span class="id">fpT1</span>[<span class="id">fpS2</span>[<span class="id">fpT2</span>[<span class="id">spc1</span>[<span class="id">tpc1</span>[<span class="id">spc2</span>[<span class="id">tpc2</span>[<span class="id">j</span>[<span class="id">S1</span>[<span class="id">S2</span>[<span class="id">N1</span>[<span class="id">N2</span>[<span class="id">S3</span>[<span class="id">S4</span>[<span class="id">R1</span>[<span class="id">R2</span> [<span class="id">S5</span> <span class="id">S6</span>]]]]]]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">N2</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">match_tp</span>'0 <span class="kwd">as</span> [<span class="id">E1</span>[<span class="id">E2</span>[<span class="id">_</span>[<span class="id">E3</span>[<span class="id">E4</span>[<span class="id">E5</span>[<span class="id">E6</span>[<span class="id">E7</span>[<span class="id">E8</span> <span class="id">E9</span>]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_thrddom_eq_preservation">tau_step_thrddom_eq_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">clear</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">N2</span>;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.step_no_final">step_no_final</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E8</span>;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">inversion</span> <span class="id">E9</span>;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">N1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.tau_step_det">tau_step_det</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span>[]];<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.ISim_EntAtom_case">ISim_EntAtom_case</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS1</span>,<span class="id">fp</span>',<span class="id">fpS2</span>,<span class="id">fpT2</span>,<span class="id">spc1</span>,<span class="id">tpc1</span>,<span class="id">spc2</span>,<span class="id">tpc2</span>,<span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> &lt;- <span class="id">LT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clearfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="GlobSim.html#GlobSim.GlobIndexSim">GlobIndexSim</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="GlobSim.Flip">Flip</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobSim.Language_Det">Language_Det</a></span>: <span class="kwd">forall</span> <span class="id">NL</span> (<span class="id">L</span>:@<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="GlobSim.html#NL">NL</a></span>)(<span class="id">tp</span>:<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="GlobSim.html#L">L</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#det_langs">det_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="GlobSim.html#tp">tp</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="GlobSim.html#tp">tp</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="GlobSim.html#tp">tp</a></span> <span class="id"><a href="GlobSim.html#gm">gm</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span> <span class="id"><a href="GlobSim.html#pc">pc</a></span> <span class="id"><a href="GlobSim.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSim.html#GlobSim.language_det">language_det</a></span> <span class="id"><a href="GlobSim.html#ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9115')">Proof.</div>
<div class="proofscript" id="proof9115">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="NPDet.html#NPDet.init_det">NPDet.init_det</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">flipping</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> (<span class="id">L</span>: @<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="GlobSim.html#NL">NL</a></span>) (<span class="id">sprog</span> <span class="id">tprog</span>: <span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="GlobSim.html#L">L</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDSim.html#GlobDSim">GlobDSim</a></span> <span class="id"><a href="GlobSim.html#sprog">sprog</a></span> <span class="id"><a href="GlobSim.html#tprog">tprog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#det_langs">det_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="GlobSim.html#tprog">tprog</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="GlobSim.html#tprog">tprog</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_safe_prog">np_safe_prog</a></span> <span class="id"><a href="GlobSim.html#sprog">sprog</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobUSim.html#GlobUSim">GlobUSim</a></span> <span class="id"><a href="GlobSim.html#sprog">sprog</a></span> <span class="id"><a href="GlobSim.html#tprog">tprog</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9116')">Proof.</div>
<div class="proofscript" id="proof9116">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobUSim.html#GlobUSim">GlobUSim</a></span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDSim.html#GlobDSim">GlobDSim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">mu</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">t</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span>[<span class="id">I</span>[<span class="id">order</span>[<span class="id">match_state</span> [<span class="id">i</span> [<span class="id">GDsim</span> <span class="id">match_spc_tpc</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">t</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="GlobSim.html#GlobSim.Language_Det">Language_Det</a></span> <span class="id">NL</span> <span class="id">L</span> <span class="id">tprog</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">t</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span> <span class="id">mu</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">spc</span> <span class="id">tpc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match">d2s_match</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">I</span>,<span class="id">order</span>,<span class="id">i</span>,<span class="id">match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">assumption</span>|]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>];<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.init_config_inv_thp">init_config_inv_thp</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H17</span>;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.d2s_match_index_exists">d2s_match_index_exists</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">k</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>,<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span>,<span class="id"><a href="GlobSim.html#GlobSim.index_match">index_match</a></span>,<span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobSim.html#GlobSim.GUSim_index_match">GUSim_index_match</a></span>;<span class="tactic">auto</span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="GlobSim.html#GlobSim.Flip">Flip</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="GlobSim.html#GlobSim">GlobSim</a></span>.<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
