<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module FMemLemmas</title>
<meta name="description" content="Documentation of Coq module FMemLemmas" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module FMemLemmas</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="FMemory.html">FMemory</a></span> <span class="id"><a href="FMemOpFP.html">FMemOpFP</a></span> <span class="id"><a href="MemOpFP.html">MemOpFP</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="MemAux.html">MemAux</a></span> <span class="id"><a href="loadframe.html">loadframe</a></span> <span class="id"><a href="AsmLang.html">AsmLang</a></span> <span class="id"><a href="Cop_fp.html">Cop_fp</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Hsimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>:?<span class="id">a</span>,<span class="id">H2</span>:?<span class="id">a</span>-&gt;?<span class="id">b</span>|-<span class="id">_</span>=&gt;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">H1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>/\<span class="id">_</span>|-<span class="id">_</span>=&gt; <span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>|-<span class="id">_</span>=&gt;<span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Esimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span>=&gt;<span class="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>=&gt;<span class="id">eexists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">ex_match</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<span class="id">Hx</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">ex_match2</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>]  |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<span class="id">Hx</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> ] =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<span class="id">Hx</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_access_eq_perm">eq_access_eq_perm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Memperm.perm_order</span>''<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_access">GMem.mem_access</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_access">GMem.mem_access</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>)) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Memperm.perm_order</span>''<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_access">GMem.mem_access</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>)) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_access">GMem.mem_access</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_access">Mem.mem_access</a></span>  <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>) = (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6359')">Proof.</div>
<div class="proofscript" id="proof6359">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="strip_eq_perm">strip_eq_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>) = (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>) <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">z</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6360')">Proof.</div>
<div class="proofscript" id="proof6360">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">H2</span>).<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span> ;<span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fmem_eq">fmem_eq</a></span> (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="FMemory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.eq">GMem.eq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_refl">fmem_eq_refl</a></span>:<span class="kwd">forall</span> <span class="id">m</span>,<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_refl">GMem.eq_refl</a></span>. Defined.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_sym">fmem_eq_sym</a></span>:<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span>,<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_sym">GMem.eq_sym</a></span>. <span class="tactic">auto</span>. Defined.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_access_eq">fmem_eq_access_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">z</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6361')">Proof.</div>
<div class="proofscript" id="proof6361">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[] []].<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#eq_access_eq_perm">eq_access_eq_perm</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">eq_access</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#strip_eq_perm">strip_eq_perm</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Record</span> <span class="id"><a name="gmem_fl_wd">gmem_fl_wd</a></span>(<span class="id">gm</span>:<span class="id"><a href="GMemory.html#gmem">GMemory.gmem</a></span>)(<span class="id">fl</span>:<span class="id"><a href="MemAux.html#freelist">freelist</a></span>)(<span class="id">nextblockid</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>):=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="freelist_wd0">freelist_wd0</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#n">n</a></span> &lt;&gt; <span class="id">n</span>' -&gt; <span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> &lt;&gt; <span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id">n</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="valid_wd0">valid_wd0</a></span> : <span class="kwd">forall</span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> = <span class="id"><a href="FMemLemmas.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="GMemory.html#GMem.validblocks">GMem.validblocks</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)&lt;-&gt; (<span class="id"><a href="FMemLemmas.html#n">n</a></span> &lt; <span class="id"><a href="FMemLemmas.html#nextblockid">nextblockid</a></span>)%<span class="id">nat</span>;<br/>
&nbsp;&nbsp;}.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_strip_fl_wd">fmem_strip_fl_wd</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6362')">Proof.</div>
<div class="proofscript" id="proof6362">
 <span class="tactic">destruct</span> <span class="id">m</span>;<span class="id">constructor</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="tactic">eauto</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="gmem_fl_wd_eqrefl">gmem_fl_wd_eqrefl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.eq">GMem.eq</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fl</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6363')">Proof.</div>
<div class="proofscript" id="proof6363">
&nbsp;&nbsp;<span class="tactic">destruct</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">valid_wd1</span> <span class="id">n0</span> <span class="id">b</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="GMemory.html#GMem.eq_validblocks">GMem.eq_validblocks</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">valid_wd1</span>;<span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">valid_wd1</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="combine">combine</a></span>(<span class="id">gm</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">fl</span>:<span class="id"><a href="MemAux.html#freelist">freelist</a></span>)(<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)(<span class="id">g</span>:<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>):=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.mkmem">Mem.mkmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.mem_access">GMem.mem_access</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.validblocks">GMem.validblocks</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#fl">fl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#freelist_wd0">freelist_wd0</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#g">g</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#valid_wd0">valid_wd0</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#g">g</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.access_max">GMem.access_max</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.invalid_noaccess">GMem.invalid_noaccess</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GMemory.html#GMem.contents_default">GMem.contents_default</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="strip_combine">strip_combine</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">fl</span> <span class="id">n</span> (<span class="id">wd</span>:<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#strip">strip</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#wd">wd</a></span>) = <span class="id"><a href="FMemLemmas.html#gm">gm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6364')">Proof.</div>
<div class="proofscript" id="proof6364">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#combine">combine</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">gm</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">fl</span> <span class="id">n</span> (<span class="id">wd</span>:<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#wd">wd</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6365')">Proof.</div>
<div class="proofscript" id="proof6365">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_combine_eq">mem_eq_combine_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">fl</span> <span class="id">n</span> (<span class="id">wd1</span>:<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span>) (<span class="id">Gmemeq</span>:<span class="id"><a href="GMemory.html#GMem.eq">GMem.eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#wd1">wd1</a></span>)(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> (<span class="id"><a href="FMemLemmas.html#gmem_fl_wd_eqrefl">gmem_fl_wd_eqrefl</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#Gmemeq">Gmemeq</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#n">n</a></span> <span class="id"><a href="FMemLemmas.html#wd1">wd1</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6366')">Proof.</div>
<div class="proofscript" id="proof6366">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="combine_equiv">combine_equiv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">l</span> <span class="id">i</span> <span class="id">wd</span> <span class="id">wd</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#wd">wd</a></span> = <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id">wd</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6367')">Proof.</div>
<div class="proofscript" id="proof6367">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">ProofIrrelevance.proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#combine">combine</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">e</span>. <span class="tactic">apply</span> <span class="id">e</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="combine_equiv2">combine_equiv2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fl1</span> <span class="id">fl2</span> <span class="id">i1</span> <span class="id">i2</span> <span class="id">wd1</span> <span class="id">wd2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fl1">fl1</a></span> = <span class="id"><a href="FMemLemmas.html#fl2">fl2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#i1">i1</a></span> = <span class="id"><a href="FMemLemmas.html#i2">i2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl1">fl1</a></span> <span class="id"><a href="FMemLemmas.html#i1">i1</a></span> <span class="id"><a href="FMemLemmas.html#wd1">wd1</a></span>= <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl2">fl2</a></span> <span class="id"><a href="FMemLemmas.html#i2">i2</a></span> <span class="id"><a href="FMemLemmas.html#wd2">wd2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6368')">Proof.</div>
<div class="proofscript" id="proof6368">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#combine_equiv">combine_equiv</a></span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="combine_refl">combine_refl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#x">x</a></span> = <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#x">x</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#x">x</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#x">x</a></span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6369')">Proof.</div>
<div class="proofscript" id="proof6369">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#combine">combine</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">ProofIrrelevance.proof_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_mem_eq_fmem">eq_mem_eq_fmem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm1</span> <span class="id">gm2</span> <span class="id">fl</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.eq">GMemory.GMem.eq</a></span> <span class="id"><a href="FMemLemmas.html#gm1">gm1</a></span> <span class="id"><a href="FMemLemmas.html#gm2">gm2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="FMemLemmas.html#gm1">gm1</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>,<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="FMemLemmas.html#gm2">gm2</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6370')">Proof.</div>
<div class="proofscript" id="proof6370">
&nbsp;&nbsp;<span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#mem_eq_combine_eq">mem_eq_combine_eq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span>) <span class="id">gm2</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m1</span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m1</span>) <span class="id">H1</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_load">fmem_eq_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6371')">Proof.</div>
<div class="proofscript" id="proof6371">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[] []].<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#eq_access_eq_perm">eq_access_eq_perm</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">eq_access</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#strip_eq_perm">strip_eq_perm</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#strip_eq_perm">strip_eq_perm</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">contradict</span> <span class="id">n</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>; <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="kwd">as</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id">z</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">i</span>)) <span class="kwd">as</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">j</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">i</span>)). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="FMemLemmas.html#k">k</a></span>&lt;= <span class="id">i</span>)%<span class="id">nat</span> -&gt;  <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">j</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>))(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>)) = <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">j</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>))(<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">k</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">k</span>&lt;=<span class="id">i</span>)%<span class="id">nat</span>. <span class="id">Omega.omega</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Zpos_P_of_succ_nat">Znat.Zpos_P_of_succ_nat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">j</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">BinInt.Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">k</span>))) 1) =  (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">j</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">k</span>))).<br/>
&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span>. <span class="tactic">clear</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHk</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eq_contents</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>, <span class="id">H7</span>. <span class="tactic">split</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">Heqi</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_alloc_exists">fmem_alloc_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">l</span> <span class="id">h</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>' <span class="id">b</span>, <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#h">h</a></span> = (<span class="id">m</span>',<span class="id"><a href="FMemLemmas.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6372')">Proof.</div>
<div class="proofscript" id="proof6372">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>. <span class="tactic">eauto</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_alloc">fmem_eq_alloc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span> <span class="id">m2</span>' <span class="id">b2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">FMemory.Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="FMemLemmas.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">FMemory.Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = (<span class="id">m2</span>', <span class="id"><a href="FMemLemmas.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id">m1</span>' <span class="id">m2</span>' /\ <span class="id"><a href="FMemLemmas.html#b1">b1</a></span> = <span class="id"><a href="FMemLemmas.html#b2">b2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6373')">Proof.</div>
<div class="proofscript" id="proof6373">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H1</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span> = <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">b</span> , <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.validblocks">Mem.validblocks</a></span> <span class="id">m1</span>)&lt;-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemory.html#Mem.validblocks">Mem.validblocks</a></span> <span class="id">m2</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="kwd">in</span> <span class="id">eq_validblocks</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">simpl</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 3. <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">destruct</span> <span class="id">H4</span>;[<span class="id">left</span>|<span class="id">right</span>|<span class="id">left</span>|<span class="id">right</span>];<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span> <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">eq_contents</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">Heqs</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span> <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>. <span class="tactic">apply</span> <span class="id">eq_access</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setN_geteq">setN_geteq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">v</span> <span class="id">j</span> <span class="id">z</span> <span class="id">p</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#i">i</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#j">j</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span>) (<span class="id"><a href="FMemory.html#Mem.setN">Mem.setN</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>) = <span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span>) (<span class="id"><a href="FMemory.html#Mem.setN">Mem.setN</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id">p</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6374')">Proof.</div>
<div class="proofscript" id="proof6374">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">induction</span> <span class="id">v</span>;<span class="tactic">intros</span>;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id">z</span> 0 = <span class="id">z</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>;<span class="tactic">try</span> <span class="id">Omega.omega</span>).<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">Maps.ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span>&lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">v</span>)%<span class="id">nat</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">i</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id">z</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">BinInt.Z.succ</a></span> <span class="id">z</span>)(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> <span class="id">i</span>)). <span class="tactic">simpl</span>. <span class="id">Lia.lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Z_of_nat_zify">Z_of_nat_zify</a></span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le">BinInt.Z.le</a></span> 0 <span class="id"><a href="FMemLemmas.html#x">x</a></span> -&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">BinInt.Z.to_nat</a></span> <span class="id"><a href="FMemLemmas.html#x">x</a></span>) = <span class="id"><a href="FMemLemmas.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6375')">Proof.</div>
<div class="proofscript" id="proof6375">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Znat.Z2Nat.id</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_pos">Znat.Z2Nat.inj_pos</a></span>. <span class="id">Lia.lia</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_neg">Znat.Z2Nat.inj_neg</a></span>. <span class="id">Lia.lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setN_geteq2">setN_geteq2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">i</span> <span class="id">p</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le">BinInt.Z.le</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt">BinInt.Z.lt</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.setN">Mem.setN</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.setN">Mem.setN</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id">p</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6376')">Proof.</div>
<div class="proofscript" id="proof6376">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">BinInt.Z.to_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">ofs</span> <span class="id">i</span>)) <span class="kwd">as</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">k</span>&lt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">v</span>)%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqk</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.id">Znat.Nat2Z.id</a></span>.  <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_lt">Znat.Z2Nat.inj_lt</a></span>;<span class="tactic">try</span> <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id">i</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">BinInt.Z.sub</a></span> <span class="id">ofs</span> <span class="id">i</span>)). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#setN_geteq">setN_geteq</a></span>  <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqk</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#Z_of_nat_zify">Z_of_nat_zify</a></span>;<span class="id">Omega.omega</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_store">fmem_eq_store</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">z</span> <span class="id">v</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.store">FMemory.Mem.store</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>', <span class="id"><a href="FMemory.html#Mem.store">FMemory.Mem.store</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6377')">Proof.</div>
<div class="proofscript" id="proof6377">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_access_eq">fmem_eq_access_eq</a></span> <span class="kwd">in</span> <span class="id">v0</span> <span class="kwd">as</span> <span class="id">v1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.valid_access_store">Mem.valid_access_store</a></span> <span class="kwd">with</span>(<span class="id">v</span>:=<span class="id">v</span>) <span class="kwd">in</span> <span class="id">v1</span> <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">STORE</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="tactic">inversion</span> <span class="id">STORE</span>;<span class="tactic">clear</span> <span class="id">STORE</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="id">constructor</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_dec">ZArith_dec.Z_lt_dec</a></span> <span class="id">ofs</span> <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="id">erewrite</span> (<span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>);<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge">BinInt.Z.ge</a></span> <span class="id">ofs</span> <span class="id">z</span>). <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">Coqlib.zlt</a></span> <span class="id">ofs</span> <span class="id">z</span>);<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_dec">ZArith_dec.Z_lt_dec</a></span> <span class="id">ofs</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">BinInt.Z.add</a></span> <span class="id">z</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">BinInt.Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>))))).<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">do</span> 2 (<span class="id">erewrite</span> (<span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>);<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le_iff">BinInt.Z.ge_le_iff</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#setN_geteq2">setN_geteq2</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_free">fmem_eq_free</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">FMemory.Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>', <span class="id"><a href="FMemory.html#Mem.free">FMemory.Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6378')">Proof.</div>
<div class="proofscript" id="proof6378">
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span> <span class="id"><a href="Memperm.html#Freeable">Memperm.Freeable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">r</span> <span class="id">ofs</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id">Mem.perm_order</span>' <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b</span> (<span class="id"><a href="FMemory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id">m1</span>) <span class="id">ofs</span> <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">inversion</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[] []].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#eq_access_eq_perm">eq_access_eq_perm</a></span> <span class="kwd">in</span> <span class="id">eq_access</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;-<span class="id">eq_access</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">FREE</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>';<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> <span class="id">FREE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span> ;<span class="tactic">inversion</span> <span class="id">FREE</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">FREE</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>,<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[] []].<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span>   (<span class="id"><a href="Coqlib.html#proj_sumbool">Coqlib.proj_sumbool</a></span> (<span class="id"><a href="Coqlib.html#zle">Coqlib.zle</a></span> <span class="id">lo</span> <span class="id">ofs</span>) &amp;&amp; <span class="id"><a href="Coqlib.html#proj_sumbool">Coqlib.proj_sumbool</a></span> (<span class="id"><a href="Coqlib.html#zlt">Coqlib.zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>))%<span class="id">bool</span> <span class="id">eqn</span>:?;[<span class="tactic">inversion</span> <span class="id">H1</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span>  (<span class="id"><a href="Coqlib.html#proj_sumbool">Coqlib.proj_sumbool</a></span> (<span class="id"><a href="Coqlib.html#zle">Coqlib.zle</a></span> <span class="id">lo</span> <span class="id">ofs</span>) &amp;&amp; <span class="id"><a href="Coqlib.html#proj_sumbool">Coqlib.proj_sumbool</a></span> (<span class="id"><a href="Coqlib.html#zlt">Coqlib.zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>))%<span class="id">bool</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMem.eq_access_eq_perm</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>;<span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_valid_pointer">fmem_eq_valid_pointer</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">FMemory.Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">FMemory.Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6379')">Proof.</div>
<div class="proofscript" id="proof6379">
&nbsp;&nbsp;<span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">specialize</span> (<span class="id">eq_access</span> <span class="id">b</span> <span class="id">z</span> <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.eq_access_eq_perm">GMemory.GMem.eq_access_eq_perm</a></span> <span class="kwd">in</span> <span class="id">eq_access</span>. <span class="tactic">clear</span> <span class="id">eq_contents</span> <span class="id">eq_validblocks</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">FMemory.Mem.valid_pointer</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.perm_dec">FMemory.Mem.perm_dec</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.perm_dec">FMemory.Mem.perm_dec</a></span> <span class="id">m2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id">n</span>. <span class="tactic">clear</span> <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">FMemory.Mem.perm</a></span>, <span class="id">FMemory.Mem.perm_order</span>' <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">eq_access</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id">n</span>. <span class="tactic">clear</span> <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">FMemory.Mem.perm</a></span>, <span class="id">FMemory.Mem.perm_order</span>' <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq_access</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_valid_pointer_eq">fmem_eq_valid_pointer_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">FMemory.Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> = <span class="id"><a href="FMemory.html#Mem.valid_pointer">FMemory.Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6380')">Proof.</div>
<div class="proofscript" id="proof6380">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep">FunctionalExtensionality.functional_extensionality_dep</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep">FunctionalExtensionality.functional_extensionality_dep</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_sym">fmem_eq_sym</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_valid_pointer">fmem_eq_valid_pointer</a></span> <span class="kwd">in</span> <span class="id">Heqb</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m2</span> <span class="id">x</span> <span class="id">x0</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_valid_pointer">fmem_eq_valid_pointer</a></span> <span class="kwd">in</span> <span class="id">Heqb0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<div class="doc">Forward </div>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_forward">alloc_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fl</span> <span class="id">m0</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">FMemory.Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = (<span class="id"><a href="FMemLemmas.html#m1">m1</a></span>, <span class="id"><a href="FMemLemmas.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMemory.GMem.forward</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6381')">Proof.</div>
<div class="proofscript" id="proof6381">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.alloc_validblocks">FMemory.Mem.alloc_validblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">FMemory.Mem.alloc_result</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">m0</span>; <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">FMemory.Mem.nextblock</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">FMemory.Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">m0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">FMemory.Mem.nextblock</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id">valid_wd</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_forward">store_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fl</span> <span class="id">m0</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.store">FMemory.Mem.store</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMemory.GMem.forward</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6382')">Proof.</div>
<div class="proofscript" id="proof6382">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.store_access">FMemory.Mem.store_access</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.store_validblocks">FMemory.Mem.store_validblocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span>, <span class="id"><a href="GMemory.html#GMem.validblocks">GMemory.GMem.validblocks</a></span>; <span class="tactic">destruct</span> <span class="id">m0</span>; <span class="tactic">destruct</span> <span class="id">m1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_forward">free_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fl</span> <span class="id">m0</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#fl">fl</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">FMemory.Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#lo">lo</a></span> <span class="id"><a href="FMemLemmas.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMemory.GMem.forward</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6383')">Proof.</div>
<div class="proofscript" id="proof6383">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.free_validblocks">FMemory.Mem.free_validblocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span>, <span class="id"><a href="GMemory.html#GMem.validblocks">GMemory.GMem.validblocks</a></span>; <span class="tactic">destruct</span> <span class="id">m0</span>; <span class="tactic">destruct</span> <span class="id">m1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_free_3">FMemory.Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">embed </div>
<span class="kwd">Lemma</span> <span class="id"><a name="embed_refl">embed_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#Mem.freelist">FMemory.Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6384')">Proof.</div>
<div class="proofscript" id="proof6384">
 <span class="tactic">destruct</span> <span class="id">m</span>; <span class="tactic">simpl</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_eq_cmpu_bool_fp_eq">fmem_eq_cmpu_bool_fp_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#fmem_eq">fmem_eq</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id">m</span>' = <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6385')">Proof.</div>
<div class="proofscript" id="proof6385">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep">FunctionalExtensionality.functional_extensionality_dep</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep">FunctionalExtensionality.functional_extensionality_dep</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep">FunctionalExtensionality.functional_extensionality_dep</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span> <span class="id">eqn</span>:?,<span class="id">x1</span> <span class="id">eqn</span>:?,<span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Integers.Int.eq</a></span>,<span class="id"><a href="Values.html#Val.cmp_different_blocks">Values.Val.cmp_different_blocks</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_valid_pointer_eq">fmem_eq_valid_pointer_eq</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_sym">fmem_eq_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Integers.Int.eq</a></span>,<span class="id"><a href="Values.html#Val.cmp_different_blocks">Values.Val.cmp_different_blocks</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_valid_pointer_eq">fmem_eq_valid_pointer_eq</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_sym">fmem_eq_sym</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_valid_pointer_eq">fmem_eq_valid_pointer_eq</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#fmem_eq_sym">fmem_eq_sym</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Ltac</span> <span class="id">gmem_unfolds</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>,<span class="id"><a href="InteractionSemantics.html#notbelongsto">notbelongsto</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content">unchanged_content</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#unchanged_validity">unchanged_validity</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.eq_perm">GMem.eq_perm</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_free_fleq">mem_free_fleq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6386')">Proof.</div>
<div class="proofscript" id="proof6386">
 <span class="tactic">intros</span>;<span class="tactic">symmetry</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.free_freelist">Mem.free_freelist</a></span>;<span class="tactic">eauto</span>.  Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_free_eff">mem_free_eff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">b0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#b0">b0</a></span>= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#b0">b0</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6387')">Proof.</div>
<div class="proofscript" id="proof6387">
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="id">gmem_unfolds</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>;<span class="tactic">intros</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">subst</span>;[|<span class="tactic">split</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">assert</span>(<span class="id">sz</span> + (<span class="id">b0</span> - <span class="id">sz</span>) = <span class="id">b0</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>,<span class="id">H1</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sz</span> + (<span class="id">b0</span> - <span class="id">sz</span>) = <span class="id">b0</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>,<span class="id">H1</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="id">gmem_unfolds</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sz</span> + (<span class="id">b0</span> - <span class="id">sz</span>) = <span class="id">b0</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">b0</span>);<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sz</span> + (<span class="id">b0</span> - <span class="id">sz</span>) = <span class="id">b0</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">b0</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>. <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_alloc_fleq">mem_alloc_fleq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">b0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = (<span class="id"><a href="FMemLemmas.html#m">m</a></span>, <span class="id"><a href="FMemLemmas.html#b0">b0</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6388')">Proof.</div>
<div class="proofscript" id="proof6388">
 <span class="tactic">intros</span>;<span class="tactic">symmetry</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">Mem.alloc_freelist</a></span>;<span class="tactic">eauto</span>.  Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_alloc_eff">mem_alloc_eff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">b0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = (<span class="id"><a href="FMemLemmas.html#m">m</a></span>, <span class="id"><a href="FMemLemmas.html#b0">b0</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6389')">Proof.</div>
<div class="proofscript" id="proof6389">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;unchanged_content_equiv.&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">gmem_unfolds</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [];<span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="MemAux.html#get_block">MemAux.get_block</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>)));<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">ex_match</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="id">gmem_unfolds</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">auto</span>;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#get_block">MemAux.get_block</a></span>, <span class="id"><a href="MemAux.html#in_fl">MemAux.in_fl</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}    <br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_storev_fleq">mem_storev_fleq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6390')">Proof.</div>
<div class="proofscript" id="proof6390">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span>;<span class="tactic">intros</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.store_freelist">Mem.store_freelist</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="mem_storev_eff">mem_storev_eff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="MemOpFP.html#storev_fp">MemOpFP.storev_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>)<span class="id"><a href="FMemLemmas.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6391')">Proof.</div>
<div class="proofscript" id="proof6391">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">gmem_unfolds</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">eqn</span>:?;[|<span class="id">left</span>;<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#unchanged_validity">unchanged_validity</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>;<span class="tactic">simpl</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.eq_perm">GMem.eq_perm</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>;<span class="tactic">simpl</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">gm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#gm">gm</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6392')">Proof.</div>
<div class="proofscript" id="proof6392">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">m</span>;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#get_block">MemAux.get_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">MemAux.in_fl</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">valid_wd</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">valid_wd</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPostemp">MemPostemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPost">MemPost</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6393')">Proof.</div>
<div class="proofscript" id="proof6393">
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="id">gmem_unfolds</span>;<span class="id">Esimpl</span>;<span class="tactic">try</span>(<span class="tactic">intros</span>;<span class="id">inv</span> <span class="id">H</span>).<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_access_eq">unchanged_perm_access_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">z</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> (<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span>))) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id"><a href="FMemLemmas.html#m2">m2</a></span> <span class="id"><a href="FMemLemmas.html#chunk">chunk</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#z">z</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6394')">Proof.</div>
<div class="proofscript" id="proof6394">
&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span>, <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>,<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">ofs</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_belongsto">range_locset_belongsto</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b0</span> <span class="id">i</span> <span class="id">a</span> (<span class="id">b</span> : <span class="id"><a href="Values.html#block">Values.block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b0">b0</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span>) <span class="id"><a href="FMemLemmas.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#b">b</a></span> = <span class="id"><a href="FMemLemmas.html#b0">b0</a></span> /\  <span class="id"><a href="FMemLemmas.html#i">i</a></span> &lt;=<span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt; (<span class="id"><a href="FMemLemmas.html#i">i</a></span> + <span class="id"><a href="FMemLemmas.html#a">a</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6395')">Proof.</div>
<div class="proofscript" id="proof6395">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_belongsto2">range_locset_belongsto2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">i</span> <span class="id">a</span> (<span class="id">b</span> : <span class="id"><a href="Values.html#block">Values.block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span>) <span class="id"><a href="FMemLemmas.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#i">i</a></span> &lt;=<span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt;(<span class="id"><a href="FMemLemmas.html#i">i</a></span>+<span class="id"><a href="FMemLemmas.html#a">a</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6396')">Proof.</div>
<div class="proofscript" id="proof6396">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="get_eq_getN_eq">get_eq_getN_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">k</span> <span class="id">p0</span> <span class="id">p1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>,<span class="id"><a href="FMemLemmas.html#i">i</a></span> &lt;= <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt; <span class="id"><a href="FMemLemmas.html#i">i</a></span>+ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span>-&gt; <span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#p0">p0</a></span> = <span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#p1">p1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#p0">p0</a></span> = <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#k">k</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#p1">p1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6397')">Proof.</div>
<div class="proofscript" id="proof6397">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">t</span>, (<span class="id"><a href="FMemLemmas.html#t">t</a></span>&lt;=<span class="id">k</span>)%<span class="id">nat</span>-&gt; <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#t">t</a></span> (<span class="id">i</span>+<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id">k</span>-<span class="id"><a href="FMemLemmas.html#t">t</a></span>)) <span class="id">p0</span> = <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="FMemLemmas.html#t">t</a></span> (<span class="id">i</span>+<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id">k</span>-<span class="id"><a href="FMemLemmas.html#t">t</a></span>)) <span class="id">p1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">t</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">t</span>&lt;=<span class="id">k</span>)%<span class="id">nat</span>. <span class="tactic">omega</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id">k</span> - <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">t</span>) + 1 = <span class="id">i</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id">k</span> - <span class="id">t</span>)).<br/>
&nbsp;&nbsp;<span class="id">Lia.lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHt</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="id">Lia.lia</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id">k</span> - <span class="id">k</span>) = <span class="id">i</span>). <span class="id">Lia.lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b</span> <span class="id">v</span>  (<span class="id">Fleq</span>: <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6398')">Proof.</div>
<div class="proofscript" id="proof6398">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span>,<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#load_fp">FMemOpFP.load_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">a</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>) <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ReadMemEq</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_access_eq">unchanged_perm_access_eq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ReadMemEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span>,<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span> <span class="kwd">as</span> [<span class="id">v</span> <span class="id">v</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span> &lt;= <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt; <span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b0</span> (<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> <span class="id">m</span>')) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b0</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">v</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">perm_order</span>'<span class="id">_</span>'';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#get_eq_getN_eq">get_eq_getN_eq</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_mem_loadv_eq2">MemPre_mem_loadv_eq2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b</span> <span class="id">v</span>  (<span class="id">Fleq</span>: <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6399')">Proof.</div>
<div class="proofscript" id="proof6399">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span>,<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#load_fp">FMemOpFP.load_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.load">Mem.load</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>) <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ReadMemEq</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_access_eq">unchanged_perm_access_eq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ReadMemEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span>,<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span> <span class="kwd">as</span> [<span class="id">v</span> <span class="id">v</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span> &lt;= <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> &lt; <span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b0</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>')) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">Maps.ZMap.get</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">b0</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">v</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">perm_order</span>'<span class="id">_</span>'';<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#get_eq_getN_eq">get_eq_getN_eq</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPost_effect_emp">MemPost_effect_emp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="id"><a href="FMemLemmas.html#fp">fp</a></span>) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPost">MemPost</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6400')">Proof.</div>
<div class="proofscript" id="proof6400">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="id">gmem_unfolds</span>;<span class="id">Esimpl</span>;<span class="tactic">intros</span>;<span class="id">Locs.unfolds</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>)) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6401')">Proof.</div>
<div class="proofscript" id="proof6401">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPost_loadv_fp">MemPost_loadv_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPost">MemPost</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6402')">Proof.</div>
<div class="proofscript" id="proof6402">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_effect_emp">MemPost_effect_emp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">m1</span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mempre</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>'1, <span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'1 /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>'1)(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) /\ <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'1 = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> /\ <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'1 = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6403')">Proof.</div>
<div class="proofscript" id="proof6403">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span>,<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="kwd">in</span> *. <span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span>  (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">a</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>) <span class="id"><a href="Memperm.html#Writable">Memperm.Writable</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_access">Mem.valid_access</a></span> <span class="kwd">in</span> *. <span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">r</span> <span class="id">ofs</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mempre</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">R1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> <span class="id">R1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">R1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">R1</span> <span class="kwd">in</span> <span class="id">H1</span>.  <span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">a</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>));<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>. <span class="tactic">simpl</span>. <span class="id">Esimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> <span class="kwd">in</span> *;<span class="id">gmem_unfolds</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">gmem_unfolds</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">b0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b0</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mempre</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto2">range_locset_belongsto2</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">EffectPermEqPre</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">mempre</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#setN_geteq2">setN_geteq2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>,&lt;-<span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_mem_storev_LPost2">LPre_mem_storev_LPost2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">m1</span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mempre</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>'1, <span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'1 /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>'1)(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) /\ <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'1 = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span> /\ <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'1 = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6404')">Proof.</div>
<div class="proofscript" id="proof6404">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id">Fleq</span>) = <span class="id">m</span>').<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_cmp">unchanged_perm_cmp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>)))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> = <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6405')">Proof.</div>
<div class="proofscript" id="proof6405">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>,<span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>;<span class="tactic">auto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">p</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>;<span class="id">Locs.unfolds</span>; <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_cmp2">unchanged_perm_cmp2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>  (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>)))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemLemmas.html#i">i</a></span>-1) = <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemLemmas.html#i">i</a></span>-1).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6406')">Proof.</div>
<div class="proofscript" id="proof6406">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">_</span> ?].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>,<span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>,<span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">p</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">p</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">p</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>)))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>|| <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemLemmas.html#i">i</a></span> - 1)) =   (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>|| <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemLemmas.html#i">i</a></span> - 1)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6407')">Proof.</div>
<div class="proofscript" id="proof6407">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id">b</span> <span class="id">i</span>) <span class="id">eqn</span>:?;<span class="tactic">auto</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp2">unchanged_perm_cmp2</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_range_locset_1_valid_pointer">unchanged_perm_range_locset_1_valid_pointer</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> 1))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> = <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6408')">Proof.</div>
<div class="proofscript" id="proof6408">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>, <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> [<span class="id">_</span> ?].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>,<span class="id"><a href="FMemory.html#Mem.perm_dec">Mem.perm_dec</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>;<span class="id">Locs.unfolds</span>. <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>;<span class="id">Locs.unfolds</span>. <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="union_refl_eq">union_refl_eq</a></span>:  <span class="kwd">forall</span> <span class="id">l</span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> = <span class="id"><a href="FMemLemmas.html#l">l</a></span>.  <span class="tactic">intros</span>;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>. Defined.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_perm_split">unchanged_perm_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> (<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id"><a href="FMemLemmas.html#l1">l1</a></span> <span class="id"><a href="FMemLemmas.html#l2">l2</a></span>)) <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> <span class="id"><a href="FMemLemmas.html#l1">l1</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' /\ <span class="id"><a href="InteractionSemantics.html#unchanged_perm">unchanged_perm</a></span> (<span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span> <span class="id"><a href="FMemLemmas.html#l2">l2</a></span>) <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6409')">Proof.</div>
<div class="proofscript" id="proof6409">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>;<span class="id">Locs.unfolds</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="cmps_union">cmps_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemLemmas.html#fp1">fp1</a></span> <span class="id"><a href="FMemLemmas.html#fp2">fp2</a></span>) = <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> <span class="id"><a href="FMemLemmas.html#fp1">fp1</a></span>)(<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> <span class="id"><a href="FMemLemmas.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6410')">Proof.</div>
<div class="proofscript" id="proof6410">
  <span class="tactic">destruct</span> <span class="id">fp1</span>,<span class="id">fp2</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>. Qed.</div>
<span class="kwd">Ltac</span> <span class="id">cmpu_bool_destruct_int_fp</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Integers.Int.eq</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Values.Val.cmp_different_blocks</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> ;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">eauto</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">cmpu_bool_destruct_b_fp</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">auto</span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_cmpu_valid_pointer_ceq">MemPre_cmpu_valid_pointer_ceq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="Integers.html#Ceq">Integers.Ceq</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.cmpu_bool">Values.Val.cmpu_bool</a></span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="Integers.html#Ceq">Integers.Ceq</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span> =  <span class="id"><a href="Values.html#Val.cmpu_bool">Values.Val.cmpu_bool</a></span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>') <span class="id"><a href="Integers.html#Ceq">Integers.Ceq</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6411')">Proof.</div>
<div class="proofscript" id="proof6411">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> [<span class="id">_</span> ? <span class="id">_</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmpu_bool">Values.Val.cmpu_bool</a></span>,<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">in</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">try</span>  <span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#CmpMemPermExists">CmpMemPermExists</a></span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &amp;&amp; ?<span class="id">a</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">a</span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#cmps_union">cmps_union</a></span> <span class="kwd">in</span> <span class="id">CmpMemPermExists</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> : <span class="tactic">try</span> <span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx3</span> <span class="kwd">in</span> <span class="id">Hx4</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> : <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_split">unchanged_perm_split</a></span> <span class="kwd">in</span> <span class="id">CmpMemPermExists</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> : <span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_range_locset_1_valid_pointer">unchanged_perm_range_locset_1_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx4</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx4</span> <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="id">inv</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_cmpu_valid_pointer_eq">MemPre_cmpu_valid_pointer_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="Integers.html#Clt">Integers.Clt</a></span> \/ <span class="id"><a href="FMemLemmas.html#c">c</a></span> = <span class="id"><a href="Integers.html#Ceq">Integers.Ceq</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.cmpu_bool">Values.Val.cmpu_bool</a></span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span> =  <span class="id"><a href="Values.html#Val.cmpu_bool">Values.Val.cmpu_bool</a></span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>') <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#j">j</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6412')">Proof.</div>
<div class="proofscript" id="proof6412">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1;<span class="tactic">subst</span>;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> [<span class="id">_</span> ? <span class="id">_</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span>,<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="kwd">in</span> *;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp_valid_pointer">unchanged_perm_cmp_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_range_locset_1_valid_pointer">unchanged_perm_range_locset_1_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_range_locset_1_valid_pointer">unchanged_perm_range_locset_1_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=<span class="id">m</span>') <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_incr">Locs.union_incr</a></span>.<br/>
<br/>
<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_union">range_locset_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">o</span> <span class="id">i1</span> <span class="id">i2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt">Z.lt</a></span> 0 <span class="id"><a href="FMemLemmas.html#i2">i2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt">Z.lt</a></span> 0 <span class="id"><a href="FMemLemmas.html#i1">i1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#o">o</a></span> <span class="id"><a href="FMemLemmas.html#i1">i1</a></span>)(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">Z.add</a></span> <span class="id"><a href="FMemLemmas.html#o">o</a></span> <span class="id"><a href="FMemLemmas.html#i1">i1</a></span>) <span class="id"><a href="FMemLemmas.html#i2">i2</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#o">o</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">Z.add</a></span> <span class="id"><a href="FMemLemmas.html#i1">i1</a></span> <span class="id"><a href="FMemLemmas.html#i2">i2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6413')">Proof.</div>
<div class="proofscript" id="proof6413">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_union_refl_eq">fp_union_refl_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemLemmas.html#fp">fp</a></span> <span class="id"><a href="FMemLemmas.html#fp">fp</a></span> = <span class="id"><a href="FMemLemmas.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6414')">Proof.</div>
<div class="proofscript" id="proof6414">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#union_refl_eq">union_refl_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_mem_alloc_LPost">MemPre_mem_alloc_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">sz</span> <span class="id">m</span>' <span class="id">b</span>(<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>))(<span class="id">Fleq</span>: <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = (<span class="id">m</span>',<span class="id"><a href="FMemLemmas.html#b">b</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = (<span class="id"><a href="FMemLemmas.html#m1">m1</a></span>,<span class="id"><a href="FMemLemmas.html#b">b</a></span>) /\ <span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = <span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>  (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>  /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m1">m1</a></span>)(<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6415')">Proof.</div>
<div class="proofscript" id="proof6415">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">remember</span>  (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m0</span> <span class="id">Fleq</span>)) <span class="kwd">as</span> <span class="id">fm</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#fmem_alloc_exists">fmem_alloc_exists</a></span> <span class="id">fm</span> 0 <span class="id">sz</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;[<span class="id">constructor</span>|];<span class="id">gmem_unfolds</span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">e</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">e</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gmem_unfolds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Fleq</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_range_perm_eq">MemPre_range_perm_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">sz</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#ofs">ofs</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6416')">Proof.</div>
<div class="proofscript" id="proof6416">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>,<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> ?]. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">EffectPermEqPre</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">EffectPermEqPre</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_dep_range_perm_eq">MemPre_dep_range_perm_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fp</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">a</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')<span class="id"><a href="FMemLemmas.html#fp">fp</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)(<span class="id"><a href="InteractionSemantics.html#depends">depends</a></span> <span class="id"><a href="FMemLemmas.html#fp">fp</a></span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6417')">Proof.</div>
<div class="proofscript" id="proof6417">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>. <span class="tactic">destruct</span> <span class="id">fp</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id">b</span> <span class="id">ofs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#depends">depends</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">cmps</span> <span class="id">b</span> <span class="id">ofs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> \/ <span class="id">reads</span> <span class="id">b</span> <span class="id">ofs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cmps</span>,<span class="id">reads</span>;<span class="tactic">auto</span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">_</span> ? <span class="id">_</span>]. <span class="tactic">eapply</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span> <span class="id">_</span>]. <span class="tactic">eapply</span> <span class="id">ReadMemEq</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_eff_range_perm_eq">MemPre_eff_range_perm_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fp</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">a</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')<span class="id"><a href="FMemLemmas.html#fp">fp</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)(<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="id"><a href="FMemLemmas.html#fp">fp</a></span>) -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#b">b</a></span> 0 <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> <span class="id"><a href="FMemLemmas.html#a">a</a></span> <span class="id"><a href="FMemLemmas.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6418')">Proof.</div>
<div class="proofscript" id="proof6418">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> ?].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">EffectPermEqPre</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#belongsto">belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>. <span class="id">erewrite</span> &lt;- <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>. <span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_mem_free_LPost">LPre_mem_free_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">b</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span>' (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span>(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m0</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m0</span>' /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>')(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) /\ <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>' = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>' /\ <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>' = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6419')">Proof.</div>
<div class="proofscript" id="proof6419">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span>  <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>,<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m0</span> <span class="id">Fleq</span>)) <span class="kwd">as</span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span> = <span class="id">m0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqm1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_range_perm_eq">MemPre_range_perm_eq</a></span> <span class="kwd">in</span> <span class="id">r</span> <span class="kwd">as</span> <span class="id">r2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span> ;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span>(<span class="tactic">rewrite</span> <span class="id">Heqm1</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Memeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;[<span class="id">constructor</span>|]; <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="FMemory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>;<span class="id">gmem_unfolds</span>;<span class="tactic">eauto</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqm1</span>;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_minus">Zplus_minus</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?. <span class="tactic">apply</span> <span class="id">r2</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqm1</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span>  *. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">simpl</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="FMemory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>,<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> <span class="kwd">in</span> *;<span class="id">gmem_unfolds</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Fleq</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_mem_free_LPost2">LPre_mem_free_LPost2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">b</span> <span class="id">i</span> <span class="id">sz</span> <span class="id">m</span>' (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>) (<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span>(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m0</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="FMemLemmas.html#m0">m0</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m0</span>' /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>')(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> <span class="id"><a href="FMemLemmas.html#sz">sz</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6420')">Proof.</div>
<div class="proofscript" id="proof6420">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span>  <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.free">Mem.free</a></span>,<span class="id"><a href="FMemOpFP.html#free_fp">FMemOpFP.free_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_range_perm_eq">MemPre_range_perm_eq</a></span> <span class="kwd">in</span> <span class="id">r</span> <span class="kwd">as</span> <span class="id">r2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span> ;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span>(<span class="tactic">rewrite</span> <span class="id">Heqm1</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Memeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;[<span class="id">constructor</span>|]; <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="FMemory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>;<span class="id">gmem_unfolds</span>;<span class="tactic">eauto</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_minus">Zplus_minus</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?. <span class="tactic">apply</span> <span class="id">r2</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span>  *. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">simpl</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#range_locset_belongsto">range_locset_belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id"><a href="Maps.html#PMap.gss">Maps.PMap.gss</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="tactic">omega</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="FMemory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>,<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> <span class="kwd">in</span> *;<span class="id">gmem_unfolds</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Fleq</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">apply</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cmpu_bool_fp_effemp0">cmpu_bool_fp_effemp0</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">c</span> <span class="id">v</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> (<span class="id"><a href="Cop_fp.html#of_optfp">of_optfp</a></span> (<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>))) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6421')">Proof.</div>
<div class="proofscript" id="proof6421">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>,<span class="id">i</span>;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_b_fp</span>;<span class="tactic">simpl</span>;<span class="tactic">destruct</span> ( <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>));<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Values.Val.cmp_different_blocks</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cmpu_bool_fp_effemp">cmpu_bool_fp_effemp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">c</span> <span class="id">v</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> (<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>)) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6422')">Proof.</div>
<div class="proofscript" id="proof6422">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>,<span class="id">i</span>;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_b_fp</span>;<span class="tactic">simpl</span>;<span class="tactic">destruct</span> ( <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>));<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Values.Val.cmp_different_blocks</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_weak_valid_pointer_fp_eq2">LPre_weak_valid_pointer_fp_eq2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">v</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> = <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6423')">Proof.</div>
<div class="proofscript" id="proof6423">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Hx0</span> <span class="kwd">in</span> <span class="id">Hx</span>;<span class="id">inv</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="tactic">destruct</span> <span class="id">Memeq</span>;<span class="tactic">auto</span>; <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_weak_valid_pointer_fp_eq">LPre_weak_valid_pointer_fp_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">v</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> = <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6424')">Proof.</div>
<div class="proofscript" id="proof6424">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Hx0</span> <span class="kwd">in</span> <span class="id">Hx</span>;<span class="id">inv</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<span class="tactic">destruct</span> <span class="id">Memeq</span>;<span class="tactic">auto</span>; <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>;<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_expend1_subset">range_locset_expend1_subset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">i</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span> 1)(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="FMemLemmas.html#b">b</a></span> (<span class="id"><a href="FMemLemmas.html#i">i</a></span> - 1)2).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6425')">Proof.</div>
<div class="proofscript" id="proof6425">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>,<span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="locs_subset_union">locs_subset_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#l1">l1</a></span> \/ <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> <span class="id"><a href="FMemLemmas.html#l2">l2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="id"><a href="FMemLemmas.html#l">l</a></span> (<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id"><a href="FMemLemmas.html#l1">l1</a></span> <span class="id"><a href="FMemLemmas.html#l2">l2</a></span> ).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6426')">Proof.</div>
<div class="proofscript" id="proof6426">
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
Qed.</div>
<span class="kwd">Ltac</span> <span class="id">solv_locs</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">q</span> |- ?<span class="id">q</span> =&gt; <span class="tactic">assumption</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|- <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> ?<span class="id">a</span> ?<span class="id">a</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.subset_refl">Locs.subset_refl</a></span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|- <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="id">_</span> (<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#locs_subset_union">locs_subset_union</a></span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="id">solv_locs</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">solv_locs</span>;<span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|- <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> ?<span class="id">b</span> ?<span class="id">i</span> 1)(<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> ?<span class="id">b</span> (?<span class="id">i</span> - 1) 2) =&gt; <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#range_locset_expend1_subset">range_locset_expend1_subset</a></span> ;<span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_split">MemPre_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemLemmas.html#fp1">fp1</a></span> <span class="id"><a href="FMemLemmas.html#fp2">fp2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#fp1">fp1</a></span> /\ <span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#fp2">fp2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6427')">Proof.</div>
<div class="proofscript" id="proof6427">
 <span class="tactic">split</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;[|<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>];<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_cmpu_bool_fp_total_eq">LPre_cmpu_bool_fp_total_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">v</span> <span class="id">i</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span>(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>  <span class="id"><a href="FMemLemmas.html#i">i</a></span> = <span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6428')">Proof.</div>
<div class="proofscript" id="proof6428">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span> : <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;1 , 2 :<span class="id">ex_match2</span>;<span class="tactic">try</span> <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Hx5</span> <span class="kwd">in</span> <span class="id">Hx4</span>;<span class="id">inv</span> <span class="id">Hx4</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">Memeq</span>;<span class="tactic">auto</span>; <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#LPre_weak_valid_pointer_fp_eq">LPre_weak_valid_pointer_fp_eq</a></span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_comm">unchanged_perm_comm</a></span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPre_split">MemPre_split</a></span> <span class="kwd">in</span> <span class="id">Memeq</span> <span class="kwd">as</span> [[ <span class="id">_</span> <span class="id">eq1</span> <span class="id">_</span>][<span class="id">_</span> <span class="id">eq2</span> <span class="id">_</span>]];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>))).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i0</span>));<span class="tactic">eauto</span>;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">m</span>)(<span class="id">m</span>':=(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)));<span class="id">ex_match2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_cmpu_bool_fp_eq">LPre_cmpu_bool_fp_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">v</span> <span class="id">i</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="Cop_fp.html#of_optfp">of_optfp</a></span> (<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>)))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="FMemLemmas.html#Fleq">Fleq</a></span>)) <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span>  <span class="id"><a href="FMemLemmas.html#i">i</a></span> = <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id"><a href="FMemLemmas.html#m">m</a></span> <span class="id"><a href="FMemLemmas.html#c">c</a></span> <span class="id"><a href="FMemLemmas.html#v">v</a></span> <span class="id"><a href="FMemLemmas.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6429')">Proof.</div>
<div class="proofscript" id="proof6429">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>,<span class="id">i</span>;<span class="tactic">auto</span>;<span class="tactic">simpl</span>;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>;<span class="tactic">try</span>(<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Heqb1</span>;<span class="tactic">auto</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">destruct</span> <span class="id">Memeq</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_int_fp</span>;<span class="tactic">try</span>(<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Heqb1</span>;<span class="tactic">auto</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">destruct</span> <span class="id">Memeq</span>;<span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">cmpu_bool_destruct_b_fp</span>;<span class="tactic">simpl</span>;<span class="tactic">subst</span>;<span class="tactic">destruct</span> ( <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> <span class="id">m</span>' <span class="id">Fleq</span>)) <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Integers.Ptrofs.unsigned</a></span> <span class="id">i</span>)) <span class="id">eqn</span>:?;<span class="tactic">auto</span>;<span class="tactic">try</span>(<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Heqb1</span>;<span class="tactic">eauto</span>;[<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_cmp">unchanged_perm_cmp</a></span>,<span class="id">Heqb</span>;<span class="tactic">eauto</span>|];<span class="tactic">try</span>(<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span> <span class="kwd">in</span> <span class="id">Memeq</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>;<span class="tactic">try</span>(<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>);<span class="tactic">try</span>(<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>))).<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
