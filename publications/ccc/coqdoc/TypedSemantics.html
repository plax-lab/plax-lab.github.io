<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module TypedSemantics</title>
<meta name="description" content="Documentation of Coq module TypedSemantics" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module TypedSemantics</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Values.html">Values</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="GAST.html">GAST</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="GlobSemantics.html">GlobSemantics</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span> <span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="GDefLemmas.html">GDefLemmas</a></span>. <br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Wf.html">Wf</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html">Classical_Prop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">FunctionalExtensionality</a></span>.<br/>
<div class="doc">This file contains auxiliary definition of non-preemptive semantics used in other proof.</div>
<span class="kwd">Section</span> <span class="id"><a name="typed_step">typed_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">GE</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="steptype">steptype</a></span>:<span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="core">core</a></span>: <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="call">call</a></span>: <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="ret">ret</a></span> : <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="entat">entat</a></span>:<span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="extat">extat</a></span>:<span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="thrdhalt">thrdhalt</a></span> : <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="allhalt">allhalt</a></span>: <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span>      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="efprint">efprint</a></span>: <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="glob_sw">glob_sw</a></span>: <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="glob_halt">glob_halt</a></span>:<span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{ <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> }" := (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="type_np_step">type_np_step</a></span> : <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span>-&gt;<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="id"><a href="ETrace.html#glabel">glabel</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Corestep">Corestep</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">c</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_f</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span>) <span class="id">c_f</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_step</span>: <span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">c_fl</span> <span class="id">cc</span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#d">d</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">gm</span>' <span class="id"><a href="TypedSemantics.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Call">Call</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">funid</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">new_ix</span> <span class="id">cc</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="TypedSemantics.html#funid">funid</a></span>, <span class="id"><a href="TypedSemantics.html#sg">sg</a></span>, <span class="id"><a href="TypedSemantics.html#args">args</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_prim</span>: <span class="id"><a href="GAST.html#not_primitive">not_primitive</a></span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_mod_id</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_new_core</span>: <span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">new_lang</span> <span class="id">new_Ge</span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span> <span class="id"><a href="TypedSemantics.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_push</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span> <span class="id">cc</span>' <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Return">Return</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>' <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_caller</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span>' := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c</span>'<span class="id">_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span>' := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c</span>'<span class="id">_lang</span> <span class="id">cc</span>' (<span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="id">c_sg</span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>'' <span class="id">thdp</span>''),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>'' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Thrd_Halt">Thrd_Halt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>' <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_halt</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_valid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_halted</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#thrdhalt">thrdhalt</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id">t</span>' <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Halt">Halt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_halt</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_all_thread_halted</span>: <span class="kwd">forall</span> <span class="id">t</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>' -&gt; <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#allhalt">allhalt</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Ent_Atom">Ent_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ent_atom">ent_atom</a></span>, <span class="id"><a href="GAST.html#ent_atom_sg">ent_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="Ext_Atom">Ext_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>' <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ext_atom">ext_atom</a></span>, <span class="id"><a href="GAST.html#ext_atom_sg">ext_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_valid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_halted</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id">t</span>' <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="EF_Print">EF_Print</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">v</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>' <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#print">print</a></span>, <span class="id"><a href="GAST.html#print_sg">print_sg</a></span>, <span class="id"><a href="TypedSemantics.html#v">v</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_v</span>: <span class="id"><a href="GlobDefs.html#not_pointer">not_pointer</a></span> <span class="id"><a href="TypedSemantics.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_valid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_halted</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="TypedSemantics.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id">t</span>' <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="type_glob_step">type_glob_step</a></span> : <span class="id"><a href="TypedSemantics.html#steptype">steptype</a></span>-&gt; <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="id"><a href="ETrace.html#glabel">glabel</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GCorestep">GCorestep</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">c</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_f</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span>) <span class="id">c_f</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_step</span>: <span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">c_fl</span> <span class="id">cc</span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#d">d</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">gm</span>' <span class="id"><a href="TypedSemantics.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GCall">GCall</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">funid</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">new_ix</span> <span class="id">cc</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="TypedSemantics.html#funid">funid</a></span>, <span class="id"><a href="TypedSemantics.html#sg">sg</a></span>, <span class="id"><a href="TypedSemantics.html#args">args</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_prim</span>: <span class="id"><a href="GAST.html#not_primitive">not_primitive</a></span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_mod_id</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_new_core</span>: <span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">new_lang</span> <span class="id">new_Ge</span> <span class="id"><a href="TypedSemantics.html#funid">funid</a></span> <span class="id"><a href="TypedSemantics.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_push</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#new_ix">new_ix</a></span> <span class="id">cc</span>' <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GReturn">GReturn</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>' <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_caller</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span>' := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c</span>'<span class="id">_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span>' := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c</span>'<span class="id">_lang</span> <span class="id">cc</span>' (<span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="id">c_sg</span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>'' <span class="id">thdp</span>''),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>'' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GHalt">GHalt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_halt</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GEnt_Atom">GEnt_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ent_atom">ent_atom</a></span>, <span class="id"><a href="GAST.html#ent_atom_sg">ent_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GExt_Atom">GExt_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ext_atom">ext_atom</a></span>, <span class="id"><a href="GAST.html#ext_atom_sg">ext_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GEF_Print">GEF_Print</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">v</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#print">print</a></span>, <span class="id"><a href="GAST.html#print_sg">print_sg</a></span>, <span class="id"><a href="TypedSemantics.html#v">v</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_v</span>: <span class="id"><a href="GlobDefs.html#not_pointer">not_pointer</a></span> <span class="id"><a href="TypedSemantics.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="TypedSemantics.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="GSwitch">GSwitch</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">t</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_valid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_halted</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id">t</span>' <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="type_step_exists">type_step_exists</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">type</span>,<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#type">type</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8326')">Proof.</div>
<div class="proofscript" id="proof8326">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Corestep">Corestep</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#call">call</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Call">Call</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Return">Return</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#thrdhalt">thrdhalt</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Thrd_Halt">Thrd_Halt</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#allhalt">allhalt</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Halt">Halt</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Ent_Atom">Ent_Atom</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#Ext_Atom">Ext_Atom</a></span>|<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#EF_Print">EF_Print</a></span> ];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="type_step_elim">type_step_elim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span> -&gt; @<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8327')">Proof.</div>
<div class="proofscript" id="proof8327">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="id">econstructor</span> 1|<span class="id">econstructor</span> 2|<span class="id">econstructor</span> 3|<span class="id">econstructor</span> 4|<span class="id">econstructor</span> 5|<span class="id">econstructor</span> 6|<span class="id">econstructor</span> 7|<span class="id">econstructor</span> 8];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_star_type_step">tau_star_type_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc1</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8328')">Proof.</div>
<div class="proofscript" id="proof8328">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="type_glob_step_exists">type_glob_step_exists</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">type</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#type">type</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8329')">Proof.</div>
<div class="proofscript" id="proof8329">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>;<span class="id">econstructor</span> 1;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#call">call</a></span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span>;<span class="id">econstructor</span> 3;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span>;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span>;<span class="id">econstructor</span> 5;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span>;<span class="id">econstructor</span> 6;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span>;<span class="id">econstructor</span> 7;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span>;<span class="id">econstructor</span> 8;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="type_glob_step_elim">type_glob_step_elim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span> -&gt; @<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#l">l</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id"><a href="TypedSemantics.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8330')">Proof.</div>
<div class="proofscript" id="proof8330">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="id">econstructor</span> 1|<span class="id">econstructor</span> 2|<span class="id">econstructor</span> 3|<span class="id">econstructor</span> 4|<span class="id">econstructor</span> 5|<span class="id">econstructor</span> 6|<span class="id">econstructor</span> 7|<span class="id">econstructor</span> 8];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_step_equiv">core_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8331')">Proof.</div>
<div class="proofscript" id="proof8331">
 <span class="tactic">split</span>;<span class="tactic">intro</span>; <span class="tactic">inversion</span> <span class="id">H</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_core_step_equiv">star_core_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8332')">Proof.</div>
<div class="proofscript" id="proof8332">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">induction</span> <span class="id">H</span>;[<span class="id">constructor</span>|<span class="id">econstructor</span> 2 |<span class="id">constructor</span>|<span class="id">econstructor</span> 2];<span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="call_step_equiv">call_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8333')">Proof.</div>
<div class="proofscript" id="proof8333">
 <span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="ret_step_equiv">ret_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8334')">Proof.</div>
<div class="proofscript" id="proof8334">
 <span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="id">econstructor</span> 3;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="entat_step_equiv">entat_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8335')">Proof.</div>
<div class="proofscript" id="proof8335">
 <span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;[<span class="id">econstructor</span> 5|<span class="id">econstructor</span> 6];<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |})  (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thrdhalt_step_equiv">thrdhalt_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#thrdhalt">thrdhalt</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) /\ <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8336')">Proof.</div>
<div class="proofscript" id="proof8336">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">L1</span> <span class="id">L2</span>];<span class="tactic">inversion</span> <span class="id">L1</span>;<span class="tactic">inversion</span> <span class="id">L2</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="allhalt_step_equiv">allhalt_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#allhalt">allhalt</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' &lt;-&gt; (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' /\ (<span class="kwd">forall</span> <span class="id">t</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="TypedSemantics.html#t">t</a></span> -&gt; <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="TypedSemantics.html#t">t</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8337')">Proof.</div>
<div class="proofscript" id="proof8337">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extat_step_equiv">extat_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) /\ <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8338')">Proof.</div>
<div class="proofscript" id="proof8338">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="efprint_step_equiv">efprint_step_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">x</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="TypedSemantics.html#x">x</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="TypedSemantics.html#x">x</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) /\ <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8339')">Proof.</div>
<div class="proofscript" id="proof8339">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_star_np_step_star_glob_step">tau_star_np_step_star_glob_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="TypedSemantics.html#typed_step.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id">fp</span>' <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id">fp</span>' <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8340')">Proof.</div>
<div class="proofscript" id="proof8340">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [] .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#call_step_equiv">call_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#ret_step_equiv">ret_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#allhalt_step_equiv">allhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="TypedSemantics.html#typed_step">typed_step</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="local_glob_relation">local_glob_relation</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "'&lt;&lt;' <span class="id">i</span> ',' <span class="id">c</span> ',' <span class="id">sg</span> ',' <span class="id">F</span> '&gt;&gt;'" := {|<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i</span>; <span class="id">Core.c</span> := <span class="id">c</span>; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span>|} (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Definition</span> <span class="id"><a name="pc_valid_tid">pc_valid_tid</a></span> {<span class="id">ge</span>}:= @<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="TypedSemantics.html#ge">ge</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{ <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> }" := {|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">A</span>;<span class="id">cur_tid</span>:=<span class="id">B</span>;<span class="id">gm</span>:=<span class="id">C</span>;<span class="id">atom_bit</span>:= <span class="id">D</span>|}(<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := ({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |}) (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="local_glob_relation.GE">GE</a></span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="localstep_corestep">localstep_corestep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">lang</span> <span class="id">Ge</span> <span class="id">fl</span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id">i</span> <span class="id">sg</span> <span class="id">b</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ((<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.Build_t</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> <span class="id"><a href="TypedSemantics.html#F">F</a></span>)::<span class="id"><a href="TypedSemantics.html#cs">cs</a></span>)  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#b">b</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id">tp</span>' <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id">m</span>' <span class="id"><a href="TypedSemantics.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> (<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.Build_t</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="id">c</span>' <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> <span class="id"><a href="TypedSemantics.html#F">F</a></span>) <span class="id">tp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8341')">Proof.</div>
<div class="proofscript" id="proof8341">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tp</span> <span class="id">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i_x</span>; <span class="id">Core.c</span> := <span class="id">c</span>'; <span class="id">Core.sg</span>:= <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span> |} <span class="id">tp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">cs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span> := <span class="id">c</span>; <span class="id">Core.sg</span>:= <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span> |}::<span class="id">cs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span> := <span class="id">c</span>'; <span class="id">Core.sg</span>:= <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span> |} <span class="id">cs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">cs</span>' &amp; <span class="id">H_cs_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">tp</span>' &amp; <span class="id">H_tp_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>'. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="localplus_coreplus">localplus_coreplus</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#plus">plus</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">lang</span> <span class="id">Ge</span> <span class="id">fl</span>) <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id">i</span> <span class="id">sg</span> <span class="id">b</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.Build_t</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> <span class="id"><a href="TypedSemantics.html#F">F</a></span> :: <span class="id"><a href="TypedSemantics.html#cs">cs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#b">b</a></span>) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id">tp</span>' <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id">m</span>' <span class="id"><a href="TypedSemantics.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> {| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span>:=<span class="id">c</span>'; <span class="id">Core.sg</span>:=<span class="id"><a href="TypedSemantics.html#sg">sg</a></span>; <span class="id">Core.F</span>:=<span class="id"><a href="TypedSemantics.html#F">F</a></span> |} <span class="id">tp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8342')">Proof.</div>
<div class="proofscript" id="proof8342">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#localstep_corestep">localstep_corestep</a></span> <span class="kwd">with</span>(<span class="id">b</span>:=<span class="id">b</span>) <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">tp</span>'&amp; <span class="id">Hstep</span> &amp; <span class="id">Htp</span>'). <span class="id">eexists</span>; <span class="tactic">split</span>;[<span class="id">constructor</span>|];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#localstep_corestep">localstep_corestep</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">tp</span>' &amp; <span class="id">Hstep</span> &amp; <span class="id">Htp</span>'). <span class="id">instantiate</span> (1:=<span class="id">b</span>) <span class="kwd">in</span> <span class="id">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Htp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id">IHplus</span> <span class="id">tp</span>' <span class="id">i</span> <span class="id">sg</span> <span class="id">b</span> <span class="id">cs</span>) <span class="kwd">as</span> [<span class="id">tp</span>'' [<span class="id">Hplus</span>' <span class="id">Htp</span>''] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>''. <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_cons">tau_plus_cons</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Htp</span>''. <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">Hplus</span>' <span class="id">IHplus</span> <span class="id">H0</span> <span class="id">Hstep</span> <span class="id">Htp</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; [|<span class="tactic">congruence</span>]. <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.set2">Maps.PMap.set2</a></span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="localstar_corestar">localstar_corestar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">lang</span> <span class="id">Ge</span> <span class="id">fl</span>) <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id">i</span> <span class="id">sg</span> <span class="id">b</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ((<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.Build_t</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#sg">sg</a></span> <span class="id"><a href="TypedSemantics.html#F">F</a></span>)::<span class="id"><a href="TypedSemantics.html#cs">cs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id"><a href="TypedSemantics.html#m">m</a></span> <span class="id"><a href="TypedSemantics.html#b">b</a></span>) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id">tp</span>' <span class="id"><a href="TypedSemantics.html#i">i</a></span> <span class="id">m</span>' <span class="id"><a href="TypedSemantics.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> <span class="id"><a href="TypedSemantics.html#i">i</a></span> (&lt;&lt; <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>, <span class="id">c</span>', <span class="id"><a href="TypedSemantics.html#sg">sg</a></span>, <span class="id"><a href="TypedSemantics.html#F">F</a></span>&gt;&gt;) <span class="id">tp</span>' \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#m">m</a></span> = <span class="id">m</span>' /\ <span class="id"><a href="TypedSemantics.html#c">c</a></span> = <span class="id">c</span>' /\ <span class="id"><a href="TypedSemantics.html#tp">tp</a></span> = <span class="id">tp</span>' /\ <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8343')">Proof.</div>
<div class="proofscript" id="proof8343">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; [<span class="id">econstructor</span>|]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#step_star_plus">step_star_plus</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#localplus_coreplus">localplus_coreplus</a></span> <span class="kwd">with</span>(<span class="id">b</span>:=<span class="id">b</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">tp</span>' [<span class="id">Hplus</span> <span class="id">Htp</span>'] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>'. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_localstep">corestep_localstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">c</span> <span class="id">fp</span> <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({<span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span>,<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id"><a href="TypedSemantics.html#gm">gm</a></span>,<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> ({<span class="id">thdp</span>',<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id">gm</span>',<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>' <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)) (<span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>) <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8344')">Proof.</div>
<div class="proofscript" id="proof8344">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Tmp1</span>;<span class="tactic">clear</span> <span class="id">Tmp1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>',<span class="id">c</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="coreplus_localplus">coreplus_localplus</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">fp</span> <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({<span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span>,<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id"><a href="TypedSemantics.html#gm">gm</a></span>,<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> ({<span class="id">thdp</span>',<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id">gm</span>',<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">F</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (&lt;&lt;<span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>,<span class="id"><a href="TypedSemantics.html#c">c</a></span>,<span class="id"><a href="TypedSemantics.html#sg">sg</a></span>,<span class="id"><a href="TypedSemantics.html#F">F</a></span>&gt;&gt;)  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#plus">InteractionSemantics.plus</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span>)) <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> (&lt;&lt;<span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>,<span class="id">cc</span>',<span class="id"><a href="TypedSemantics.html#sg">sg</a></span>,<span class="id"><a href="TypedSemantics.html#F">F</a></span> &gt;&gt;) <span class="id">thdp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8345')">Proof.</div>
<div class="proofscript" id="proof8345">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">gm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_tau_N_equiv">tau_plus_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">fp</span> <span class="id">thdp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">clear</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#corestep_localstep">corestep_localstep</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">cc</span>'&amp;<span class="id">c</span>'&amp;<span class="id">step</span>&amp;<span class="id">core_upd</span>&amp;<span class="id">thpd_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">core_upd</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">cur_tid</span> = <span class="id">t</span> /\ <span class="id">atom_bit</span> =<span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#corestep_localstep">corestep_localstep</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">cc1</span>&amp;<span class="id">c1</span>&amp;<span class="id">step1</span>&amp;<span class="id">core_upd</span>&amp;<span class="id">thdp_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thread_pool</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">thdp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">core_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">cc</span>'&amp;<span class="id">coreplus</span>&amp;<span class="id">thdp_upd2</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">thdp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">thdp_upd2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">clear</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.set2">Maps.PMap.set2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">econstructor</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_localstar">corestar_localstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">fp</span> <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({<span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span>,<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id"><a href="TypedSemantics.html#gm">gm</a></span>,<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> ({<span class="id">thdp</span>',<span class="id"><a href="TypedSemantics.html#t">t</a></span>,<span class="id">gm</span>',<span class="id"><a href="TypedSemantics.html#d">d</a></span>}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">F</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (&lt;&lt;<span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>,<span class="id"><a href="TypedSemantics.html#c">c</a></span>,<span class="id"><a href="TypedSemantics.html#sg">sg</a></span>,<span class="id"><a href="TypedSemantics.html#F">F</a></span>&gt;&gt;)  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#local_glob_relation.GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span>)) <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> (&lt;&lt;<span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>,<span class="id">cc</span>',<span class="id"><a href="TypedSemantics.html#sg">sg</a></span>,<span class="id"><a href="TypedSemantics.html#F">F</a></span> &gt;&gt;) <span class="id">thdp</span>' \/ <span class="id"><a href="TypedSemantics.html#fp">fp</a></span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> /\ <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> = <span class="id">thdp</span>' /\ <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> = <span class="id">gm</span>' ).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8346')">Proof.</div>
<div class="proofscript" id="proof8346">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="id">constructor</span>|];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">x</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="TypedSemantics.html#x">x</a></span>) ({<span class="id">thdp</span>, <span class="id">t</span>, <span class="id">gm</span>, <span class="id">d</span>}) <span class="id">fp</span> ({<span class="id">thdp</span>', <span class="id">t</span>, <span class="id">gm</span>', <span class="id">d</span>})). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_tau_N_equiv">tau_plus_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#coreplus_localplus">coreplus_localplus</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">cc</span>'&amp;<span class="id">plus</span>'&amp;<span class="id">upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">plus</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">plus</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="local_core_step">local_core_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">fp</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>) <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>',<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>' /\ <span class="id">exists</span> <span class="id">thdp</span>',  <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8347')">Proof.</div>
<div class="proofscript" id="proof8347">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">gm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H_tp_core</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">c</span>',<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">c</span>'&amp;<span class="id">H_core_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H_tp_core</span> <span class="kwd">as</span> <span class="id">backup1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span> <span class="id">t</span>) <span class="id">eqn</span>:<span class="id">eq</span>;[|<span class="tactic">inversion</span> <span class="id">H_tp_core</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span> <span class="id">eqn</span>:<span class="id">eq2</span>;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">backup1</span> <span class="id">into</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">c</span>' <span class="id">thdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">t</span>'&amp;<span class="id">H_tp_upd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_local_core_step">star_local_core_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">c</span> <span class="id">gm</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>))(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#GE">GE</a></span>) <span class="id"><a href="TypedSemantics.html#F">F</a></span>)) <span class="id"><a href="TypedSemantics.html#c">c</a></span> <span class="id"><a href="TypedSemantics.html#gm">gm</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">gm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">sg</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span> <span class="id"><a href="TypedSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ({| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id"><a href="TypedSemantics.html#i_x">i_x</a></span>; <span class="id">Core.c</span> := <span class="id"><a href="TypedSemantics.html#c">c</a></span>; <span class="id">Core.sg</span> := <span class="id"><a href="TypedSemantics.html#sg">sg</a></span>; <span class="id">Core.F</span> := <span class="id"><a href="TypedSemantics.html#F">F</a></span> |}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>' : <span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({<span class="id"><a href="TypedSemantics.html#thdp">thdp</a></span>, <span class="id"><a href="TypedSemantics.html#t">t</a></span>, <span class="id"><a href="TypedSemantics.html#gm">gm</a></span>, <span class="id"><a href="TypedSemantics.html#d">d</a></span>}) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> ({<span class="id">thdp</span>', <span class="id"><a href="TypedSemantics.html#t">t</a></span>, <span class="id">gm</span>', <span class="id"><a href="TypedSemantics.html#d">d</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8348')">Proof.</div>
<div class="proofscript" id="proof8348">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">gm</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#local_core_step">local_core_step</a></span> <span class="kwd">in</span> <span class="id">Tmp1</span> <span class="kwd">as</span> (<span class="id">c1</span>&amp;?&amp;<span class="id">thdp1</span>&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({<span class="id">thdp</span>,<span class="id">t</span>,<span class="id">m</span>,<span class="id">d</span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> ({<span class="id">thdp1</span>,<span class="id">t</span>,<span class="id">m</span>',<span class="id">d</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> ({| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i_x</span>; <span class="id">Core.c</span> := <span class="id">c</span>'; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span> |}) <span class="kwd">as</span> <span class="id">c1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> ( {|<span class="id"><a href="GlobDefs.html#ThreadPool.Build_t">ThreadPool.content</a></span> := <span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id">t</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c1</span> :: <span class="id">cs0</span>)%<span class="id">list</span>) (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>); <span class="id">ThreadPool.next_tid</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">thdp</span>; <span class="id">ThreadPool.next_fmap</span> := <span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">thdp</span> |}) <span class="kwd">as</span> <span class="id">thdp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp1</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c1</span>::<span class="id">cs0</span>)%<span class="id">list</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>. <span class="tactic">rewrite</span> <span class="id">Heqthdp1</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[<span class="tactic">auto</span>|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp1</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqc1</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHstar</span> <span class="kwd">with</span>(<span class="id">d</span>:=<span class="id">d</span>) <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [<span class="id">thdp</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqthdp1</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_core_local">star_core_local</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#ge">ge</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span> <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#ge">ge</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>))) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="TypedSemantics.html#ge">ge</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>)))(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="TypedSemantics.html#ge">ge</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>))) (<span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="TypedSemantics.html#c">c</a></span>) <span class="id"><a href="TypedSemantics.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="TypedSemantics.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8349')">Proof.</div>
<div class="proofscript" id="proof8349">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (&lt;&lt;<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>,<span class="id">cc</span>',<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>,<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>&gt;&gt;)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="TypedSemantics.html#local_glob_relation">local_glob_relation</a></span>.</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
