<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module RefineEquiv</title>
<meta name="description" content="Documentation of Coq module RefineEquiv" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module RefineEquiv</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="GAST.html">GAST</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="GlobSemantics.html">GlobSemantics</a></span> <span class="id"><a href="GlobSemantics_Lemmas.html">GlobSemantics_Lemmas</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span> <span class="id"><a href="TypedSemantics.html">TypedSemantics</a></span> .<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="DRF.html">DRF</a></span> <span class="id"><a href="USimDRF.html">USimDRF</a></span> <span class="id"><a href="NPDRF.html">NPDRF</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical.html">Classical</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Wf.html">Wf</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span> <span class="id"><a href="ListDom.html">ListDom</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FPLemmas.html">FPLemmas</a></span> <span class="id"><a href="PRaceLemmas.html">PRaceLemmas</a></span> <span class="id"><a href="Init.html">Init</a></span> <span class="id"><a href="SmileReorder.html">SmileReorder</a></span> <span class="id"><a href="ConflictReorder.html">ConflictReorder</a></span> <span class="id"><a href="Init.html">Init</a></span> <span class="id"><a href="DRFLemmas.html">DRFLemmas</a></span> <span class="id"><a href="SimEtr.html">SimEtr</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "'&lt;&lt;' <span class="id">i</span> ',' <span class="id">c</span> ',' <span class="id">sg</span> ',' <span class="id">F</span> '&gt;&gt;'" := {|<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i</span>; <span class="id">Core.c</span> := <span class="id">c</span>; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span>|} (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Local</span> <span class="kwd">Definition</span> <span class="id"><a name="pc_valid_tid">pc_valid_tid</a></span> {<span class="id">ge</span>}:= @<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "{ <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> }" := {|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">A</span>;<span class="id">cur_tid</span>:=<span class="id">B</span>;<span class="id">gm</span>:=<span class="id">C</span>;<span class="id">atom_bit</span>:= <span class="id">D</span>|}(<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).  <span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := ({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |}) (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<div class="doc">This file consists of proofs and results on np-semantics and p-semantics:
    - <span class="bracket"><span class="id">NP</span>(<span class="id">S</span>) <span class="tactic">refine</span> <span class="id">P</span>(<span class="id">S</span>)</span>
    - <span class="bracket"><span class="id">DRF</span>(<span class="id">S</span>)/\<span class="id">Safe</span>(<span class="id">S</span>)/\<span class="id">WD_langs</span>(<span class="id">S</span>) -&gt; <span class="id">P</span>(<span class="id">S</span>) <span class="tactic">refine</span> <span class="id">NP</span>(<span class="id">S</span>)</span>
  </div>
<span class="kwd">Section</span> <span class="id"><a name="Refinement">Refinement</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="Refinement.init_free">init_free</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> (<span class="id">L</span>:@<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span>)(<span class="id">p</span>:<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span>) <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="p_np_config_refine">p_np_config_refine</a></span> {<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}(<span class="id">s</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>,<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="p_np_prog_refine">p_np_prog_refine</a></span> {<span class="id">NL</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>}{<span class="id">L</span>:@<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span>}(<span class="id">P</span>:@<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#p_np_config_refine">p_np_config_refine</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="np_p_config_refine_weak">np_p_config_refine_weak</a></span> {<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}(<span class="id">s</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>, <span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#s">s</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="np_p_prog_refine_weak">np_p_prog_refine_weak</a></span> {<span class="id">NL</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>}{<span class="id">L</span>:@<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span>}(<span class="id">P</span>:@<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#np_p_config_refine_weak">np_p_config_refine_weak</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="threadpool_spawn_domadd">threadpool_spawn_domadd</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">t</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">t</span>' :=  @<span class="id"><a href="GlobDefs.html#ThreadPool.spawn">ThreadPool.spawn</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#mid">mid</a></span> <span class="id"><a href="RefineEquiv.html#c">c</a></span> <span class="id"><a href="RefineEquiv.html#sg">sg</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Psucc">BinPos.Psucc</a></span> (<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8382')">Proof.</div>
<div class="proofscript" id="proof8382">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.spawn">ThreadPool.spawn</a></span> <span class="kwd">in</span> <span class="id">t</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="threadpool_init_domeq">threadpool_init_domeq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.init">ThreadPool.init</a></span> <span class="id"><a href="RefineEquiv.html#ge1">ge1</a></span> <span class="id"><a href="RefineEquiv.html#e">e</a></span> <span class="id"><a href="RefineEquiv.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.init">ThreadPool.init</a></span> <span class="id"><a href="RefineEquiv.html#ge2">ge2</a></span> <span class="id"><a href="RefineEquiv.html#e">e</a></span> <span class="id"><a href="RefineEquiv.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t1">t1</a></span>.(<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span>) = <span class="id"><a href="RefineEquiv.html#t2">t2</a></span>.(<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8383')">Proof.</div>
<div class="proofscript" id="proof8383">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="RefineEquiv.html#threadpool_spawn_domadd">threadpool_spawn_domadd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="RefineEquiv.html#threadpool_spawn_domadd">threadpool_spawn_domadd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">threadpool_init_domeq</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.init">ThreadPool.init</a></span> <span class="id"><a href="RefineEquiv.html#ge1">ge1</a></span> <span class="id"><a href="RefineEquiv.html#e">e</a></span> <span class="id"><a href="RefineEquiv.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.init">ThreadPool.init</a></span> <span class="id"><a href="RefineEquiv.html#ge2">ge2</a></span> <span class="id"><a href="RefineEquiv.html#e">e</a></span> <span class="id"><a href="RefineEquiv.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#t1">t1</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>&lt;-&gt;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#t2">t2</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8384')">Proof.</div>
<div class="proofscript" id="proof8384">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#threadpool_init_domeq">threadpool_init_domeq</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="switchable_glob_config_refine">switchable_glob_config_refine</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8385')">Proof.</div>
<div class="proofscript" id="proof8385">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>}) <span class="id">fp</span> <span class="id">state</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>}) <span class="id">fp</span> <span class="id">state</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">s</span>,<span class="id">t</span>}) <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>}) <span class="id">fp</span> <span class="id">state</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_cons_globsw">Etr_cons_globsw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8386')">Proof.</div>
<div class="proofscript" id="proof8386">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#sw_star_cons">ETrace.sw_star_cons</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_pair_valid_tid">init_pair_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">sc</span> <span class="id">tc</span> <span class="id">e</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">i</span> <span class="id">i</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> (<span class="id"><a href="RefineEquiv.html#sc">sc</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#sgm">sgm</a></span> <span class="id"><a href="RefineEquiv.html#sge">sge</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> (<span class="id"><a href="RefineEquiv.html#tc">tc</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#tgm">tgm</a></span> <span class="id"><a href="RefineEquiv.html#tge">tge</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id">i</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span> <span class="id"><a href="RefineEquiv.html#j">j</a></span>-&gt; <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#j">j</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8387')">Proof.</div>
<div class="proofscript" id="proof8387">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">tpc</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">threadpool_init_domeq</span>' <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Init.html#config_thdp_init_property1">config_thdp_init_property1</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="P_NP_Refine_adjusted">P_NP_Refine_adjusted</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">scus</span> <span class="id">tcus</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_prog_refine">np_prog_refine</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> (<span class="id"><a href="RefineEquiv.html#scus">scus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)(<span class="id"><a href="RefineEquiv.html#tcus">tcus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#np_p_prog_refine_weak">np_p_prog_refine_weak</a></span> (<span class="id"><a href="RefineEquiv.html#tcus">tcus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#p_np_prog_refine">p_np_prog_refine</a></span> (<span class="id"><a href="RefineEquiv.html#scus">scus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#prog_refine">prog_refine</a></span> (<span class="id"><a href="RefineEquiv.html#scus">scus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)(<span class="id"><a href="RefineEquiv.html#tcus">tcus</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8388')">Proof.</div>
<div class="proofscript" id="proof8388">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_p_prog_refine_weak">np_p_prog_refine_weak</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_p_config_refine_weak">np_p_config_refine_weak</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#p_np_prog_refine">p_np_prog_refine</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#p_np_config_refine">p_np_config_refine</a></span>;<span class="tactic">intros</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">scus</span> <span class="id">tcus</span> <span class="id">e</span> <span class="id">H</span> <span class="id">refine1</span> <span class="id">refine2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tt</span>=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ts</span>=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">spc</span>). <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">refine1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">_</span> <span class="id">H3</span>) <span class="kwd">as</span> [<span class="id">t</span>[]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Refinement.init_free">init_free</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">initt2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#init_pair_valid_tid">init_pair_valid_tid</a></span> <span class="kwd">with</span>(<span class="id">sc</span>:=<span class="id">tcus</span>)(<span class="id">tc</span>:=<span class="id">scus</span>) <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Refinement.init_free">init_free</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">inits2</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">inits2</span> <span class="id">initt2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="NPSemantics.html#np_config_refine">np_config_refine</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">refine2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inits2</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">spc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">spc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="RefineEquiv.html#Etr_cons_globsw">Etr_cons_globsw</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_np_p">tau_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8389')">Proof.</div>
<div class="proofscript" id="proof8389">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 3;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 5;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_np_p">sw_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8390')">Proof.</div>
<div class="proofscript" id="proof8390">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({<span class="id">thdp</span>',<span class="id">t</span>,<span class="id">gm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({<span class="id">thdp</span>',<span class="id">t</span>,<span class="id">gm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 6;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_equiv">non_evt_star_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">state</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">state</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">state</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8391')">Proof.</div>
<div class="proofscript" id="proof8391">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#tau_np_p">tau_np_p</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_np_p">sw_np_p</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="non_evt_starN">non_evt_starN</a></span> {<span class="id">State</span>:<span class="kwd">Type</span>}:(<span class="id">State</span>-&gt;<span class="id"><a href="ETrace.html#glabel">glabel</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt;<span class="id">State</span>-&gt;<span class="kwd">Prop</span>)-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;<span class="id">State</span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt;<span class="id">State</span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="ne_star_refl">ne_star_refl</a></span>: <span class="kwd">forall</span> <span class="id">step</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id">State</span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> 0  <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="ne_star_step">ne_star_step</a></span>: <span class="kwd">forall</span> <span class="id">step</span> <span class="id">n</span> <span class="id">s1</span> <span class="id">fp1</span> <span class="id">s2</span> <span class="id">fp2</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#s2">s2</a></span> \/ <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id">State</span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#n">n</a></span> <span class="id"><a href="RefineEquiv.html#s2">s2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#n">n</a></span>)<span class="id"><a href="RefineEquiv.html#s1">s1</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span>) <span class="id"><a href="RefineEquiv.html#s3">s3</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_N_equiv">non_evt_star_N_equiv</a></span>{<span class="id">State</span>:<span class="kwd">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">step</span> <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="RefineEquiv.html#State">State</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>' &lt;-&gt; <span class="id">exists</span> <span class="id">n</span>,<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#n">n</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8392')">Proof.</div>
<div class="proofscript" id="proof8392">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHnon_evt_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>). <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_non_evt_starN">mem_eq_non_evt_starN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8393')">Proof.</div>
<div class="proofscript" id="proof8393">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">wd</span>;<span class="tactic">intros</span>. <span class="id">revert</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">pc2</span> <span class="id">fp</span> <span class="id">wd</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id">fp1</span> <span class="id">s2</span> /\ (<span class="id"><a href="RefineEquiv.html#l">l</a></span> = <span class="id"><a href="ETrace.html#tau">tau</a></span> \/ <span class="id"><a href="RefineEquiv.html#l">l</a></span> = <span class="id"><a href="ETrace.html#sw">sw</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_Sn_split">non_evt_star_Sn_split</a></span>{<span class="id">State</span>:<span class="kwd">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">step</span> <span class="id">n</span> <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="RefineEquiv.html#State">State</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#n">n</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#n">n</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">s</span>' \/ <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">s</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8394')">Proof.</div>
<div class="proofscript" id="proof8394">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ,<span class="id">fp</span>,<span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="id">fp</span>);<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span> <span class="id">x</span>),<span class="id">x0</span>,<span class="id">x1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_thdp_inv">non_evt_star_thdp_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8395')">Proof.</div>
<div class="proofscript" id="proof8395">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SimEtr.html#GE_mod_wd_npstar_tp_inv">GE_mod_wd_npstar_tp_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="no_npstep_no_globstep">no_npstep_no_globstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',~ @<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<span class="id">l</span>'=<span class="id"><a href="ETrace.html#sw">sw</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8396')">Proof.</div>
<div class="proofscript" id="proof8396">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">invthdp</span> ? ? ? ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#all_not_not_ex">all_not_not_ex</a></span>;<span class="tactic">intro</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>';<span class="tactic">auto</span>;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">fail</span>);<span class="tactic">try</span> (<span class="id">exists</span> <span class="id"><a href="ETrace.html#tau">tau</a></span>,<span class="id">fp</span>',<span class="id">pc</span>'';<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id">x</span>);<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="ETrace.html#sw">sw</a></span>,<span class="id">fp</span>',<span class="id">pc</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_preserve">valid_tid_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="kwd">forall</span> <span class="id">t</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>'-&gt;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>') \/ ~ (<span class="kwd">forall</span> <span class="id">t</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thdp</span>' <span class="id">t</span>'-&gt;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id">t</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="ETrace.html#tau">tau</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,({<span class="id">thdp</span>',<span class="id">t</span>,<span class="id">gm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 5;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#not_all_ex_not">not_all_ex_not</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_imply_elim2">not_imply_elim2</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_imply_elim">not_imply_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="ETrace.html#sw">sw</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,({<span class="id">thdp</span>',<span class="id">x</span>,<span class="id">gm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>}). <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id">v</span>),<span class="id">fp</span>',<span class="id">pc</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_preserve">valid_tid_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_abort_np_p">init_abort_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">P</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8397')">Proof.</div>
<div class="proofscript" id="proof8397">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#no_npstep_no_globstep">no_npstep_no_globstep</a></span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.init">ThreadPool.init</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">P</span>)(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">pc</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc</span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H4</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.compare">BinPos.Pos.compare</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.compare_cont">BinPos.Pos.compare_cont</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Coqlib.html#Plt">Coqlib.Plt</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_succ_inv">Coqlib.Plt_succ_inv</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHinit</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="np_accepted">np_accepted</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">P</span> <span class="id">gm</span> <span class="id">pc0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_accepted_inv_thdp">np_accepted_inv_thdp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8398')">Proof.</div>
<div class="proofscript" id="proof8398">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x3</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SimEtr.html#GE_mod_wd_npstar_tp_inv">GE_mod_wd_npstar_tp_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="add">add</a></span>(<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span>)(<span class="id">l</span>':<span class="id"><a href="ETrace.html#glabel">glabel</a></span>):<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">l</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">x</span> (<span class="id"><a href="RefineEquiv.html#add">add</a></span> <span class="id">y</span> <span class="id">l</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_npstep_inv">star_npstep_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> /\ <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">pc</span>'' <span class="id">l</span>' <span class="id">fp</span>' <span class="id">l</span>'' <span class="id">fp</span>'',<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>'' /\ <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span>'' <span class="id">l</span>'' <span class="id">fp</span>'' <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#l">l</a></span> = <span class="id"><a href="RefineEquiv.html#add">add</a></span> <span class="id">l</span>' <span class="id">l</span>'' /\ <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp</span>' <span class="id">fp</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8399')">Proof.</div>
<div class="proofscript" id="proof8399">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 6 <span class="id">eexists</span>. <span class="id">constructor</span>. <span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 6 <span class="id">eexists</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_abort_np_p">star_abort_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8400')">Proof.</div>
<div class="proofscript" id="proof8400">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#np_accepted_inv_thdp">np_accepted_inv_thdp</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">inv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">NL</span>&amp;<span class="id">L</span>&amp;<span class="id">P</span>&amp;<span class="id">gm</span>&amp;<span class="id">pc0</span>&amp;<span class="id">init</span>&amp;<span class="id">l</span>&amp;<span class="id">fp</span>&amp;<span class="id">star1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#star_npstep_inv">star_npstep_inv</a></span> <span class="kwd">in</span> <span class="id">star1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">star1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#init_abort_np_p">init_abort_np_p</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">pc</span>''&amp;<span class="id">l</span>'&amp;<span class="id">fp</span>'&amp;<span class="id">l</span>''&amp;<span class="id">fp</span>''&amp;<span class="id">star1</span>&amp;<span class="id">step1</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">step1</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">step1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#no_npstep_no_globstep">no_npstep_no_globstep</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_diverge">sw_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">State</span> <span class="id">step</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#State">State</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8401')">Proof.</div>
<div class="proofscript" id="proof8401">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="lstep">lstep</a></span>{<span class="id">ge</span>}:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>-&gt;@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="build">build</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">step</span> <span class="id">s0</span> <span class="id">s1</span> <span class="id">fp</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s0">s0</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s1">s1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s0">s0</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#s2">s2</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_star_lstep_lemma">sw_star_lstep_lemma</a></span>{<span class="id">ge</span>}: <span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span> <span class="id">s</span>',<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> (<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id">s</span>'-&gt; <span class="id"><a href="RefineEquiv.html#s">s</a></span>=<span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8402')">Proof.</div>
<div class="proofscript" id="proof8402">
 <span class="tactic">induction</span> 1;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">tau_plus</span>'{<span class="id">ge</span>}:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>-&gt;@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>:=<br/>
&nbsp;&nbsp;| <span class="id">plus</span>'<span class="id">_1</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>) <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'<br/>
&nbsp;&nbsp;| <span class="id">plus</span>'<span class="id">_cons</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>) <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>' <span class="id">fp</span>' <span class="id">s</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id">s</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">s</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">s</span>''.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">sw_star_tau_plus</span>'<span class="id">_lemma</span>{<span class="id">ge</span>}: <span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span> <span class="id">s</span>',<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> (<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id">s</span>'-&gt; <span class="id"><a href="RefineEquiv.html#s">s</a></span>=<span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8403')">Proof.</div>
<div class="proofscript" id="proof8403">
 <span class="tactic">induction</span> 1;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="silent_diverge_lstep_equiv">silent_diverge_lstep_equiv</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span>&lt;-&gt;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8404')">Proof.</div>
<div class="proofscript" id="proof8404">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="id">revert</span> <span class="id">step</span> <span class="id">s</span>;<span class="id">cofix</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_star_lstep_lemma">sw_star_lstep_lemma</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_lstep_cons">sw_lstep_cons</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span> <span class="id">s</span>' <span class="id">fp</span> <span class="id">s</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id">s</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8405')">Proof.</div>
<div class="proofscript" id="proof8405">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">econstructor</span> 2. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="lnpstep_taupluslglobstep">lnpstep_taupluslglobstep</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tau_plus</span>' (<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8406')">Proof.</div>
<div class="proofscript" id="proof8406">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#tau_np_p">tau_np_p</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsw_star</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_np_p">sw_np_p</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">s1</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;[<span class="id">constructor</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHsw_star</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#sw_lstep_cons">sw_lstep_cons</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp0</span> <span class="id">fp</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="silent_diverge_lstep_npstep_tauplus_lstep_pstep">silent_diverge_lstep_npstep_tauplus_lstep_pstep</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)) <span class="id"><a href="RefineEquiv.html#s">s</a></span>-&gt;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id">tau_plus</span>'(<span class="id"><a href="RefineEquiv.html#lstep">lstep</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span>)) <span class="id"><a href="RefineEquiv.html#s">s</a></span>.<br/>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8407')">Proof.</div>
<div class="proofscript" id="proof8407">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_star_lstep_lemma">sw_star_lstep_lemma</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#lnpstep_taupluslglobstep">lnpstep_taupluslglobstep</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">tauplus</span>'<span class="id">_diverge_inv</span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>' <span class="id">fp</span>, <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>' /\ <span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8408')">Proof.</div>
<div class="proofscript" id="proof8408">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">sw_star_tau_plus</span>'<span class="id">_lemma</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>'0,<span class="id">fp</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">tau_plus</span>'<span class="id">_diverge_lemma</span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (<span class="id">tau_plus</span>' <span class="id"><a href="RefineEquiv.html#step">step</a></span>) <span class="id"><a href="RefineEquiv.html#s">s</a></span>-&gt;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8409')">Proof.</div>
<div class="proofscript" id="proof8409">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tauplus</span>'<span class="id">_diverge_inv</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="silent_diverge_np_p">silent_diverge_np_p</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt; <span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8410')">Proof.</div>
<div class="proofscript" id="proof8410">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_lstep_equiv">silent_diverge_lstep_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_lstep_equiv">silent_diverge_lstep_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_lstep_npstep_tauplus_lstep_pstep">silent_diverge_lstep_npstep_tauplus_lstep_pstep</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tau_plus</span>'<span class="id">_diverge_lemma</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_p_sw">Etr_p_sw</a></span>{<span class="id">ge</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">B</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8411')">Proof.</div>
<div class="proofscript" id="proof8411">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">case</span> <span class="id">B</span> <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">fp</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">fp</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4 <span class="kwd">with</span>(<span class="id">fp</span>:=(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">fp</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_evtstep_inv">np_evtstep_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">v</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8412')">Proof.</div>
<div class="proofscript" id="proof8412">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_accepted_add_step">np_accepted_add_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8413')">Proof.</div>
<div class="proofscript" id="proof8413">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 6 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#cons_star_step">cons_star_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_accepted_add_star">np_accepted_add_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8414')">Proof.</div>
<div class="proofscript" id="proof8414">
 <span class="tactic">induction</span> 2;<span class="tactic">intros</span>;<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_accepted_add_step">np_accepted_add_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_p_done">Etr_np_p_done</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8415')">Proof.</div>
<div class="proofscript" id="proof8415">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_equiv">non_evt_star_equiv</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_p_diverge">Etr_np_p_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8416')">Proof.</div>
<div class="proofscript" id="proof8416">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_np_p">silent_diverge_np_p</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_p_abort">Etr_np_p_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8417')">Proof.</div>
<div class="proofscript" id="proof8417">
 <span class="tactic">inversion</span> 2;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">destruct</span> <span class="id">L1</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_equiv">non_evt_star_equiv</a></span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#star_abort_np_p">star_abort_np_p</a></span>;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_accepted_add_star">np_accepted_add_star</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_cons_inv">Etr_np_cons_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">v</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'',<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#b">b</a></span> /\ <span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8418')">Proof.</div>
<div class="proofscript" id="proof8418">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_accepted_add_star">np_accepted_add_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="limited_etr">limited_etr</a></span> {<span class="id">ge</span>}:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id">ge</span>-&gt;(@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="kwd">Prop</span>)-&gt;(@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="kwd">Prop</span>)-&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="ETrace.html#behav">behav</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="done_0">done_0</a></span>: <span class="kwd">forall</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="abort_0">abort_0</a></span>: <span class="kwd">forall</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="diverge_0">diverge_0</a></span>: <span class="kwd">forall</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span><br/>
&nbsp;&nbsp;| <span class="id">cons</span>': <span class="kwd">forall</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'' <span class="id">v</span> <span class="id">i</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="limited_etr_npetr">limited_etr_npetr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8419')">Proof.</div>
<div class="proofscript" id="proof8419">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_p_limited">Etr_np_p_limited</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8420')">Proof.</div>
<div class="proofscript" id="proof8420">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p_done">Etr_np_p_done</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p_abort">Etr_np_p_abort</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p_diverge">Etr_np_p_diverge</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_equiv">non_evt_star_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#np_evtstep_inv">np_evtstep_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_p_sw">Etr_p_sw</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_accepted_add_star">np_accepted_add_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="inf_etr">inf_etr</a></span> {<span class="id">ge</span>}(<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">abort</span> <span class="id">final</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<span class="kwd">Prop</span>):@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="ETrace.html#behav">behav</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="build_infetr">build_infetr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">v</span> <span class="id">pc</span>'' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id">step</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">step</span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="inf_etr_alt">inf_etr_alt</a></span> {<span class="id">ge</span>}(<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">abort</span> <span class="id">final</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<span class="kwd">Prop</span>)(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">b</span>:<span class="id"><a href="ETrace.html#behav">behav</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span> /\ ~ <span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_alt_inv">inf_etr_alt_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'' <span class="id">v</span> <span class="id">b</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#b">b</a></span> = <span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id">b</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id">pc</span>'' <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8421')">Proof.</div>
<div class="proofscript" id="proof8421">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> (<span class="id">contradict</span> <span class="id">H0</span>;<span class="id">exists</span> 0;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>,<span class="id">state</span>',<span class="id">state</span>'',<span class="id">v</span>,<span class="id">B</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span>=&gt; <span class="tactic">split</span> <span class="kwd">end</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">L</span>;<span class="id">contradict</span> <span class="id">H0</span>;<span class="tactic">destruct</span> <span class="id">L</span>;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_alt_sound">inf_etr_alt_sound</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8422')">Proof.</div>
<div class="proofscript" id="proof8422">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt_inv">inf_etr_alt_inv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">fp</span>&amp;<span class="id">pc</span>'&amp;<span class="id">pc</span>''&amp;<span class="id">v</span>&amp;<span class="id">b</span>'&amp;<span class="id">eq</span>&amp;<span class="id">nstar1</span>&amp;<span class="id">step1</span>&amp;<span class="id">inf</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="inf_etr_alt2">inf_etr_alt2</a></span> {<span class="id">ge</span>}(<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">abort</span> <span class="id">final</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<span class="kwd">Prop</span>):@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="ETrace.html#behav">behav</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id">build_infetr</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">v</span> <span class="id">pc</span>'' <span class="id">pc</span>''' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span>''' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id">step</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">step</span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">step</span> <span class="id">pc</span>'' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>''' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_step_non_evt_star">sw_step_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8423')">Proof.</div>
<div class="proofscript" id="proof8423">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_cons_inf_etr_alt2">non_evt_star_cons_inf_etr_alt2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">step</span>:@<span class="id"><a href="DRFLemmas.html#Step">Step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">s</span> <span class="id">fp</span> <span class="id">s</span>' <span class="id">b</span> <span class="id">abort</span> <span class="id">final</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">s</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id">s</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#s">s</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8424')">Proof.</div>
<div class="proofscript" id="proof8424">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_alt2_p">inf_etr_alt2_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">f</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#a">a</a></span> <span class="id"><a href="RefineEquiv.html#f">f</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#a">a</a></span> <span class="id"><a href="RefineEquiv.html#f">f</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8425')">Proof.</div>
<div class="proofscript" id="proof8425">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">inversion</span> 3;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">solv_thread</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">inf_etr_alt2_p</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_alt2_sound">inf_etr_alt2_sound</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8426')">Proof.</div>
<div class="proofscript" id="proof8426">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_step_non_evt_star">sw_step_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_cons_inf_etr_alt2">non_evt_star_cons_inf_etr_alt2</a></span> <span class="kwd">in</span> <span class="id">H3</span>;[|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_inf_etr_glob_inf_etr_alt2">np_inf_etr_glob_inf_etr_alt2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8427')">Proof.</div>
<div class="proofscript" id="proof8427">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_equiv">non_evt_star_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#np_evtstep_inv">np_evtstep_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#sw_step_non_evt_star">sw_step_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_np_p">inf_etr_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8428')">Proof.</div>
<div class="proofscript" id="proof8428">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#np_inf_etr_glob_inf_etr_alt2">np_inf_etr_glob_inf_etr_alt2</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt2_sound">inf_etr_alt2_sound</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_etr">inf_etr_etr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">step</span> <span class="id">abort</span> <span class="id">final</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="RefineEquiv.html#step">step</a></span> <span class="id"><a href="RefineEquiv.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#final">final</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8429')">Proof.</div>
<div class="proofscript" id="proof8429">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_np_p">Etr_np_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8430')">Proof.</div>
<div class="proofscript" id="proof8430">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">b</span>) \/ (~ <span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p_limited">Etr_np_p_limited</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H0</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt_sound">inf_etr_alt_sound</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_np_p">inf_etr_np_p</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_etr">inf_etr_etr</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="p_np_refine">p_np_refine</a></span>{<span class="id">NL</span>}{<span class="id">L</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,@<span class="id"><a href="RefineEquiv.html#p_np_prog_refine">p_np_prog_refine</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8431')">Proof.</div>
<div class="proofscript" id="proof8431">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#p_np_prog_refine">p_np_prog_refine</a></span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#p_np_config_refine">p_np_config_refine</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p">Etr_np_p</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 6 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">eexists</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="drf_pc">drf_pc</a></span>{<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>} (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span>, <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> /\ @<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) /\ <span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span>) /\ <span class="id"><a href="ETrace.html#safe_state">safe_state</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="drf_pc_glob">drf_pc_glob</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc0</span> <span class="id">l</span> <span class="id">fp</span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> /\ <span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_cons">drf_pc_glob_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8432')">Proof.</div>
<div class="proofscript" id="proof8432">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_l1">drf_pc_glob_l1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8433')">Proof.</div>
<div class="proofscript" id="proof8433">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id">ge</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#init_config_GE_wd">init_config_GE_wd</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_l2">drf_pc_glob_l2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8434')">Proof.</div>
<div class="proofscript" id="proof8434">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#lang_wd_mod_wd">lang_wd_mod_wd</a></span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stepN_SN_split_weak">stepN_SN_split_weak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l1</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l1">l1</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l2</span> <span class="id">fp2</span>,<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#l2">l2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8435')">Proof.</div>
<div class="proofscript" id="proof8435">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">pc</span>. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#stepN_cons">stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">valid_tid_preserve</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) \/ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8436')">Proof.</div>
<div class="proofscript" id="proof8436">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span>(<span class="id">left</span>;<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">fail</span>);<span class="tactic">try</span> (<span class="id">right</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="pc_glob_l3">pc_glob_l3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc0</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8437')">Proof.</div>
<div class="proofscript" id="proof8437">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">fp</span>;<span class="tactic">intro</span> <span class="id">init</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#star_stepN">star_stepN</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Init.html#init_property_1">init_property_1</a></span> <span class="kwd">in</span> <span class="id">init</span>.  <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#stepN_SN_split_weak">stepN_SN_split_weak</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#stepN_star">stepN_star</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#init_config_GE_wd">init_config_GE_wd</a></span> <span class="kwd">in</span> <span class="id">init</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">pc0</span>). <span class="tactic">inversion</span> <span class="id">init</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">valid_tid_preserve</span>' <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span> <span class="id">fp1</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblockstep_star">atomblockstep_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">l0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l0">l0</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8438')">Proof.</div>
<div class="proofscript" id="proof8438">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#coretauN_globtauN">coretauN_globtauN</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="swstar_star">swstar_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8439')">Proof.</div>
<div class="proofscript" id="proof8439">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsw_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblockstarN_star">atomblockstarN_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>',<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">l</span>' <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8440')">Proof.</div>
<div class="proofscript" id="proof8440">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHatomblockstarN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc1</span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id">fp2</span> <span class="id">pc2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#atomblockstep_star">atomblockstep_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_star">swstar_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_thrd_globstar_star">non_evt_thrd_globstar_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8441')">Proof.</div>
<div class="proofscript" id="proof8441">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="pc_valid_tid_nonevtstar_cons_evtstep">pc_valid_tid_nonevtstar_cons_evtstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">v</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8442')">Proof.</div>
<div class="proofscript" id="proof8442">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back">pc_valid_tid_back</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="drf_pc_glob_weak">drf_pc_glob_weak</a></span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>)(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">p</span> <span class="id">l</span> <span class="id">fp</span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> /\ <span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_weaken">drf_pc_glob_weaken</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob_weak">drf_pc_glob_weak</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8443')">Proof.</div>
<div class="proofscript" id="proof8443">
 <span class="tactic">destruct</span> 1;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_strengthen">drf_pc_glob_strengthen</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob_weak">drf_pc_glob_weak</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8444')">Proof.</div>
<div class="proofscript" id="proof8444">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">intro</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_IO">non_evt_star_IO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>,<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8445')">Proof.</div>
<div class="proofscript" id="proof8445">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s2</span>) <span class="id">eqn</span>:?.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp1</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">s1</span>. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#I">I</a></span>=<span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHnon_evt_star</span> <span class="id">H3</span> <span class="id">H2</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span> <span class="id">x</span>),<span class="id">x0</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_starN_IO">non_evt_starN_IO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#j">j</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="RefineEquiv.html#j">j</a></span> &lt;= <span class="id"><a href="RefineEquiv.html#i">i</a></span> /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>,<span class="id"><a href="RefineEquiv.html#non_evt_starN">non_evt_starN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="RefineEquiv.html#i">i</a></span>-<span class="id"><a href="RefineEquiv.html#j">j</a></span>-1) <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8446')">Proof.</div>
<div class="proofscript" id="proof8446">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s2</span>) <span class="id">eqn</span>:?.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp1</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">pc</span>. <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">split</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">assert</span>(<span class="id">i</span>-0=<span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHi</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span> <span class="id">Heqb</span> <span class="id">H1</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>),(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span> <span class="id">x0</span>),<span class="id">x1</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_star_IO">tau_star_IO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>,<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span>= <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8447')">Proof.</div>
<div class="proofscript" id="proof8447">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>') <span class="id">eqn</span>:?.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">s</span>. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>'. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>'. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#I">I</a></span>=<span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHtau_star</span> <span class="id">H3</span> <span class="id">H2</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp</span> <span class="id">x</span>),<span class="id">x0</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x3</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_N_IO">tau_N_IO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#j">j</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\ <span class="id"><a href="RefineEquiv.html#j">j</a></span> &lt; <span class="id"><a href="RefineEquiv.html#i">i</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="RefineEquiv.html#i">i</a></span>-<span class="id"><a href="RefineEquiv.html#j">j</a></span>-1) <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span>= <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8448')">Proof.</div>
<div class="proofscript" id="proof8448">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>') <span class="id">eqn</span>:?.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">pc</span>. <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">split</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>'. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>'. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> - 0 - 1 = <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHi</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="id">Heqb</span> <span class="id">H1</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>),(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp0</span> <span class="id">x0</span>),<span class="id">x1</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_stepfpsmile">drf_pc_glob_stepfpsmile</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8449')">Proof.</div>
<div class="proofscript" id="proof8449">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v1</span>:<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id">ge</span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> [<span class="id">v2</span> <span class="id">v3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#corestep_conflict">corestep_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>?. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_pc_valid_tid_backwards_preservation">npnswstep_pc_valid_tid_backwards_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H10</span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>,<span class="id">x3</span>,<span class="id">pc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pce">pce</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pce">pce</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span>' <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id">pc</span>' <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'' = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8450')">Proof.</div>
<div class="proofscript" id="proof8450">
 <span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tid_change_bit_eq">tid_change_bit_eq</a></span>:<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id">t</span>, <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8451')">Proof.</div>
<div class="proofscript" id="proof8451">
 <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_taustep_ex">drf_pc_glob_taustep_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' ({-|<span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8452')">Proof.</div>
<div class="proofscript" id="proof8452">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">O1</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_stepfpsmile">drf_pc_glob_stepfpsmile</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#tau">tau</a></span>&lt;&gt;<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">wdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_reorder_rule">globstep_reorder_rule</a></span> <span class="kwd">in</span> <span class="id">L</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="RefineEquiv.html#tid_change_bit_eq">tid_change_bit_eq</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>')(<span class="id">t</span>:=<span class="id">t</span>) <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">H4</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H8</span>) <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="RefineEquiv.html#tid_change_bit_eq">tid_change_bit_eq</a></span> <span class="kwd">in</span> <span class="id">L1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>|<span class="tactic">split</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'' = <span class="id">t</span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">L1</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span>*;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> ({-|<span class="id">pc</span>',<span class="id">t</span>}) = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>';<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H13</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">H12</span>  <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x1</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x1</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> <span class="id">L</span>';<span class="tactic">destruct</span> <span class="id">L</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">L2</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H15</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">H14</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H12</span>. <span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_taustep_halfatomblock_fpsmile">drf_pc_glob_taustep_halfatomblock_fpsmile</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">pc1</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8453')">Proof.</div>
<div class="proofscript" id="proof8453">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [<span class="id">R1</span> <span class="id">R2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">destruct</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep1">atomblock_open_reorderstep1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">pc1</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x0</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">H10</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestar">mem_eq_corestar</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#taustar_fpconflict_split">taustar_fpconflict_split</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H11</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x4</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x7</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> []. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestep">mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">H22</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_changebit">corestep_changebit</a></span> <span class="kwd">with</span>(<span class="id">x</span>:=<span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="kwd">in</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H19</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#changepc_again">changepc_again</a></span> <span class="kwd">in</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x6</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span> = ({-|(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x6</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>),<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H25</span> <span class="kwd">in</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x7</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span> = ({-|(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x7</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>),<span class="id">t</span>}));<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H26</span> <span class="kwd">in</span> <span class="id">H23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#corestep_conflict">corestep_conflict</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x6</span> = ({-|<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x6</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>, <span class="id">t</span>})). <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H28</span> <span class="kwd">in</span> <span class="id">H27</span>. <span class="tactic">clear</span> <span class="id">H28</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#corestar_globstar">corestar_globstar</a></span> <span class="kwd">in</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x</span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H27</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H28</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H29</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H29</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H27</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#changepc_curtid">changepc_curtid</a></span> <span class="kwd">in</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x6</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H29</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span> =<span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H30</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H32</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H32</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H32</span>. <span class="id">contradict</span> <span class="id">H32</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#race_equiv">race_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span>  <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_race_equiv">predict_equiv_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H32</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H32</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x2</span> <span class="id">x9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">x9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#conflict_union">conflict_union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_star">core_tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> [].    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_taustep_atomblock_ex">drf_pc_glob_taustep_atomblock_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">pc1</span> <span class="id">i</span> <span class="id">fp2</span> <span class="id">pc2</span> <span class="id">pc3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id">pc1</span>' <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc2</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc3</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id">pc2</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc3</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc4</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc3</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc4</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span> ({-|<span class="id">pc4</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span>}) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc3</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8454')">Proof.</div>
<div class="proofscript" id="proof8454">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> [<span class="id">R1</span> <span class="id">R2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="id">ge</span> <span class="id">i</span> ({-|<span class="id">pc</span>',<span class="id">t</span>}) <span class="id">fp2</span> <span class="id">pc3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">eexists</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_taustep_halfatomblock_fpsmile">drf_pc_glob_taustep_halfatomblock_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span> (<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id"><a href="ETrace.html#tau">tau</a></span>&lt;&gt;<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">intro</span> <span class="id">L</span>;<span class="tactic">inversion</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_reorder">atomblock_reorder</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 8 (<span class="id">eexists</span>;<span class="tactic">eauto</span>). <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>,<span class="id">pc</span>,<span class="id">H14</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_star">core_tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_taustep_taustar_ex">drf_pc_glob_taustep_taustar_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp2</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#x">x</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#x">x</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' ({-|<span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8455')">Proof.</div>
<div class="proofscript" id="proof8455">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span> <span class="kwd">using</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>);<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [<span class="id">invpc</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({-|<span class="id">pc</span>,<span class="id">t</span>}). <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span>*;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>') <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_taustep_ex">drf_pc_glob_taustep_ex</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_glob_tauN">mem_eq_glob_tauN</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">n</span>&lt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R1</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>,<span class="id">pc</span>,<span class="id">H8</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H12</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x1</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">destruct</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R2</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id">x</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>,<span class="id">H10</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">R1</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">n</span> <span class="id">H15</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">R2</span> <span class="id">H10</span> <span class="id">H16</span> <span class="id">H13</span> <span class="id">H17</span> <span class="id">H5</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span> = <span class="id">t</span>). <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>. <span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>. <span class="tactic">destruct</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">H19</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x2</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x2</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x2</span>,<span class="id">L1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#tau_N_IO">tau_N_IO</a></span> <span class="kwd">in</span> <span class="id">H7</span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;<span class="id">fp1</span>&amp;<span class="id">pc1</span>&amp;<span class="id">star1</span>&amp;?&amp;<span class="id">pc2</span>&amp;<span class="id">extstep</span>&amp;<span class="id">fp2</span>&amp;<span class="id">star2</span>&amp;<span class="id">fpunion</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id">s</span>' <span class="id">fp1</span> <span class="id">pc1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H9</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_taustep_atomblock_ex">drf_pc_glob_taustep_atomblock_ex</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">ent1</span>'&amp;<span class="id">pc2</span>'&amp;<span class="id">star1</span>'&amp;<span class="id">pc3</span>'&amp;<span class="id">ext1</span>'&amp;<span class="id">pc4</span>'&amp;<span class="id">step</span>'&amp;<span class="id">eq</span>'&amp;<span class="id">drf</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">n</span>-<span class="id">x</span>-1&lt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id">pc3</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc3</span>' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc3</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globstep_pc_valid_curtid">globstep_pc_valid_curtid</a></span> <span class="kwd">in</span> <span class="id">step</span>' <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">drf</span>',<span class="id">pc3</span>';<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">drf</span>' <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">drf</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">eq</span>' <span class="kwd">as</span> (<span class="id">_</span>&amp;?&amp;<span class="id">_</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc2</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">extstep</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_glob_tauN">mem_eq_glob_tauN</a></span> <span class="kwd">in</span> <span class="id">eq</span>' <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L2</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span> =<span class="id">t</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id">t</span>). <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>=<span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">star1</span> <span class="id">H15</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">star1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHstar1</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">H15</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">extstep</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H15</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H15</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">ent1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_N_S">tau_N_S</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">ext1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc3</span>' = <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>' = <span class="id">t</span>). <span class="tactic">inversion</span> <span class="id">ent1</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span>' = <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">star1</span>' <span class="id">H21</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">star1</span>';<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">IHstar1</span>'. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">ext1</span>';<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H21</span> <span class="kwd">in</span> <span class="id">H15</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H15</span>.          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_N_S">tau_N_S</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span>(<span class="id">n</span>-<span class="id">x</span>-1) = <span class="id">n</span>-<span class="id">x</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H22</span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">n</span>=<span class="id">x</span>+(<span class="id">n</span>-<span class="id">x</span>)). <span class="id">Omega.omega</span>. <span class="tactic">rewrite</span> <span class="id">H23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">fpunion</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#coretauN_globtauN">coretauN_globtauN</a></span> <span class="kwd">in</span> <span class="id">star1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_N_cons">tau_N_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplit</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globstep_conflict_corestep">globstep_conflict_corestep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8456')">Proof.</div>
<div class="proofscript" id="proof8456">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].  <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_l4">drf_pc_l4</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict_star_alter">glob_predict_star_alter</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8457')">Proof.</div>
<div class="proofscript" id="proof8457">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_race_equiv">predict_equiv_race_equiv</a></span> <span class="kwd">in</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">i</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#race_equiv">race_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="predicted_abort1_star_abort">predicted_abort1_star_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#predicted_abort1">predicted_abort1</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8458')">Proof.</div>
<div class="proofscript" id="proof8458">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblock_abort">halfatomblock_abort</a></span>,<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#corestar_globstar">corestar_globstar</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_to_taustar">npnsw_taustar_to_taustar</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_to_taustar">npnsw_taustar_to_taustar</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="swstar_globstar">swstar_globstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span>, <span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8459')">Proof.</div>
<div class="proofscript" id="proof8459">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="id">Esimpl</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_non_evt_star_evt_step_inv">drf_pc_non_evt_star_evt_step_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'' -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>, <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span> <span class="id">pc3</span>, <span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span>.<br/>
&nbsp;&nbsp;<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8460')">Proof.</div>
<div class="proofscript" id="proof8460">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">Q1</span> <span class="id">Q2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">Q3</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Q4</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_evtstep_inv">noevt_stepN_evtstep_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_star">swstar_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#predicted_abort1_star_abort">predicted_abort1_star_abort</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span>?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#cur_valid_id_case1">cur_valid_id_case1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x8</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;[|<span class="id">constructor</span>]; <span class="id">right</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">R</span> <span class="kwd">as</span> [? <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span>  <span class="id">R</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id">ge</span> <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H1</span> <span class="id">R</span>. <span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">split</span>;[<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>|<span class="tactic">intro</span>];<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'' = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x9</span>,<span class="id">pc</span>''. <span class="tactic">inversion</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_thrd_globstar_np_nonevt_star">non_evt_thrd_globstar_np_nonevt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">pc</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8461')">Proof.</div>
<div class="proofscript" id="proof8461">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 2;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_star_to_np_taustar">glob_npnsw_star_to_np_taustar</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H4</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_np">atomblockstarN_np</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_star_to_np_taustar">glob_npnsw_star_to_np_taustar</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#tau_star_non_evt_star">tau_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [[]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">x3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">x4</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">x2</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">x2</span>). <span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H4</span> <span class="id">H9</span> <span class="id">H1</span> <span class="id">H3</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_cur_valid_tid">npnswstep_cur_valid_tid</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">destruct</span> <span class="id">x2</span>,<span class="id">H9</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">x3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="final_state_step">final_state_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#x">x</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8462')">Proof.</div>
<div class="proofscript" id="proof8462">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 3;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id">x</span>= <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> \/ <span class="id">x</span> &lt;&gt; <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span>). <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?;<span class="tactic">auto</span>;<span class="id">right</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">intro</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H_not_halted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.is_emp">CallStack.is_emp</a></span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">auto</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="final_state_npnsw_or_sw_star">final_state_npnsw_or_sw_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8463')">Proof.</div>
<div class="proofscript" id="proof8463">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">H</span> <span class="id">wdge</span> [] ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_step">final_state_step</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_step">final_state_step</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="final_state_atom">final_state_atom</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> -&gt;@<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8464')">Proof.</div>
<div class="proofscript" id="proof8464">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#star_stepN">star_stepN</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#stepN_SN_split_weak">stepN_SN_split_weak</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#stepN_star">stepN_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_step">final_state_step</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_done_inv">non_evt_star_done_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span> <span class="id">fp1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' ({-|<span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8465')">Proof.</div>
<div class="proofscript" id="proof8465">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_npnsw_or_sw_stepN">swstar_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>;[|<span class="tactic">inversion</span> <span class="id">H</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_npnsw_or_sw_star">final_state_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">invpc1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_atom">final_state_atom</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_to_atomblockstarN">noevt_stepN_Si_to_atomblockstarN</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#predicted_abort1_star_abort">predicted_abort1_star_abort</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H10</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_star">swstar_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_star">swstar_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#final_state_npnsw_or_sw_star">final_state_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_p_np_done">Etr_p_np_done</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#Behav_done">Behav_done</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8466')">Proof.</div>
<div class="proofscript" id="proof8466">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_done_inv">non_evt_star_done_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_np">atomblockstarN_np</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x6</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#extat_step_equiv">extat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id">x3</span>,<span class="id">x5</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> *. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_step">final_state_step</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_thdp_inv">non_evt_star_thdp_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#thrdhalt_step_equiv">thrdhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id">x3</span>,<span class="id">x5</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> *. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#final_state_step">final_state_step</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_thdp_inv">non_evt_star_thdp_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">x3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>}) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">x3</span>). <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>. <span class="tactic">intro</span>;<span class="id">solv_thread</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">x4</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">x3</span>). <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>);<span class="tactic">try</span> <span class="tactic">intro</span> ;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_p_abort_equiv">np_p_abort_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc0</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) /\ <span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8467')">Proof.</div>
<div class="proofscript" id="proof8467">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>,<span class="id">gl</span> ;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#call_step_equiv">call_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#ret_step_equiv">ret_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#extat_step_equiv">extat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#thrdhalt_step_equiv">thrdhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#allhalt_step_equiv">allhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#efprint_step_equiv">efprint_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#pc_glob_l3">pc_glob_l3</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_abort_preserve">npnsw_abort_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>})-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8468')">Proof.</div>
<div class="proofscript" id="proof8468">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="id">contradict</span> <span class="id">H4</span>;<span class="id">econstructor</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gl</span> = <span class="id"><a href="ETrace.html#sw">sw</a></span> \/ <span class="id">gl</span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>;<span class="tactic">auto</span>;<span class="id">right</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp</span> <span class="id">fp0</span> \/ ~<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp</span> <span class="id">fp0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gl</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">b1</span>:=<span class="id"><a href="GlobDefs.html#O">O</a></span>)(<span class="id">b2</span>:=<span class="id"><a href="GlobDefs.html#O">O</a></span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_race_to_star">predict_race_to_star</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id">x0</span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>}) <span class="id">gl</span> <span class="id">fp0</span> <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="SmileReorder.html#predict_step_ex">predict_step_ex</a></span> <span class="kwd">with</span>(<span class="id">t2</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) /\ <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8469')">Proof.</div>
<div class="proofscript" id="proof8469">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_cur_valid_tid">npnswstep_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H3</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_cons_validid">drf_pc_glob_cons_validid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8470')">Proof.</div>
<div class="proofscript" id="proof8470">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;[<span class="tactic">eauto</span>|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_taustar_ex">npnsw_step_taustar_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span>&lt;&gt;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">fp</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'') (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8471')">Proof.</div>
<div class="proofscript" id="proof8471">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span>' <span class="id">pc</span>'' <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span> <span class="kwd">using</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>);<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">clear</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_changebitO">npnswstep_changebitO</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span>  [<span class="id">inv1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">clear</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>') <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#globstep_reorder_rule_alter">globstep_reorder_rule_alter</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> [|[]];<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">Hsimpl</span>. <span class="tactic">destruct</span> <span class="id">H8</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H12</span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">destruct</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">b1</span>:=<span class="id"><a href="GlobDefs.html#O">O</a></span>)(<span class="id">b2</span>:=<span class="id"><a href="GlobDefs.html#O">O</a></span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">L</span>;<span class="tactic">inversion</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_race_to_star">predict_race_to_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_glob_tauN">mem_eq_glob_tauN</a></span> <span class="kwd">in</span> <span class="id">H10</span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x2</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>}) = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>'). <span class="tactic">simpl</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#type_glob_step_atomOpreserve">type_glob_step_atomOpreserve</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">T1</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x2</span>). <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H14</span>,<span class="id">H13</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">rewrite</span> <span class="id">H13</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">Heqb</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_taustep">npnswstep_taustep</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span>?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep1">atomblock_open_reorderstep1</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">s</span>' (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x2</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H11</span>;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_glob_tauN">mem_eq_glob_tauN</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H13</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_change">mem_eq_pc_change</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="id">erewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H14</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">inversion</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tauN_I_split">tauN_I_split</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x3</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x5</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x3</span>)(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x3</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">Esimpl</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_tau_star">core_tau_star_tau_star</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span>) = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H20</span> <span class="kwd">in</span> <span class="id">H15</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#taustar_fpconflict_split">taustar_fpconflict_split</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">T2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">T2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x6</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>')<span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">Esimpl</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestep">mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">H27</span> ;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> ?. <span class="tactic">destruct</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H22</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x8</span> <span class="id">t</span>  <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H22</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x8</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)) <span class="kwd">in</span> <span class="id">H31</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = ({-|<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H32</span> <span class="kwd">in</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#corestep_conflict">corestep_conflict</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H33</span> <span class="kwd">as</span> [|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x8</span> =  ({<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">x8</span>, <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>', <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x8</span>, <span class="id"><a href="GlobDefs.html#I">I</a></span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H21</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">x8</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H34</span> <span class="kwd">in</span> <span class="id">H33</span>;<span class="tactic">clear</span> <span class="id">H34</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' =<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span>) = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H34</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H35</span> <span class="kwd">in</span> <span class="id">H21</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#corestar_globstar">corestar_globstar</a></span> <span class="kwd">in</span> <span class="id">H21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H21</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H36</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H36</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H41</span> <span class="kwd">in</span> <span class="id">H36</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H21</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H35</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H35</span>,<span class="id">H36</span>,<span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x8</span> = ({<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">x8</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>',<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x8</span>,<span class="id"><a href="GlobDefs.html#I">I</a></span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x8</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H37</span> <span class="kwd">in</span> <span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H38</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H38</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H33</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x4</span> <span class="id">x0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#conflict_union_ano">conflict_union_ano</a></span> <span class="kwd">in</span> <span class="id">H34</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H39</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">left</span>;<span class="tactic">intro</span> <span class="id">T</span>;<span class="tactic">inversion</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_race_to_star">predict_race_to_star</a></span> <span class="kwd">in</span> <span class="id">H40</span>;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span> <span class="kwd">in</span> <span class="id">H40</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_tau_star">core_tau_star_tau_star</a></span> <span class="kwd">in</span> <span class="id">H21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H21</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H21</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">intro</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">x6</span> \/ ~ <span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_core_tauN">atomblock_open_reorder_core_tauN</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x4</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x11</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H15</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> []. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H24</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep2">atomblock_open_reorderstep2</a></span> <span class="kwd">in</span> <span class="id">H25</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x12</span> ({-|<span class="id">x14</span>, (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>)})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H28</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H28</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H28</span>;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">H30</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span> <span class="kwd">with</span>(<span class="id">p1</span>:=<span class="id">x7</span>) <span class="kwd">in</span> <span class="id">H31</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_glob_tauN">mem_eq_glob_tauN</a></span> <span class="kwd">in</span> <span class="id">H32</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H28</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x13</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H27</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x13</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H27</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x13</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#O">O</a></span> = ({-|<span class="id">x13</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H38</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H36</span> <span class="kwd">in</span> <span class="id">H33</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H33</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H42</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H42</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x10</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">simpl</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H45</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_tau_star">core_tau_star_tau_star</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H39</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H27</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H39</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H39</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span> <span class="kwd">with</span>(<span class="id">p1</span>:=<span class="id">pc</span>'') <span class="kwd">in</span> <span class="id">H34</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H34</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H39</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H39</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x10</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">simpl</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H42</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_tau_star">core_tau_star_tau_star</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H27</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H36</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H21</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H21</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H15</span> <span class="id">H16</span> <span class="id">H17</span> <span class="id">H18</span> <span class="id">x3</span> <span class="id">H14</span> <span class="id">x8</span> <span class="id">x9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H19</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H14</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#taustar_fpconflict_split">taustar_fpconflict_split</a></span> <span class="kwd">in</span> <span class="id">H19</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">x4</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H24</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x4</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span>[];<span class="tactic">subst</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H25</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)<span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H21</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>') <span class="id"><a href="GlobDefs.html#I">I</a></span> = ({-|<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x10</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>'})). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H29</span> <span class="kwd">in</span> <span class="id">H26</span>;<span class="tactic">clear</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x9</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)) <span class="kwd">in</span> <span class="id">H28</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#corestep_conflict">corestep_conflict</a></span> <span class="kwd">in</span> <span class="id">H26</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H30</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H24</span>. <span class="tactic">inversion</span> <span class="id">H24</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H31</span>,<span class="id">H32</span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x1</span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">H24</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H34</span>,<span class="id">H33</span> <span class="kwd">in</span> <span class="id">H29</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#corestar_globstar">corestar_globstar</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> ?. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H36</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H35</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H29</span>;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H35</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H24</span> <span class="kwd">in</span> <span class="id">H32</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H32</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(({<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">x9</span>, <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>', <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x9</span>, <span class="id"><a href="GlobDefs.html#I">I</a></span>}) = <span class="id">x9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x9</span>,<span class="id">H32</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">f_equal</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H33</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H29</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#conflict_union_ano">conflict_union_ano</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_race_to_star">predict_race_to_star</a></span> <span class="kwd">in</span> <span class="id">H34</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span> <span class="kwd">in</span> <span class="id">H34</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H34</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_star">core_tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_N_OI">tau_N_OI</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">j</span> <span class="id">fp1</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#j">j</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="RefineEquiv.html#j">j</a></span>&lt;<span class="id"><a href="RefineEquiv.html#i">i</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k</span> <span class="id">fp2</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>)<span class="id"><a href="RefineEquiv.html#k">k</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> /\ <span class="id"><a href="RefineEquiv.html#j">j</a></span>+<span class="id"><a href="RefineEquiv.html#k">k</a></span>+1=<span class="id"><a href="RefineEquiv.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8472')">Proof.</div>
<div class="proofscript" id="proof8472">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> = <span class="id">i</span> + 1). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_N_split">tau_N_split</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H6</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.  <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x7</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">fail</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> @<span class="id"><a href="ETrace.html#tau_N_O">tau_N_O</a></span> <span class="id">_</span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_N_S">tau_N_S</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_N_cons">tau_N_cons</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H6</span>,<span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_validid">npnsw_or_sw_stepN_validid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id">pc</span>' \/ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> )).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8473')">Proof.</div>
<div class="proofscript" id="proof8473">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">invpc1</span> <span class="id">wdge</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Heqn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(0=0). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">inv2</span>:<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">pc</span>'). <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHnpnsw_or_sw_stepN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="id">right</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">right</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_inv1">npnsw_or_sw_stepN_inv1</a></span> <span class="kwd">in</span> <span class="id">H</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> - 1 = <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">inv3</span>:<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">x0</span>). <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">x</span> <span class="id">H</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_cur_valid_tid">npnswstep_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_pc_valid_tid_backwards_preservation">npnswstep_pc_valid_tid_backwards_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> ;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_abort">mem_eq_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8474')">Proof.</div>
<div class="proofscript" id="proof8474">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span>;<span class="tactic">destruct</span> 3;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_halfatomblock_abort">npnswstep_halfatomblock_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\ <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8475')">Proof.</div>
<div class="proofscript" id="proof8475">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> [<span class="id">R1</span> <span class="id">R2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>)<span class="kwd">as</span> <span class="id">R3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_taustep">npnswstep_taustep</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> ;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp</span>'). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_taustep_halfatomblock_fpsmile">drf_pc_glob_taustep_halfatomblock_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep1">atomblock_open_reorderstep1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> <span class="id">x</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x2</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H11</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestar">mem_eq_corestar</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x2</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x1</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)). <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x5</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id">x3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> []. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">ge</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x5</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span> ) <span class="id">pc</span>''). <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_sym">mem_eq_pc_sym</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_abort">mem_eq_abort</a></span> <span class="kwd">in</span> <span class="id">H22</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x1</span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x1</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H23</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.  <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H22</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x4</span> = <span class="id">t</span>). <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H17</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H23</span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H22</span> <span class="kwd">in</span> <span class="id">H25</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H18</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H25</span> <span class="id">H_tp_push</span> <span class="id">H1</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">thdp</span>') <span class="kwd">in</span> <span class="id">H25</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H17</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H23</span> <span class="kwd">in</span> <span class="id">H26</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H26</span>. <span class="tactic">destruct</span> <span class="id">H26</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H25</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x6</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H27</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp0</span> <span class="id">fp</span> \/ ~ <span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp0</span> <span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H28</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gl</span> = <span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H25</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H25</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">tau_star_cons</span>' <span class="kwd">in</span> <span class="id">H25</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H28</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H26</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#conflict_union">conflict_union</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_race_to_star">predict_race_to_star</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_l4">drf_pc_l4</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>. <span class="id">contradiction</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span> <span class="kwd">in</span> <span class="id">H28</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x4</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="kwd">as</span> <span class="id">pce</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id">pce</span>,<span class="id">t</span>}) <span class="id">gl</span> <span class="id">fp0</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">pc</span>'0 <span class="id">t</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x4</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="GlobDefs.html#O">O</a></span> = ({-|<span class="id">pce</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqpce</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H30</span> <span class="kwd">in</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pce</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqpce</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_star">core_tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H17</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H28</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gl</span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">assert</span>(<span class="id">gl</span> = <span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H29</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="SmileReorder.html#predict_step_ex">predict_step_ex</a></span> <span class="id">ge</span> <span class="id">x0</span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id">pce</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id">t</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> <span class="id">x5</span> <span class="id">gl</span> <span class="id">fp0</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">pc</span>'0 <span class="id">t</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id">R2</span> <span class="id">H31</span> <span class="id">R3</span> <span class="id">H18</span> <span class="id">H29</span> <span class="id">H28</span> <span class="id">H6</span> <span class="id">H32</span> <span class="id">H1</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x5</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id">gl</span> <span class="id">fp0</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x6</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">inversion</span> <span class="id">H33</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H34</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x4</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#core_tau_star_star">core_tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H17</span> <span class="kwd">as</span> []. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H24</span> <span class="id">H25</span> <span class="id">H18</span> <span class="id">H28</span> <span class="id">R2</span> <span class="id">R3</span> <span class="id">H1</span> <span class="id">H26</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> <span class="id">sim1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">sim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">ge</span> <span class="id">x4</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">ge</span> <span class="id">x5</span> <span class="id">t</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>,<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>,<span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> *.  <span class="tactic">simpl</span> <span class="kwd">in</span> *. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> <span class="id">eff1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H25</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">eff1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">eff1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extatstep_Glocality">extatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H25</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_l3">drf_pc_glob_l3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">pc0</span> <span class="id">t</span> <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> /\ <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> /\ <span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8476')">Proof.</div>
<div class="proofscript" id="proof8476">
 <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_star_abort_validid">init_star_abort_validid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8477')">Proof.</div>
<div class="proofscript" id="proof8477">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#star_stepN">star_stepN</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">t</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Init.html#init_property_1_alt">init_property_1_alt</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#stepN_SN_split_weak">stepN_SN_split_weak</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#init_config_GE_wd">init_config_GE_wd</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#stepN_star">stepN_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">valid_tid_preserve</span>' <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>,<span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_weak_abort_validid">drf_pc_glob_weak_abort_validid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob_weak">drf_pc_glob_weak</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt; <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8478')">Proof.</div>
<div class="proofscript" id="proof8478">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_weak">drf_pc_glob_weak</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#pc_glob_l3">pc_glob_l3</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_globstar">corestar_globstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>  <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8479')">Proof.</div>
<div class="proofscript" id="proof8479">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_npstar">corestar_npstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>  <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8480')">Proof.</div>
<div class="proofscript" id="proof8480">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="abort_eq">abort_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8481')">Proof.</div>
<div class="proofscript" id="proof8481">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span>,<span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="id">contradict</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">fail</span>);<span class="tactic">destruct</span> <span class="id">gl</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#call_step_equiv">call_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#ret_step_equiv">ret_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#extat_step_equiv">extat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#thrdhalt_step_equiv">thrdhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#allhalt_step_equiv">allhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#efprint_step_equiv">efprint_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eapply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_p_np_abort">Etr_p_np_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#Behav_abort">Behav_abort</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8482')">Proof.</div>
<div class="proofscript" id="proof8482">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="silent_diverge_cons_glob_non_evt_star">silent_diverge_cons_glob_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8483')">Proof.</div>
<div class="proofscript" id="proof8483">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHnon_evt_star</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp1</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#sw_star_cons">sw_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="Refinement.silent_diverge">silent_diverge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="Refinement.silent_diverge.GE">GE</a></span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="Refinement.silent_diverge.wdge">wdge</a></span>: <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="Refinement.silent_diverge.modwdge">modwdge</a></span>: <span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="SimEtr.html#Sdiverge">Sdiverge</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Arguments</span> <span class="id"><a href="SimEtr.html#Pdiverge">Pdiverge</a></span> [<span class="id">GE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="psilent_diverge">psilent_diverge</a></span> := <span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="npsilent_diverge">npsilent_diverge</a></span> := <span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="noevt_stepN_cons">noevt_stepN_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">j</span> <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>) <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#j">j</a></span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="RefineEquiv.html#i">i</a></span>+<span class="id"><a href="RefineEquiv.html#j">j</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8484')">Proof.</div>
<div class="proofscript" id="proof8484">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span> <span class="kwd">as</span> [<span class="id">i</span> <span class="id">IHi</span>]<span class="kwd">using</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>);<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">IHsw_star</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_inv">noevt_stepN_Si_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#cons_tau">cons_tau</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(0+ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span>(<span class="id">i</span>+<span class="id">j</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> + <span class="id">j</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>, &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="psilent_diverge_inv">psilent_diverge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8485')">Proof.</div>
<div class="proofscript" id="proof8485">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_cons_taustep">noevt_stepN_cons_taustep</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="psilent_diverge_O_inv1">psilent_diverge_O_inv1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id">pc</span>' )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ ( <span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id">pc</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8486')">Proof.</div>
<div class="proofscript" id="proof8486">
 <span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="I_psilent_diverge">I_psilent_diverge</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">pc</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ ( <span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id">pc</span>').     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="psilent_diverge_foreverI_inv1">psilent_diverge_foreverI_inv1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ ( <span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id">pc</span>')) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span> <span class="id">fp</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8487')">Proof.</div>
<div class="proofscript" id="proof8487">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>'') <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_cons_taustep">noevt_stepN_cons_taustep</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_cons_taustep">noevt_stepN_cons_taustep</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_cons">noevt_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="I_psilent_diverge_inv">I_psilent_diverge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8488')">Proof.</div>
<div class="proofscript" id="proof8488">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span>,<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#glob_sw_star_I">glob_sw_star_I</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>'') <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 3;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#cons_tau">cons_tau</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="core_Idiverge">core_Idiverge</a></span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="cons_core_Idiv">cons_core_Idiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_np_step">type_np_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_Idiverge_I_psilent_diverge_exists">core_Idiverge_I_psilent_diverge_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8489')">Proof.</div>
<div class="proofscript" id="proof8489">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#I_psilent_diverge_inv">I_psilent_diverge_inv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sw_step_I_psilent_diverge">sw_step_I_psilent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8490')">Proof.</div>
<div class="proofscript" id="proof8490">
 <span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_Idiverge_npsilent_diverge">core_Idiverge_npsilent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8491')">Proof.</div>
<div class="proofscript" id="proof8491">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">core_Idiverge_npsilent_diverge</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="O_psilent_diverge">O_psilent_diverge</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">pc</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="psilent_diverge_inv2">psilent_diverge_inv2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> \/ (<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8492')">Proof.</div>
<div class="proofscript" id="proof8492">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id">pc</span> \/ ~ <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">unfolds</span> := <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span>,<span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span>,<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span>,<span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="O_psilent_diverge_inv">O_psilent_diverge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\ <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8493')">Proof.</div>
<div class="proofscript" id="proof8493">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#psilent_diverge_O_inv1">psilent_diverge_O_inv1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_cons">noevt_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span>(<span class="id">x</span>+<span class="id">x2</span>+1)). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#psilent_diverge_foreverI_inv1">psilent_diverge_foreverI_inv1</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_cons_taustep">noevt_stepN_cons_taustep</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="O_globtaustep">O_globtaustep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' \/ <span class="id"><a href="DRFLemmas.html#haltstep">haltstep</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8494')">Proof.</div>
<div class="proofscript" id="proof8494">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="id">left</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblockstep_noevtstar">atomblockstep_noevtstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8495')">Proof.</div>
<div class="proofscript" id="proof8495">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#corestar_globstar">corestar_globstar</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#tau_star_non_evt_star">tau_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">O_psilent_diverge_inv</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' \/ <span class="id"><a href="DRFLemmas.html#haltstep">haltstep</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' \/ <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'') /\ <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>''.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8496')">Proof.</div>
<div class="proofscript" id="proof8496">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>'') <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#O_globtaustep">O_globtaustep</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#cons_tau">cons_tau</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_cons">noevt_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="id">s</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_cons_taustep">noevt_stepN_cons_taustep</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#I_psilent_diverge">I_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> []. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> []. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_IO">noevt_stepN_IO</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x8</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">fail</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R1</span>:<span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id">s</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">x3</span> <span class="id">x4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">assert</span>(<span class="id">fp</span>'=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_glob_non_evt_star">silent_diverge_cons_glob_non_evt_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>'=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstep_noevtstar">atomblockstep_noevtstar</a></span> <span class="kwd">in</span> <span class="id">R1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_cons">noevt_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_cons">noevt_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(0+(<span class="id">x0</span>+<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x8</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span>(<span class="id">x0</span>+<span class="id">x8</span>)). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">clear</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H13</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstep_invpc_preserve">atomblockstep_invpc_preserve</a></span> <span class="kwd">in</span> <span class="id">R1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="Odiverge">Odiverge</a></span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="cons_Otau">cons_Otau</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="cons_block">cons_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>') <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Odiverge_O">Odiverge_O</a></span>:  <span class="kwd">forall</span> <span class="id">pc</span>, <span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8497')">Proof.</div>
<div class="proofscript" id="proof8497">
 <span class="tactic">split</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_cons_Odiverge">non_evt_star_cons_Odiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8498')">Proof.</div>
<div class="proofscript" id="proof8498">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span> <span class="kwd">using</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>);<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="RefineEquiv.html#Odiverge_O">Odiverge_O</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_inv2">noevt_stepN_Si_inv2</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>;[|<span class="tactic">rewrite</span> <span class="id">H11</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>;[|<span class="id">Omega.omega</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id">x0</span>). <span class="tactic">rewrite</span> <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#O_globtaustep">O_globtaustep</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H11</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2. <span class="tactic">auto</span>. <span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="id">right</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span>. <span class="tactic">simpl</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H12</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H11</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x2</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H15</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstep_invpc_preserve">atomblockstep_invpc_preserve</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>;[|<span class="tactic">rewrite</span> <span class="id">H11</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H8</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="O_psilent_diverge_Odiverge">O_psilent_diverge_Odiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#O_psilent_diverge">O_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8499')">Proof.</div>
<div class="proofscript" id="proof8499">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L1</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">O_psilent_diverge_inv</span>' <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;[|<span class="tactic">rewrite</span> <span class="id">H0</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H4</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;[|<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">x</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x0</span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H4</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstep_cur_valid_id">atomblockstep_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;[|<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">x</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x0</span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H4</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="neverIdiverge">neverIdiverge</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'', <span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>') <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''  /\ <span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">pc</span>'').<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="will_neverIdiverge">will_neverIdiverge</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#neverIdiverge">neverIdiverge</a></span> <span class="id">pc</span>'.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="npnswdiverge">npnswdiverge</a></span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="cons_npnsw_div">cons_npnsw_div</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Odiverge_neverIdiverge_npnswdiverge">Odiverge_neverIdiverge_npnswdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#neverIdiverge">neverIdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8500')">Proof.</div>
<div class="proofscript" id="proof8500">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Odiverge_neverIdiverge_npnswdiverge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2. <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_non_evt_star">npnsw_taustar_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8501')">Proof.</div>
<div class="proofscript" id="proof8501">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblockstarN_non_evt_star">atomblockstarN_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8502')">Proof.</div>
<div class="proofscript" id="proof8502">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc1</span> <span class="id">fp2</span> <span class="id">pc2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#atomblockstep_noevtstar">atomblockstep_noevtstar</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_taustar_non_evt_star">npnsw_taustar_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Odiverge_not_will_neverIdiverge_inv">Odiverge_not_will_neverIdiverge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>') <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">pc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8503')">Proof.</div>
<div class="proofscript" id="proof8503">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="RefineEquiv.html#neverIdiverge">neverIdiverge</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#neverIdiverge">neverIdiverge</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> []. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">x</span> <span class="id">x0</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x3</span> <span class="kwd">as</span> [<span class="id">x3</span> <span class="id">IHx3</span>] <span class="kwd">using</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>);<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_npnsw_or_sw_stepN">swstar_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_non_evt_star">atomblockstarN_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x0</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_inv2">noevt_stepN_Si_inv2</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#O_globtaustep">O_globtaustep</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_non_evt_star">atomblockstarN_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_cons_Odiverge">non_evt_star_cons_Odiverge</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span> <span class="kwd">as</span> [<span class="id">R</span> | <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx3</span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>;[|<span class="id">Omega.omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_step_cons_npnsw_or_sw_star">npnsw_step_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#swstar_cons_npnsw_or_sw_star">swstar_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">R</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_taustar_non_evt_star">npnsw_taustar_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_noevt_stepN">swstar_noevt_stepN</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#swstar_cons_npnsw_or_sw_star">swstar_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;[|<span class="id">econstructor</span>;<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_O">Odiverge_O</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H14</span>;[|<span class="id">left</span>;<span class="tactic">apply</span> <span class="id">H7</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_non_evt_star">atomblockstarN_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_cons_Odiverge">non_evt_star_cons_Odiverge</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#atomblockstep">atomblockstep</a></span>,<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstep_invpc_preserve">atomblockstep_invpc_preserve</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>);<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#swstar_cons_npnsw_or_sw_star">swstar_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;[|<span class="id">econstructor</span>;<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>.  <span class="tactic">eauto</span>. <span class="id">econstructor</span> 2. <span class="id">constructor</span>. <span class="id">left</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_O">Odiverge_O</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span>;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#atomblockstep_noevtstar">atomblockstep_noevtstar</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="blockdiverge">blockdiverge</a></span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="cons_npnsw_or_sw_star_block">cons_npnsw_or_sw_star_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge.GE">GE</a></span> 1 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>') <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Odiverge_not_will_neverIdiverge_atomblockdiverge">Odiverge_not_will_neverIdiverge_atomblockdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#Odiverge">Odiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8504')">Proof.</div>
<div class="proofscript" id="proof8504">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_O">Odiverge_O</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_not_will_neverIdiverge_inv">Odiverge_not_will_neverIdiverge_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="psilent_diverge_case">psilent_diverge_case</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#psilent_diverge">psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id">pc</span>') \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id">pc</span>')\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8505')">Proof.</div>
<div class="proofscript" id="proof8505">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#psilent_diverge_inv2">psilent_diverge_inv2</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="id">pc</span> \/ ~ <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#will_neverIdiverge">will_neverIdiverge</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_neverIdiverge_npnswdiverge">Odiverge_neverIdiverge_npnswdiverge</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#O_psilent_diverge_Odiverge">O_psilent_diverge_Odiverge</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#Odiverge_not_will_neverIdiverge_atomblockdiverge">Odiverge_not_will_neverIdiverge_atomblockdiverge</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#core_Idiverge_I_psilent_diverge_exists">core_Idiverge_I_psilent_diverge_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="RefineEquiv.html#Refinement.silent_diverge">silent_diverge</a></span>.<br/>
<span class="kwd">Section</span> <span class="id"><a name="Refinement.diverge_proof">diverge_proof</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="noevt_stepN_Si_Iinv_drfsafe">noevt_stepN_Si_Iinv_drfsafe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">pc0</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">pc3</span> <span class="id">t</span> <span class="id">pc4</span> <span class="id">fp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span> /\ <span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc3">pc3</a></span> <span class="id"><a href="RefineEquiv.html#fp3">fp3</a></span> <span class="id"><a href="RefineEquiv.html#pc4">pc4</a></span> /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#pc4">pc4</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8506')">Proof.</div>
<div class="proofscript" id="proof8506">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?. <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">O1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_OI">noevt_stepN_OI</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0,<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">pc</span>, <span class="id">pc</span>,<span class="id">pc</span>,<span class="id">x2</span>,(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x1</span>),<span class="id">pc</span>',<span class="id">x4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H6</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">constructor</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L1</span>:<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_sound">noevt_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x1</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_to_atomblockstarN">noevt_stepN_Si_to_atomblockstarN</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [|[|[]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">v1</span> <span class="id">wdge</span> <span class="id">modwdge</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H7</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#predicted_abort1_star_abort">predicted_abort1_star_abort</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#race_changetid">race_changetid</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">H13</span> ;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="noevt_stepN_Si_Oinv_drfsafe">noevt_stepN_Si_Oinv_drfsafe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">pc0</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' ({-|<span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8507')">Proof.</div>
<div class="proofscript" id="proof8507">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?. <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">O1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_Si_to_atomblockstarN">noevt_stepN_Si_to_atomblockstarN</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[|[]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">v1</span> <span class="id">wdge</span> <span class="id">modwdge</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H2</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#predicted_abort1_star_abort">predicted_abort1_star_abort</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#race_changetid">race_changetid</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_npnsw_step_atomblockstarN_inv_ex_drfsafe">glob_npnsw_step_atomblockstarN_inv_ex_drfsafe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">fp1</span> <span class="id">pc1</span> <span class="id">ltids</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#ltids">ltids</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> /\ <span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#ltids">ltids</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id">pc</span>'/\ <span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> ({-|<span class="id">pc</span>'',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>}) /\ <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8508')">Proof.</div>
<div class="proofscript" id="proof8508">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">v1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">v2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_pc_valid_tid_backwards_preservation">npnswstep_pc_valid_tid_backwards_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">v3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#glob_npnsw_step_atomblockstarN_inv_ex_case">glob_npnsw_step_atomblockstarN_inv_ex_case</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v4</span>:<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">v3</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [|[|]];<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#predicted_abort1_star_abort">predicted_abort1_star_abort</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">v4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">v4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H12</span> <span class="kwd">in</span> <span class="id">v4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_star_atomblockstarN_ex_drfsafe">npnsw_or_sw_star_atomblockstarN_ex_drfsafe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'' <span class="id">ltids</span> (<span class="id">drfsafe</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#ltids">ltids</a></span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#ltids">ltids</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'}) <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id">pc</span>'',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>}) <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8509')">Proof.</div>
<div class="proofscript" id="proof8509">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_inv1">npnsw_or_sw_stepN_inv1</a></span> <span class="kwd">in</span> <span class="id">H</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> -1 = <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' \/ <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ltids</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H13</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnswstep_cons_atomblockstarN">npnswstep_cons_atomblockstarN</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>),&lt;- <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>,&lt;- <span class="id">H8</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#glob_npnsw_step_atomblockstarN_inv_ex_drfsafe">glob_npnsw_step_atomblockstarN_inv_ex_drfsafe</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_npnsw_or_sw_star">mem_eq_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x10</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x7</span>). <span class="tactic">inversion</span> <span class="id">H12</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H13</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x8</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) /\ <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id">ge</span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x8</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">drfsafe</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H9</span> <span class="id">H10</span> <span class="id">H12</span> <span class="id">H14</span>. <span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x1</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>),<span class="id">x9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">left</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_change">mem_eq_pc_change</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x9</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">destruct</span> <span class="id">H9</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x9</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x9</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x5</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x9</span>,<span class="id">H6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H</span>;[|<span class="id">right</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H</span>;[|<span class="id">left</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x9</span> <span class="id">e</span> <span class="id">fp1</span> <span class="id">s2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x9</span>,<span class="id">s2</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H1</span>;[|<span class="id">right</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H1</span>;[|<span class="id">left</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">drfsafe</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> [] ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [] ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">drfsafe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="blockdiverge_tid">blockdiverge_tid</a></span>{<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>} :@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="GlobDefs.html#tid">tid</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="cons_blockdiverge_tid">cons_blockdiverge_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>  <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id">ge</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id">ge</span> 1 (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_tid_exists_lemma">blockdiverge_tid_exists_lemma</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8510')">Proof.</div>
<div class="proofscript" id="proof8510">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_tid_exists">blockdiverge_tid_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8511')">Proof.</div>
<div class="proofscript" id="proof8511">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_tid_exists_lemma">blockdiverge_tid_exists_lemma</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_star_cons_step">non_evt_star_cons_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SimEtr.html#non_evt_plus">non_evt_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SimEtr.html#non_evt_plus">non_evt_plus</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8512')">Proof.</div>
<div class="proofscript" id="proof8512">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SimEtr.html#ne_star_step">SimEtr.ne_star_step</a></span>. <span class="id">left</span>;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SimEtr.html#ne_star_step">SimEtr.ne_star_step</a></span>. <span class="id">right</span>;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblockstarN_NP_drfsafe">atomblockstarN_NP_drfsafe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#atomblockstarN">atomblockstarN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span>  <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) )).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8513')">Proof.</div>
<div class="proofscript" id="proof8513">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span>  <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstar1_np">atomblockstar1_np</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span> <span class="kwd">as</span> [<span class="id">L</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H12</span> <span class="kwd">as</span> [<span class="id">L</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">H_thread_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_star_cons_blockdiverge">npnsw_or_sw_star_cons_blockdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span>  <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span>  <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8514')">Proof.</div>
<div class="proofscript" id="proof8514">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 4;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="kwd">in</span> *. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.  <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_blockdiverge_tid">mem_eq_blockdiverge_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span> (<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">modwdge</span>:<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8515')">Proof.</div>
<div class="proofscript" id="proof8515">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 4;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">o1</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">destruct</span> <span class="id">H</span>;<span class="id">Hsimpl</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">o2</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>')). <span class="tactic">destruct</span> <span class="id">H</span>;<span class="id">Hsimpl</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_npnsw_or_sw_star">mem_eq_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_atomblockstarN">mem_eq_atomblockstarN</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H4</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'0 = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_changetid">blockdiverge_changetid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span> (<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#i">i</a></span>}) <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8516')">Proof.</div>
<div class="proofscript" id="proof8516">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>',<span class="id">i</span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>',<span class="id">H6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">econstructor</span> 2. <span class="id">right</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>,<span class="id">i</span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H8</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="id">left</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="id">right</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id">pc</span>,<span class="id">i</span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">s2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="id">right</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_valid_tid">blockdiverge_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8517')">Proof.</div>
<div class="proofscript" id="proof8517">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 3;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_tid_npdiverge">blockdiverge_tid_npdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge_tid">blockdiverge_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SimEtr.html#Pdiverge">Pdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8518')">Proof.</div>
<div class="proofscript" id="proof8518">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">R1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_atomblockstarN_ex_drfsafe">npnsw_or_sw_star_atomblockstarN_ex_drfsafe</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?. <span class="tactic">destruct</span> <span class="id">H9</span> <span class="kwd">as</span> [<span class="id">_</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?. <span class="tactic">destruct</span> <span class="id">H10</span> <span class="kwd">as</span> [<span class="id">R2</span> <span class="id">R3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="id">eassumption</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_changetid">blockdiverge_changetid</a></span> <span class="kwd">with</span>(<span class="id">i</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x4</span>) <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_blockdiverge_tid">mem_eq_blockdiverge_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_cons_blockdiverge">npnsw_or_sw_star_cons_blockdiverge</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_valid_tid">blockdiverge_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x2</span> ({-|<span class="id">x2</span>,<span class="id">t0</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x2</span>,<span class="id">H12</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cons_swstar">atomblockstarN_cons_swstar</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H6</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_changetid">blockdiverge_changetid</a></span> <span class="kwd">with</span>(<span class="id">i</span>:=<span class="id">t0</span>) <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H10</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_NP_drfsafe">atomblockstarN_NP_drfsafe</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H7</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">x2</span>,<span class="id">x6</span>}) ({-|<span class="id">x2</span>,<span class="id">t0</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x2</span>,<span class="id">H12</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.  <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npsw_swstar">npsw_swstar</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#ne_plus1">ne_plus1</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> ?;[|<span class="id">right</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_cons_step">non_evt_star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">blockdiverge_tid_npdiverge</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_globstar">atomblockstarN_globstar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="blockdiverge_npsilent_diverge">blockdiverge_npsilent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#blockdiverge">blockdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8519')">Proof.</div>
<div class="proofscript" id="proof8519">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_tid_exists">blockdiverge_tid_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_valid_tid">blockdiverge_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_tid_npdiverge">blockdiverge_tid_npdiverge</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#Pdiverge_sound">Pdiverge_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#Sdiverge_sound">Sdiverge_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_last_valid">npnsw_or_sw_stepN_last_valid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' (<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8520')">Proof.</div>
<div class="proofscript" id="proof8520">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_1_inv">npnsw_or_sw_stepN_1_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l">swstar_l</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_inv1">npnsw_or_sw_stepN_inv1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_cons_npnsw_or_sw_stepN_sw">npnsw_cons_npnsw_or_sw_stepN_sw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span>' <span class="id">pc</span>'' <span class="id">i</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8521')">Proof.</div>
<div class="proofscript" id="proof8521">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 5;<span class="tactic">subst</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>',<span class="id">H7</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_consnpnsw">npnsworsw_consnpnsw</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">pc</span>' <span class="id">l0</span> <span class="id">fp0</span> <span class="id">pc</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>';<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_consnpnsw">npnsworsw_consnpnsw</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_star_div">npnsw_or_sw_star_div</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">lt</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#k">k</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span> <span class="id">fp1</span> <span class="id">pc1</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'}) <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8522')">Proof.</div>
<div class="proofscript" id="proof8522">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">k</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>);<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span>;<span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#nth_error_nil">Coqlib.nth_error_nil</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span>  <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_last_valid">npnsw_or_sw_stepN_last_valid</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">L</span> <span class="kwd">as</span> [? <span class="id">L</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_inv1">npnsw_or_sw_stepN_inv1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span> -1 = <span class="id">k</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">clear</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHk</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' \/ <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id">H10</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>),<span class="id">H11</span>,<span class="id">H10</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">enough</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">x1</span> <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H1</span> ;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_star_reorder">npnswstep_star_reorder</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_npnsw_or_sw_stepN">mem_eq_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">L0</span> <span class="kwd">as</span> ?;[|<span class="tactic">rewrite</span> <span class="id">H0</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span>?. <span class="id">Hsimpl</span>. <span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">x</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x11</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x11</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x11</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x11</span>,<span class="id">H24</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_consnpnsw">npnsworsw_consnpnsw</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H16</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x10</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x10</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x10</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x10</span>,<span class="id">H26</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span>. <span class="tactic">intro</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H29</span>. <span class="tactic">inversion</span> <span class="id">H29</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#nth_error_nil">Coqlib.nth_error_nil</a></span> <span class="kwd">in</span> <span class="id">H29</span>. <span class="tactic">inversion</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span> (<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id">ge</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x4</span>))(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>) <span class="id">x5</span>) <span class="id">x10</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x1</span> <span class="id">x8</span>) <span class="id">x12</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H16</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H9</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="kwd">in</span> *. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x13</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">L0</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_cons_npnsw_or_sw_stepN_sw">npnsw_cons_npnsw_or_sw_stepN_sw</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x10</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x10</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x10</span>,<span class="id">H12</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H11</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_star_conflict">npnswstep_star_conflict</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#npnsw_star_abort">npnsw_star_abort</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">L</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_to_taustar">npnsw_taustar_to_taustar</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H20</span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H12</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict_star_alter">glob_predict_star_alter</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H14</span>;<span class="tactic">simpl</span>. <span class="id">econstructor</span> 2;[|<span class="id">constructor</span>];<span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv2">globrace_equiv2</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#star_race">star_race</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_race_equiv">predict_equiv_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#race_equiv">race_equiv</a></span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>);<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_last_valid_alt">npnsw_or_sw_stepN_last_valid_alt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' (<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span>  <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8523')">Proof.</div>
<div class="proofscript" id="proof8523">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_last_valid">npnsw_or_sw_stepN_last_valid</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_refl">thread_sim_refl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>, <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8524')">Proof.</div>
<div class="proofscript" id="proof8524">
 <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_comm">thread_sim_comm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8525')">Proof.</div>
<div class="proofscript" id="proof8525">
  <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">congruence</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_trans">thread_sim_trans</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8526')">Proof.</div>
<div class="proofscript" id="proof8526">
  <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_preserve">thread_sim_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> &lt;&gt; <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#x">x</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#call">call</a></span> \/ <span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8527')">Proof.</div>
<div class="proofscript" id="proof8527">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>,<span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_preserve2">thread_sim_preserve2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>})-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' &lt;&gt; <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="RefineEquiv.html#x">x</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#call">call</a></span> \/ <span class="id"><a href="RefineEquiv.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8528')">Proof.</div>
<div class="proofscript" id="proof8528">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>,<span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_thread_sim">npnsw_or_sw_stepN_thread_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8529')">Proof.</div>
<div class="proofscript" id="proof8529">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>);<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#thread_sim_refl">thread_sim_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_inv1">npnsw_or_sw_stepN_inv1</a></span> <span class="kwd">in</span> <span class="id">H2</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> - 1 = <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H8</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id">x2</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H3</span>;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="kwd">in</span> *;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x4</span>). <span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#thread_sim_trans">thread_sim_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>. <span class="id">exists</span> 0. <span class="tactic">simpl</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8530')">Proof.</div>
<div class="proofscript" id="proof8530">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHnpnsw_or_sw_stepN</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_i_1_split">npnsw_or_sw_stepN_i_1_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l1</span> <span class="id">fp1</span> <span class="id">pc1</span> <span class="id">l2</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l1">l1</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> 1 <span class="id"><a href="RefineEquiv.html#l2">l2</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="RefineEquiv.html#l1">l1</a></span> <span class="id"><a href="RefineEquiv.html#l2">l2</a></span> = <span class="id"><a href="RefineEquiv.html#l">l</a></span> /\ <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> = <span class="id"><a href="RefineEquiv.html#fp">fp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8531')">Proof.</div>
<div class="proofscript" id="proof8531">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_SN_split">npnsw_or_sw_stepN_SN_split</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_cons">npnsw_or_sw_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(1 + <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>,&lt;- <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">List.app_assoc</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>,&lt;- <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_safe">drf_pc_glob_safe</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#safe_state">safe_state</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8532')">Proof.</div>
<div class="proofscript" id="proof8532">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#safe_succeed">safe_succeed</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_drf">drf_pc_glob_drf</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict_star_alter">glob_predict_star_alter</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8533')">Proof.</div>
<div class="proofscript" id="proof8533">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>,<span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>,<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#globrace_equiv">globrace_equiv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> *;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_halfatomblockstep_ex">npnsw_step_halfatomblockstep_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt; <span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> /\ <span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8534')">Proof.</div>
<div class="proofscript" id="proof8534">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span>  <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">o1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R3</span>:<span class="id"><a href="ETrace.html#tau">tau</a></span>&lt;&gt;<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">intro</span> <span class="id">T</span>;<span class="tactic">inversion</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_taustep">npnswstep_taustep</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span> (<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span> \/ ~ <span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_half_I_smile">npnswstep_half_I_smile</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> [];<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#corestep_I_conflict">corestep_I_conflict</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_safe">drf_pc_glob_safe</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblock_abort">halfatomblock_abort</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep_cur_valid_id">halfatomblockstep_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep_star">halfatomblockstep_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H11</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">o1</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_drf">drf_pc_glob_drf</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#predict_star_race_to_alter">predict_star_race_to_alter</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">T</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_star_halfatomblockstep_ex">npnsw_star_halfatomblockstep_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt; <span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> /\ <span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8535')">Proof.</div>
<div class="proofscript" id="proof8535">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">intros</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#empsmile">empsmile</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span>?;[|<span class="tactic">inversion</span> <span class="id">H</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">s</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_step_halfatomblockstep_ex">npnsw_step_halfatomblockstep_ex</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drfsafe_npnsw_step_fpsmile">drfsafe_npnsw_step_fpsmile</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> /\ <span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id">exists</span> <span class="id">pc2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc2</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8536')">Proof.</div>
<div class="proofscript" id="proof8536">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span> \/ ~ <span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_reorder">npnswstep_reorder</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_conflict">npnswstep_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnswstep_pc_valid_tid_backwards_preservation">npnswstep_pc_valid_tid_backwards_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) ({-|<span class="id">pc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H</span>,<span class="id">H7</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_safe">drf_pc_glob_safe</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">o1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">o3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">o2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_drf">drf_pc_glob_drf</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">contradict</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span>;<span class="id">constructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span>;<span class="id">constructor</span>;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile">drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">t</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>' /\ <span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>, <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8537')">Proof.</div>
<div class="proofscript" id="proof8537">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#empsmile">empsmile</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.  <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">o1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id">l</span>' <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="kwd">in</span> *. <span class="id">Hsimpl</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_step_fpsmile">drfsafe_npnsw_step_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_npnsw_or_sw_stepN">mem_eq_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">E0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">eexists</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">E1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H16</span>) <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x3</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>''). <span class="tactic">destruct</span> <span class="id">H13</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H14</span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> <span class="id">v3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x2</span> ({-|<span class="id">x2</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>''})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>]. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x2</span>,<span class="id">H18</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_npnsw_or_sw_stepN">swstar_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_consnpnsw">npnsworsw_consnpnsw</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x1</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x1</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H20</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>,<span class="id">H11</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> <span class="id">v3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H10</span>;[|<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_cons_npnsw_or_sw_stepN_sw">npnsw_cons_npnsw_or_sw_stepN_sw</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">x1</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x1</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>,<span class="id">H11</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsworsw_conssw">npnsworsw_conssw</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H2</span>. <span class="id">exists</span> 0;<span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(({-|<span class="id">pc</span>',<span class="id">t</span>}) = ({-|<span class="id">pc</span>,<span class="id">t</span>})). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drfsafe_npnsw_or_sw_stepN_halfatomblockstep_fpsmile">drfsafe_npnsw_or_sw_stepN_halfatomblockstep_fpsmile</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">t</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8538')">Proof.</div>
<div class="proofscript" id="proof8538">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#empsmile">empsmile</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_i_1_split">npnsw_or_sw_stepN_i_1_split</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_1_inv">npnsw_or_sw_stepN_1_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x4</span> &lt;&gt; <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>,<span class="id">H10</span>,<span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">List.In_nth_error</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">List.in_or_app</a></span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H7</span>);<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H13</span> <span class="kwd">as</span> [<span class="id">v1</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">rewrite</span> <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="RefineEquiv.html#npnsw_step_halfatomblockstep_ex">npnsw_step_halfatomblockstep_ex</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H12</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_npnsw_or_sw_stepN">swstar_npnsw_or_sw_stepN</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_cons">npnsw_or_sw_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span> + 0 = <span class="id">i</span>). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H17</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">List.app_nil_r</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="kwd">in</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H5</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">List.In_nth_error</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">List.in_or_app</a></span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#nth_error_in">Coqlib.nth_error_in</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="halfatomblockstep_cons">halfatomblockstep_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8539')">Proof.</div>
<div class="proofscript" id="proof8539">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drfsafe_npnsw_or_sw_stepN_thread_sim">drfsafe_npnsw_or_sw_stepN_thread_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8540')">Proof.</div>
<div class="proofscript" id="proof8540">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#thread_sim_refl">thread_sim_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~<span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id">l</span>' <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H2</span>. <span class="tactic">destruct</span> <span class="id">H8</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x0</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span> &lt;&gt; <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">contradict</span> <span class="id">H2</span>. <span class="id">exists</span> 0. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#thread_sim_trans">thread_sim_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>;[|<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(({-|<span class="id">pc</span>,<span class="id">t</span>}) = ({-|<span class="id">pc</span>',<span class="id">t</span>})). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_trans">GPre_trans</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span> <span class="id">fp</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#m1">m1</a></span> <span class="id"><a href="RefineEquiv.html#m2">m2</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#m2">m2</a></span> <span class="id"><a href="RefineEquiv.html#m3">m3</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#m1">m1</a></span> <span class="id"><a href="RefineEquiv.html#m3">m3</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8541')">Proof.</div>
<div class="proofscript" id="proof8541">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GPre">GPre</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_trans">MemPre_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="kwd">in</span> *;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>). <span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_refl">GPre_refl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">t</span>,<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#m">m</a></span> <span class="id"><a href="RefineEquiv.html#m">m</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8542')">Proof.</div>
<div class="proofscript" id="proof8542">
 <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GPre">GPre</a></span>;<span class="tactic">intros</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_refl">MemPre_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq_refl">GlobalFreelistEq_refl</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="list_not_matched_split">list_not_matched_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">l</span> <span class="id">a</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#A">A</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="RefineEquiv.html#a">a</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>) <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8543')">Proof.</div>
<div class="proofscript" id="proof8543">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drfsafe_npnsw_or_sw_stepN_fpsmile_GPre">drfsafe_npnsw_or_sw_stepN_fpsmile_GPre</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">fp0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp0">fp0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="RefineEquiv.html#fp0">fp0</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8544')">Proof.</div>
<div class="proofscript" id="proof8544">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#GPre_refl">GPre_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id">l</span>' <span class="id">t</span>). <span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#list_not_matched_split">list_not_matched_split</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>;[|<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span>' <span class="id">fp0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#GPre_trans">GPre_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">contradict</span> <span class="id">H2</span>. <span class="id">exists</span> 0;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>;[|<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span>' <span class="id">fp0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>'). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_sim_coreIdiverge">thread_sim_coreIdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>'  (<span class="id">inv1</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>))(<span class="id">inv2</span> :<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8545')">Proof.</div>
<div class="proofscript" id="proof8545">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">fp</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">pc</span>'0 <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">R</span>;<span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">Hsimpl</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">R</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thread_sim_coreIdiverge</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_eff">globstep_eff</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_eff">globstep_eff</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'0 = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">inversion</span> <span class="id">R</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>). <span class="tactic">destruct</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H19</span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_coreIdiverge">mem_eq_coreIdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' (<span class="id">H_modwdge</span>:<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8546')">Proof.</div>
<div class="proofscript" id="proof8546">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 3;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span> : <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">pc</span> : @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) (<span class="id">fp</span> : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">pc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8547')">Proof.</div>
<div class="proofscript" id="proof8547">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHnon_evt_star</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_Idiverge_cons_corestar">core_Idiverge_cons_corestar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8548')">Proof.</div>
<div class="proofscript" id="proof8548">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">inversion</span> <span class="id">IHtau_star</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="case_coreIdiverge">case_coreIdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#noevt_stepN">noevt_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#core_Idiverge">core_Idiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8549')">Proof.</div>
<div class="proofscript" id="proof8549">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_Si_Iinv_drfsafe">noevt_stepN_Si_Iinv_drfsafe</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [?[]];<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_globstar">atomblockstarN_globstar</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H10</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H10</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_thdpinv">npnsw_or_sw_stepN_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id">ge</span> 0 <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">x5</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) ({-|<span class="id">x5</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x5</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 3;<span class="tactic">eauto</span>;[<span class="tactic">destruct</span> <span class="id">x5</span>,<span class="id">H12</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>|<span class="id">constructor</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_cons">npnsw_or_sw_stepN_cons</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_div">npnsw_or_sw_star_div</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H16</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestar">mem_eq_corestar</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_coreIdiverge">mem_eq_coreIdiverge</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_coreIdiverge">mem_eq_coreIdiverge</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_0">npnsw_or_sw_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H22</span>) <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x17</span> = <span class="id">x7</span>). <span class="tactic">destruct</span> <span class="id">R</span>;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">H15</span>,<span class="id">H21</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span>?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#type_glob_step_cur_valid_id">type_glob_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_pc_valid_tid_backwards_preservation">npnsw_taustar_pc_valid_tid_backwards_preservation</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x4</span> ({-|<span class="id">x4</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>,<span class="id">H25</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#corestar_npstar">corestar_npstar</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H28</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H27</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_star_to_np_taustar">glob_npnsw_star_to_np_taustar</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#tau_star_non_evt_star">tau_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H27</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#core_Idiverge_npsilent_diverge">core_Idiverge_npsilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H20</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x15</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">in</span> <span class="id">H25</span>,<span class="id">H27</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H25</span>,<span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cur_valid_tid">atomblockstarN_cur_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">T1</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cons_swstar">atomblockstarN_cons_swstar</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_np">atomblockstarN_np</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">x4</span>,<span class="id">x13</span>})({-|<span class="id">x4</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>,<span class="id">H25</span>,<span class="id">H10</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npsw_swstar">npsw_swstar</a></span> <span class="kwd">in</span> <span class="id">H29</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">x12</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) ({-|<span class="id">x4</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H31</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H27</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x3</span>). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H29</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H25</span>. <span class="tactic">apply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">H21</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">x4</span> <span class="id">x7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x15</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_to_taustar">npnsw_taustar_to_taustar</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x4</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">x4</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>,<span class="id">H10</span>,<span class="id">H21</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H24</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_thread_sim">npnsw_or_sw_stepN_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> <span class="id">Sim1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id">ge</span> <span class="id">x17</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">x16</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x17</span> = <span class="id">x7</span>). <span class="tactic">destruct</span> <span class="id">R</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">x17</span>),<span class="id">H26</span> <span class="kwd">in</span> <span class="id">H25</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_or_sw_stepN_halfatomblockstep_fpsmile">drfsafe_npnsw_or_sw_stepN_halfatomblockstep_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id">ge</span> <span class="id">x17</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">x9</span> <span class="id">x19</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H25</span> <span class="kwd">in</span> <span class="id">H26</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#thread_sim_comm">thread_sim_comm</a></span> <span class="kwd">in</span> <span class="id">Sim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x17</span> = <span class="id">x7</span>). <span class="tactic">inversion</span> <span class="id">R</span>;<span class="tactic">subst</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H28</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">Sim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ConflictReorder.html#empsmile">empsmile</a></span> <span class="id">x16</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_or_sw_stepN_fpsmile_GPre">drfsafe_npnsw_or_sw_stepN_fpsmile_GPre</a></span> <span class="kwd">in</span> <span class="id">H29</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H15</span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x17</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span>. <span class="id">Hsimpl</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H30</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H28</span> <span class="kwd">in</span> <span class="id">H29</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#entatstep_Glocality">entatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">Sim1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#core_Idiverge_cons_corestar">core_Idiverge_cons_corestar</a></span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">auto</span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H31</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H34</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.exploit</span>  <span class="id"><a href="RefineEquiv.html#thread_sim_coreIdiverge">thread_sim_coreIdiverge</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H33</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span> <span class="id">ge</span> <span class="id">x17</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp0</span> <span class="id">pc1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ConflictReorder.html#halfatomblockstep">halfatomblockstep</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H25</span> <span class="kwd">in</span> <span class="id">H36</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H36</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_or_sw_stepN_fpsmile_GPre">drfsafe_npnsw_or_sw_stepN_fpsmile_GPre</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H36</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x15</span> = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x20</span>). <span class="tactic">inversion</span> <span class="id">H31</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x18</span> = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">x17</span>). <span class="tactic">inversion</span> <span class="id">H16</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x18</span> = <span class="id">x7</span>). <span class="tactic">inversion</span> <span class="id">H16</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H37</span>, <span class="id">H38</span>, <span class="id">H39</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#core_Idiverge_npsilent_diverge">core_Idiverge_npsilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H35</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H31</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H31</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H36</span>. <span class="tactic">rewrite</span> <span class="id">H28</span>,<span class="id">H36</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H31</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">x20</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x20</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H37</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x15</span>). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_star_to_np_taustar">glob_npnsw_star_to_np_taustar</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#tau_star_non_evt_star">tau_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H37</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_np">atomblockstarN_np</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H38</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span>  ({-|<span class="id">x4</span>, <span class="id">x22</span>}) ({-|<span class="id">x4</span>,<span class="id">x7</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x4</span>,<span class="id">H21</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npsw_swstar">npsw_swstar</a></span> <span class="kwd">in</span> <span class="id">H39</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_star_to_np_taustar">glob_npnsw_star_to_np_taustar</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#tau_star_non_evt_star">tau_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H37</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#ne_star_step">ETrace.ne_star_step</a></span> <span class="kwd">in</span> <span class="id">H37</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H37</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H35</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H37</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l">swstar_l</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="tactic">subst</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x3</span>). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H38</span>;<span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">H21</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="AO_psilent_diverge">AO_psilent_diverge</a></span>{<span class="id">ge</span>}:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>-&gt;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="AO_mk">AO_mk</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc1</span> <span class="id">fp1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id">ge</span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>) <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>)<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="AO_psilent_diverge_valid_t">AO_psilent_diverge_valid_t</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8550')">Proof.</div>
<div class="proofscript" id="proof8550">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [<span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">v2</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#pc_valid_tid_back_star">pc_valid_tid_back_star</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_stepN_pc_valid_tid_preserve">npnsw_or_sw_stepN_pc_valid_tid_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span> (<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">v1</span>:<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8551')">Proof.</div>
<div class="proofscript" id="proof8551">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 3;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc</span>' = ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHnpnsw_or_sw_stepN</span>;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_star_cons_npnsw_or_sw_star">npnsw_star_cons_npnsw_or_sw_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">GE</span> : <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">pc</span> : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fp</span> : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">pc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fp2</span> : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">pc</span>'' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#GE">GE</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id">pc</span>'' -&gt; <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#GE">GE</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span>) <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8552')">Proof.</div>
<div class="proofscript" id="proof8552">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_step_cons_npnsw_or_sw_star">npnsw_step_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_AO_psilent_diverge">mem_eq_AO_psilent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8553')">Proof.</div>
<div class="proofscript" id="proof8553">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">inversion</span> 5;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#mem_eq_npnsw_or_sw_star">mem_eq_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ? ;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>). <span class="tactic">destruct</span> <span class="id">H8</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.  <span class="tactic">eapply</span> <span class="id">mem_eq_AO_psilent_diverge</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H10</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="AO_psilent_diverge_cons_npnsw_or_sw_star">AO_psilent_diverge_cons_npnsw_or_sw_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>  <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8554')">Proof.</div>
<div class="proofscript" id="proof8554">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1. <span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHstar</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_safe_AO_psilent_diverge_inv">drf_safe_AO_psilent_diverge_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc1</span> , <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8555')">Proof.</div>
<div class="proofscript" id="proof8555">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#AO_psilent_diverge_valid_t">AO_psilent_diverge_valid_t</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v2</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star_non_evt_star">npnsw_or_sw_star_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">apply</span> <span class="id"><a href="SimEtr.html#non_evt_star_star">non_evt_star_star</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [];<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">v3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_div">npnsw_or_sw_star_div</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_star_cons_npnsw_or_sw_star">npnsw_star_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_AO_psilent_diverge">mem_eq_AO_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">e1</span>:<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x6</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>). <span class="tactic">inversion</span> <span class="id">R1</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">e1</span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#AO_mk">AO_mk</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">e1</span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="id">Hsimpl</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="ETrace.html#star_refl">star_refl</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">s</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_AO_psilent_diverge">mem_eq_AO_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x6</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R1</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile">drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">rewrite</span> &lt;- <span class="id">H11</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_AO_psilent_diverge">mem_eq_AO_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_sound">npnsw_or_sw_stepN_sound</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#AO_psilent_diverge_cons_npnsw_or_sw_star">AO_psilent_diverge_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span>;<span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_thdpinv">npnsw_or_sw_stepN_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="no_rep">no_rep</a></span> (<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#i">i</a></span> &lt;&gt; <span class="id"><a href="RefineEquiv.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#i">i</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#j">j</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">List.nth_error</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">List.nth_error</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#j">j</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="pcvalid">pcvalid</a></span>{<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> -&gt;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="isdone">isdone</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>)(<span class="id">t</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span>' <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>') <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="notalldone">notalldone</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#list_matched">list_matched</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8556')">Proof.</div>
<div class="proofscript" id="proof8556">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id">ge</span> <span class="id">pc</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;[|<span class="id">constructor</span>]. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.  <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v1</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id">ge</span> <span class="id">pc</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H8</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc</span>' = ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'})). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#nth_error_in">Coqlib.nth_error_in</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_star_cons">npnsw_or_sw_star_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8557')">Proof.</div>
<div class="proofscript" id="proof8557">
 <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="id">eexists</span>;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span>;<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="willdone">willdone</a></span> := <span class="kwd">fun</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span> <span class="id">t</span>=&gt; (<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc1</span>, <span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>}) /\ <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="isdone_nil">isdone_nil</a></span>:  <span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> , @<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8558')">Proof.</div>
<div class="proofscript" id="proof8558">
 <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_nil">List.in_nil</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="isdone_app">isdone_app</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span> <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">t</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id">t</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8559')">Proof.</div>
<div class="proofscript" id="proof8559">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">List.in_app_iff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [];<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_npnswstep">mem_eq_npnswstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">pc1</span> (<span class="id">modwdge</span>:<span class="kwd">forall</span> <span class="id">ix</span>, <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>, <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8560')">Proof.</div>
<div class="proofscript" id="proof8560">
 <span class="tactic">destruct</span> 3 <span class="kwd">as</span> [|[]];<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span>;<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="drf_pc_glob_cons_npnsw_star">drf_pc_glob_cons_npnsw_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">ge</span> : <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">pc</span> : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>)(<span class="id">fp</span> : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">pc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>  <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>  <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8561')">Proof.</div>
<div class="proofscript" id="proof8561">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">s</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_npnswdiverge">mem_eq_npnswdiverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span> (<span class="id">modwdge</span>:<span class="kwd">forall</span> <span class="id">ix</span> ,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))(<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8562')">Proof.</div>
<div class="proofscript" id="proof8562">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v1</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>';<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mem_eq_npnswdiverge</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_or_sw_star_cons_npnsw_diverge">npnsw_or_sw_star_cons_npnsw_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">l</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>'(<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN">npnsw_or_sw_stepN</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8563')">Proof.</div>
<div class="proofscript" id="proof8563">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 4;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHnpnsw_or_sw_stepN</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHnpnsw_or_sw_stepN</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_notdone">npnswdiverge_notdone</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8564')">Proof.</div>
<div class="proofscript" id="proof8564">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">eq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">v2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">vpc1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">o1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id">pc</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>')<span class="id">lt</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H3</span>. <span class="id">Esimpl</span>. <span class="id">econstructor</span> 2. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq1</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html#not_all_ex_not">not_all_ex_not</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H4</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_step_cons_npnsw_or_sw_star">npnsw_step_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H5</span> <span class="id">x4</span> <span class="id">x5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x0</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">List.In_nth_error</a></span> <span class="kwd">in</span> <span class="id">x6</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H5</span>. <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#nth_error_in">Coqlib.nth_error_in</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">v</span>' <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">o2</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">x3</span>;<span class="tactic">auto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">o</span>. <span class="tactic">destruct</span> <span class="id">o</span> <span class="kwd">as</span> [<span class="id">o3</span> <span class="id">o4</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_thdpinv">npnsw_or_sw_stepN_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">v3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">x4</span> <span class="kwd">as</span> <span class="id">v4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_div">npnsw_or_sw_star_div</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_npnswstep">mem_eq_npnswstep</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_npnswdiverge">mem_eq_npnswdiverge</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x13</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H6</span>; <span class="tactic">destruct</span> <span class="id">H9</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">x13</span>) , <span class="id">H14</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw_star">drf_pc_glob_cons_npnsw_star</a></span> ;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile">drfsafe_npnsw_or_sw_stepN_npnswstep_fpsmile</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">eq2</span>. <span class="tactic">rewrite</span> <span class="id">eq2</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_plus">tau_star_plus</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_npnswdiverge">mem_eq_npnswdiverge</a></span> <span class="kwd">in</span> <span class="id">H19</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_cons_npnsw_diverge">npnsw_or_sw_star_cons_npnsw_diverge</a></span> <span class="kwd">in</span> <span class="id">H19</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H17</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_stepN_atomO">npnsw_or_sw_stepN_atomO</a></span> <span class="kwd">in</span> <span class="id">H18</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H11</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_step_cons_npnsw_or_sw_star">npnsw_step_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="kwd">in</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">H3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_notdone_tbc">npnswdiverge_notdone_tbc</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8565')">Proof.</div>
<div class="proofscript" id="proof8565">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">intros</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];[|<span class="id">erewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id">s</span>' <span class="id">lt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npnsw_step_cons_npnsw_or_sw_star">npnsw_step_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id">ge</span> <span class="id">s</span>' <span class="id">lt</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="kwd">in</span> *;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>,&lt;- <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_cons">tau_star_cons</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>',<span class="id">H16</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_tauplus_nonevtplus_np">npnsw_tauplus_nonevtplus_np</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8566')">Proof.</div>
<div class="proofscript" id="proof8566">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step_to_np_step">glob_npnsw_step_to_np_step</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step_to_np_step">glob_npnsw_step_to_np_step</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id">npnsw_diverge</span>'{<span class="id">ge</span>}:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mk_npnsw_diverge</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">npnsw_diverge</span>' <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">npnsw_diverge</span>' <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_cur_tid_not_done_forever">npnswdiverge_cur_tid_not_done_forever</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">npnsw_diverge</span>' <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8567')">Proof.</div>
<div class="proofscript" id="proof8567">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>'). <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_notdone">npnswdiverge_notdone</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_notdone_tbc">npnswdiverge_notdone_tbc</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="cur_not_done">cur_not_done</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8568')">Proof.</div>
<div class="proofscript" id="proof8568">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="norep_split">norep_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8569')">Proof.</div>
<div class="proofscript" id="proof8569">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">i</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span>(<span class="id">t</span>::<span class="id">l</span>)). <span class="tactic">simpl</span>. <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">j</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span>(<span class="id">t</span>::<span class="id">l</span>)). <span class="tactic">simpl</span>;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="norep_cons">norep_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8570')">Proof.</div>
<div class="proofscript" id="proof8570">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>;<span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>,<span class="id">j</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="if_will_cur_done">if_will_cur_done</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>'/\ <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\ <span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id">pc</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id">pc</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>  (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8571')">Proof.</div>
<div class="proofscript" id="proof8571">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw_star">drf_pc_glob_cons_npnsw_star</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id">ge</span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span>&lt;- <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">List.In_nth_error</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">inversion</span> <span class="id">H10</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> ;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#norep_cons">norep_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="if_will_cur_done_tbc">if_will_cur_done_tbc</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>  (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8572')">Proof.</div>
<div class="proofscript" id="proof8572">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?. <span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">econstructor</span> 2;[|<span class="id">constructor</span>]. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;[|<span class="id">constructor</span>];<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#swstar_cons_npnsw_or_sw_star">swstar_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H8</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="if_will_cur_done_tbc2">if_will_cur_done_tbc2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span> <span class="id">fp2</span> <span class="id">pc</span>' <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\ <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>)/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8573')">Proof.</div>
<div class="proofscript" id="proof8573">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#if_will_cur_done">if_will_cur_done</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#if_will_cur_done_tbc">if_will_cur_done_tbc</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="thread_nums">thread_nums</a></span> {<span class="id">ge</span>}(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>):<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.to_nat">BinPos.Pos.to_nat</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).(<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thread_nums_preserve">thread_nums_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">pc</span>' = <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8574')">Proof.</div>
<div class="proofscript" id="proof8574">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="norep_nodup">norep_nodup</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">List.NoDup</a></span> <span class="id"><a href="RefineEquiv.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8575')">Proof.</div>
<div class="proofscript" id="proof8575">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup_nth_error">List.NoDup_nth_error</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eq_dec">Nat.eq_dec</a></span> <span class="id">i</span> <span class="id">j</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">n</span>;<span class="tactic">auto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_Some">List.nth_error_Some</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_Some">List.nth_error_Some</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="maxi">maxi</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> &lt; <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8576')">Proof.</div>
<div class="proofscript" id="proof8576">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#norep_nodup">norep_nodup</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ListDom.html#incl_length_lt">incl_length_lt</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="if_will_cur_done_tbc3">if_will_cur_done_tbc3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#i">i</a></span> = <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> - <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="RefineEquiv.html#lt">lt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span> <span class="id">lt</span>' <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>/\ <span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp2">fp2</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#isdone">isdone</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id">lt</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> <span class="id">lt</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8577')">Proof.</div>
<div class="proofscript" id="proof8577">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#maxi">maxi</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">pc</span>' = <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l1">npnswstep_l1</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#thread_nums_preserve">thread_nums_preserve</a></span>.  <span class="id">econstructor</span> 2;[|<span class="id">constructor</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) \/ ~ <span class="id"><a href="RefineEquiv.html#willdone">willdone</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">lt</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#if_will_cur_done_tbc2">if_will_cur_done_tbc2</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id">lt</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">lt</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span> = <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">pc</span> - <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span> :: <span class="id">lt</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H20</span>. <span class="id">Omega.omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H20</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">x2</span> = <span class="id"><a href="RefineEquiv.html#thread_nums">thread_nums</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ConflictReorder.html#npnsw_taustar_to_taustar">npnsw_taustar_to_taustar</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#thread_nums_preserve">thread_nums_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H22</span> <span class="kwd">in</span> <span class="id">H21</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H21</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id">ge</span> <span class="id">pc</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">x</span> <span class="id">x4</span>) <span class="id">x5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#swstar_cons_npnsw_or_sw_star">swstar_cons_npnsw_or_sw_star</a></span> <span class="kwd">in</span> <span class="id">H24</span>;[|<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_star_cons_npnsw_or_sw_star">npnsw_star_cons_npnsw_or_sw_star</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H24</span> <span class="kwd">in</span> <span class="id">H23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_will_forever">npnswdiverge_will_forever</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt; <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp1</span> <span class="id">pc1</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">npnsw_diverge</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8578')">Proof.</div>
<div class="proofscript" id="proof8578">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#isdone_nil">isdone_nil</a></span> <span class="id">ge</span> <span class="id">pc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span> <span class="id">pc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>). <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#pcvalid">pcvalid</a></span>. <span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>). <span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#no_rep">no_rep</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#if_will_cur_done_tbc3">if_will_cur_done_tbc3</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_cur_tid_not_done_forever">npnswdiverge_cur_tid_not_done_forever</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_AO_psilent_diverge">npnswdiverge_AO_psilent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp1</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#npnsw_or_sw_star">npnsw_or_sw_star</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp1">fp1</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">npnsw_diverge</span>' <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span>) <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8579')">Proof.</div>
<div class="proofscript" id="proof8579">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 3;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">npnswdiverge_AO_psilent_diverge</span>;<span class="tactic">eauto</span>;[|<span class="id">econstructor</span>;<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">pc1</span>) <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons_npnsw">drf_pc_glob_cons_npnsw</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="RefineEquiv.html#Refinement.diverge_proof">diverge_proof</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AO_psilent_diverge_exists">AO_psilent_diverge_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#AO_psilent_diverge">AO_psilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8580')">Proof.</div>
<div class="proofscript" id="proof8580">
&nbsp;&nbsp;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id">ge</span> <span class="id">pc</span>'). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_will_forever">npnswdiverge_will_forever</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>. <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_AO_psilent_diverge">npnswdiverge_AO_psilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">right</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswdiverge_npdiverge">npnswdiverge_npdiverge</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#npnswdiverge">npnswdiverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> /\ <span class="id"><a href="RefineEquiv.html#npsilent_diverge">npsilent_diverge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8581')">Proof.</div>
<div class="proofscript" id="proof8581">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#AO_psilent_diverge_exists">AO_psilent_diverge_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#AO_psilent_diverge_valid_t">AO_psilent_diverge_valid_t</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">x</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_safe_AO_psilent_diverge_inv">drf_safe_AO_psilent_diverge_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step_to_np_step">glob_npnsw_step_to_np_step</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?. <br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eapply</span> <span class="id">npnswdiverge_npdiverge</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>,<span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Etr_p_np_diverge">Etr_p_np_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span> \/ <span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#Behav_diverge">Behav_diverge</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8582')">Proof.</div>
<div class="proofscript" id="proof8582">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span> \/ <span class="id">exists</span> <span class="id">t</span>, <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">pc</span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> /\ <span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">wdge</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#psilent_diverge_case">psilent_diverge_case</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [|[]];<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="RefineEquiv.html#case_coreIdiverge">case_coreIdiverge</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="id">Hsimpl</span>. <span class="id">right</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_exists">noevt_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x1</span>. <span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#noevt_stepN_0">noevt_stepN_0</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">drf1</span>:<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x0</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_npdiverge">npnswdiverge_npdiverge</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>) <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x0</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#noevt_stepN_Si_Oinv_drfsafe">noevt_stepN_Si_Oinv_drfsafe</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">x6</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_atomO">atomblockstarN_atomO</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_exists">npnsw_or_sw_stepN_exists</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [?[]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#npnsw_or_sw_stepN_thdpinv">npnsw_or_sw_stepN_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id">ge</span> <span class="id">x0</span>). <span class="tactic">destruct</span> <span class="id">H6</span>;<span class="id">Hsimpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_npnswdiverge">mem_eq_npnswdiverge</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#npnsw_or_sw_star_cons_npnsw_diverge">npnsw_or_sw_star_cons_npnsw_diverge</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">x0</span> <span class="id">x8</span> <span class="id">H11</span> <span class="id">H6</span> <span class="id">H2</span> <span class="id">H12</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_npdiverge">npnswdiverge_npdiverge</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="DRFLemmas.html#swstar_l1">swstar_l1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H3</span>,<span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">right</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#npnswdiverge_npdiverge">npnswdiverge_npdiverge</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x7</span> ({-|<span class="id">x7</span>,<span class="id">x0</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x7</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_cons_swstar">atomblockstarN_cons_swstar</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_np">atomblockstarN_np</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">auto</span>;[|<span class="id">Omega.omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id">x7</span>,<span class="id">x11</span>})({-|<span class="id">x7</span>,<span class="id">x0</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x7</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#npsw_swstar">npsw_swstar</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">x8</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) ({-|<span class="id">x7</span>,<span class="id">x0</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_np_non_evt_star">silent_diverge_cons_np_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DRFLemmas.html#swstar_l3">swstar_l3</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#swstar_globstar">swstar_globstar</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#blockdiverge_npsilent_diverge">blockdiverge_npsilent_diverge</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="limited_etr_p_cons_non_evt_star">limited_etr_p_cons_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc0</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8583')">Proof.</div>
<div class="proofscript" id="proof8583">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> (<span class="id">econstructor</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#silent_diverge_cons_glob_non_evt_star">silent_diverge_cons_glob_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_evt_step_sw">glob_evt_step_sw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">v</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8584')">Proof.</div>
<div class="proofscript" id="proof8584">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_evt_step_np">glob_evt_step_np</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">v</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8585')">Proof.</div>
<div class="proofscript" id="proof8585">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#glob_evt_step_sw">glob_evt_step_sw</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">L1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="mod_wd_ge">mod_wd_ge</a></span> (<span class="id">ge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ix</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_limited_etr_p">mem_eq_pc_limited_etr_p</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#mod_wd_ge">mod_wd_ge</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8586')">Proof.</div>
<div class="proofscript" id="proof8586">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_non_evt_star">mem_eq_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_finalstate">mem_eq_pc_finalstate</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_non_evt_star">mem_eq_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_abort">mem_eq_pc_abort</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_silent_diverge">mem_eq_pc_silent_diverge</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_non_evt_star">mem_eq_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="limited_etr_p_np_base">limited_etr_p_np_base</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>) \/ (<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> 0 <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> ) .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8587')">Proof.</div>
<div class="proofscript" id="proof8587">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_p_np_done">Etr_p_np_done</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_p_np_abort">Etr_p_np_abort</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_p_np_diverge">Etr_p_np_diverge</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="limited_etr_p_np_ind">limited_etr_p_np_ind</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span>  <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>) <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8588')">Proof.</div>
<div class="proofscript" id="proof8588">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_non_evt_star_evt_step_inv">drf_pc_non_evt_star_evt_step_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (<span class="id">t</span>'&amp;<span class="id">valid1</span>&amp;?&amp;?&amp;?&amp;<span class="id">eq</span>'&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id">eq0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_pc_limited_etr_p">mem_eq_pc_limited_etr_p</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_cons_non_evt_star">limited_etr_p_cons_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#pc_valid_tid_nonevtstar_cons_evtstep">pc_valid_tid_nonevtstar_cons_evtstep</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_star">non_evt_thrd_globstar_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [<span class="id">l</span> <span class="id">L1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">pc</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="ETrace.html#sw">sw</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">destruct</span> <span class="id">valid1</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_np_nonevt_star">non_evt_thrd_globstar_np_nonevt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#glob_evt_step_np">glob_evt_step_np</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">R2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_np_base">limited_etr_p_np_base</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">R2</span>;<span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">auto</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">solv_thread</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_non_evt_star_evt_step_inv">drf_pc_non_evt_star_evt_step_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (<span class="id">t</span>'&amp;<span class="id">valid1</span>&amp;?&amp;?&amp;?&amp;<span class="id">eq00</span>&amp;?&amp;?&amp;?&amp;?&amp;?&amp;<span class="id">eq</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_pc_limited_etr_p">mem_eq_pc_limited_etr_p</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_cons_non_evt_star">limited_etr_p_cons_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#pc_valid_tid_nonevtstar_cons_evtstep">pc_valid_tid_nonevtstar_cons_evtstep</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_star">non_evt_thrd_globstar_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [<span class="id">l</span> <span class="id">L1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id">pc</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="ETrace.html#sw">sw</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">destruct</span> <span class="id">valid1</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_np_nonevt_star">non_evt_thrd_globstar_np_nonevt_star</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#glob_evt_step_np">glob_evt_step_np</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">R2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">auto</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}    <br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="limited_etr_p_np">limited_etr_p_np</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8589')">Proof.</div>
<div class="proofscript" id="proof8589">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_np_base">limited_etr_p_np_base</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_np_ind">limited_etr_p_np_ind</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="glob_inf_etr">glob_inf_etr</a></span> {<span class="id">ge</span>}:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="ETrace.html#behav">behav</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="build_inf_etr_glob">build_inf_etr_glob</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>  <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>  <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc0</span> <span class="id">pc01</span> <span class="id">fp0</span> <span class="id">pc1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc01">pc01</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id">ge</span> <span class="id"><a href="RefineEquiv.html#pc01">pc01</a></span> <span class="id"><a href="RefineEquiv.html#fp0">fp0</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>)<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_inf_etr">mem_eq_inf_etr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">f</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#a">a</a></span> <span class="id"><a href="RefineEquiv.html#f">f</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#a">a</a></span> <span class="id"><a href="RefineEquiv.html#f">f</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8590')">Proof.</div>
<div class="proofscript" id="proof8590">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_non_evt_star">mem_eq_non_evt_star</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">mem_eq_inf_etr</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inf_etr_glob_inf_etr">inf_etr_glob_inf_etr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ab</span> <span class="id">fn</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr_alt2">inf_etr_alt2</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>) <span class="id"><a href="RefineEquiv.html#ab">ab</a></span> <span class="id"><a href="RefineEquiv.html#fn">fn</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8591')">Proof.</div>
<div class="proofscript" id="proof8591">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">modwdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_non_evt_star_evt_step_inv">drf_pc_non_evt_star_evt_step_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H10</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">x4</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">x6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">right</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#mem_eq_inf_etr">mem_eq_inf_etr</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#non_evt_star_cons">non_evt_star_cons</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#non_evt_star_cons_inf_etr_alt2">non_evt_star_cons_inf_etr_alt2</a></span>  <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">x2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">inf_etr_glob_inf_etr</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">x</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#atomblockstarN_star">atomblockstarN_star</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H16</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_cons">drf_pc_glob_cons</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">CoInductive</span> <span class="id"><a name="glob_inf_etr_2">glob_inf_etr_2</a></span> {<span class="id">ge</span>}:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id">ge</span>-&gt;<span class="id"><a href="ETrace.html#behav">behav</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="build_inf_etr_glob2">build_inf_etr_glob2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>  <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>  <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc0</span> <span class="id">fp0</span> <span class="id">pc1</span> <span class="id">v</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id">ge</span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#fp0">fp0</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>)<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_inf_etr_l1">glob_inf_etr_l1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8592')">Proof.</div>
<div class="proofscript" id="proof8592">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">glob_inf_etr_l1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_inf_etr_l2">glob_inf_etr_l2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc0</span> <span class="id">fp0</span> <span class="id">pc1</span> <span class="id">v</span> <span class="id">pc2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> <span class="id"><a href="RefineEquiv.html#fp0">fp0</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc1">pc1</a></span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span>)<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#pc2">pc2</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id"><a href="RefineEquiv.html#pc0">pc0</a></span> (<span class="id"><a href="ETrace.html#Behav_cons">Behav_cons</a></span> <span class="id"><a href="RefineEquiv.html#v">v</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8593')">Proof.</div>
<div class="proofscript" id="proof8593">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">glob_inf_etr_l2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_inf_etr_l3">glob_inf_etr_l3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#glob_inf_etr">glob_inf_etr</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8594')">Proof.</div>
<div class="proofscript" id="proof8594">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#glob_inf_etr_l2">glob_inf_etr_l2</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="non_evt_thrd_globstar_inv_preserve">non_evt_thrd_globstar_inv_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar">non_evt_thrd_globstar</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8595')">Proof.</div>
<div class="proofscript" id="proof8595">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 2;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#atomblockstarN_invpc_preservation">atomblockstarN_invpc_preservation</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_inf_etr_np">glob_inf_etr_np</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#glob_inf_etr_2">glob_inf_etr_2</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#inf_etr">inf_etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>' <span class="id"><a href="RefineEquiv.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8596')">Proof.</div>
<div class="proofscript" id="proof8596">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>;<span class="tactic">inversion</span> 5;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_inv_preserve">non_evt_thrd_globstar_inv_preserve</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id">ge</span> <span class="id">pc2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>. <span class="tactic">split</span>;[<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>|<span class="tactic">intro</span>];<span class="tactic">eauto</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#non_evt_thrd_globstar_np_nonevt_star">non_evt_thrd_globstar_np_nonevt_star</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc2</span> (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id">v</span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc0</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">glob_inf_etr_np</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H12</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="config_refine_alt">config_refine_alt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> <span class="id"><a href="RefineEquiv.html#tge">tge</a></span> <span class="id"><a href="RefineEquiv.html#sge">sge</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> ({-|<span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#spc">spc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8597')">Proof.</div>
<div class="proofscript" id="proof8597">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_cons_globsw">Etr_cons_globsw</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span>,<span class="id">H1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_pair_config_refine">init_pair_config_refine</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">sc</span> <span class="id">tc</span> <span class="id">e</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">i</span> <span class="id">i</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> (<span class="id"><a href="RefineEquiv.html#sc">sc</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#sgm">sgm</a></span> <span class="id"><a href="RefineEquiv.html#sge">sge</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> (<span class="id"><a href="RefineEquiv.html#tc">tc</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#tgm">tgm</a></span> <span class="id"><a href="RefineEquiv.html#tge">tge</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id">i</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> ({-|<span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span>,<span class="id"><a href="RefineEquiv.html#i">i</a></span>}) <span class="id"><a href="RefineEquiv.html#spc">spc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8598')">Proof.</div>
<div class="proofscript" id="proof8598">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Init.html#init_property_1_alt">init_property_1_alt</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">i</span>'=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span>). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tpc</span> = ({-|<span class="id">tpc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span>})). <span class="tactic">destruct</span> <span class="id">tpc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#config_refine_alt">config_refine_alt</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_p_config_refine_weak_proof">np_p_config_refine_weak_proof</a></span>{<span class="id">NL</span> <span class="id">L</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> (<span class="id">H</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">gm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">ge</span> : <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>) (<span class="id">pc</span> : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span> <span class="id"><a href="RefineEquiv.html#gm">gm</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">B</span> : <span class="id"><a href="ETrace.html#behav">behav</a></span>) (<span class="id">HSafe</span>:<span class="id"><a href="ETrace.html#safe_state">safe_state</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>)(<span class="id">Hdrf</span>:<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span> : <span class="id"><a href="GlobDefs.html#tid">tid</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>, <span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8599')">Proof.</div>
<div class="proofscript" id="proof8599">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">H</span> <span class="id">wdl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">B</span>) \/ (~ <span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="RefineEquiv.html#limited_etr">limited_etr</a></span> <span class="id"><a href="RefineEquiv.html#i">i</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_p_np">limited_etr_p_np</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_npetr">limited_etr_npetr</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>);<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Init.html#init_property_1_alt">init_property_1_alt</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#limited_etr_npetr">limited_etr_npetr</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob">drf_pc_glob</a></span>. <span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#drf_pc">drf_pc</a></span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#drf_pc_glob_l1">drf_pc_glob_l1</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="RefineEquiv.html#drf_pc_glob_l2">drf_pc_glob_l2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="RefineEquiv.html#inf_etr_alt">inf_etr_alt</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt_sound">inf_etr_alt_sound</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_alt2_p">inf_etr_alt2_p</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_glob_inf_etr">inf_etr_glob_inf_etr</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#glob_inf_etr_l3">glob_inf_etr_l3</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#glob_inf_etr_np">glob_inf_etr_np</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="RefineEquiv.html#inf_etr_etr">inf_etr_etr</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Init.html#init_property_1_alt">init_property_1_alt</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>.   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_p_refine_weak">np_p_refine_weak</a></span> {<span class="id">NL</span>}{<span class="id">L</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#safe_prog">safe_prog</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#drf">drf</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_p_prog_refine_weak">np_p_prog_refine_weak</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8600')">Proof.</div>
<div class="proofscript" id="proof8600">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_p_prog_refine_weak">np_p_prog_refine_weak</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_p_config_refine_weak">np_p_config_refine_weak</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_p_config_refine_weak_proof">np_p_config_refine_weak_proof</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#drf_drfpc">drf_drfpc</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="DRF_NP_Refine_Config_Proof">DRF_NP_Refine_Config_Proof</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">mu</span> <span class="id">su</span> <span class="id">tu</span> <span class="id">e</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">st</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">tt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#su">su</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#tu">tu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span> : <span class="id"><a href="GlobDefs.html#tid">tid</a></span>, <span class="id"><a href="DRFLemmas.html#pc_valid_tid">DRFLemmas.pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> -&gt; <span class="id"><a href="NPSemantics.html#np_safe_config">np_safe_config</a></span> ({-|<span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span>, <span class="id"><a href="RefineEquiv.html#t">t</a></span>})) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#InitRel">InitRel</a></span> <span class="id"><a href="RefineEquiv.html#mu">mu</a></span> <span class="id"><a href="RefineEquiv.html#sge">sge</a></span> <span class="id"><a href="RefineEquiv.html#tge">tge</a></span> <span class="id"><a href="RefineEquiv.html#sgm">sgm</a></span> <span class="id"><a href="RefineEquiv.html#tgm">tgm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> (<span class="id"><a href="RefineEquiv.html#su">su</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#sgm">sgm</a></span> <span class="id"><a href="RefineEquiv.html#sge">sge</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span> <span class="id"><a href="RefineEquiv.html#st">st</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> (<span class="id"><a href="RefineEquiv.html#tu">tu</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>) <span class="id"><a href="RefineEquiv.html#tgm">tgm</a></span> <span class="id"><a href="RefineEquiv.html#tge">tge</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#tt">tt</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#drf">drf</a></span> (<span class="id"><a href="RefineEquiv.html#su">su</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_prog_refine">np_prog_refine</a></span> (<span class="id"><a href="RefineEquiv.html#su">su</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)(<span class="id"><a href="RefineEquiv.html#tu">tu</a></span>,<span class="id"><a href="RefineEquiv.html#e">e</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> <span class="id"><a href="RefineEquiv.html#tpc">tpc</a></span> <span class="id"><a href="RefineEquiv.html#spc">spc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8601')">Proof.</div>
<div class="proofscript" id="proof8601">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H7</span>. <span class="tactic">unfold</span> <span class="id"><a href="NPSemantics.html#np_config_refine">np_config_refine</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tt</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">tpc</span>). <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">st</span> =<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">spc</span>). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Init.html#init_property_1_alt">init_property_1_alt</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_p_config_refine_weak_proof">np_p_config_refine_weak_proof</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Refinement.init_free">init_free</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#init_pair_valid_tid">init_pair_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Refinement.init_free">init_free</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Etr_np_p">Etr_np_p</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=<span class="id">spc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#switchable_glob_config_refine">switchable_glob_config_refine</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_accepted">np_accepted</a></span>. <span class="id">Esimpl</span>;[|<span class="id">constructor</span>]. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DRFLemmas.html#NPSafe_Safe_Config">NPSafe_Safe_Config</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H11</span> <span class="kwd">as</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#Refinement.init_free">init_free</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>. <span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#npdrfpc">npdrfpc</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRFLemmas.html#drfpc">drfpc</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">contradict</span> <span class="id">H6</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">tpc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">tpc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span>,<span class="id">T</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> ({-|<span class="id">tpc</span>,<span class="id">t</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#NPRace_Race_Config">NPRace_Race_Config</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H11</span>;<span class="tactic">eauto</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> *;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">np_p_equiv</span></span> defines the equivalence of preemptive-semantics and non-preemptive smeantics.
      - <span class="bracket"><span class="id">Etr</span></span> is the event trace of the configuration <span class="bracket"><span class="id">pc</span></span>, where <span class="bracket"><span class="id">B</span></span> means the behavior of the configuration,
      - the configuration in non-preemptive should be able to start in any valid thread, otherwise it may not have the same behavior as in preemptive semantics.
 </div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="np_p_equiv">np_p_equiv</a></span> {<span class="id">NL</span>}{<span class="id">L</span>} (<span class="id">p</span>: <span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#p">p</a></span> <span class="id"><a href="RefineEquiv.html#m">m</a></span> <span class="id"><a href="RefineEquiv.html#ge">ge</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#B">B</a></span> &lt;-&gt; <span class="id">exists</span> <span class="id">t</span>, <span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="NPSemantics.html#np_abort">np_abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> ({-|<span class="id"><a href="RefineEquiv.html#pc">pc</a></span>,<span class="id"><a href="RefineEquiv.html#t">t</a></span>}) <span class="id"><a href="RefineEquiv.html#B">B</a></span> /\ <span class="id"><a href="RefineEquiv.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="RefineEquiv.html#pc">pc</a></span> <span class="id"><a href="RefineEquiv.html#t">t</a></span>.<br/>
<div class="doc">Semantics Equivalence(Lemma 7):
 If the program is safe and data-race-free, and the languages of the program are well-defined, then we have the equivalence of P and NP. </div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NP_P_Equiv">NP_P_Equiv</a></span>{<span class="id">NL</span>}{<span class="id">L</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#safe_prog">safe_prog</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#drf">drf</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="RefineEquiv.html#np_p_equiv">np_p_equiv</a></span> <span class="id"><a href="RefineEquiv.html#NL">NL</a></span> <span class="id"><a href="RefineEquiv.html#L">L</a></span> <span class="id"><a href="RefineEquiv.html#P">P</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8602')">Proof.</div>
<div class="proofscript" id="proof8602">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="RefineEquiv.html#np_p_equiv">np_p_equiv</a></span>. <span class="tactic">split</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#np_p_refine_weak">np_p_refine_weak</a></span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#p_np_refine">p_np_refine</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="RefineEquiv.html#switchable_glob_config_refine">switchable_glob_config_refine</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pc_cur_tid">pc_cur_tid</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="RefineEquiv.html#Refinement">Refinement</a></span>.<br/>
<br/>
<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
