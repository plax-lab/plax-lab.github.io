<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Cstrategy</title>
<meta name="description" content="Documentation of Coq module Cstrategy" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Cstrategy</h1>
<div class="coq">
<br/>
<div class="doc">A deterministic evaluation strategy for C. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Axioms</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Coqlib</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Errors</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Maps</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Integers</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Floats</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Values</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">AST</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Memory</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Events</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Globalenvs</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Smallstep</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Ctypes</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Cop</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Csyntax</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Csem</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">STRATEGY</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">ge</span>: <span class="id">genv</span>.<br/>
<br/>
<h1> Definition of the strategy </h1>
<br/>
<div class="doc">We now formalize a particular strategy for reducing expressions which
  is the one implemented by the CompCert compiler.  It evaluates effectful
  subexpressions first, in leftmost-innermost order, then finishes
  with the evaluation of the remaining simple expression. </div>
<br/>
<div class="doc">Simple expressions are defined as follows. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">simple</span> (<span class="id">a</span>: <span class="id">expr</span>) : <span class="id">bool</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Evar</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Ederef</span> <span class="id">r</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r</span><br/>
&nbsp;&nbsp;| <span class="id">Efield</span> <span class="id">r</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r</span><br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Evalof</span> <span class="id">l</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l</span> &amp;&amp; <span class="id">negb</span>(<span class="id">type_is_volatile</span> (<span class="id">typeof</span> <span class="id">l</span>))<br/>
&nbsp;&nbsp;| <span class="id">Eaddrof</span> <span class="id">l</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l</span><br/>
&nbsp;&nbsp;| <span class="id">Eunop</span> <span class="id">_</span> <span class="id">r1</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span><br/>
&nbsp;&nbsp;| <span class="id">Ebinop</span> <span class="id">_</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> &amp;&amp; <span class="id">simple</span> <span class="id">r2</span><br/>
&nbsp;&nbsp;| <span class="id">Ecast</span> <span class="id">r1</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqand</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqor</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Econdition</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Esizeof</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Ealignof</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eassign</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Eassignop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Epostincr</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Ecomma</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Ecall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Ebuiltin</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;| <span class="id">Eparen</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">simplelist</span> (<span class="id">rl</span>: <span class="id">exprlist</span>) : <span class="id">bool</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">rl</span> <span class="kwd">with</span> <span class="id">Enil</span> =&gt; <span class="id">true</span> | <span class="id">Econs</span> <span class="id">r</span> <span class="id">rl</span>' =&gt; <span class="id">simple</span> <span class="id">r</span> &amp;&amp; <span class="id">simplelist</span> <span class="id">rl</span>' <span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Simple expressions have interesting properties: their evaluations always
  terminate, are deterministic, and preserve the memory state.
  We seize this opportunity to define a big-step semantics for simple
  expressions. </div>
<br/>
<span class="kwd">Section</span> <span class="id">SIMPLE_EXPRS</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">e</span>: <span class="id">env</span>.<br/>
<span class="kwd">Variable</span> <span class="id">m</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">eval_simple_lvalue</span>: <span class="id">expr</span> -&gt; <span class="id">block</span> -&gt; <span class="id">ptrofs</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">esl_loc</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty</span>) <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;| <span class="id">esl_var_local</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>!<span class="id">x</span> = <span class="id">Some</span>(<span class="id">b</span>, <span class="id">ty</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Evar</span> <span class="id">x</span> <span class="id">ty</span>) <span class="id">b</span> <span class="id">Ptrofs.zero</span><br/>
&nbsp;&nbsp;| <span class="id">esl_var_global</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>!<span class="id">x</span> = <span class="id">None</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_symbol</span> <span class="id">ge</span> <span class="id">x</span> = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Evar</span> <span class="id">x</span> <span class="id">ty</span>) <span class="id">b</span> <span class="id">Ptrofs.zero</span><br/>
&nbsp;&nbsp;| <span class="id">esl_deref</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">ty</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r</span> (<span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Ederef</span> <span class="id">r</span> <span class="id">ty</span>) <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;| <span class="id">esl_field_struct</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">f</span> <span class="id">ty</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">id</span> <span class="id">co</span> <span class="id">a</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r</span> (<span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">r</span> = <span class="id">Tstruct</span> <span class="id">id</span> <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ge</span>.(<span class="id">genv_cenv</span>)!<span class="id">id</span> = <span class="id">Some</span> <span class="id">co</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">field_offset</span> <span class="id">ge</span> <span class="id">f</span> (<span class="id">co_members</span> <span class="id">co</span>) = <span class="id">OK</span> <span class="id">delta</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Efield</span> <span class="id">r</span> <span class="id">f</span> <span class="id">ty</span>) <span class="id">b</span> (<span class="id">Ptrofs.add</span> <span class="id">ofs</span> (<span class="id">Ptrofs.repr</span> <span class="id">delta</span>))<br/>
&nbsp;&nbsp;| <span class="id">esl_field_union</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">f</span> <span class="id">ty</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">id</span> <span class="id">co</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r</span> (<span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">r</span> = <span class="id">Tunion</span> <span class="id">id</span> <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ge</span>.(<span class="id">genv_cenv</span>)!<span class="id">id</span> = <span class="id">Some</span> <span class="id">co</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> (<span class="id">Efield</span> <span class="id">r</span> <span class="id">f</span> <span class="id">ty</span>) <span class="id">b</span> <span class="id">ofs</span><br/>
<br/>
<span class="kwd">with</span> <span class="id">eval_simple_rvalue</span>: <span class="id">expr</span> -&gt; <span class="id">val</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">esr_val</span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">esr_rvalof</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt; <span class="id">type_is_volatile</span> <span class="id">ty</span> = <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">E0</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Evalof</span> <span class="id">l</span> <span class="id">ty</span>) <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">esr_addrof</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">l</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Eaddrof</span> <span class="id">l</span> <span class="id">ty</span>) (<span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id">esr_unop</span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">r1</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_unary_operation</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Eunop</span> <span class="id">op</span> <span class="id">r1</span> <span class="id">ty</span>) <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">esr_binop</span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r1</span> <span class="id">v1</span> -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">r2</span> <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r2</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>) <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">esr_cast</span>: <span class="kwd">forall</span> <span class="id">ty</span> <span class="id">r1</span> <span class="id">v1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Ecast</span> <span class="id">r1</span> <span class="id">ty</span>) <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">esr_sizeof</span>: <span class="kwd">forall</span> <span class="id">ty1</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Esizeof</span> <span class="id">ty1</span> <span class="id">ty</span>) (<span class="id">Vptrofs</span> (<span class="id">Ptrofs.repr</span> (<span class="id">sizeof</span> <span class="id">ge</span> <span class="id">ty1</span>)))<br/>
&nbsp;&nbsp;| <span class="id">esr_alignof</span>: <span class="kwd">forall</span> <span class="id">ty1</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> (<span class="id">Ealignof</span> <span class="id">ty1</span> <span class="id">ty</span>) (<span class="id">Vptrofs</span> (<span class="id">Ptrofs.repr</span> (<span class="id">alignof</span> <span class="id">ge</span> <span class="id">ty1</span>))).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">eval_simple_list</span>: <span class="id">exprlist</span> -&gt; <span class="id">typelist</span> -&gt; <span class="id">list</span> <span class="id">val</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">esrl_nil</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">Enil</span> <span class="id">Tnil</span> <span class="id">nil</span><br/>
&nbsp;&nbsp;| <span class="id">esrl_cons</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">rl</span> <span class="id">ty</span> <span class="id">tyl</span> <span class="id">v</span> <span class="id">vl</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">r</span> <span class="id">v</span>' -&gt; <span class="id">sem_cast</span> <span class="id">v</span>' (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">rl</span> <span class="id">tyl</span> <span class="id">vl</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> (<span class="id">Econs</span> <span class="id">r</span> <span class="id">rl</span>) (<span class="id">Tcons</span> <span class="id">ty</span> <span class="id">tyl</span>) (<span class="id">v</span> :: <span class="id">vl</span>).<br/>
<br/>
<span class="kwd">Scheme</span> <span class="id">eval_simple_rvalue_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_simple_rvalue</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">eval_simple_lvalue_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_simple_lvalue</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">eval_simple_rvalue_lvalue_ind</span> <span class="id">from</span> <span class="id">eval_simple_rvalue_ind2</span>, <span class="id">eval_simple_lvalue_ind2</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">SIMPLE_EXPRS</span>.<br/>
<br/>
<div class="doc">Left reduction contexts. These contexts allow reducing to the right
  of a binary operator only if the left subexpression is simple. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">leftcontext</span>: <span class="id">kind</span> -&gt; <span class="id">kind</span> -&gt; (<span class="id">expr</span> -&gt; <span class="id">expr</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">lctx_top</span>: <span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">k</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_deref</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ederef</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_field</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">f</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Efield</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">f</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_rvalof</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Evalof</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_addrof</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eaddrof</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_unop</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eunop</span> <span class="id">op</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_binop_left</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">op</span> <span class="id">e2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebinop</span> <span class="id">op</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_binop_right</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">e1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebinop</span> <span class="id">op</span> <span class="id">e1</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_cast</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecast</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_seqand</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">r2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eseqand</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">r2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_seqor</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">r2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eseqor</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">r2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_condition</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econdition</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_assign_left</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">e2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassign</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_assign_right</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">e1</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">e1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassign</span> <span class="id">e1</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_assignop_left</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">op</span> <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassignop</span> <span class="id">op</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_assignop_right</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">tyres</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">e1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassignop</span> <span class="id">op</span> <span class="id">e1</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">tyres</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_postincr</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">id</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">LV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Epostincr</span> <span class="id">id</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_call_left</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">el</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecall</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">el</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_call_right</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">e1</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">e1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontextlist</span> <span class="id">k</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecall</span> <span class="id">e1</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_builtin</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontextlist</span> <span class="id">k</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_comma</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">e2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecomma</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_paren</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">tycast</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eparen</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">tycast</span> <span class="id">ty</span>)<br/>
<br/>
<span class="kwd">with</span> <span class="id">leftcontextlist</span>: <span class="id">kind</span> -&gt; (<span class="id">expr</span> -&gt; <span class="id">exprlist</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">lctx_list_head</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">el</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">leftcontextlist</span> <span class="id">k</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econs</span> (<span class="id">C</span> <span class="id">x</span>) <span class="id">el</span>)<br/>
&nbsp;&nbsp;| <span class="id">lctx_list_tail</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">e1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">e1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontextlist</span> <span class="id">k</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontextlist</span> <span class="id">k</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econs</span> <span class="id">e1</span> (<span class="id">C</span> <span class="id">x</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">leftcontext_context</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C</span>, <span class="id">leftcontext</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C</span> -&gt; <span class="id">context</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C</span><br/>
<span class="kwd">with</span> <span class="id">leftcontextlist_contextlist</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span>, <span class="id">leftcontextlist</span> <span class="id">k</span> <span class="id">C</span> -&gt; <span class="id">contextlist</span> <span class="id">k</span> <span class="id">C</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4136')">Proof.</div>
<div class="proofscript" id="proof4136">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">leftcontext_context</span>.<br/>
<br/>
<div class="doc">Strategy for reducing expressions. We reduce the leftmost innermost
  non-simple subexpression, evaluating its arguments (which are necessarily
  simple expressions) with the big-step semantics.
  If there are none, the whole expression is simple and is evaluated in
  one big step. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">estep</span>: <span class="id">state</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">state</span> -&gt; <span class="kwd">Prop</span> :=<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_expr</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">r</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">r</span> <span class="kwd">with</span> <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">False</span> | <span class="id">_</span> =&gt; <span class="id">True</span> <span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">r</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_rvalof_volatile</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt; <span class="id">type_is_volatile</span> <span class="id">ty</span> = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Evalof</span> <span class="id">l</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_seqand_true</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eseqand</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">r2</span> <span class="id">type_bool</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">step_seqand_false</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eseqand</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> (<span class="id">Vint</span> <span class="id">Int.zero</span>) <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_seqor_true</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eseqor</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> (<span class="id">Vint</span> <span class="id">Int.one</span>) <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">step_seqor_false</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eseqor</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">r2</span> <span class="id">type_bool</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_condition</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r1</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Econdition</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eparen</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">r2</span> <span class="kwd">else</span> <span class="id">r3</span>) <span class="id">ty</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_assign</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">l</span> <span class="id">r</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">v</span>' <span class="id">t</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r</span>) (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>' <span class="id">t</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eassign</span> <span class="id">l</span> <span class="id">r</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span>' <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>')<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_assignop</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span> <span class="id">v4</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">m</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">v3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v3</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> = <span class="id">Some</span> <span class="id">v4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span> <span class="id">t2</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> = <span class="id">t1</span> ** <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v4</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>')<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_assignop_stuck</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">v3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">sem_cast</span> <span class="id">v3</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">v4</span> =&gt; <span class="kwd">forall</span> <span class="id">t2</span> <span class="id">m</span>', ~(<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span> <span class="id">t2</span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">Stuckstate</span><br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_postincr</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">m</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">incrdecr_type</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v3</span> <span class="id">t2</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> = <span class="id">t1</span> ** <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>')<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_postincr_stuck</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> <span class="id">ty</span> <span class="id">m</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">v2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">incrdecr_type</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">m</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">v3</span> =&gt; <span class="kwd">forall</span> <span class="id">t2</span> <span class="id">m</span>', ~(<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v3</span> <span class="id">t2</span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">Stuckstate</span><br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_comma</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">r2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecomma</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">r2</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_paren</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">r</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">tycast</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">r</span> <span class="id">tycast</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_call</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> <span class="id">vf</span> <span class="id">vargs</span> <span class="id">fd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">classify_fun</span> (<span class="id">typeof</span> <span class="id">rf</span>) = <span class="id">fun_case_f</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rf</span> <span class="id">vf</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">targs</span> <span class="id">vargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_funct</span> <span class="id">ge</span> <span class="id">vf</span> = <span class="id">Some</span> <span class="id">fd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_of_fundef</span> <span class="id">fd</span> = <span class="id">Tfunction</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">Callstate</span> <span class="id">fd</span> <span class="id">vargs</span> (<span class="id">Kcall</span> <span class="id">f</span> <span class="id">e</span> <span class="id">C</span> <span class="id">ty</span> <span class="id">k</span>) <span class="id">m</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id">step_builtin</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rargs</span> <span class="id">ty</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">vargs</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">tyargs</span> <span class="id">vargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">external_call</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rargs</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">vres</span> <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>').<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">step</span> (<span class="id">S</span>: <span class="id">state</span>) (<span class="id">t</span>: <span class="id">trace</span>) (<span class="id">S</span>': <span class="id">state</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">estep</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>' \/ <span class="id">sstep</span> <span class="id">ge</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>'.<br/>
<br/>
<div class="doc">Properties of contexts </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">context_compose</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k2</span> <span class="id">k3</span> <span class="id">C2</span>, <span class="id">context</span> <span class="id">k2</span> <span class="id">k3</span> <span class="id">C2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k1</span> <span class="id">C1</span>, <span class="id">context</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">k1</span> <span class="id">k3</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C2</span>(<span class="id">C1</span> <span class="id">x</span>))<br/>
<span class="kwd">with</span> <span class="id">contextlist_compose</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k2</span> <span class="id">C2</span>, <span class="id">contextlist</span> <span class="id">k2</span> <span class="id">C2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k1</span> <span class="id">C1</span>, <span class="id">context</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">contextlist</span> <span class="id">k1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C2</span>(<span class="id">C1</span> <span class="id">x</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4137')">Proof.</div>
<div class="proofscript" id="proof4137">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">try</span> (<span class="id">constructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C1</span> <span class="id">x</span>) <span class="kwd">with</span> <span class="id">C1</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id">context</span> <span class="id">contextlist</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">context_compose</span> <span class="id">contextlist_compose</span>.<br/>
<br/>
<h1> Safe executions. </h1>
<br/>
<div class="doc">A state is safe according to the nondeterministic semantics
  if it cannot get stuck by doing silent transitions only. </div>
<br/>
<span class="kwd">Definition</span> <span class="id">safe</span> (<span class="id">s</span>: <span class="id">Csem.state</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>', <span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s</span> <span class="id">E0</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">r</span>, <span class="id">final_state</span> <span class="id">s</span>' <span class="id">r</span>) \/ (<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s</span>'', <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s</span>' <span class="id">t</span> <span class="id">s</span>'').<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">safe_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;<span class="id">safe</span> <span class="id">s</span> -&gt; <span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s</span> <span class="id">E0</span> <span class="id">s</span>' -&gt; <span class="id">safe</span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4138')">Proof.</div>
<div class="proofscript" id="proof4138">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">star_safe</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> <span class="id">s1</span> -&gt; <span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">E0</span> <span class="id">s2</span> -&gt; (<span class="id">safe</span> <span class="id">s2</span> -&gt; <span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s3</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s3</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4139')">Proof.</div>
<div class="proofscript" id="proof4139">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id">safe_steps</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">plus_safe</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> <span class="id">s1</span> -&gt; <span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">E0</span> <span class="id">s2</span> -&gt; (<span class="id">safe</span> <span class="id">s2</span> -&gt; <span class="id">plus</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s3</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">plus</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s3</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4140')">Proof.</div>
<div class="proofscript" id="proof4140">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">star_plus_trans</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id">safe_steps</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Classical</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">safe_imm_safe</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">C</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">K</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">imm_safe</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">K</span> <span class="id">a</span> <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4141')">Proof.</div>
<div class="proofscript" id="proof4141">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">imm_safe</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">K</span> <span class="id">a</span> <span class="id">m</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">Stuckstate</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">r</span> <span class="id">F</span>]. <span class="id">inv</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">t</span> [<span class="id">s</span>' <span class="id">S</span>]]. <span class="id">inv</span> <span class="id">S</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Safe expressions are well-formed with respect to l-values and r-values. </div>
<br/>
<span class="kwd">Definition</span> <span class="id">expr_kind</span> (<span class="id">a</span>: <span class="id">expr</span>) : <span class="id">kind</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">LV</span><br/>
&nbsp;&nbsp;| <span class="id">Evar</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">LV</span><br/>
&nbsp;&nbsp;| <span class="id">Ederef</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">LV</span><br/>
&nbsp;&nbsp;| <span class="id">Efield</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">LV</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">RV</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lred_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">a</span> <span class="id">m</span> <span class="id">a</span>' <span class="id">m</span>', <span class="id">lred</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">a</span> <span class="id">m</span> <span class="id">a</span>' <span class="id">m</span>' -&gt; <span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">LV</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4142')">Proof.</div>
<div class="proofscript" id="proof4142">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">rred_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">m</span> <span class="id">t</span> <span class="id">a</span>' <span class="id">m</span>', <span class="id">rred</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">m</span> <span class="id">t</span> <span class="id">a</span>' <span class="id">m</span>' -&gt; <span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">RV</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4143')">Proof.</div>
<div class="proofscript" id="proof4143">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">callred_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">ty</span>, <span class="id">callred</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">ty</span> -&gt; <span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">RV</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4144')">Proof.</div>
<div class="proofscript" id="proof4144">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">context_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span> -&gt; <span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">from</span> -&gt; <span class="id">expr_kind</span> (<span class="id">C</span> <span class="id">a</span>) = <span class="id">to</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4145')">Proof.</div>
<div class="proofscript" id="proof4145">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">imm_safe_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">k</span> <span class="id">a</span> <span class="id">m</span>, <span class="id">imm_safe</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">k</span> <span class="id">a</span> <span class="id">m</span> -&gt; <span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">k</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4146')">Proof.</div>
<div class="proofscript" id="proof4146">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">context_kind</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">lred_kind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">context_kind</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">rred_kind</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">context_kind</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">callred_kind</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">safe_expr_kind</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">from</span> <span class="id">C</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">from</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">expr_kind</span> <span class="id">a</span> = <span class="id">from</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4147')">Proof.</div>
<div class="proofscript" id="proof4147">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">imm_safe_kind</span>. <span class="tactic">eapply</span> <span class="id">safe_imm_safe</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Painful inversion lemmas on particular states that are safe. </div>
<br/>
<span class="kwd">Section</span> <span class="id">INVERSION_LEMMAS</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">e</span>: <span class="id">env</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">exprlist_all_values</span> (<span class="id">rl</span>: <span class="id">exprlist</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">rl</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Enil</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;| <span class="id">Econs</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">rl</span>' =&gt; <span class="id">exprlist_all_values</span> <span class="id">rl</span>'<br/>
&nbsp;&nbsp;| <span class="id">Econs</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">invert_expr_prop</span> (<span class="id">a</span>: <span class="id">expr</span>) (<span class="id">m</span>: <span class="id">mem</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;| <span class="id">Evar</span> <span class="id">x</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>!<span class="id">x</span> = <span class="id">Some</span>(<span class="id">b</span>, <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id">e</span>!<span class="id">x</span> = <span class="id">None</span> /\ <span class="id">Genv.find_symbol</span> <span class="id">ge</span> <span class="id">x</span> = <span class="id">Some</span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;| <span class="id">Ederef</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty1</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">exists</span> <span class="id">ofs</span>, <span class="id">v</span> = <span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;| <span class="id">Efield</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty1</span>) <span class="id">f</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">exists</span> <span class="id">ofs</span>, <span class="id">v</span> = <span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ty1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Tstruct</span> <span class="id">id</span> <span class="id">_</span> =&gt; <span class="id">exists</span> <span class="id">co</span> <span class="id">delta</span>, <span class="id">ge</span>.(<span class="id">genv_cenv</span>)!<span class="id">id</span> = <span class="id">Some</span> <span class="id">co</span> /\ <span class="id">field_offset</span> <span class="id">ge</span> <span class="id">f</span> (<span class="id">co_members</span> <span class="id">co</span>) = <span class="id">Errors.OK</span> <span class="id">delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Tunion</span> <span class="id">id</span> <span class="id">_</span> =&gt; <span class="id">exists</span> <span class="id">co</span>, <span class="id">ge</span>.(<span class="id">genv_cenv</span>)!<span class="id">id</span> = <span class="id">Some</span> <span class="id">co</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;| <span class="id">Evalof</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty</span>') <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span>' = <span class="id">ty</span> /\ <span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">v</span>, <span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">Eunop</span> <span class="id">op</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">sem_unary_operation</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">Ebinop</span> <span class="id">op</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) (<span class="kwd">Eval</span> <span class="id">v2</span> <span class="id">ty2</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">v2</span> <span class="id">ty2</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">Ecast</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">sem_cast</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqand</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">bool_val</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">b</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqor</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">bool_val</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">b</span><br/>
&nbsp;&nbsp;| <span class="id">Econdition</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">bool_val</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">b</span><br/>
&nbsp;&nbsp;| <span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty1</span>) (<span class="kwd">Eval</span> <span class="id">v2</span> <span class="id">ty2</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">exists</span> <span class="id">m</span>', <span class="id">exists</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">ty1</span> /\ <span class="id">sem_cast</span> <span class="id">v2</span> <span class="id">ty2</span> <span class="id">ty1</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span> /\ <span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty1</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;| <span class="id">Eassignop</span> <span class="id">op</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty1</span>) (<span class="kwd">Eval</span> <span class="id">v2</span> <span class="id">ty2</span>) <span class="id">tyres</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">ty1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty1</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v1</span><br/>
&nbsp;&nbsp;| <span class="id">Epostincr</span> <span class="id">id</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ty1</span>) <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">ty1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v1</span><br/>
&nbsp;&nbsp;| <span class="id">Ecomma</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty1</span>) <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">r2</span> = <span class="id">ty</span><br/>
&nbsp;&nbsp;| <span class="id">Eparen</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty1</span>) <span class="id">ty2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">sem_cast</span> <span class="id">v1</span> <span class="id">ty1</span> <span class="id">ty2</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">Ecall</span> (<span class="kwd">Eval</span> <span class="id">vf</span> <span class="id">tyf</span>) <span class="id">rargs</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exprlist_all_values</span> <span class="id">rargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tyargs</span> <span class="id">tyres</span> <span class="id">cconv</span> <span class="id">fd</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">classify_fun</span> <span class="id">tyf</span> = <span class="id">fun_case_f</span> <span class="id">tyargs</span> <span class="id">tyres</span> <span class="id">cconv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">Genv.find_funct</span> <span class="id">ge</span> <span class="id">vf</span> = <span class="id">Some</span> <span class="id">fd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">cast_arguments</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">tyargs</span> <span class="id">vl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">type_of_fundef</span> <span class="id">fd</span> = <span class="id">Tfunction</span> <span class="id">tyargs</span> <span class="id">tyres</span> <span class="id">cconv</span><br/>
&nbsp;&nbsp;| <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rargs</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exprlist_all_values</span> <span class="id">rargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vargs</span>, <span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">vres</span>, <span class="id">exists</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cast_arguments</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">tyargs</span> <span class="id">vargs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">external_call</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lred_invert</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">l</span>' <span class="id">m</span>', <span class="id">lred</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">l</span> <span class="id">m</span> <span class="id">l</span>' <span class="id">m</span>' -&gt; <span class="id">invert_expr_prop</span> <span class="id">l</span> <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4148')">Proof.</div>
<div class="proofscript" id="proof4148">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">co</span>, <span class="id">delta</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">co</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">rred_invert</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">m</span> <span class="id">t</span> <span class="id">r</span>' <span class="id">m</span>', <span class="id">rred</span> <span class="id">ge</span> <span class="id">r</span> <span class="id">m</span> <span class="id">t</span> <span class="id">r</span>' <span class="id">m</span>' -&gt; <span class="id">invert_expr_prop</span> <span class="id">r</span> <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4149')">Proof.</div>
<div class="proofscript" id="proof4149">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="id">exists</span> <span class="id">t</span>; <span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">true</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">false</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">true</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">false</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="id">exists</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>; <span class="id">exists</span> <span class="id">v1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>; <span class="id">exists</span> <span class="id">v1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">vargs</span>; <span class="id">exists</span> <span class="id">t</span>; <span class="id">exists</span> <span class="id">vres</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">callred_invert</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">ty</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">callred</span> <span class="id">ge</span> <span class="id">r</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">ty</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">invert_expr_prop</span> <span class="id">r</span> <span class="id">m</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4150')">Proof.</div>
<div class="proofscript" id="proof4150">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">tyargs</span>, <span class="id">tyres</span>, <span class="id">cconv</span>, <span class="id">fd</span>, <span class="id">args</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Scheme</span> <span class="id">context_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">context</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">contextlist_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">contextlist</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">context_contextlist_ind</span> <span class="id">from</span> <span class="id">context_ind2</span>, <span class="id">contextlist_ind2</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">invert_expr_context</span>:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">invert_expr_prop</span> <span class="id">a</span> <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">invert_expr_prop</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">m</span>)<br/>
/\(<span class="kwd">forall</span> <span class="id">from</span> <span class="id">C</span>, <span class="id">contextlist</span> <span class="id">from</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">invert_expr_prop</span> <span class="id">a</span> <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;~<span class="id">exprlist_all_values</span> (<span class="id">C</span> <span class="id">a</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4151')">Proof.</div>
<div class="proofscript" id="proof4151">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">context_contextlist_ind</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> (<span class="id">exploit</span> <span class="id">H0</span>; [<span class="tactic">eauto</span>|<span class="tactic">intros</span>]); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">a</span> <span class="id">m</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">a</span> <span class="id">m</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">a</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">auto</span>. <span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">a</span> <span class="id">m</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">imm_safe_inv</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">a</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">imm_safe</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">k</span> <span class="id">a</span> <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">invert_expr_prop</span> <span class="id">a</span> <span class="id">m</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4152')">Proof.</div>
<div class="proofscript" id="proof4152">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">invert_expr_context</span> <span class="kwd">as</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">invert_expr_prop</span> (<span class="id">C</span> <span class="id">e0</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">lred_invert</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">e0</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">invert_expr_prop</span> (<span class="id">C</span> <span class="id">e0</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">rred_invert</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">e0</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">invert_expr_prop</span> (<span class="id">C</span> <span class="id">e0</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">callred_invert</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">C</span> <span class="id">e0</span>); <span class="tactic">auto</span>; <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">safe_inv</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">C</span> <span class="id">f</span> <span class="id">a</span> <span class="id">K</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">K</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">k</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">invert_expr_prop</span> <span class="id">a</span> <span class="id">m</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4153')">Proof.</div>
<div class="proofscript" id="proof4153">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">imm_safe_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">safe_imm_safe</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">INVERSION_LEMMAS</span>.<br/>
<br/>
<h1> Correctness of the strategy. </h1>
<br/>
<span class="kwd">Section</span> <span class="id">SIMPLE_EVAL</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">f</span>: <span class="id">function</span>.<br/>
<span class="kwd">Variable</span> <span class="id">k</span>: <span class="id">cont</span>.<br/>
<span class="kwd">Variable</span> <span class="id">e</span>: <span class="id">env</span>.<br/>
<span class="kwd">Variable</span> <span class="id">m</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_simple_steps</span>:<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>, <span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>))<br/>
/\ (<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">LV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4154')">Proof.</div>
<div class="proofscript" id="proof4154">
<br/>
<span class="kwd">Ltac</span> <span class="id">Steps</span> <span class="id">REC</span> <span class="id">C</span>' := <span class="tactic">eapply</span> <span class="id">star_trans</span>; [<span class="tactic">apply</span> (<span class="id">REC</span> <span class="id">C</span>'); <span class="tactic">eauto</span> | <span class="id">idtac</span> | <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>].<br/>
<span class="kwd">Ltac</span> <span class="id">FinishR</span> := <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
<span class="kwd">Ltac</span> <span class="id">FinishL</span> := <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_lred</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eval_simple_rvalue_lvalue_ind</span>; <span class="tactic">intros</span>.<br/>
&nbsp;val&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;valof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> *. <span class="id">FinishR</span>.<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eaddrof</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="id">FinishR</span>.<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eunop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="id">FinishR</span>.<br/>
&nbsp;binop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>)) <span class="id">x</span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="id">FinishR</span>.<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecast</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="id">FinishR</span>.<br/>
&nbsp;sizeof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">FinishR</span>.<br/>
&nbsp;alignof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">FinishR</span>.<br/>
&nbsp;loc&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;var&nbsp;local&nbsp;*)</span>&nbsp;&nbsp;<span class="id">FinishL</span>.<br/>
&nbsp;var&nbsp;global&nbsp;*)</span>&nbsp;&nbsp;<span class="id">FinishL</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ederef</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="id">FinishL</span>.<br/>
&nbsp;field&nbsp;struct&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Efield</span> <span class="id">x</span> <span class="id">f0</span> <span class="id">ty</span>)). <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *. <span class="id">FinishL</span>.<br/>
&nbsp;field&nbsp;union&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Steps</span> <span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Efield</span> <span class="id">x</span> <span class="id">f0</span> <span class="id">ty</span>)). <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *. <span class="id">FinishL</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_simple_rvalue_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>, <span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<span class="kwd">Proof</span> (<span class="id">proj1</span> <span class="id">eval_simple_steps</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_simple_lvalue_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span>, <span class="id">context</span> <span class="id">LV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<span class="kwd">Proof</span> (<span class="id">proj2</span> <span class="id">eval_simple_steps</span>).<br/>
<br/>
<span class="kwd">Corollary</span> <span class="id">eval_simple_rvalue_safe</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4155')">Proof.</div>
<div class="proofscript" id="proof4155">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">safe_steps</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id">eval_simple_lvalue_safe</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">LV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4156')">Proof.</div>
<div class="proofscript" id="proof4156">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">safe_steps</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">simple_can_eval</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">from</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">simple</span> <span class="id">a</span> = <span class="id">true</span> -&gt; <span class="id">context</span> <span class="id">from</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">from</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">LV</span> =&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id">exists</span> <span class="id">ofs</span>, <span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;| <span class="id">RV</span> =&gt; <span class="id">exists</span> <span class="id">v</span>, <span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4157')">Proof.</div>
<div class="proofscript" id="proof4157">
<span class="kwd">Ltac</span> <span class="id">StepL</span> <span class="id">REC</span> <span class="id">C</span>' <span class="id">a</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">b</span> := <span class="tactic">fresh</span> "<span class="id">b</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">ofs</span> := <span class="tactic">fresh</span> "<span class="id">ofs</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> "<span class="id">E</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">S</span> := <span class="tactic">fresh</span> "<span class="id">SAFE</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">REC</span> <span class="id">LV</span> <span class="id">C</span>'); <span class="tactic">eauto</span>; <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> <span class="id">E</span>]];<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">S</span>: <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span>' (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">eapply</span> (<span class="id">eval_simple_lvalue_safe</span> <span class="id">C</span>'); <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">S</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">StepR</span> <span class="id">REC</span> <span class="id">C</span>' <span class="id">a</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">v</span> := <span class="tactic">fresh</span> "<span class="id">v</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> "<span class="id">E</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">S</span> := <span class="tactic">fresh</span> "<span class="id">SAFE</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">REC</span> <span class="id">RV</span> <span class="id">C</span>'); <span class="tactic">eauto</span>; <span class="tactic">intros</span> [<span class="id">v</span> <span class="id">E</span>];<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">S</span>: <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span>' (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">eapply</span> (<span class="id">eval_simple_rvalue_safe</span> <span class="id">C</span>'); <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">S</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">a</span>; <span class="tactic">intros</span> <span class="id">from</span> <span class="id">C</span> <span class="id">S</span> <span class="id">CTX</span> <span class="id">SAFE</span>;<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">safe_expr_kind</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">CTX</span> <span class="id">SAFE</span>); <span class="tactic">intro</span> <span class="id">K</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">S</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;val&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="id">constructor</span>.<br/>
&nbsp;var&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">Ptrofs.zero</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">esl_var_local</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">esl_var_global</span>; <span class="tactic">auto</span>.<br/>
&nbsp;field&nbsp;*)</span>&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Efield</span> <span class="id">x</span> <span class="id">f0</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE0</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> [<span class="id">EQ</span> <span class="id">TY</span>]]]. <span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">destruct</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">TY</span> <span class="kwd">as</span> (<span class="id">co</span> &amp; <span class="id">delta</span> &amp; <span class="id">CE</span> &amp; <span class="id">OFS</span>). <span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> (<span class="id">Ptrofs.add</span> <span class="id">ofs</span> (<span class="id">Ptrofs.repr</span> <span class="id">delta</span>)); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">TY</span> <span class="kwd">as</span> (<span class="id">co</span> &amp; <span class="id">CE</span>).  <span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;valof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">andb_prop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">S</span>) <span class="kwd">as</span> [<span class="id">S1</span> <span class="id">S2</span>]. <span class="tactic">clear</span> <span class="id">S</span>. <span class="tactic">rewrite</span> <span class="id">negb_true_iff</span> <span class="kwd">in</span> <span class="id">S2</span>.<br/>
&nbsp;&nbsp;<span class="id">StepL</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE0</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">TY</span> [<span class="id">t</span> [<span class="id">v</span> <span class="id">LOAD</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t</span> = <span class="id">E0</span>). <span class="id">inv</span> <span class="id">LOAD</span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ederef</span> <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE0</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> <span class="id">EQ</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>. <span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">StepL</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eaddrof</span> <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">Vptr</span> <span class="id">b</span> <span class="id">ofs</span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eunop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE0</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;binop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">andb_prop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">S</span>) <span class="kwd">as</span> [<span class="id">S1</span> <span class="id">S2</span>]; <span class="tactic">clear</span> <span class="id">S</span>.<br/>
&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">a1</span>.<br/>
&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a1</span>)) <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="id">StepR</span> <span class="id">IHa</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecast</span> <span class="id">x</span> <span class="id">ty</span>)) <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">SAFE0</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">CAST</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;sizeof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>.<br/>
&nbsp;alignof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>.<br/>
&nbsp;loc&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">simple_can_eval_rval</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">simple</span> <span class="id">r</span> = <span class="id">true</span> -&gt; <span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">r</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4158')">Proof.</div>
<div class="proofscript" id="proof4158">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id">simple_can_eval</span> <span class="id">r</span> <span class="id">RV</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_safe</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">simple_can_eval_lval</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">simple</span> <span class="id">l</span> = <span class="id">true</span> -&gt; <span class="id">context</span> <span class="id">LV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">l</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id">exists</span> <span class="id">ofs</span>, <span class="id">eval_simple_lvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>))) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4159')">Proof.</div>
<div class="proofscript" id="proof4159">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id">simple_can_eval</span> <span class="id">l</span> <span class="id">LV</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> <span class="id">A</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_safe</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">rval_list</span> (<span class="id">vl</span>: <span class="id">list</span> <span class="id">val</span>) (<span class="id">rl</span>: <span class="id">exprlist</span>) : <span class="id">exprlist</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">vl</span>, <span class="id">rl</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">v1</span> :: <span class="id">vl</span>', <span class="id">Econs</span> <span class="id">r1</span> <span class="id">rl</span>' =&gt; <span class="id">Econs</span> (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>)) (<span class="id">rval_list</span> <span class="id">vl</span>' <span class="id">rl</span>')<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">Enil</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">eval_simple_list</span>': <span class="id">exprlist</span> -&gt; <span class="id">list</span> <span class="id">val</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">esrl</span>'<span class="id">_nil</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span>' <span class="id">Enil</span> <span class="id">nil</span><br/>
&nbsp;&nbsp;| <span class="id">esrl</span>'<span class="id">_cons</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">rl</span> <span class="id">v</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span>' <span class="id">rl</span> <span class="id">vl</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span>' (<span class="id">Econs</span> <span class="id">r</span> <span class="id">rl</span>) (<span class="id">v</span> :: <span class="id">vl</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_simple_list_implies</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">tyl</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rl</span> <span class="id">tyl</span> <span class="id">vl</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vl</span>', <span class="id">cast_arguments</span> <span class="id">m</span> (<span class="id">rval_list</span> <span class="id">vl</span>' <span class="id">rl</span>) <span class="id">tyl</span> <span class="id">vl</span> /\ <span class="id">eval_simple_list</span>' <span class="id">rl</span> <span class="id">vl</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4160')">Proof.</div>
<div class="proofscript" id="proof4160">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id">nil</span> <span class="id">val</span>); <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeval_simple_list</span> <span class="kwd">as</span> [<span class="id">vl</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">v</span>' :: <span class="id">vl</span>'); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">can_eval_simple_list</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id">eval_simple_list</span>' <span class="id">rl</span> <span class="id">vl</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tyl</span> <span class="id">vl</span>',<br/>
&nbsp;&nbsp;<span class="id">cast_arguments</span> <span class="id">m</span> (<span class="id">rval_list</span> <span class="id">vl</span> <span class="id">rl</span>) <span class="id">tyl</span> <span class="id">vl</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rl</span> <span class="id">tyl</span> <span class="id">vl</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4161')">Proof.</div>
<div class="proofscript" id="proof4161">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">exprlist_app</span> (<span class="id">rl1</span> <span class="id">rl2</span>: <span class="id">exprlist</span>) : <span class="id">exprlist</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">rl1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Enil</span> =&gt; <span class="id">rl2</span><br/>
&nbsp;&nbsp;| <span class="id">Econs</span> <span class="id">r1</span> <span class="id">rl1</span>' =&gt; <span class="id">Econs</span> <span class="id">r1</span> (<span class="id">exprlist_app</span> <span class="id">rl1</span>' <span class="id">rl2</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprlist_app_assoc</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl2</span> <span class="id">rl3</span> <span class="id">rl1</span>,<br/>
&nbsp;&nbsp;<span class="id">exprlist_app</span> (<span class="id">exprlist_app</span> <span class="id">rl1</span> <span class="id">rl2</span>) <span class="id">rl3</span> =<br/>
&nbsp;&nbsp;<span class="id">exprlist_app</span> <span class="id">rl1</span> (<span class="id">exprlist_app</span> <span class="id">rl2</span> <span class="id">rl3</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4162')">Proof.</div>
<div class="proofscript" id="proof4162">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl1</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id">contextlist</span>' : (<span class="id">exprlist</span> -&gt; <span class="id">expr</span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">contextlist</span>'<span class="id">_call</span>: <span class="kwd">forall</span> <span class="id">r1</span> <span class="id">rl0</span> <span class="id">ty</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contextlist</span>' (<span class="kwd">fun</span> <span class="id">rl</span> =&gt; <span class="id">C</span> (<span class="id">Ecall</span> <span class="id">r1</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> <span class="id">rl</span>) <span class="id">ty</span>))<br/>
&nbsp;&nbsp;| <span class="id">contextlist</span>'<span class="id">_builtin</span>: <span class="kwd">forall</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rl0</span> <span class="id">ty</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contextlist</span>' (<span class="kwd">fun</span> <span class="id">rl</span> =&gt; <span class="id">C</span> (<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> <span class="id">rl</span>) <span class="id">ty</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprlist_app_context</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl1</span> <span class="id">rl2</span>,<br/>
&nbsp;&nbsp;<span class="id">contextlist</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">exprlist_app</span> <span class="id">rl1</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl2</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4163')">Proof.</div>
<div class="proofscript" id="proof4163">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">ctx_list_head</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">ctx_list_tail</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contextlist</span>'<span class="id">_head</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">contextlist</span>' <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4164')">Proof.</div>
<div class="proofscript" id="proof4164">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">C</span>' := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecall</span> <span class="id">r1</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>)) <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span>'). <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">exprlist_app_context</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">C</span>' <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">context_compose</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">C</span>' := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>)) <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span>'). <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">exprlist_app_context</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">context</span> <span class="id">RV</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">C</span>' <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">context_compose</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contextlist</span>'<span class="id">_tail</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r1</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">contextlist</span>' <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">contextlist</span>' (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">x</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4165')">Proof.</div>
<div class="proofscript" id="proof4165">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">Ecall</span> <span class="id">r0</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">x</span>)) <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">Ecall</span> <span class="id">r0</span> (<span class="id">exprlist_app</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">Enil</span>)) <span class="id">x</span>) <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">intros</span>. <span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id">exprlist_app_assoc</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">x</span>)) <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C0</span> (<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">exprlist_app</span> (<span class="id">exprlist_app</span> <span class="id">rl0</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">Enil</span>)) <span class="id">x</span>) <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">intros</span>. <span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id">exprlist_app_assoc</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">contextlist</span>'<span class="id">_head</span> <span class="id">contextlist</span>'<span class="id">_tail</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_simple_list_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">vl</span>, <span class="id">eval_simple_list</span>' <span class="id">rl</span> <span class="id">vl</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span>, <span class="id">contextlist</span>' <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">star</span> <span class="id">Csem.step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">rl</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">rval_list</span> <span class="id">vl</span> <span class="id">rl</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4166')">Proof.</div>
<div class="proofscript" id="proof4166">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;nil&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;cons&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHeval_simple_list</span>' <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econs</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r</span>)) <span class="id">x</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">simple_list_can_eval</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">simplelist</span> <span class="id">rl</span> = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">contextlist</span>' <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">rl</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vl</span>, <span class="id">eval_simple_list</span>' <span class="id">rl</span> <span class="id">vl</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4167')">Proof.</div>
<div class="proofscript" id="proof4167">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">andb_prop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval</span> <span class="id">r1</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> <span class="id">EV1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHrl</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econs</span> (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">r1</span>)) <span class="id">x</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">eval_simple_rvalue_safe</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">vl</span> <span class="id">EVl</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">v1</span> :: <span class="id">vl</span>); <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">rval_list_all_values</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">rl</span>, <span class="id">exprlist_all_values</span> (<span class="id">rval_list</span> <span class="id">vl</span> <span class="id">rl</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4168')">Proof.</div>
<div class="proofscript" id="proof4168">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rl</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">SIMPLE_EVAL</span>.<br/>
<br/>
<div class="doc">Decomposition </div>
<br/>
<span class="kwd">Section</span> <span class="id">DECOMPOSITION</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">f</span>: <span class="id">function</span>.<br/>
<span class="kwd">Variable</span> <span class="id">k</span>: <span class="id">cont</span>.<br/>
<span class="kwd">Variable</span> <span class="id">e</span>: <span class="id">env</span>.<br/>
<span class="kwd">Variable</span> <span class="id">m</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">simple_side_effect</span> (<span class="id">r</span>: <span class="id">expr</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">r</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Evalof</span> <span class="id">l</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l</span> = <span class="id">true</span> /\ <span class="id">type_is_volatile</span> (<span class="id">typeof</span> <span class="id">l</span>) = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqand</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eseqor</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Econdition</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eassign</span> <span class="id">l1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l1</span> = <span class="id">true</span> /\ <span class="id">simple</span> <span class="id">r2</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eassignop</span> <span class="id">_</span> <span class="id">l1</span> <span class="id">r2</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l1</span> = <span class="id">true</span> /\ <span class="id">simple</span> <span class="id">r2</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Epostincr</span> <span class="id">_</span> <span class="id">l1</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">l1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Ecomma</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Ecall</span> <span class="id">r1</span> <span class="id">rl</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span> /\ <span class="id">simplelist</span> <span class="id">rl</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rl</span> <span class="id">_</span> =&gt; <span class="id">simplelist</span> <span class="id">rl</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">Eparen</span> <span class="id">r1</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">simple</span> <span class="id">r1</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Scheme</span> <span class="id">expr_ind2</span> := <span class="kwd">Induction</span> <span class="kwd">for</span> <span class="id">expr</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">exprlist_ind2</span> := <span class="kwd">Induction</span> <span class="kwd">for</span> <span class="id">exprlist</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">expr_expr_list_ind</span> <span class="id">from</span> <span class="id">expr_ind2</span>, <span class="id">exprlist_ind2</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id">leftcontext</span> <span class="id">leftcontextlist</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">decompose_expr</span>:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">a</span> <span class="id">from</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">context</span> <span class="id">from</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">a</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">C</span>', <span class="id">exists</span> <span class="id">a</span>', <span class="id">a</span> = <span class="id">C</span>' <span class="id">a</span>' /\ <span class="id">simple_side_effect</span> <span class="id">a</span>' /\ <span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">from</span> <span class="id">C</span>')<br/>
/\(<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">contextlist</span>' <span class="id">C</span> -&gt; <span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">rl</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simplelist</span> <span class="id">rl</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">C</span>', <span class="id">exists</span> <span class="id">a</span>', <span class="id">rl</span> = <span class="id">C</span>' <span class="id">a</span>' /\ <span class="id">simple_side_effect</span> <span class="id">a</span>' /\ <span class="id">leftcontextlist</span> <span class="id">RV</span> <span class="id">C</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4169')">Proof.</div>
<div class="proofscript" id="proof4169">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">expr_expr_list_ind</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Kind</span> :=<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_expr_kind</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">X</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">X</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">X</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Rec</span> <span class="id">HR</span> <span class="id">kind</span> <span class="id">C</span> <span class="id">C</span>' :=<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">HR</span> <span class="id">kind</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">C</span>' <span class="id">x</span>))) <span class="kwd">as</span> [? | [<span class="id">C</span>'' [<span class="id">a</span>' [<span class="id">D</span> [<span class="id">A</span> <span class="id">B</span>]]]]];<br/>
&nbsp;&nbsp;[<span class="tactic">eauto</span> | <span class="tactic">eauto</span> | <span class="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>'(<span class="id">C</span>'' <span class="id">x</span>)); <span class="id">exists</span> <span class="id">a</span>'; <span class="tactic">rewrite</span> <span class="id">D</span>; <span class="tactic">auto</span>].<br/>
<span class="kwd">Ltac</span> <span class="id">Base</span> :=<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="id">econstructor</span>; <span class="tactic">split</span>; [<span class="tactic">eauto</span> | <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
<br/>
&nbsp;field&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Efield</span> <span class="id">x</span> <span class="id">f0</span> <span class="id">ty</span>).<br/>
&nbsp;rvalof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">LV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">type_is_volatile</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">Base</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ederef</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">LV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eaddrof</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eunop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;binop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>). <span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">Rec</span> <span class="id">H0</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebinop</span> <span class="id">op</span> <span class="id">r1</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecast</span> <span class="id">x</span> <span class="id">ty</span>).<br/>
&nbsp;seqand&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eseqand</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;seqor&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eseqor</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econdition</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">LV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassign</span> <span class="id">x</span> <span class="id">r</span> <span class="id">ty</span>). <span class="id">Rec</span> <span class="id">H0</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassign</span> <span class="id">l</span> <span class="id">x</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">LV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span>). <span class="id">Rec</span> <span class="id">H0</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Eassignop</span> <span class="id">op</span> <span class="id">l</span> <span class="id">x</span> <span class="id">tyres</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">LV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;comma&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecomma</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>). <span class="id">Base</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecall</span> <span class="id">x</span> <span class="id">rargs</span> <span class="id">ty</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecall</span> <span class="id">r1</span> <span class="id">x</span> <span class="id">ty</span>))) <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">C</span>' [<span class="id">a</span>' [<span class="id">D</span> [<span class="id">A</span> <span class="id">B</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_call</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="id">C</span>) (<span class="id">rl0</span> := <span class="id">Enil</span>). <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">Base</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ecall</span> <span class="id">r1</span> (<span class="id">C</span>' <span class="id">x</span>) <span class="id">ty</span>); <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">rewrite</span> <span class="id">D</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;builtin&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">x</span> <span class="id">ty</span>))) <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">C</span>' [<span class="id">a</span>' [<span class="id">D</span> [<span class="id">A</span> <span class="id">B</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_builtin</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="id">C</span>) (<span class="id">rl0</span> := <span class="id">Enil</span>). <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">Base</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> (<span class="id">C</span>' <span class="id">x</span>) <span class="id">ty</span>); <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">rewrite</span> <span class="id">D</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;rparen&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Kind</span>. <span class="id">Rec</span> <span class="id">H</span> <span class="id">RV</span> <span class="id">C</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">Eparen</span> <span class="id">x</span> <span class="id">tycast</span> <span class="id">ty</span>)). <span class="id">Base</span>.<br/>
&nbsp;cons&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl</span>))) <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">C</span>' [<span class="id">a</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_head</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Econs</span> <span class="id">r1</span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">A</span>' | [<span class="id">C</span>' [<span class="id">a</span>' [<span class="id">A</span>' [<span class="id">B</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_tail</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">rewrite</span> <span class="id">A</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econs</span> <span class="id">r1</span> (<span class="id">C</span>' <span class="id">x</span>)); <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">rewrite</span> <span class="id">A</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">Econs</span> (<span class="id">C</span>' <span class="id">x</span>) <span class="id">rl</span>); <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decompose_topexpr</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">a</span> = <span class="id">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">C</span>, <span class="id">exists</span> <span class="id">a</span>', <span class="id">a</span> = <span class="id">C</span> <span class="id">a</span>' /\ <span class="id">simple_side_effect</span> <span class="id">a</span>' /\ <span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4170')">Proof.</div>
<div class="proofscript" id="proof4170">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> (<span class="id">proj1</span> <span class="id">decompose_expr</span>). <span class="tactic">apply</span> <span class="id">ctx_top</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">DECOMPOSITION</span>.<br/>
<br/>
<div class="doc">Simulation for expressions. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">estep_simulation</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>',<br/>
&nbsp;&nbsp;<span class="id">estep</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>' -&gt; <span class="id">plus</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4171')">Proof.</div>
<div class="proofscript" id="proof4171">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;simple&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simple_rvalue_steps</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">STEPS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">star_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">EQ1</span> <span class="id">EQ2</span>] | <span class="id">A</span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">EQ1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">contradiction</span>.<br/>
&nbsp;valof&nbsp;volatile&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;seqand&nbsp;true&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">red_seqand_true</span>; <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqand&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">red_seqand_false</span>; <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;true&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">red_seqor_true</span>; <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">red_seqor_false</span>; <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econdition</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">x</span> <span class="id">r</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">auto</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assignop&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">imm_safe_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v4</span>' [<span class="id">m</span>' [<span class="id">t</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">eelim</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_stuck</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">imm_safe_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v3</span> <span class="id">A</span>]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecomma</span> (<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">instantiate</span> (1 := <span class="id">v2</span>). <span class="tactic">destruct</span> <span class="id">id</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecomma</span> <span class="id">x</span> (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;postincr&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_lvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">op</span> := <span class="kwd">match</span> <span class="id">id</span> <span class="kwd">with</span> <span class="id">Incr</span> =&gt; <span class="id">Oadd</span> | <span class="id">Decr</span> =&gt; <span class="id">Osub</span> <span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SEM</span>: <span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) (<span class="id">Vint</span> <span class="id">Int.one</span>) <span class="id">type_int32s</span> <span class="id">m</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v2</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecomma</span> (<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_stuck</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecomma</span> <span class="id">x</span> (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">imm_safe_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v3</span> [<span class="id">m</span>' [<span class="id">t</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">eelim</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_stuck</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span> (<span class="id">Ecomma</span> (<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">l</span>)) <span class="id">x</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="kwd">Eval</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">imm_safe_inv</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v2</span> <span class="id">A</span>]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;comma&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecomma</span> <span class="id">x</span> <span class="id">r2</span> (<span class="id">typeof</span> <span class="id">r2</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;paren&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eparen</span> <span class="id">x</span> <span class="id">tycast</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">step_rred</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simple_list_implies</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">vl</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_plus_trans</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_rvalue_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">rargs</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_list_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> (<span class="kwd">Eval</span> <span class="id">vf</span> (<span class="id">typeof</span> <span class="id">rf</span>)) <span class="id">x</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_call</span> <span class="kwd">with</span> (<span class="id">rl0</span> := <span class="id">Enil</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">Csem.step_call</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>. <span class="tactic">auto</span>.<br/>
&nbsp;builtin&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">eval_simple_list_implies</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">vl</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eval_simple_list_steps</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">x</span> <span class="id">ty</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_builtin</span> <span class="kwd">with</span> (<span class="id">rl0</span> := <span class="id">Enil</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">Csem.step_rred</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">can_estep</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span> <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">False</span> | <span class="id">_</span> =&gt; <span class="id">True</span> <span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">S</span>, <span class="id">estep</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> <span class="id">S</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4172')">Proof.</div>
<div class="proofscript" id="proof4172">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">decompose_topexpr</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">C</span> [<span class="id">b</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]]].<br/>
&nbsp;simple&nbsp;expr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>)); <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">v</span> <span class="id">P</span>].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_expr</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;side&nbsp;effect&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H0</span>. <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">Q</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;valof&nbsp;volatile&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_lval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b1</span> [<span class="id">ofs</span> [<span class="id">E1</span> <span class="id">S1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">t</span> [<span class="id">v</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_rvalof_volatile</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;seqand&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">BV</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_seqand_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_seqand_false</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;seqor&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">BV</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_seqor_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_seqor_false</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econdition</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">b3</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">BV</span>].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="tactic">eapply</span> <span class="id">step_condition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_lval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> [<span class="id">E1</span> <span class="id">S1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">b1</span>)) <span class="id">x</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">E2</span> <span class="id">S2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S2</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">m</span>' [<span class="id">t</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_assign</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_lval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">tyres</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span> [<span class="id">ofs</span> [<span class="id">E1</span> <span class="id">S1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> (<span class="id">Eloc</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">typeof</span> <span class="id">b1</span>)) <span class="id">x</span> <span class="id">tyres</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">E2</span> <span class="id">S2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S2</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">t1</span> [<span class="id">v1</span> [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">b1</span>) <span class="id">v</span> (<span class="id">typeof</span> <span class="id">b2</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v3</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">b1</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v4</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>, <span class="id">exists</span> <span class="id">m</span>', <span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">b1</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span> <span class="id">t2</span> <span class="id">m</span>')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">t2</span> [<span class="id">m</span>' <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_assignop</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H2</span>. <span class="id">exists</span> <span class="id">t2</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">auto</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_lval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b1</span> [<span class="id">ofs</span> [<span class="id">E1</span> <span class="id">S1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">t</span> [<span class="id">v1</span> [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> <span class="id">ty</span> <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v2</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">incrdecr_type</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>, <span class="id">exists</span> <span class="id">m</span>', <span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">v3</span> <span class="id">t2</span> <span class="id">m</span>')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">t2</span> [<span class="id">m</span>' <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_postincr</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">t2</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>. <span class="tactic">auto</span>.<br/>
&nbsp;comma&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecomma</span> <span class="id">x</span> <span class="id">b2</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_comma</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">rargs</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">vf</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">C</span>' := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> (<span class="kwd">Eval</span> <span class="id">vf</span> (<span class="id">typeof</span> <span class="id">b</span>)) <span class="id">x</span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">contextlist</span>' <span class="id">C</span>'). <span class="tactic">unfold</span> <span class="id">C</span>'; <span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_call</span> <span class="kwd">with</span> (<span class="id">rl0</span> := <span class="id">Enil</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_list_can_eval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">C</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">vl</span> <span class="id">E2</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. 2: <span class="tactic">eapply</span> <span class="id">leftcontext_context</span>; <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">safe_steps</span>. <span class="id">eexact</span> <span class="id">S1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">eval_simple_list_steps</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">vl</span> <span class="id">E2</span> <span class="id">C</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="id">exploit</span> <span class="id">X</span>. <span class="tactic">eapply</span> <span class="id">rval_list_all_values</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tyargs</span> [<span class="id">tyres</span> [<span class="id">cconv</span> [<span class="id">fd</span> [<span class="id">vargs</span> [<span class="id">P</span> [<span class="id">Q</span> [<span class="id">U</span> <span class="id">V</span>]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_call</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">can_eval_simple_list</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;builtin&nbsp;*)</span>&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">C</span>' := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">x</span> <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">contextlist</span>' <span class="id">C</span>'). <span class="tactic">unfold</span> <span class="id">C</span>'; <span class="tactic">eapply</span> <span class="id">contextlist</span>'<span class="id">_builtin</span> <span class="kwd">with</span> (<span class="id">rl0</span> := <span class="id">Enil</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_list_can_eval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">C</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">vl</span> <span class="id">E</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. 2: <span class="tactic">eapply</span> <span class="id">leftcontext_context</span>; <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">safe_steps</span>. <span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">eval_simple_list_steps</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rargs</span> <span class="id">vl</span> <span class="id">E</span> <span class="id">C</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="id">exploit</span> <span class="id">X</span>. <span class="tactic">eapply</span> <span class="id">rval_list_all_values</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">vargs</span> [<span class="id">t</span> [<span class="id">vres</span> [<span class="id">m</span>' [<span class="id">U</span> <span class="id">V</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_builtin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">can_eval_simple_list</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;paren&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">simple_can_eval_rval</span> <span class="id">f</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span> <span class="id">b</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eparen</span> <span class="id">x</span> <span class="id">tycast</span> <span class="id">ty</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">E1</span> <span class="id">S1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">safe_inv</span>. <span class="id">eexact</span> <span class="id">S1</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">v</span> <span class="id">CAST</span>].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eapply</span> <span class="id">step_paren</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Simulation for all states </div>
<br/>
<span class="kwd">Theorem</span> <span class="id">step_simulation</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span>,<br/>
&nbsp;&nbsp;<span class="id">step</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span> -&gt; <span class="id">plus</span> <span class="id">Csem.step</span> <span class="id">ge</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4173')">Proof.</div>
<div class="proofscript" id="proof4173">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">estep_simulation</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">plus_one</span>. <span class="id">right</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="tactic">progress</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;<span class="id">safe</span> <span class="id">S</span> -&gt; (<span class="id">exists</span> <span class="id">r</span>, <span class="id">final_state</span> <span class="id">S</span> <span class="id">r</span>) \/ (<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">S</span>', <span class="id">step</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4174')">Proof.</div>
<div class="proofscript" id="proof4174">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">intros</span> [<span class="id">FIN</span> | [<span class="id">t</span> [<span class="id">S</span>' <span class="id">STEP</span>]]].<br/>
&nbsp;1.&nbsp;Finished.&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">destruct</span> <span class="id">STEP</span>.<br/>
&nbsp;2.&nbsp;Expression&nbsp;step.&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">S</span>', <span class="id">estep</span> <span class="id">S</span> <span class="id">t</span> <span class="id">S</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;lred&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">can_estep</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;rred&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">can_estep</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;callred&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">can_estep</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H</span> <span class="id">Stuckstate</span>). <span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">left</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">r</span> <span class="id">F</span>] | [<span class="id">t</span> [<span class="id">S</span>' <span class="id">R</span>]]]. <span class="id">inv</span> <span class="id">F</span>. <span class="id">inv</span> <span class="id">R</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">t</span>' [<span class="id">S</span>'' <span class="id">ESTEP</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>'; <span class="id">exists</span> <span class="id">S</span>''; <span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;3.&nbsp;Other&nbsp;step.&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>; <span class="id">exists</span> <span class="id">S</span>'; <span class="id">right</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">STRATEGY</span>.<br/>
<br/>
<div class="doc">The semantics that follows the strategy. </div>
<br/>
<span class="kwd">Definition</span> <span class="id">semantics</span> (<span class="id">p</span>: <span class="id">program</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ge</span> := <span class="id">globalenv</span> <span class="id">p</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">Semantics_gen</span> <span class="id">step</span> (<span class="id">initial_state</span> <span class="id">p</span>) <span class="id">final_state</span> <span class="id">ge</span> <span class="id">ge</span>.<br/>
<br/>
<div class="doc">This semantics is receptive to changes in events. </div>
<br/>
<span class="kwd">Remark</span> <span class="id">deref_loc_trace</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">t</span> <span class="kwd">with</span> <span class="id">nil</span> =&gt; <span class="id">True</span> | <span class="id">ev</span> :: <span class="id">nil</span> =&gt; <span class="id">True</span> | <span class="id">_</span> =&gt; <span class="id">False</span> <span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4175')">Proof.</div>
<div class="proofscript" id="proof4175">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">deref_loc_receptive</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ev1</span> <span class="id">t1</span> <span class="id">v</span> <span class="id">ev2</span>,<br/>
&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ev1</span> :: <span class="id">t1</span>) <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">match_traces</span> <span class="id">ge</span> (<span class="id">ev1</span> :: <span class="id">nil</span>) (<span class="id">ev2</span> :: <span class="id">nil</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">t1</span> = <span class="id">nil</span> /\ <span class="id">exists</span> <span class="id">v</span>', <span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ev2</span> :: <span class="id">nil</span>) <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4176')">Proof.</div>
<div class="proofscript" id="proof4176">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">nil</span>). <span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">volatile_load_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="id">exists</span> <span class="id">v</span>'; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">assign_loc_trace</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">t</span> <span class="kwd">with</span> <span class="id">nil</span> =&gt; <span class="id">True</span> | <span class="id">ev</span> :: <span class="id">nil</span> =&gt; <span class="id">output_event</span> <span class="id">ev</span> | <span class="id">_</span> =&gt; <span class="id">False</span> <span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4177')">Proof.</div>
<div class="proofscript" id="proof4177">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">assign_loc_receptive</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ev1</span> <span class="id">t1</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">ev2</span>,<br/>
&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> (<span class="id">ev1</span> :: <span class="id">t1</span>) <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">match_traces</span> <span class="id">ge</span> (<span class="id">ev1</span> :: <span class="id">nil</span>) (<span class="id">ev2</span> :: <span class="id">nil</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">ev1</span> :: <span class="id">t1</span> = <span class="id">ev2</span> :: <span class="id">nil</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4178')">Proof.</div>
<div class="proofscript" id="proof4178">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">nil</span>). <span class="id">exploit</span> <span class="id">assign_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">volatile_store_receptive</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">semantics_strongly_receptive</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id">strongly_receptive</span> (<span class="id">semantics</span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4179')">Proof.</div>
<div class="proofscript" id="proof4179">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;receptiveness&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ge</span> := <span class="id">globalenv</span> <span class="id">p</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;valof&nbsp;volatile&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">v</span>' <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_rvalof_volatile</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">assign_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span> <span class="kwd">as</span> [ | <span class="id">ev0</span> <span class="id">t0</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="id">exploit</span> <span class="id">assign_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H10</span>. <span class="id">exploit</span> <span class="id">deref_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> [<span class="id">v1</span>' <span class="id">A</span>]]. <span class="tactic">subst</span> <span class="id">t0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span>' (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v3</span>' <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v4</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>', <span class="id">exists</span> <span class="id">m</span>'', <span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span>' <span class="id">t2</span>' <span class="id">m</span>'')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">t2</span>' [<span class="id">m</span>'' <span class="id">P</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">t0</span>; <span class="id">exists</span> <span class="id">m</span>'0; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">auto</span>.<br/>
&nbsp;assignop&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> [<span class="id">v1</span>' <span class="id">A</span>]]. <span class="tactic">subst</span> <span class="id">t1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span>' (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v3</span>' <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v4</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>', <span class="id">exists</span> <span class="id">m</span>'', <span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span>' <span class="id">t2</span>' <span class="id">m</span>'')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">t2</span>' [<span class="id">m</span>'' <span class="id">P</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">t2</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_assignop_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">auto</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span> <span class="kwd">as</span> [ | <span class="id">ev0</span> <span class="id">t0</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="id">exploit</span> <span class="id">assign_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H9</span>. <span class="id">exploit</span> <span class="id">deref_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> [<span class="id">v1</span>' <span class="id">A</span>]]. <span class="tactic">subst</span> <span class="id">t0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span>' (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v2</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v2</span>' (<span class="id">incrdecr_type</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>', <span class="id">exists</span> <span class="id">m</span>'', <span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v3</span>' <span class="id">t2</span>' <span class="id">m</span>'')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">t2</span>' [<span class="id">m</span>'' <span class="id">P</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">t0</span>; <span class="id">exists</span> <span class="id">m</span>'0; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">auto</span>.<br/>
&nbsp;postincr&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> [<span class="id">v1</span>' <span class="id">A</span>]]. <span class="tactic">subst</span> <span class="id">t1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span>' (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v2</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">sem_cast</span> <span class="id">v2</span>' (<span class="id">incrdecr_type</span> (<span class="id">typeof</span> <span class="id">l</span>)) (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">v3</span>'|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">classic</span> (<span class="id">exists</span> <span class="id">t2</span>', <span class="id">exists</span> <span class="id">m</span>'', <span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v3</span>' <span class="id">t2</span>' <span class="id">m</span>'')).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">t2</span>' [<span class="id">m</span>'' <span class="id">P</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>. <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">t2</span>; <span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">rewrite</span> <span class="id">Heqo0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_postincr_stuck</span> <span class="kwd">with</span> (<span class="id">v1</span> := <span class="id">v1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">auto</span>.<br/>
&nbsp;builtin&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_trace_length</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">vres2</span> [<span class="id">m2</span> <span class="id">EC2</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_builtin</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">omegaContradiction</span>.<br/>
&nbsp;external&nbsp;calls&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_trace_length</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_receptive</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">vres2</span> [<span class="id">m2</span> <span class="id">EC2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">Returnstate</span> <span class="id">vres2</span> <span class="id">k</span> <span class="id">m2</span>); <span class="id">exists</span> <span class="id">E0</span>; <span class="id">right</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">omegaContradiction</span>.<br/>
&nbsp;well-behaved&nbsp;traces&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;valof&nbsp;volatile&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">assign_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">assign_loc_trace</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">destruct</span> <span class="id">t2</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">destruct</span> <span class="id">t2</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;assignop&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">assign_loc_trace</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">destruct</span> <span class="id">t2</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">destruct</span> <span class="id">t2</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;postincr&nbsp;stuck&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">deref_loc_trace</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;builtins&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_trace_length</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;external&nbsp;calls&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">external_call_trace_length</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The main simulation result. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id">strategy_simulation</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id">backward_simulation</span> (<span class="id">Csem.semantics</span> <span class="id">p</span>) (<span class="id">semantics</span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4180')">Proof.</div>
<div class="proofscript" id="proof4180">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">backward_simulation_plus</span> <span class="kwd">with</span> (<span class="id">match_states</span> := <span class="kwd">fun</span> (<span class="id">S1</span> <span class="id">S2</span>: <span class="id">state</span>) =&gt; <span class="id">S1</span> = <span class="id">S2</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;symbols&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;initial&nbsp;states&nbsp;exist&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;initial&nbsp;states&nbsp;match&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;final&nbsp;states&nbsp;match&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">s2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;progress&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">s2</span>. <span class="tactic">apply</span> <span class="tactic">progress</span>. <span class="tactic">auto</span>.<br/>
&nbsp;simulation&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">s1</span>. <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">step_simulation</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> A big-step semantics for CompCert C implementing the reduction strategy. </h1>
<br/>
<span class="kwd">Section</span> <span class="id">BIGSTEP</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">ge</span>: <span class="id">genv</span>.<br/>
<br/>
<div class="doc">The execution of a statement produces an ``outcome'', indicating
  how the execution terminated: either normally or prematurely
  through the execution of a <span class="bracket"><span class="id">break</span></span>, <span class="bracket"><span class="id">continue</span></span> or <span class="bracket"><span class="kwd">return</span></span> statement. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">outcome</span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span>: <span class="id">outcome</span>                 <span class="docright">(* terminated by <span class="bracket"><span class="id">break</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">Out_continue</span>: <span class="id">outcome</span>              <span class="docright">(* terminated by <span class="bracket"><span class="id">continue</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">Out_normal</span>: <span class="id">outcome</span>                <span class="docright">(* terminated normally  *)</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">Out_return</span>: <span class="id">option</span> (<span class="id">val</span> * <span class="id">type</span>) -&gt; <span class="id">outcome</span>. <span class="docright">(* terminated by <span class="bracket"><span class="kwd">return</span></span>  *)</span><br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">out_normal_or_continue</span> : <span class="id">outcome</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">Out_normal_or_continue_N</span>: <span class="id">out_normal_or_continue</span> <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">Out_normal_or_continue_C</span>: <span class="id">out_normal_or_continue</span> <span class="id">Out_continue</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">out_break_or_return</span> : <span class="id">outcome</span> -&gt; <span class="id">outcome</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">Out_break_or_return_B</span>: <span class="id">out_break_or_return</span> <span class="id">Out_break</span> <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">Out_break_or_return_R</span>: <span class="kwd">forall</span> <span class="id">ov</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_break_or_return</span> (<span class="id">Out_return</span> <span class="id">ov</span>) (<span class="id">Out_return</span> <span class="id">ov</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">outcome_switch</span> (<span class="id">out</span>: <span class="id">outcome</span>) : <span class="id">outcome</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">o</span> =&gt; <span class="id">o</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">outcome_result_value</span> (<span class="id">out</span>: <span class="id">outcome</span>) (<span class="id">t</span>: <span class="id">type</span>) (<span class="id">v</span>: <span class="id">val</span>) (<span class="id">m</span>: <span class="id">mem</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out</span>, <span class="id">t</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Out_normal</span>, <span class="id">Tvoid</span> =&gt; <span class="id">v</span> = <span class="id">Vundef</span><br/>
&nbsp;&nbsp;| <span class="id">Out_return</span> <span class="id">None</span>, <span class="id">Tvoid</span> =&gt; <span class="id">v</span> = <span class="id">Vundef</span><br/>
&nbsp;&nbsp;| <span class="id">Out_return</span> (<span class="id">Some</span> (<span class="id">v</span>', <span class="id">ty</span>')), <span class="id">ty</span> =&gt; <span class="id">ty</span> &lt;&gt; <span class="id">Tvoid</span> /\ <span class="id">sem_cast</span> <span class="id">v</span>' <span class="id">ty</span>' <span class="id">ty</span> <span class="id">m</span> = <span class="id">Some</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">eval_expression</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">a</span>'</span> describes the evaluation of the
  complex expression e.  <span class="bracket"><span class="id">v</span></span> is the resulting value, <span class="bracket"><span class="id">m2</span></span> the final
  memory state, and <span class="bracket"><span class="id">t</span></span> the trace of input/output events performed
  during this evaluation.  </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">eval_expression</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">val</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">eval_expression_intro</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span><br/>
<br/>
<span class="kwd">with</span> <span class="id">eval_expr</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">kind</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">expr</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">eval_val</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">v</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">E0</span> <span class="id">m</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_var</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">x</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> (<span class="id">Evar</span> <span class="id">x</span> <span class="id">ty</span>) <span class="id">E0</span> <span class="id">m</span> (<span class="id">Evar</span> <span class="id">x</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_field</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">f</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> (<span class="id">Efield</span> <span class="id">a</span> <span class="id">f</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Efield</span> <span class="id">a</span>' <span class="id">f</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_valof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_is_volatile</span> (<span class="id">typeof</span> <span class="id">a</span>) = <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Evalof</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Evalof</span> <span class="id">a</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_valof_volatile</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">ty</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_is_volatile</span> (<span class="id">typeof</span> <span class="id">a</span>) = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">t2</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Evalof</span> <span class="id">a</span> <span class="id">ty</span>) (<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m</span>' (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_deref</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> (<span class="id">Ederef</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Ederef</span> <span class="id">a</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_addrof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eaddrof</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Eaddrof</span> <span class="id">a</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_unop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eunop</span> <span class="id">op</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Eunop</span> <span class="id">op</span> <span class="id">a</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_binop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">a2</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m</span>'' (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span>' <span class="id">a2</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_cast</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecast</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span> <span class="id">m</span>' (<span class="id">Ecast</span> <span class="id">a</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_seqand_true</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' <span class="id">v2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>'' <span class="id">a2</span>' <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">type_bool</span> <span class="id">m</span>'' = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqand</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m</span>'' (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_seqand_false</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqand</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span> <span class="id">m</span>' (<span class="kwd">Eval</span> (<span class="id">Vint</span> <span class="id">Int.zero</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_seqor_false</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' <span class="id">v2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a2</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>'' <span class="id">a2</span>' <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">type_bool</span> <span class="id">m</span>'' = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m</span>'' (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_seqor_true</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span> <span class="id">m</span>' (<span class="kwd">Eval</span> (<span class="id">Vint</span> <span class="id">Int.one</span>) <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_condition</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a</span>' <span class="id">v</span>' <span class="id">b</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">a2</span> <span class="kwd">else</span> <span class="id">a3</span>) <span class="id">t2</span> <span class="id">m</span>'' <span class="id">a</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>'' <span class="id">a</span>' <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v</span>' (<span class="id">typeof</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">a2</span> <span class="kwd">else</span> <span class="id">a3</span>)) <span class="id">ty</span> <span class="id">m</span>'' = <span class="id">Some</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Econdition</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m</span>'' (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_sizeof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">ty</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Esizeof</span> <span class="id">ty</span>' <span class="id">ty</span>) <span class="id">E0</span> <span class="id">m</span> (<span class="id">Esizeof</span> <span class="id">ty</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_alignof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">ty</span>' <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ealignof</span> <span class="id">ty</span>' <span class="id">ty</span>) <span class="id">E0</span> <span class="id">m</span> (<span class="id">Ealignof</span> <span class="id">ty</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_assign</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">l</span> <span class="id">r</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' <span class="id">t2</span> <span class="id">m2</span> <span class="id">r</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">v</span>' <span class="id">t3</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' -&gt; <span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">RV</span> <span class="id">r</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">r</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">l</span>' <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">r</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">r</span>) (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>' <span class="id">t3</span> <span class="id">m3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassign</span> <span class="id">l</span> <span class="id">r</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>**<span class="id">t3</span>) <span class="id">m3</span> (<span class="kwd">Eval</span> <span class="id">v</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_assignop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' <span class="id">t2</span> <span class="id">m2</span> <span class="id">r</span>' <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span> <span class="id">v4</span> <span class="id">t3</span> <span class="id">t4</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' -&gt; <span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">RV</span> <span class="id">r</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">r</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">l</span>' <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t3</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">r</span>' <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_binary_operation</span> <span class="id">ge</span> <span class="id">op</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">v2</span> (<span class="id">typeof</span> <span class="id">r</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">v3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v3</span> <span class="id">tyres</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">v4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> (<span class="id">typeof</span> <span class="id">l</span>) <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v4</span> <span class="id">t4</span> <span class="id">m3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">l</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>**<span class="id">t3</span>**<span class="id">t4</span>) <span class="id">m3</span> (<span class="kwd">Eval</span> <span class="id">v4</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_postincr</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span> <span class="id">m2</span> <span class="id">t2</span> <span class="id">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">l</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_lvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">l</span>' <span class="id">b</span> <span class="id">ofs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">deref_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t2</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_incrdecr</span> <span class="id">ge</span> <span class="id">id</span> <span class="id">v1</span> <span class="id">ty</span> <span class="id">m1</span> = <span class="id">Some</span> <span class="id">v2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_cast</span> <span class="id">v2</span> (<span class="id">incrdecr_type</span> <span class="id">ty</span>) <span class="id">ty</span> <span class="id">m1</span> = <span class="id">Some</span> <span class="id">v3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assign_loc</span> <span class="id">ge</span> <span class="id">ty</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v3</span> <span class="id">t3</span> <span class="id">m2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">l</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>**<span class="id">t3</span>) <span class="id">m2</span> (<span class="kwd">Eval</span> <span class="id">v1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id">eval_comma</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">r1</span>' <span class="id">v1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">r2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">r1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">r1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">r1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">RV</span> <span class="id">r2</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">r2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">r2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecomma</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m2</span> <span class="id">r2</span>'<br/>
&nbsp;&nbsp;| <span class="id">eval_call</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">rf</span>' <span class="id">t2</span> <span class="id">m2</span> <span class="id">rargs</span>' <span class="id">vf</span> <span class="id">vargs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> <span class="id">fd</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">vres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">rf</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">rf</span>' -&gt; <span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">rargs</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">rargs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">rf</span>' <span class="id">vf</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">rargs</span>' <span class="id">targs</span> <span class="id">vargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">classify_fun</span> (<span class="id">typeof</span> <span class="id">rf</span>) = <span class="id">fun_case_f</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_funct</span> <span class="id">ge</span> <span class="id">vf</span> = <span class="id">Some</span> <span class="id">fd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_of_fundef</span> <span class="id">fd</span> = <span class="id">Tfunction</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">m2</span> <span class="id">fd</span> <span class="id">vargs</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">vres</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecall</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span>) (<span class="id">t1</span>**<span class="id">t2</span>**<span class="id">t3</span>) <span class="id">m3</span> (<span class="kwd">Eval</span> <span class="id">vres</span> <span class="id">ty</span>)<br/>
<br/>
<span class="kwd">with</span> <span class="id">eval_exprlist</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">exprlist</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">exprlist</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">eval_nil</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m</span> <span class="id">Enil</span> <span class="id">E0</span> <span class="id">m</span> <span class="id">Enil</span><br/>
&nbsp;&nbsp;| <span class="id">eval_cons</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">al</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' <span class="id">t2</span> <span class="id">m2</span> <span class="id">al</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' -&gt; <span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">al</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">al</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Econs</span> <span class="id">a1</span> <span class="id">al</span>) (<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m2</span> (<span class="id">Econs</span> <span class="id">a1</span>' <span class="id">al</span>')<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">exec_stmt</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">out</span></span> describes the execution of
  the statement <span class="bracket"><span class="id">s</span></span>.  <span class="bracket"><span class="id">out</span></span> is the outcome for this execution.
  <span class="bracket"><span class="id">m1</span></span> is the initial memory state, <span class="bracket"><span class="id">m2</span></span> the final memory state.
  <span class="bracket"><span class="id">t</span></span> is the trace of input/output events performed during this
  evaluation. </div>
<br/>
<span class="kwd">with</span> <span class="id">exec_stmt</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">statement</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">outcome</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">exec_Sskip</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">Sskip</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> <span class="id">m</span> <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sdo</span>:     <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdo</span> <span class="id">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">m</span>' <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sseq_1</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Ssequence</span> <span class="id">s1</span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m2</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sseq_2</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out</span> &lt;&gt; <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Ssequence</span> <span class="id">s1</span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t1</span> <span class="id">m1</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sifthenelse</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">s1</span> <span class="kwd">else</span> <span class="id">s2</span>) <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sifthenelse</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m2</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sreturn_none</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sreturn</span> <span class="id">None</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> <span class="id">m</span> (<span class="id">Out_return</span> <span class="id">None</span>)<br/>
&nbsp;&nbsp;| <span class="id">exec_Sreturn_some</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sreturn</span> (<span class="id">Some</span> <span class="id">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">m</span>' (<span class="id">Out_return</span> (<span class="id">Some</span>(<span class="id">v</span>, <span class="id">typeof</span> <span class="id">a</span>)))<br/>
&nbsp;&nbsp;| <span class="id">exec_Sbreak</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">Sbreak</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> <span class="id">m</span> <span class="id">Out_break</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Scontinue</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">Scontinue</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">E0</span> <span class="id">m</span> <span class="id">Out_continue</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Swhile_false</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">m</span>' <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Swhile_stop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span>' <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_break_or_return</span> <span class="id">out</span>' <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span>**<span class="id">t2</span>) <span class="id">m2</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Swhile_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m2</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t3</span> <span class="id">m3</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span> ** <span class="id">t3</span>) <span class="id">m3</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sdowhile_false</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m2</span> <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sdowhile_stop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m1</span> <span class="id">out1</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m1</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_break_or_return</span> <span class="id">out1</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">m1</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sdowhile_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m2</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t3</span> <span class="id">m3</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span> ** <span class="id">t3</span>) <span class="id">m3</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sfor_start</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">out</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m2</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sfor_false</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> <span class="id">m</span>' <span class="id">Out_normal</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sfor_stop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_break_or_return</span> <span class="id">out1</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m2</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sfor_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">t4</span> <span class="id">m4</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">a3</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m3</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t4</span> <span class="id">m4</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span> ** <span class="id">t3</span> ** <span class="id">t4</span>) <span class="id">m4</span> <span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id">exec_Sswitch</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">n</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_switch_arg</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) = <span class="id">Some</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="id">seq_of_labeled_statement</span> (<span class="id">select_switch</span> <span class="id">n</span> <span class="id">sl</span>)) <span class="id">t2</span> <span class="id">m2</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sswitch</span> <span class="id">a</span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">t1</span> ** <span class="id">t2</span>) <span class="id">m2</span> (<span class="id">outcome_switch</span> <span class="id">out</span>)<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">eval_funcall</span> <span class="id">m1</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">res</span></span> describes the invocation of
  function <span class="bracket"><span class="id">fd</span></span> with arguments <span class="bracket"><span class="id">args</span></span>.  <span class="bracket"><span class="id">res</span></span> is the value returned
  by the call.  </div>
<br/>
<span class="kwd">with</span> <span class="id">eval_funcall</span>: <span class="id">mem</span> -&gt; <span class="id">fundef</span> -&gt; <span class="id">list</span> <span class="id">val</span> -&gt; <span class="id">trace</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">val</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">eval_funcall_internal</span>: <span class="kwd">forall</span> <span class="id">m</span> <span class="id">f</span> <span class="id">vargs</span> <span class="id">t</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span> <span class="id">out</span> <span class="id">vres</span> <span class="id">m4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_norepet</span> (<span class="id">var_names</span> <span class="id">f</span>.(<span class="id">fn_params</span>) ++ <span class="id">var_names</span> <span class="id">f</span>.(<span class="id">fn_vars</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">alloc_variables</span> <span class="id">ge</span> <span class="id">empty_env</span> <span class="id">m</span> (<span class="id">f</span>.(<span class="id">fn_params</span>) ++ <span class="id">f</span>.(<span class="id">fn_vars</span>)) <span class="id">e</span> <span class="id">m1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_parameters</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">f</span>.(<span class="id">fn_params</span>) <span class="id">vargs</span> <span class="id">m2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">f</span>.(<span class="id">fn_body</span>) <span class="id">t</span> <span class="id">m3</span> <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_result_value</span> <span class="id">out</span> <span class="id">f</span>.(<span class="id">fn_return</span>) <span class="id">vres</span> <span class="id">m3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Mem.free_list</span> <span class="id">m3</span> (<span class="id">blocks_of_env</span> <span class="id">ge</span> <span class="id">e</span>) = <span class="id">Some</span> <span class="id">m4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">m</span> (<span class="id">Internal</span> <span class="id">f</span>) <span class="id">vargs</span> <span class="id">t</span> <span class="id">m4</span> <span class="id">vres</span><br/>
&nbsp;&nbsp;| <span class="id">eval_funcall_external</span>: <span class="kwd">forall</span> <span class="id">m</span> <span class="id">ef</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> <span class="id">vargs</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">external_call</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">m</span> (<span class="id">External</span> <span class="id">ef</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span>) <span class="id">vargs</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">vres</span>.<br/>
<br/>
<span class="kwd">Scheme</span> <span class="id">eval_expression_ind5</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_expression</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">eval_expr_ind5</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_expr</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">eval_exprlist_ind5</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_exprlist</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">exec_stmt_ind5</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">exec_stmt</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">eval_funcall_ind5</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">eval_funcall</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">bigstep_induction</span> <span class="id">from</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression_ind5</span>,  <span class="id">eval_expr_ind5</span>,  <span class="id">eval_exprlist_ind5</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt_ind5</span>, <span class="id">eval_funcall_ind5</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">evalinf_expr</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">K</span> <span class="id">a</span> <span class="id">T</span></span> denotes the fact that expression <span class="bracket"><span class="id">a</span></span>
  diverges in initial state <span class="bracket"><span class="id">m1</span></span>.  <span class="bracket"><span class="id">T</span></span> is the trace of input/output
  events performed during this evaluation.  </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id">evalinf_expr</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">kind</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">traceinf</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">evalinf_field</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">f</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> (<span class="id">Efield</span> <span class="id">a</span> <span class="id">f</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_valof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Evalof</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_deref</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> (<span class="id">Ederef</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_addrof</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eaddrof</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_unop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eunop</span> <span class="id">op</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_binop_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">a2</span> <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_binop_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">a2</span> <span class="id">t2</span> <span class="id">op</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span> *** <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_cast</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecast</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_seqand</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqand</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_seqand_2</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqand</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_seqor</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_seqor_2</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eseqor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_condition</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Econdition</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_condition_2</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> <span class="id">t2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a1</span>) <span class="id">m</span>' = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">a2</span> <span class="kwd">else</span> <span class="id">a3</span>) <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Econdition</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_assign_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">a2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassign</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_assign_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">a2</span> <span class="id">t2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassign</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span> *** <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_assignop_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">a2</span> <span class="id">op</span> <span class="id">tyres</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">tyres</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_assignop_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' <span class="id">a2</span> <span class="id">t2</span> <span class="id">op</span> <span class="id">tyres</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m</span>' <span class="id">a1</span>' -&gt; <span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">tyres</span> <span class="id">ty</span>) (<span class="id">t1</span> *** <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_postincr</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">id</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">LV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">a</span> <span class="id">ty</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_comma_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">a2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecomma</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_comma_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' <span class="id">v1</span> <span class="id">a2</span> <span class="id">t2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' -&gt; <span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a1</span>' <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty</span> = <span class="id">typeof</span> <span class="id">a2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">RV</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecomma</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span> *** <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_call_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">a2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecall</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_call_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' <span class="id">a2</span> <span class="id">t2</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_exprlist</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecall</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) (<span class="id">t1</span> *** <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">evalinf_call</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">rf</span>' <span class="id">t2</span> <span class="id">m2</span> <span class="id">rargs</span>' <span class="id">vf</span> <span class="id">vargs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> <span class="id">fd</span> <span class="id">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">rf</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">rf</span>' -&gt; <span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">rargs</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">rargs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_rvalue</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">rf</span>' <span class="id">vf</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_simple_list</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">rargs</span>' <span class="id">targs</span> <span class="id">vargs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">classify_fun</span> (<span class="id">typeof</span> <span class="id">rf</span>) = <span class="id">fun_case_f</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_funct</span> <span class="id">ge</span> <span class="id">vf</span> = <span class="id">Some</span> <span class="id">fd</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_of_fundef</span> <span class="id">fd</span> = <span class="id">Tfunction</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_funcall</span> <span class="id">m2</span> <span class="id">fd</span> <span class="id">vargs</span> <span class="id">t3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> (<span class="id">Ecall</span> <span class="id">rf</span> <span class="id">rargs</span> <span class="id">ty</span>) (<span class="id">t1</span>***<span class="id">t2</span>***<span class="id">t3</span>)<br/>
<br/>
<span class="kwd">with</span> <span class="id">evalinf_exprlist</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">exprlist</span> -&gt; <span class="id">traceinf</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">evalinf_cons_left</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">al</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_exprlist</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Econs</span> <span class="id">a1</span> <span class="id">al</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">evalinf_cons_right</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">al</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">a1</span>' -&gt; <span class="id">evalinf_exprlist</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">al</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_exprlist</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Econs</span> <span class="id">a1</span> <span class="id">al</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">execinf_stmt</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t</span></span> describes the diverging execution of
  the statement <span class="bracket"><span class="id">s</span></span>.  </div>
<br/>
<span class="kwd">with</span> <span class="id">execinf_stmt</span>: <span class="id">env</span> -&gt; <span class="id">mem</span> -&gt; <span class="id">statement</span> -&gt; <span class="id">traceinf</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sdo</span>:     <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdo</span> <span class="id">a</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sseq_1</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Ssequence</span> <span class="id">s1</span> <span class="id">s2</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sseq_2</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s2</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Ssequence</span> <span class="id">s1</span> <span class="id">s2</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sifthenelse_test</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sifthenelse</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sifthenelse</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v1</span> <span class="id">t2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v1</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">s1</span> <span class="kwd">else</span> <span class="id">s2</span>) <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sifthenelse</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sreturn_some</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sreturn</span> (<span class="id">Some</span> <span class="id">a</span>)) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Swhile_test</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Swhile_body</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Swhile_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m2</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Swhile</span> <span class="id">a</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>***<span class="id">t3</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sdowhile_body</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sdowhile_test</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sdowhile_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span> <span class="id">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">a</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) <span class="id">m2</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m2</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>) <span class="id">t3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sdowhile</span> <span class="id">a</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>***<span class="id">t3</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_start_1</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_start_2</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">m1</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a1</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">Out_normal</span> -&gt; <span class="id">a1</span> &lt;&gt; <span class="id">Sskip</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_test</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a2</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_body</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_next</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">a3</span> <span class="id">t3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>***<span class="id">t3</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sfor_loop</span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">t4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a2</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bool_val</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a2</span>) <span class="id">m1</span> = <span class="id">Some</span> <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">s</span> <span class="id">t2</span> <span class="id">m2</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">out_normal_or_continue</span> <span class="id">out1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">a3</span> <span class="id">t3</span> <span class="id">m3</span> <span class="id">Out_normal</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m3</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">t4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) (<span class="id">t1</span>***<span class="id">t2</span>***<span class="id">t3</span>***<span class="id">t4</span>)<br/>
&nbsp;&nbsp;| <span class="id">execinf_Sswitch_expr</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">RV</span> <span class="id">a</span> <span class="id">t1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sswitch</span> <span class="id">a</span> <span class="id">sl</span>) <span class="id">t1</span><br/>
&nbsp;&nbsp;| <span class="id">execinf_Sswitch_body</span>:   <span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">n</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sem_switch_arg</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>) = <span class="id">Some</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m1</span> (<span class="id">seq_of_labeled_statement</span> (<span class="id">select_switch</span> <span class="id">n</span> <span class="id">sl</span>)) <span class="id">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> (<span class="id">Sswitch</span> <span class="id">a</span> <span class="id">sl</span>) (<span class="id">t1</span>***<span class="id">t2</span>)<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">evalinf_funcall</span> <span class="id">m1</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">res</span></span> describes a diverging
  invocation of function <span class="bracket"><span class="id">fd</span></span> with arguments <span class="bracket"><span class="id">args</span></span>.  </div>
<br/>
<span class="kwd">with</span> <span class="id">evalinf_funcall</span>: <span class="id">mem</span> -&gt; <span class="id">fundef</span> -&gt; <span class="id">list</span> <span class="id">val</span> -&gt; <span class="id">traceinf</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">evalinf_funcall_internal</span>: <span class="kwd">forall</span> <span class="id">m</span> <span class="id">f</span> <span class="id">vargs</span> <span class="id">t</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_norepet</span> (<span class="id">var_names</span> <span class="id">f</span>.(<span class="id">fn_params</span>) ++ <span class="id">var_names</span> <span class="id">f</span>.(<span class="id">fn_vars</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">alloc_variables</span> <span class="id">ge</span> <span class="id">empty_env</span> <span class="id">m</span> (<span class="id">f</span>.(<span class="id">fn_params</span>) ++ <span class="id">f</span>.(<span class="id">fn_vars</span>)) <span class="id">e</span> <span class="id">m1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_parameters</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">f</span>.(<span class="id">fn_params</span>) <span class="id">vargs</span> <span class="id">m2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">f</span>.(<span class="id">fn_body</span>) <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_funcall</span> <span class="id">m</span> (<span class="id">Internal</span> <span class="id">f</span>) <span class="id">vargs</span> <span class="id">t</span>.<br/>
<br/>
<h2> Implication from big-step semantics to transition semantics </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id">outcome_state_match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id">env</span>) (<span class="id">m</span>: <span class="id">mem</span>) (<span class="id">f</span>: <span class="id">function</span>) (<span class="id">k</span>: <span class="id">cont</span>): <span class="id">outcome</span> -&gt; <span class="id">state</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">osm_normal</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span> <span class="id">f</span> <span class="id">k</span> <span class="id">Out_normal</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">osm_break</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span> <span class="id">f</span> <span class="id">k</span> <span class="id">Out_break</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">Sbreak</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">osm_continue</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span> <span class="id">f</span> <span class="id">k</span> <span class="id">Out_continue</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">Scontinue</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">osm_return_none</span>: <span class="kwd">forall</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">call_cont</span> <span class="id">k</span>' = <span class="id">call_cont</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span> <span class="id">f</span> <span class="id">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Out_return</span> <span class="id">None</span>) (<span class="id">State</span> <span class="id">f</span> (<span class="id">Sreturn</span> <span class="id">None</span>) <span class="id">k</span>' <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id">osm_return_some</span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">call_cont</span> <span class="id">k</span>' = <span class="id">call_cont</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span> <span class="id">f</span> <span class="id">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Out_return</span> (<span class="id">Some</span> (<span class="id">v</span>, <span class="id">ty</span>))) (<span class="id">ExprState</span> <span class="id">f</span> (<span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span>) (<span class="id">Kreturn</span> <span class="id">k</span>') <span class="id">e</span> <span class="id">m</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_call_cont_call_cont</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">is_call_cont</span> <span class="id">k</span> -&gt; <span class="id">call_cont</span> <span class="id">k</span> = <span class="id">k</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4181')">Proof.</div>
<div class="proofscript" id="proof4181">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">contradiction</span> || <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">leftcontext_compose</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k2</span> <span class="id">k3</span> <span class="id">C2</span>, <span class="id">leftcontext</span> <span class="id">k2</span> <span class="id">k3</span> <span class="id">C2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k1</span> <span class="id">C1</span>, <span class="id">leftcontext</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">k1</span> <span class="id">k3</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C2</span>(<span class="id">C1</span> <span class="id">x</span>))<br/>
<span class="kwd">with</span> <span class="id">leftcontextlist_compose</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k2</span> <span class="id">C2</span>, <span class="id">leftcontextlist</span> <span class="id">k2</span> <span class="id">C2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k1</span> <span class="id">C1</span>, <span class="id">leftcontext</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">C1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">leftcontextlist</span> <span class="id">k1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C2</span>(<span class="id">C1</span> <span class="id">x</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4182')">Proof.</div>
<div class="proofscript" id="proof4182">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">try</span> (<span class="id">constructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C1</span> <span class="id">x</span>) <span class="kwd">with</span> <span class="id">C1</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprlist_app_leftcontext</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl1</span> <span class="id">rl2</span>,<br/>
&nbsp;&nbsp;<span class="id">simplelist</span> <span class="id">rl1</span> = <span class="id">true</span> -&gt; <span class="id">leftcontextlist</span> <span class="id">RV</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">exprlist_app</span> <span class="id">rl1</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">rl2</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4183')">Proof.</div>
<div class="proofscript" id="proof4183">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lctx_list_head</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">andb_prop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id">lctx_list_tail</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprlist_app_simple</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl1</span> <span class="id">rl2</span>,<br/>
&nbsp;&nbsp;<span class="id">simplelist</span> (<span class="id">exprlist_app</span> <span class="id">rl1</span> <span class="id">rl2</span>) = <span class="id">simplelist</span> <span class="id">rl1</span> &amp;&amp; <span class="id">simplelist</span> <span class="id">rl2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4184')">Proof.</div>
<div class="proofscript" id="proof4184">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl1</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">IHrl1</span>. <span class="tactic">apply</span> <span class="id">andb_assoc</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigstep_to_steps</span>:<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>'))<br/>
/\(<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>, <span class="id">leftcontext</span> <span class="id">K</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">a</span>' = <span class="id">true</span> /\ <span class="id">typeof</span> <span class="id">a</span>' = <span class="id">typeof</span> <span class="id">a</span> /\<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>') <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>'))<br/>
/\(<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">al</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">al</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m</span> <span class="id">al</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">al</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a1</span> <span class="id">al2</span> <span class="id">ty</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>, <span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">simple</span> <span class="id">a1</span> = <span class="id">true</span> -&gt; <span class="id">simplelist</span> <span class="id">al2</span> = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">simplelist</span> <span class="id">al</span>' = <span class="id">true</span> /\<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> <span class="id">al</span>) <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> <span class="id">al</span>') <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>'))<br/>
/\(<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> <span class="id">S</span> /\ <span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">f</span> <span class="id">k</span> <span class="id">out</span> <span class="id">S</span>)<br/>
/\(<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">res</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">res</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">is_call_cont</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">Callstate</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">k</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">Returnstate</span> <span class="id">res</span> <span class="id">k</span> <span class="id">m</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4185')">Proof.</div>
<div class="proofscript" id="proof4185">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">bigstep_induction</span>; <span class="tactic">intros</span>.<br/>
&nbsp;expression,&nbsp;general&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>) <span class="id">f</span> <span class="id">k</span>). <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">match</span> <span class="id">a</span>' <span class="kwd">with</span> <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">False</span> | <span class="id">_</span> =&gt; <span class="id">True</span> <span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>')).<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">step_expr</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id">B</span> <span class="kwd">in</span> <span class="id">C</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;val&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;var&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;field&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Efield</span> <span class="id">x</span> <span class="id">f</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;valof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;valof&nbsp;volatile&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">step_rvalof_volatile</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ederef</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eaddrof</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eunop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;binop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span>' <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecast</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;seqand&nbsp;true&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H4</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eparen</span> <span class="id">x</span> <span class="id">type_bool</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqand_true</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_paren</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">F</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqand&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqand_false</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H4</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eparen</span> <span class="id">x</span> <span class="id">type_bool</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqor_false</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_paren</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">F</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;true&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqor_true</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econdition</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H4</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eparen</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_condition</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">G</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_paren</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;sizeof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;alignof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">x</span> <span class="id">r</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">l</span>' <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">step_assign</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">r</span> <span class="id">tyres</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H2</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">l</span>' <span class="id">x</span> <span class="id">tyres</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">step_assignop</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">rewrite</span> <span class="id">F</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">step_postincr</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
&nbsp;comma&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecomma</span> <span class="id">x</span> <span class="id">r2</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H3</span> <span class="id">C</span>). <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">E</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_comma</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">rargs</span> <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H2</span> <span class="id">rf</span>' <span class="id">Enil</span> <span class="id">ty</span> <span class="id">C</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">E</span> <span class="id">F</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_call</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">H9</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;nil&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;cons&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H0</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">a0</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">al</span>)) <span class="id">ty</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">exprlist_app_leftcontext</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H2</span> <span class="id">a0</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> (<span class="id">Econs</span> <span class="id">a1</span>' <span class="id">Enil</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">exprlist_app_simple</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H5</span>; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">exprlist_app_assoc</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">E</span> <span class="id">F</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;skip&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;do&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;sequence&nbsp;2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kseq</span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H2</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>. <span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;sequence&nbsp;1&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kseq</span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">S2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sbreak</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_continue</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Scontinue</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">S1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>; <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_break_seq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_continue_seq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">congruence</span> || <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;ifthenelse&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_ifthenelse_1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">eapply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. 2: <span class="id">eexact</span> <span class="id">A1</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_ifthenelse_2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;return&nbsp;none&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;return&nbsp;some&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_return_1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;break&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;continue&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;while&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_while</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_while_false</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;while&nbsp;stop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> (<span class="id">Kwhile2</span> <span class="id">a</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">S2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">S1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_while</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_while_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B1</span>. <span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">B1</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;while&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> (<span class="id">Kwhile2</span> <span class="id">a</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H6</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_while</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_while_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_while</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;dowhile&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kdowhile1</span> <span class="id">a</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_skip_or_continue_dowhile</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">apply</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_dowhile_false</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;dowhile&nbsp;stop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kdowhile1</span> <span class="id">a</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">S2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">S1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_dowhile</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B1</span>. <span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">B1</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;dowhile&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kdowhile1</span> <span class="id">a</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H6</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_skip_or_continue_dowhile</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_dowhile_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;for&nbsp;start&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">a1</span> = <span class="id">Sskip</span> \/ <span class="id">a1</span> &lt;&gt; <span class="id">Sskip</span>). <span class="tactic">destruct</span> <span class="id">a1</span>; <span class="tactic">auto</span>; <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a1</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">f</span> (<span class="id">Kseq</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span>) <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H2</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for_start</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>. <span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;for&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_for_false</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;for&nbsp;stop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> (<span class="id">Kfor3</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">S2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">S1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_for_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B1</span>. <span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">B1</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;for&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> (<span class="id">Kfor3</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H6</span> <span class="id">f</span> (<span class="id">Kfor4</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H8</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S3</span> [<span class="id">A3</span> <span class="id">B3</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S3</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_for_true</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span> <span class="kwd">with</span> (<span class="id">s2</span> := <span class="id">State</span> <span class="id">f</span> <span class="id">a3</span> (<span class="id">Kfor4</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s</span> <span class="id">k</span>) <span class="id">e</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">A3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;switch&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> (<span class="id">Kswitch2</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">S2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">out</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_normal</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_break</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Sskip</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Out_continue</span> =&gt; <span class="id">State</span> <span class="id">f</span> <span class="id">Scontinue</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">S1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_switch</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_expr_switch</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>; <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_refl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">S2</span>. <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">simpl</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;call&nbsp;internal&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H3</span> <span class="id">f</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_internal_function</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;Out_normal&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fn_return</span> <span class="id">f</span> = <span class="id">Tvoid</span> /\ <span class="id">vres</span> = <span class="id">Vundef</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">fn_return</span> <span class="id">f</span>); <span class="tactic">auto</span> || <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span> <span class="id">vres</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_skip_call</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Out_return&nbsp;None&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fn_return</span> <span class="id">f</span> = <span class="id">Tvoid</span> /\ <span class="id">vres</span> = <span class="id">Vundef</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">fn_return</span> <span class="id">f</span>); <span class="tactic">auto</span> || <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span> <span class="id">vres</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id">is_call_cont_call_cont</span> <span class="id">k</span> <span class="id">H6</span>). <span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_return_0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;Out_return&nbsp;Some&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> &lt;- (<span class="id">is_call_cont_call_cont</span> <span class="id">k</span> <span class="id">H6</span>). <span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">eapply</span> <span class="id">step_return_2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
<br/>
&nbsp;call&nbsp;external&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_external_function</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_expression_to_steps</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_expression</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> <span class="id">a</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="kwd">Eval</span> <span class="id">v</span> (<span class="id">typeof</span> <span class="id">a</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>').<br/>
<span class="kwd">Proof</span> (<span class="id">proj1</span> <span class="id">bigstep_to_steps</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_expr_to_steps</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>, <span class="id">leftcontext</span> <span class="id">K</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">simple</span> <span class="id">a</span>' = <span class="id">true</span> /\ <span class="id">typeof</span> <span class="id">a</span>' = <span class="id">typeof</span> <span class="id">a</span> /\<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>') <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>').<br/>
<span class="kwd">Proof</span> (<span class="id">proj1</span> (<span class="id">proj2</span> <span class="id">bigstep_to_steps</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_exprlist_to_steps</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">al</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">al</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eval_exprlist</span> <span class="id">e</span> <span class="id">m</span> <span class="id">al</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">al</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a1</span> <span class="id">al2</span> <span class="id">ty</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>, <span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">simple</span> <span class="id">a1</span> = <span class="id">true</span> -&gt; <span class="id">simplelist</span> <span class="id">al2</span> = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">simplelist</span> <span class="id">al</span>' = <span class="id">true</span> /\<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> <span class="id">al</span>) <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">t</span> (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al2</span> <span class="id">al</span>') <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>').<br/>
<span class="kwd">Proof</span> (<span class="id">proj1</span> (<span class="id">proj2</span> (<span class="id">proj2</span> <span class="id">bigstep_to_steps</span>))).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">exec_stmt_to_steps</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">out</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exec_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span> <span class="id">S</span> /\ <span class="id">outcome_state_match</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">f</span> <span class="id">k</span> <span class="id">out</span> <span class="id">S</span>.<br/>
<span class="kwd">Proof</span> (<span class="id">proj1</span> (<span class="id">proj2</span> (<span class="id">proj2</span> (<span class="id">proj2</span> <span class="id">bigstep_to_steps</span>)))).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eval_funcall_to_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">m</span>' <span class="id">res</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id">is_call_cont</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">star</span> <span class="id">step</span> <span class="id">ge</span> (<span class="id">Callstate</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">k</span> <span class="id">m</span>) <span class="id">t</span> (<span class="id">Returnstate</span> <span class="id">res</span> <span class="id">k</span> <span class="id">m</span>').<br/>
<span class="kwd">Proof</span> (<span class="id">proj2</span> (<span class="id">proj2</span> (<span class="id">proj2</span> (<span class="id">proj2</span> <span class="id">bigstep_to_steps</span>)))).<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">esize</span> (<span class="id">a</span>: <span class="id">expr</span>) : <span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Eloc</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; 1%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Evar</span> <span class="id">_</span> <span class="id">_</span> =&gt; 1%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Ederef</span> <span class="id">r1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Efield</span> <span class="id">l1</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span>)<br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">O</span><br/>
&nbsp;&nbsp;| <span class="id">Evalof</span> <span class="id">l1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Eaddrof</span> <span class="id">l1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Eunop</span> <span class="id">_</span> <span class="id">r1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Ebinop</span> <span class="id">_</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span> + <span class="id">esize</span> <span class="id">r2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Ecast</span> <span class="id">r1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Eseqand</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Eseqor</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Econdition</span> <span class="id">r1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Esizeof</span> <span class="id">_</span> <span class="id">_</span> =&gt; 1%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Ealignof</span> <span class="id">_</span> <span class="id">_</span> =&gt; 1%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Eassign</span> <span class="id">l1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span> + <span class="id">esize</span> <span class="id">r2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Eassignop</span> <span class="id">_</span> <span class="id">l1</span> <span class="id">r2</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span> + <span class="id">esize</span> <span class="id">r2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Epostincr</span> <span class="id">_</span> <span class="id">l1</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">l1</span>)<br/>
&nbsp;&nbsp;| <span class="id">Ecomma</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span> + <span class="id">esize</span> <span class="id">r2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Ecall</span> <span class="id">r1</span> <span class="id">rl2</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span> + <span class="id">esizelist</span> <span class="id">rl2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">rl</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esizelist</span> <span class="id">rl</span>)<br/>
&nbsp;&nbsp;| <span class="id">Eparen</span> <span class="id">r1</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id">esizelist</span> (<span class="id">el</span>: <span class="id">exprlist</span>) : <span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">el</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Enil</span> =&gt; <span class="id">O</span><br/>
&nbsp;&nbsp;| <span class="id">Econs</span> <span class="id">r1</span> <span class="id">rl2</span> =&gt; <span class="id">S</span>(<span class="id">esize</span> <span class="id">r1</span> + <span class="id">esizelist</span> <span class="id">rl2</span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">leftcontext_size</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">from</span> <span class="id">to</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;(<span class="id">esize</span> <span class="id">e1</span> &lt; <span class="id">esize</span> <span class="id">e2</span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">esize</span> (<span class="id">C</span> <span class="id">e1</span>) &lt; <span class="id">esize</span> (<span class="id">C</span> <span class="id">e2</span>))%<span class="id">nat</span><br/>
<span class="kwd">with</span> <span class="id">leftcontextlist_size</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">from</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;<span class="id">leftcontextlist</span> <span class="id">from</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;(<span class="id">esize</span> <span class="id">e1</span> &lt; <span class="id">esize</span> <span class="id">e2</span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">esizelist</span> (<span class="id">C</span> <span class="id">e1</span>) &lt; <span class="id">esizelist</span> (<span class="id">C</span> <span class="id">e2</span>))%<span class="id">nat</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4186')">Proof.</div>
<div class="proofscript" id="proof4186">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">leftcontextlist_size</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">leftcontextlist_size</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">leftcontext_size</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">arith</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">evalinf_funcall_steps</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id">evalinf_funcall</span> <span class="id">m</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">forever_N</span> <span class="id">step</span> <span class="id">lt</span> <span class="id">ge</span> <span class="id">O</span> (<span class="id">Callstate</span> <span class="id">fd</span> <span class="id">args</span> <span class="id">k</span> <span class="id">m</span>) <span class="id">t</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4187')">Proof.</div>
<div class="proofscript" id="proof4187">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COF</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">COS</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">execinf_stmt</span> <span class="id">e</span> <span class="id">m</span> <span class="id">s</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">forever_N</span> <span class="id">step</span> <span class="id">lt</span> <span class="id">ge</span> <span class="id">O</span> (<span class="id">State</span> <span class="id">f</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COS</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">COE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_expr</span> <span class="id">e</span> <span class="id">m</span> <span class="id">K</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">K</span> <span class="id">RV</span> <span class="id">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">forever_N</span> <span class="id">step</span> <span class="id">lt</span> <span class="id">ge</span> (<span class="id">esize</span> <span class="id">a</span>) (<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> <span class="id">a</span>) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COE</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">COEL</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span> <span class="id">a1</span> <span class="id">al</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_exprlist</span> <span class="id">e</span> <span class="id">m</span> <span class="id">a</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">leftcontext</span> <span class="id">RV</span> <span class="id">RV</span> <span class="id">C</span> -&gt; <span class="id">simple</span> <span class="id">a1</span> = <span class="id">true</span> -&gt; <span class="id">simplelist</span> <span class="id">al</span> = <span class="id">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">forever_N</span> <span class="id">step</span> <span class="id">lt</span> <span class="id">ge</span> (<span class="id">esizelist</span> <span class="id">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ExprState</span> <span class="id">f</span> (<span class="id">C</span> (<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al</span> <span class="id">a</span>) <span class="id">ty</span>)) <span class="id">k</span> <span class="id">e</span> <span class="id">m</span>) <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COEL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;cons&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">al0</span>)) <span class="id">ty</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">exprlist_app_leftcontext</span>; <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;cons&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">a1</span> (<span class="id">exprlist_app</span> <span class="id">al</span> (<span class="id">Econs</span> <span class="id">x</span> <span class="id">al0</span>)) <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">exprlist_app_leftcontext</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esizelist</span> <span class="id">al0</span>)).<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">R</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">Econs</span> <span class="id">a1</span>' <span class="id">al0</span>) <span class="kwd">with</span> (<span class="id">exprlist_app</span> (<span class="id">Econs</span> <span class="id">a1</span>' <span class="id">Enil</span>) <span class="id">al0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">exprlist_app_assoc</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COEL</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">exprlist_app_simple</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">rewrite</span> <span class="id">P</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;field&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Efield</span> <span class="id">x</span> <span class="id">f0</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;valof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Evalof</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ederef</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eaddrof</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eunop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;binop&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;binop&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a2</span>)). <span class="id">eexact</span> <span class="id">R</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span>' <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecast</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqand&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqand&nbsp;2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqand</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>. <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqand_true</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Q</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">x</span> <span class="id">type_bool</span> <span class="id">ty</span>))). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seqor&nbsp;2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eseqor</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>. <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_seqor_false</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Q</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">x</span> <span class="id">type_bool</span> <span class="id">ty</span>))). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;condition&nbsp;top&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econdition</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Econdition</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>. <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_condition</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">Q</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">C</span> (<span class="id">Eparen</span> <span class="id">x</span> <span class="id">ty</span> <span class="id">ty</span>))). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assign&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assign&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a2</span>)). <span class="id">eexact</span> <span class="id">R</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassign</span> <span class="id">a1</span>' <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assignop&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">tyres</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;assignop&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">tyres</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a2</span>)). <span class="id">eexact</span> <span class="id">R</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Eassignop</span> <span class="id">op</span> <span class="id">a1</span>' <span class="id">x</span> <span class="id">tyres</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a0</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Epostincr</span> <span class="id">id</span> <span class="id">x</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;comma&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecomma</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;comma&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecomma</span> <span class="id">x</span> <span class="id">a2</span> (<span class="id">typeof</span> <span class="id">a2</span>))) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>. <span class="id">eexact</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_comma</span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="id">C</span>); <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;call&nbsp;left&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esize</span> <span class="id">a1</span>)). <span class="tactic">apply</span> <span class="id">star_refl</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;call&nbsp;right&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">a2</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_star</span> <span class="kwd">with</span> (<span class="id">a2</span> := (<span class="id">esizelist</span> <span class="id">a2</span>)). <span class="id">eexact</span> <span class="id">R</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COEL</span> <span class="kwd">with</span> (<span class="id">al</span> := <span class="id">Enil</span>). <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_expr_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">C</span>(<span class="id">Ecall</span> <span class="id">x</span> <span class="id">rargs</span> <span class="id">ty</span>)) <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">leftcontext_compose</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eval_exprlist_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">rf</span>' <span class="id">Enil</span> <span class="id">ty</span> <span class="id">C</span> <span class="id">f</span> <span class="id">k</span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">S</span> <span class="id">T</span>]. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">eapply</span> <span class="id">plus_right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">R</span>. <span class="id">eexact</span> <span class="id">T</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id">step_call</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">COF</span>. <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
<br/>
&nbsp;statements&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;do&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seq&nbsp;1&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;seq&nbsp;2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">f</span> (<span class="id">Kseq</span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eauto</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;if&nbsp;test&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;if&nbsp;true/false&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">eapply</span> <span class="id">step_ifthenelse_2</span> <span class="kwd">with</span> (<span class="id">b</span> := <span class="id">b</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;return&nbsp;some&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;while&nbsp;test&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;while&nbsp;body&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_while_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;while&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">f</span> (<span class="id">Kwhile2</span> <span class="id">a</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_while_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_while</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;dowhile&nbsp;body&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;dowhile&nbsp;test&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">f</span> (<span class="id">Kdowhile1</span> <span class="id">a</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_one</span>. <span class="id">right</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_dowhile</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;dowhile&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">f</span> (<span class="id">Kdowhile1</span> <span class="id">a</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_dowhile</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_dowhile_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;start&nbsp;1&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">a1</span> &lt;&gt; <span class="id">Sskip</span>). <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">a1</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>. <span class="id">right</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;start&nbsp;2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">f</span> (<span class="id">Kseq</span> (<span class="id">Sfor</span> <span class="id">Sskip</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s0</span>) <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">star_one</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;test&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;body&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;next&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">f</span> (<span class="id">Kfor3</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="tactic">apply</span> <span class="id">star_one</span>; <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_for3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;for&nbsp;loop&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span> <span class="id">f</span> (<span class="id">Kfor3</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S1</span> [<span class="id">A1</span> <span class="id">B1</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">exec_stmt_to_steps</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="id">f</span> (<span class="id">Kfor4</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">s0</span> <span class="id">k</span>)) <span class="kwd">as</span> [<span class="id">S2</span> [<span class="id">A2</span> <span class="id">B2</span>]]; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">B2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>. <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_for_true</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_trans</span>. <span class="id">eexact</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_left</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">B1</span>; <span class="id">right</span>; <span class="tactic">apply</span> <span class="id">step_skip_or_continue_for3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="id">eexact</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;switch&nbsp;expr&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>; <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COE</span> <span class="kwd">with</span> (<span class="id">C</span> := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>.<br/>
&nbsp;switch&nbsp;body&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">plus_left</span>. <span class="id">right</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">star_right</span>. <span class="tactic">eapply</span> <span class="id">eval_expression_to_steps</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
<br/>
&nbsp;funcalls&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_plus</span>. <span class="tactic">apply</span> <span class="id">plus_one</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">COS</span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">BIGSTEP</span>.<br/>
<br/>
<h2> Whole-program behaviors, big-step style. </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id">bigstep_program_terminates</span> (<span class="id">p</span>: <span class="id">program</span>): <span class="id">trace</span> -&gt; <span class="id">int</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">bigstep_program_terminates_intro</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">f</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ge</span> := <span class="id">globalenv</span> <span class="id">p</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.init_mem</span> <span class="id">p</span> = <span class="id">Some</span> <span class="id">m0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_symbol</span> <span class="id">ge</span> <span class="id">p</span>.(<span class="id">prog_main</span>) = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_funct_ptr</span> <span class="id">ge</span> <span class="id">b</span> = <span class="id">Some</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_of_fundef</span> <span class="id">f</span> = <span class="id">Tfunction</span> <span class="id">Tnil</span> <span class="id">type_int32s</span> <span class="id">cc_default</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_funcall</span> <span class="id">ge</span> <span class="id">m0</span> <span class="id">f</span> <span class="id">nil</span> <span class="id">t</span> <span class="id">m1</span> (<span class="id">Vint</span> <span class="id">r</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bigstep_program_terminates</span> <span class="id">p</span> <span class="id">t</span> <span class="id">r</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">bigstep_program_diverges</span> (<span class="id">p</span>: <span class="id">program</span>): <span class="id">traceinf</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">bigstep_program_diverges_intro</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">f</span> <span class="id">m0</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ge</span> := <span class="id">globalenv</span> <span class="id">p</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.init_mem</span> <span class="id">p</span> = <span class="id">Some</span> <span class="id">m0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_symbol</span> <span class="id">ge</span> <span class="id">p</span>.(<span class="id">prog_main</span>) = <span class="id">Some</span> <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Genv.find_funct_ptr</span> <span class="id">ge</span> <span class="id">b</span> = <span class="id">Some</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_of_fundef</span> <span class="id">f</span> = <span class="id">Tfunction</span> <span class="id">Tnil</span> <span class="id">type_int32s</span> <span class="id">cc_default</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalinf_funcall</span> <span class="id">ge</span> <span class="id">m0</span> <span class="id">f</span> <span class="id">nil</span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bigstep_program_diverges</span> <span class="id">p</span> <span class="id">t</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">bigstep_semantics</span> (<span class="id">p</span>: <span class="id">program</span>) :=<br/>
&nbsp;&nbsp;<span class="id">Bigstep_semantics</span> (<span class="id">bigstep_program_terminates</span> <span class="id">p</span>) (<span class="id">bigstep_program_diverges</span> <span class="id">p</span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id">bigstep_semantics_sound</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id">bigstep_sound</span> (<span class="id">bigstep_semantics</span> <span class="id">p</span>) (<span class="id">semantics</span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4188')">Proof.</div>
<div class="proofscript" id="proof4188">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;termination&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">eval_funcall_to_steps</span>. <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;divergence&nbsp;*)</span>&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">forever_N_forever</span> <span class="kwd">with</span> (<span class="id">order</span> := <span class="id">lt</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lt_wf</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">evalinf_funcall_steps</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
