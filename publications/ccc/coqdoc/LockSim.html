<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module LockSim</title>
<meta name="description" content="Documentation of Coq module LockSim" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module LockSim</h1>
<div class="coq">
<span class="id">From</span> <span class="id">mathcomp.ssreflect</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">fintype</span> <span class="id">ssrnat</span>. <br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Axioms.html">Axioms</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="LDSim.html">LDSim</a></span> <span class="id"><a href="LDSimDefs.html">LDSimDefs</a></span> <span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span> <span class="id"><a href="ValRels.html">ValRels</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="SpecLang.html">SpecLang</a></span> <span class="id"><a href="SpecLangWDDET.html">SpecLangWDDET</a></span> <span class="id"><a href="code.html">code</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Memdata.html">Memdata</a></span> <span class="id"><a href="Memperm.html">Memperm</a></span> <span class="id"><a href="MemAux.html">MemAux</a></span> <span class="id"><a href="FMemLemmas.html">FMemLemmas</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="FMemory.html">FMemory</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">solv_eq</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">P</span> , <span class="id">H2</span> : ?<span class="id">P</span> |- <span class="id">_</span>] =&gt; <span class="tactic">clear</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">P</span> = <span class="id">_</span>, <span class="id">H2</span>: ?<span class="id">P</span> = <span class="id">_</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">P</span> = <span class="id">_</span> , <span class="id">H2</span>: <span class="id">_</span> = ?<span class="id">P</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span>: <span class="id">_</span> = ?<span class="id">P</span>, <span class="id">H2</span>: <span class="id">_</span> = ?<span class="id">P</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">Himp_init</span> :<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>(<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> {|<span class="id"><a href="AST.html#mkprogram">prog_defs</a></span> := <span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>; <span class="id">prog_public</span> := <span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>; <span class="id">prog_main</span> := 1%<span class="id">positive</span> |})),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fb</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#fb">fb</a></span> /\ <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#fb">fb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id"><a href="code.html#lock_acquire_fnbody">lock_acquire_fnbody</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9371')">Proof.</div>
<div class="proofscript" id="proof9371">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;1-3:<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H10</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_lock_release_from_ge">find_lock_release_from_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">Himp_init</span> :<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>(<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) 1%<span class="id">positive</span>))),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fb</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#fb">fb</a></span> /\ <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#fb">fb</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id"><a href="code.html#lock_release_fnbody">lock_release_fnbody</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9372')">Proof.</div>
<div class="proofscript" id="proof9372">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H10</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="lockvar">lockvar</a></span>:=  (<span class="id"><a href="AST.html#mkglobvar">mkglobvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> (<span class="id"><a href="AST.html#Init_int32">Init_int32</a></span> <span class="id"><a href="Integers.html#Int.one">Int.one</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span>  (<span class="id">Himp_init</span> :<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>(<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) 1%<span class="id">positive</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> /\ <span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#lockvar">lockvar</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9373')">Proof.</div>
<div class="proofscript" id="proof9373">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">all</span>:<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="tactic">rewrite</span>&lt;- <span class="id">H10</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="find_symb_from_ge">find_symb_from_ge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span> <span class="id">id</span> (<span class="id">Himp_init</span> :<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>(<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) 1%<span class="id">positive</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> \/ <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> \/ <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9374')">Proof.</div>
<div class="proofscript" id="proof9374">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">id</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>;<span class="tactic">destruct</span> <span class="id">id</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>;<span class="tactic">try</span>  <span class="tactic">destruct</span> <span class="id">id</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="find_gvar_from_ge">find_gvar_from_ge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">b</span> <span class="id">id</span> <span class="id">v</span> (<span class="id">Himp_init</span> :<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>(<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>) 1%<span class="id">positive</span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span> /\ <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="LockSim.html#lockvar">lockvar</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9375')">Proof.</div>
<div class="proofscript" id="proof9375">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">id</span>). <br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> *. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>. <span class="id">eexact</span> <span class="id">H8</span>. <span class="id">eexact</span> <span class="id">H12</span>. <span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H8</span> .<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">b0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">try</span>  <span class="tactic">destruct</span> <span class="id">b0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">id</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">try</span>  <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Record</span> <span class="id"><a name="ge_lessmatch">ge_lessmatch</a></span> {<span class="id">F1</span> <span class="id">V1</span> : <span class="kwd">Type</span>} (<span class="id">sge</span> : <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="LockSim.html#F1">F1</a></span> <span class="id"><a href="LockSim.html#V1">V1</a></span>) <br/>
(<span class="id">tge</span> : <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="LockSim.html#F1">F1</a></span> <span class="id"><a href="LockSim.html#V1">V1</a></span>) : <span class="kwd">Prop</span> := <span class="id"><a name="Build_ge_match">Build_ge_match</a></span><br/>
&nbsp;&nbsp;{ <span class="id"><a name="genv_public_eq">genv_public_eq</a></span> : <span class="kwd">forall</span> <span class="id">id</span> : <span class="id"><a href="AST.html#ident">ident</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="LockSim.html#sge">sge</a></span>) &lt;-&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="genv_symb_eq_dom">genv_symb_eq_dom</a></span> : <span class="kwd">forall</span> <span class="id">id</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="LockSim.html#sge">sge</a></span>) ! <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span>) ! <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="genv_defs_match">genv_defs_match</a></span> : <span class="kwd">forall</span> (<span class="id">id</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span class="id">b</span> <span class="id">b</span>' : <span class="id"><a href="Values.html#block">block</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="LockSim.html#sge">sge</a></span>) ! <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span>) ! <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="LDSimDefs.html#globdef_match">globdef_match</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="LockSim.html#sge">sge</a></span>) ! <span class="id"><a href="LockSim.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span>) ! <span class="id">b</span>';}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_related_ge_lessmatch">ge_related_ge_lessmatch</a></span>{<span class="id">F</span> <span class="id">V</span>}:<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">ge</span>', @<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#F">F</a></span> <span class="id"><a href="LockSim.html#V">V</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id">ge</span>'-&gt;@<span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#F">F</a></span> <span class="id"><a href="LockSim.html#V">V</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id">ge</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9376')">Proof.</div>
<div class="proofscript" id="proof9376">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">split</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">specialize</span> (<span class="id">H3</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="kwd">in</span> *;<span class="tactic">try</span> <span class="id">solv_eq</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H3</span> <span class="id">id</span>). <span class="id">inv</span> <span class="id">H3</span>;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="kwd">in</span> *;<span class="id">solv_eq</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge</span>)!<span class="id">b</span> <span class="id">eqn</span>:?;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_lessmatch_comm">ge_lessmatch_comm</a></span>{<span class="id">F</span> <span class="id">V</span>}: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, @<span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#F">F</a></span> <span class="id"><a href="LockSim.html#V">V</a></span> <span class="id"><a href="LockSim.html#x">x</a></span> <span class="id"><a href="LockSim.html#y">y</a></span> -&gt; <span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#y">y</a></span> <span class="id"><a href="LockSim.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9377')">Proof.</div>
<div class="proofscript" id="proof9377">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">eapply</span> <span class="id">genv_public_eq0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">eapply</span> <span class="id">genv_symb_eq_dom0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">genv_defs_match0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H1</span>;<span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H4</span>;<span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H1</span>;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_lessmatch_trans">ge_lessmatch_trans</a></span>{<span class="id">F</span> <span class="id">V</span>}: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>,@<span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#F">F</a></span> <span class="id"><a href="LockSim.html#V">V</a></span> <span class="id"><a href="LockSim.html#x">x</a></span> <span class="id"><a href="LockSim.html#y">y</a></span>-&gt; <span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#y">y</a></span> <span class="id"><a href="LockSim.html#z">z</a></span>-&gt;<span class="id"><a href="LockSim.html#ge_lessmatch">ge_lessmatch</a></span> <span class="id"><a href="LockSim.html#x">x</a></span> <span class="id"><a href="LockSim.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9378')">Proof.</div>
<div class="proofscript" id="proof9378">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1,1.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_public_eq0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_public_eq1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_public_eq0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_symb_eq_dom0</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_symb_eq_dom1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">genv_symb_eq_dom0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id">y</span>)!<span class="id">id</span> <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">genv_defs_match0</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">genv_defs_match1</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>;<span class="id">inv</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H7</span>;<span class="id">inv</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>;<span class="id">inv</span> <span class="id">H8</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">genv_symb_eq_dom0</span> <span class="kwd">in</span> <span class="id">Heqo</span>;<span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<span class="kwd">Notation</span> <span class="id"><a name="cu">cu</a></span>:= <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span> := <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="ge">ge</a></span>:=  (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span>  (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="LockSim.html#cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="LockSim.html#cu">cu</a></span>) 1%<span class="id">positive</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lock_acquire_init_state">lock_acquire_init_state</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tge</span>:<span class="id"><a href="SpecLang.html#genv">genv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Himp_init</span> : <span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="SpecLang.html#fn_body">fn_body</a></span> <span class="id"><a href="code.html#lock_acquire_fnbody">lock_acquire_fnbody</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9379')">Proof.</div>
<div class="proofscript" id="proof9379">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#init_core">init_core</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intros</span> [?[]].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#fundef_init">fundef_init</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="lock_release_init_state">lock_release_init_state</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tge</span>:<span class="id"><a href="SpecLang.html#genv">genv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Himp_init</span> : <span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="SpecLang.html#fn_body">fn_body</a></span> <span class="id"><a href="code.html#lock_release_fnbody">lock_release_fnbody</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9380')">Proof.</div>
<div class="proofscript" id="proof9380">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#init_core">init_core</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intros</span> [?[]].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#fundef_init">fundef_init</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="lock_init_state">lock_init_state</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">tge</span>:<span class="id"><a href="SpecLang.html#genv">genv</a></span>) <span class="id">id</span> <span class="id">args</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Himp_init</span> : <span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>) <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#tge">tge</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> <span class="id"><a href="LockSim.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> \/ <span class="id"><a href="LockSim.html#id">id</a></span> = <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9381')">Proof.</div>
<div class="proofscript" id="proof9381">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#init_core">init_core</a></span>,<span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span>,<span class="id"><a href="SpecLang.html#fundef_init">fundef_init</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>. <span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_symb_from_ge">find_symb_from_ge</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="store_v_load_eq_spec_m">store_v_load_eq_spec_m</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#n">n</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id">m</span>' <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9382')">Proof.</div>
<div class="proofscript" id="proof9382">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">SpecLang.storemax</a></span> <span class="kwd">in</span> *. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">SpecLang.loadmax</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">R</span>: <span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>' =  <span class="id"><a href="Maps.html#PMap.set">PMap.set</a></span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemory.html#Mem.setN">Mem.setN</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>)) 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>) !! <span class="id">b</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="FMemory.html#Mem.getN_setN_same">FMemory.Mem.getN_setN_same</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>)) = <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>, <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#big_endian">Archi.big_endian</a></span> <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.getN_setN_same">Mem.getN_setN_same</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="Memdata.html#decode_encode_val_general">decode_encode_val_general</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>) <span class="id"><a href="AST.html#Mint32">Mint32</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <br/>
&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span>. <br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx0</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>, <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">r</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Mem.perm_order</span>'. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadmax_embed_eq">loadmax_embed_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fl</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">embed</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id">m</span>' <span class="id"><a href="LockSim.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9383')">Proof.</div>
<div class="proofscript" id="proof9383">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>,<span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx0</span>;<span class="id">contradict</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx</span>;<span class="id">contradict</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>,<span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Section</span> <span class="id"><a name="SIMULATION">SIMULATION</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMULATION.sge">sge</a></span> <span class="id"><a name="SIMULATION.tge">tge</a></span>: <span class="id"><a href="SpecLang.html#genv">genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.SGEINIT">SGEINIT</a></span>: <span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.TGEINIT">TGEINIT</a></span>: <span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.SEQ">SEQ</a></span>: <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMULATION.b">b</a></span> <span class="id">b</span>' <span class="id"><a name="SIMULATION.b2">b2</a></span> <span class="id">b2</span>' <span class="id"><a name="SIMULATION.b3">b3</a></span> <span class="id">b3</span>':<span class="id"><a href="Values.html#block">block</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.SFIND">SFIND</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.TFIND">TFIND</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.SFIND2">SFIND2</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.TFIND2">TFIND2</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b2</span>'.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.SFIND3">SFIND3</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.TFIND3">TFIND3</a></span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b3</span>'.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="j">j</a></span> (<span class="id">bk</span>:<span class="id"><a href="Values.html#block">block</a></span>):<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Values.html#block">block</a></span>*<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>):=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> <span class="id"><a href="LockSim.html#bk">bk</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',0) <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span> <span class="id"><a href="LockSim.html#bk">bk</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>',0) <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span> <span class="id"><a href="LockSim.html#bk">bk</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b3</span>',0) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="BNEQ">BNEQ</a></span>: <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> &lt;&gt; <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span> /\ <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span> &lt;&gt; <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span> /\ <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> &lt;&gt; <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span> /\ <span class="id">b</span>' &lt;&gt; <span class="id">b2</span>' /\ <span class="id">b2</span>' &lt;&gt; <span class="id">b3</span>' /\ <span class="id">b</span>' &lt;&gt; <span class="id">b3</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9384')">Proof.</div>
<div class="proofscript" id="proof9384">
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>;<span class="tactic">intros</span> [?[]];<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="tactic">try</span> <span class="id">solv_eq</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="injective_j">injective_j</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">x</span> <span class="id">ofs</span> <span class="id">ofs</span>', <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#x">x</a></span>,<span class="id"><a href="LockSim.html#ofs">ofs</a></span>) -&gt; <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#x">x</a></span>,<span class="id">ofs</span>') -&gt; <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id">b</span>' /\ <span class="id"><a href="LockSim.html#ofs">ofs</a></span> = <span class="id">ofs</span>' /\ <span class="id"><a href="LockSim.html#ofs">ofs</a></span> = 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9385')">Proof.</div>
<div class="proofscript" id="proof9385">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#BNEQ">BNEQ</a></span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="id">inv</span> <span class="id">H</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="jb">jb</a></span> : <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',0). <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">congruence</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="jb2">jb2</a></span>: <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>',0). <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#BNEQ">BNEQ</a></span>. <span class="id">Hsimpl</span>. <span class="id">contradiction</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="jb3">jb3</a></span>: <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b3</span>',0). <span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#BNEQ">BNEQ</a></span>;<span class="id">Hsimpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="jbn">jbn</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id"><a href="LockSim.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#y">y</a></span>,<span class="id"><a href="LockSim.html#z">z</a></span>) -&gt; <span class="id"><a href="LockSim.html#z">z</a></span> = 0 /\ <span class="id"><a href="LockSim.html#x">x</a></span> = <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> \/ <span class="id"><a href="LockSim.html#x">x</a></span> = <span class="id"><a href="LockSim.html#SIMULATION.b2">b2</a></span> \/ <span class="id"><a href="LockSim.html#x">x</a></span> = <span class="id"><a href="LockSim.html#SIMULATION.b3">b3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9386')">Proof.</div>
<div class="proofscript" id="proof9386">
 <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span>;<span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Finject">Finject</a></span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>':=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="inj">inj</a></span>: <span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="valinj">valinj</a></span>: <span class="kwd">forall</span> (<span class="id">b1</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Memperm.Max</a></span> <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) !! <span class="id"><a href="LockSim.html#b1">b1</a></span>)(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span>+<span class="id"><a href="LockSim.html#delta">delta</a></span>) ((<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>')!!<span class="id"><a href="LockSim.html#b2">b2</a></span>));<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Ginject">Ginject</a></span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>':=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="ginj">ginj</a></span>: <span class="id"><a href="GMemory.html#GMem.inject">GMem.inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="gvalinj">gvalinj</a></span>: <span class="kwd">forall</span> (<span class="id">b1</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Memperm.Max</a></span> <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) !! <span class="id"><a href="LockSim.html#b1">b1</a></span>)(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span>+<span class="id"><a href="LockSim.html#delta">delta</a></span>) ((<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> <span class="id">m</span>')!!<span class="id"><a href="LockSim.html#b2">b2</a></span>));<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_mapped_inj">store_mapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">v2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALINJ</span>: <span class="kwd">forall</span> (<span class="id">b1</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Memperm.Max</a></span> <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)) !! <span class="id"><a href="LockSim.html#b1">b1</a></span>)(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span>+<span class="id"><a href="LockSim.html#delta">delta</a></span>) ((<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>))!!<span class="id"><a href="LockSim.html#b2">b2</a></span>))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id"><a href="LockSim.html#b2">b2</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n2">n2</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b1</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Memperm.Max</a></span> <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span>)) !! <span class="id"><a href="LockSim.html#b1">b1</a></span>)(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span>+<span class="id"><a href="LockSim.html#delta">delta</a></span>) ((<span class="id"><a href="GMemory.html#GMem.mem_contents">GMem.mem_contents</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n2">n2</a></span>))!!<span class="id"><a href="LockSim.html#b2">b2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9387')">Proof.</div>
<div class="proofscript" id="proof9387">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m2</span> <span class="id">b0</span> 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">ex_match</span>. <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">r</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> + 0 = <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">ex_match2</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">ex_match2</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;mem_contents&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> *;<span class="id">ex_match2</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b4</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b4</span>.<br/>
&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b5</span> = <span class="id">b0</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">b5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 = <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.setN_inj">Mem.setN_inj</a></span> <span class="kwd">with</span> (<span class="id">access</span> := <span class="kwd">fun</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memdata.html#encode_val_inject">encode_val_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b5</span> <span class="id">b0</span>). <span class="tactic">subst</span> <span class="id">b5</span>.<br/>
&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.setN_other">Mem.setN_other</a></span>. <span class="tactic">eapply</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H6</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_memval</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> *;<span class="id">ex_match2</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b4</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b4</span>.<br/>
&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b5</span> = <span class="id">b0</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">b5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 = <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.setN_inj">Mem.setN_inj</a></span> <span class="kwd">with</span> (<span class="id">access</span> := <span class="kwd">fun</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memdata.html#encode_val_inject">encode_val_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">VALINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b5</span> <span class="id">b0</span>). <span class="tactic">subst</span> <span class="id">b5</span>.<br/>
&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.setN_other">Mem.setN_other</a></span>. <span class="tactic">eapply</span> <span class="id">VALINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H6</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">VALINJ</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">store_reach</span>'':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span>  <span class="id">v</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">L</span> <span class="id">b</span>, <span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> -&gt; <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9388')">Proof.</div>
<div class="proofscript" id="proof9388">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">L</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHL</span> <span class="id">_</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">IHL</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">v</span>)) = <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span>,<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">v</span>))) = 4).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> 0).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 4 <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">omega</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 3 <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=3). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 2 <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=2). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 1 <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=1). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=0). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span> <span class="kwd">in</span> <span class="id">H7</span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="store_rc">store_rc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">v</span> <span class="id">b</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="Values.html#Vone">Vone</a></span> \/ <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="Values.html#Vzero">Vzero</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id"><a href="LockSim.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9389')">Proof.</div>
<div class="proofscript" id="proof9389">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">x</span>,<span class="id">v</span> = <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#x">x</a></span>). <span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">store_reach</span>'' <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">reachable_closure</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">reachable_closure</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">no_undef</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">x</span>,<span class="id">v</span> =<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#x">x</a></span>). <span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">x</span>)) = <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">x</span>))) = 4).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 4 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>. <span class="tactic">omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 3 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=3). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>. <span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 2 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=2). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 1 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=1). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=0). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">no_vundef</span> <span class="kwd">with</span>(<span class="id">q</span>:=<span class="id">q</span>)(<span class="id">n</span>:=<span class="id">n</span>) <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">x</span>,<span class="id">v</span> =<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="LockSim.html#x">x</a></span>). <span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemory.html#Mem.setN_outside">Mem.setN_outside</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">x</span>)) = <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">x</span>))) = 4).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 4 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>. <span class="tactic">omega</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 3 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=3). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>. <span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 2 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=2). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> 1 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=1). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">z</span>=0). <span class="tactic">omega</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#inj_bytes">inj_bytes</a></span>,<span class="id"><a href="Memdata.html#encode_int">encode_int</a></span>,<span class="id"><a href="Memdata.html#rev_if_be">rev_if_be</a></span>,<span class="id"><a href="Memdata.html#bytes_of_int">bytes_of_int</a></span>;<span class="id">ex_match2</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gso">ZMap.gso</a></span>;[|<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#ZMap.gss">ZMap.gss</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="bset_inject_no_overlap">bset_inject_no_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) <span class="id"><a href="LockSim.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9390')">Proof.</div>
<div class="proofscript" id="proof9390">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">inj_injective</span>. <span class="id">eexact</span> <span class="id">Hx</span>. <span class="id">eexact</span> <span class="id">Hx0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_Ginject">store_Ginject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, 0) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id"><a href="LockSim.html#b2">b2</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n1">n1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#n2">n2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9391')">Proof.</div>
<div class="proofscript" id="proof9391">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ginj0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#store_mapped_inj">store_mapped_inj</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> *;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="getN_inj">getN_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">f</span> : <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">m1</span> <span class="id">m2</span> : <span class="id"><a href="FMemory.html#mem">mem</a></span>) (<span class="id">b1</span> <span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="LockSim.html#n">n</a></span>) <span class="id"><a href="Memperm.html#Max">Memperm.Max</a></span> <span class="id"><a href="Memperm.html#Readable">Memperm.Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span>) (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="LockSim.html#n">n</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>) !! <span class="id"><a href="LockSim.html#b1">b1</a></span>) (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="LockSim.html#n">n</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span>+<span class="id"><a href="LockSim.html#delta">delta</a></span>) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>) !! <span class="id"><a href="LockSim.html#b2">b2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9392')">Proof.</div>
<div class="proofscript" id="proof9392">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">gvalinj0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> + 1) <span class="kwd">with</span> ((<span class="id">ofs</span> + 1) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "<span class="id">a</span> # <span class="id">b</span>" := (<span class="id"><a href="Maps.html#PMap.get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="tactic">at</span> <span class="id">level</span> 1).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadmax_finj">loadmax_finj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, 0) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id"><a href="LockSim.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9393')">Proof.</div>
<div class="proofscript" id="proof9393">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> (<span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>) 0 (<span class="id">m2</span>.(<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span>)#<span class="id">b0</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(0+0=0). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> = 4 + 0). <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>,<span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">ginj0</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mi_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">mi_perm</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span>+0=<span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>( (<span class="id"><a href="Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>  (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> (<span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span>) 0 (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>) # <span class="id">b1</span>)) = <span class="id">v1</span>). <span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memdata.html#decode_val_inject">decode_val_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#getN_inj">getN_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(2:=0).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">r</span>. <span class="id">instantiate</span>(1:=4%<span class="id">nat</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">assert</span>(0+0=0). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Section</span> <span class="id"><a name="SIMULATION.MATCHSTATE">MATCHSTATE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="st1">st1</a></span> := <span class="id"><a href="SpecLang.html#Sassign">Sassign</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="st2">st2</a></span> := <span class="id"><a href="SpecLang.html#Sassign">Sassign</a></span> <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="bexpr1">bexpr1</a></span>:= <span class="id"><a href="SpecLang.html#BEq">BEq</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="st3">st3</a></span>:= <span class="id"><a href="SpecLang.html#Sloadv">Sloadv</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="st4">st4</a></span>:= <span class="id"><a href="SpecLang.html#Sstorev">Sstorev</a></span> <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Notation</span> " '&lt;&lt;' <span class="id">x</span> '&gt;&gt;'" := (<span class="id"><a href="SpecLang.html#Satom">Satom</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Notation</span> " <span class="id">x</span> ';;' <span class="id">y</span>" := (<span class="id"><a href="SpecLang.html#Sseq">Sseq</a></span> <span class="id">x</span> <span class="id">y</span>)  (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Notation</span> " <span class="id">x</span> '--' <span class="id">y</span>":= (<span class="id"><a href="SpecLang.html#Kseq">Kseq</a></span> <span class="id">x</span> <span class="id">y</span>)  (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="lockfunc">lockfunc</a></span>:=  <span class="id"><a href="LockSim.html#st1">st1</a></span>;; <span class="id"><a href="LockSim.html#st2">st2</a></span>;; (<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt; ) ;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="SIMULATION.MATCHSTATE.mu">mu</a></span>:<span class="id"><a href="Injections.html#Mu">Mu</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMULATION.MATCHSTATE.INITGE">INITGE</a></span>:<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mu_inj_b">mu_inj_b</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9394')">Proof.</div>
<div class="proofscript" id="proof9394">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.INITGE">INITGE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">senv_injected</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="gmeminv">gmeminv</a></span> <span class="id">m1</span> <span class="id">m2</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>)) <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="grange_perm_eq">grange_perm_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">b</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',0)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.range_perm">GMem.range_perm</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.range_perm">GMem.range_perm</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id">b</span>' 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9395')">Proof.</div>
<div class="proofscript" id="proof9395">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.range_perm">GMem.range_perm</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">ginj0</span>. <span class="id">inv</span> <span class="id">mi_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> + 0 = <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="grange_perm_eq2">grange_perm_eq2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">b</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',0)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id">b</span>' 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9396')">Proof.</div>
<div class="proofscript" id="proof9396">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">ginj0</span>. <span class="id">inv</span> <span class="id">mi_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> + 0 = <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>;<span class="tactic">simpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">_</span> <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="store_gmeminv">store_gmeminv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">m2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="Values.html#Vone">Vone</a></span> \/ <span class="id"><a href="LockSim.html#v">v</a></span> = <span class="id"><a href="Values.html#Vzero">Vzero</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9397')">Proof.</div>
<div class="proofscript" id="proof9397">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">INITGE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#bset_inject_no_overlap">bset_inject_no_overlap</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#mu_inj_b">mu_inj_b</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#store_Ginject">store_Ginject</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">instantiate</span>(1:=<span class="id">v</span>);<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#store_rc">store_rc</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#store_rc">store_rc</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gmeminv_loadmax_inj">gmeminv_loadmax_inj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fl1</span> <span class="id">fm1</span> <span class="id">fl2</span> <span class="id">fm2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#fl1">fl1</a></span> <span class="id"><a href="LockSim.html#fm1">fm1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id"><a href="LockSim.html#fl2">fl2</a></span> <span class="id"><a href="LockSim.html#fm2">fm2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#fm1">fm1</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#fm2">fm2</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' /\ <span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>)) <span class="id"><a href="LockSim.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9398')">Proof.</div>
<div class="proofscript" id="proof9398">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#mu_inj_b">mu_inj_b</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#loadmax_finj">loadmax_finj</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="setid">setid</a></span> (<span class="id">te</span>:<span class="id"><a href="SpecLang.html#tmp">tmp</a></span>)(<span class="id">va</span>:<span class="id"><a href="AST.html#ident">ident</a></span>)(<span class="id">vb</span>:<span class="id"><a href="Values.html#val">val</a></span>):<span class="id"><a href="SpecLang.html#tmp">tmp</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#va">va</a></span> <span class="kwd">then</span> <span class="id"><a href="LockSim.html#vb">vb</a></span> <span class="kwd">else</span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmp_check">tmp_check</a></span> <span class="id">t</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>,  (<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>)) <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmp_inj">tmp_inj</a></span> (<span class="id">t1</span> <span class="id">t2</span>:<span class="id"><a href="SpecLang.html#tmp">tmp</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ValRels.html#val_related">val_related</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) (<span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#id">id</a></span>)(<span class="id"><a href="LockSim.html#t2">t2</a></span> <span class="id"><a href="LockSim.html#id">id</a></span>).<br/>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="setid_comm">setid_comm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">a1</span> <span class="id">a2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#a1">a1</a></span> &lt;&gt; <span class="id"><a href="LockSim.html#v1">v1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span>) <span class="id"><a href="LockSim.html#a1">a1</a></span> <span class="id"><a href="LockSim.html#a2">a2</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#a1">a1</a></span> <span class="id"><a href="LockSim.html#a2">a2</a></span>) <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9399')">Proof.</div>
<div class="proofscript" id="proof9399">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#peq_false">peq_false</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="setid_set">setid_set</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span>) <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v3">v3</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#v1">v1</a></span> <span class="id"><a href="LockSim.html#v3">v3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9400')">Proof.</div>
<div class="proofscript" id="proof9400">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gmeminv_loadmax_rel">gmeminv_loadmax_rel</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">v</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ValRels.html#val_related">val_related</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) <span class="id"><a href="LockSim.html#v">v</a></span> <span class="id"><a href="LockSim.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9401')">Proof.</div>
<div class="proofscript" id="proof9401">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#gmeminv_loadmax_inj">gmeminv_loadmax_inj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#embed_refl">embed_refl</a></span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#embed_refl">embed_refl</a></span> <span class="id">m2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m2</span>) <span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H3</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="tactic">try</span> <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id">v2</span> = <span class="id"><a href="Values.html#Vundef">Vundef</a></span>). <span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#mu_inj_b">mu_inj_b</a></span> <span class="kwd">as</span> <span class="id">mub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Shardb</span>: <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.INITGE">INITGE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mu_inject</span> <span class="kwd">in</span> <span class="id">mub</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#size_chunk_nat">size_chunk_nat</a></span>,<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Coqlib.html#nat_of_Z">nat_of_Z</a></span> 4=4%<span class="id">nat</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="kwd">in</span> <span class="id">gvalinj0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">gvalinj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> 4 0 (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>') = <span class="id">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>. <span class="tactic">clear</span> <span class="id">H</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> 4 0 (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>) # <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> ) = <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">valinj</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;= <span class="id"><a href="LockSim.html#ofs">ofs</a></span> &lt; 4 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memdata.html#memval_inject">memval_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>) # <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">gvalinj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">mub</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">ofs</span>). <span class="tactic">apply</span> <span class="id">r</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> + 0 = <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">gvalinj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">val_noundef</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;= <span class="id"><a href="LockSim.html#ofs">ofs</a></span> &lt;4-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>) # <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> &lt;&gt; <span class="id"><a href="Memdata.html#Undef">Undef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">no_undef</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">r</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">valfrag_noundef</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">q</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;= <span class="id"><a href="LockSim.html#ofs">ofs</a></span> &lt;4-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m1</span>) # <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span> &lt;&gt; <span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id"><a href="LockSim.html#q">q</a></span> <span class="id"><a href="LockSim.html#n">n</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">no_vundef</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">r</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">extract_byte</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> ?<span class="id">x</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> ?<span class="id">m</span>) # ?<span class="id">b</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">x</span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m</span>) # <span class="id">b</span>) <span class="id">eqn</span>:? <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">valundef</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>:<span class="kwd">forall</span> <span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id"><a href="LockSim.html#ofs">ofs</a></span> &lt; 4 -&gt; <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> ?<span class="id">m</span>) # ?<span class="id">b</span> &lt;&gt; <span class="id"><a href="Memdata.html#Undef">Undef</a></span> |- <span class="id">_</span>=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#decode_val">decode_val</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> 4 0 (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hx1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extract_byte</span>;[<span class="id">valundef</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=0). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extract_byte</span>;[<span class="id">valundef</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=1). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H7</span>. <span class="id">ex_match2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extract_byte</span>;[<span class="id">valundef</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=2). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm1</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H7</span>. <span class="id">ex_match2</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extract_byte</span>;[<span class="id">valundef</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=3). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm2</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H7</span>. <span class="id">ex_match2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.load_result">Val.load_result</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.getN">Mem.getN</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memdata.html#proj_value">proj_value</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extract_byte</span>;[<span class="id">valundef</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=0). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=0). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Heqm</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Memdata.html#check_value">check_value</a></span> <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="Memdata.html#check_value">check_value</a></span> (<span class="id"><a href="Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="Memdata.html#Q32">Q32</a></span>) <span class="id">v0</span> <span class="id"><a href="Memdata.html#Q32">Q32</a></span>   (<span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> <span class="id">v0</span> <span class="id">q</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1 + 1 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>' :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">no_vundef</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">r</span>;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">novundef0</span>:<span class="id">v</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">no_vundef</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>;<span class="tactic">simpl</span>;<span class="tactic">apply</span> <span class="id">r</span>;<span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">andb_split</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">H</span>: <span class="id">_</span> &amp;&amp; <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">H</span>: <span class="id">_</span> |- <span class="id">_</span> &amp;&amp; <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> :<span class="id">_</span> |- <span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> ?<span class="id">x</span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">x</span> <span class="id">x</span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v0</span> <span class="id">v0</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v1</span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=1). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Hx3</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="id">inv</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H10</span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="id">inv</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (  <span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v1</span> <span class="id">v</span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=2). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Hx4</span> <span class="kwd">in</span> <span class="id">H14</span>. <span class="id">inv</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H17</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H14</span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="id">inv</span> <span class="id">H18</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="id">andb_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v1</span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=3). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">Hx5</span> <span class="kwd">in</span> <span class="id">H19</span>. <span class="id">inv</span> <span class="id">H19</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_split</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H22</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H19</span> <span class="kwd">in</span> <span class="id">H23</span>;<span class="id">inv</span> <span class="id">H23</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b5</span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(  <span class="id">inj_injective</span> : <span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">b</span>' : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span> <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span> <span class="id"><a href="LockSim.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="LockSim.html#b2">b2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.INITGE">INITGE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mu_inject</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="Memdata.html#check_value">check_value</a></span> (<span class="id"><a href="Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="Memdata.html#Q32">Q32</a></span>) <span class="id">v0</span> <span class="id"><a href="Memdata.html#Q32">Q32</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> <span class="id">v0</span> <span class="id">q</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> (0 + 1 + 1 + 1) (<span class="id"><a href="FMemory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id">m2</span>) # <span class="id">b</span>' :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">novundef0</span>:<span class="id">v</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">no_vundef</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span>;<span class="tactic">simpl</span>;<span class="tactic">apply</span> <span class="id">r</span>;<span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">andb_false_split</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">H</span>: <span class="id">_</span> &amp;&amp; <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |- <span class="id">_</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [|]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_false_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v</span>) <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=1). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">valundef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_false_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v1</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v1</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valfrag_noundef</span>;<span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v0</span> <span class="id">v4</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> *. <span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_injective</span> <span class="kwd">in</span> <span class="id">Hx4</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Hx5</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">H11</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=2). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">valundef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_false_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v3</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v3</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valfrag_noundef</span>;<span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v0</span> <span class="id">v6</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H6</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> *. <span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H12</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_injective</span> <span class="kwd">in</span> <span class="id">Hx5</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Hx6</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">H13</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valinj</span>. <span class="id">instantiate</span>(1:=3). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">valundef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andb_false_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v</span> <span class="id">v5</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">v5</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">valfrag_noundef</span>;<span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#Val.eq">Val.eq</a></span> <span class="id">v0</span> <span class="id">v8</span>);<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H7</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> *. <span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H14</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_injective</span> <span class="kwd">in</span> <span class="id">Hx6</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Hx7</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">H15</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">left</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="match_lock">match_lock</a></span> : <span class="id"><a href="SpecLang.html#core">core</a></span>-&gt;<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="id"><a href="SpecLang.html#core">core</a></span>-&gt;<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_callinl">match_callinl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) ) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_begin">match_begin</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_1">match_1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#lockfunc">lockfunc</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_2">match_2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#st1">st1</a></span> ((<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#st1">st1</a></span> ((<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_3">match_3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_4">match_4</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#st2">st2</a></span>;;(<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_5">match_5</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#st2">st2</a></span> (((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#st2">st2</a></span> (((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_6">match_6</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_7">match_7</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;);;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_7_1">match_7_1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_8">match_8</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt; ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_9">match_9</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#EntAtomState">EntAtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#EntAtomState">EntAtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_10">match_10</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_11">match_11</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st3">st3</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st3">st3</a></span>(<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_12">match_12</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_13">match_13</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st4">st4</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>  ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st4">st4</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>)<span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_14">match_14</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_15">match_15</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#ExtAtomState">ExtAtomState</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#ExtAtomState">ExtAtomState</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_16">match_16</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_17">match_17</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="SpecLang.html#Swhile">Swhile</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span> &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>&gt;&gt;)(<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_18">match_18</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span>  (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_19">match_19</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_20">match_20</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="LockSim.html#t1">t1</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span>. <br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_lock_match_mem">match_lock_match_mem</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">c</span> <span class="id">m</span>' <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> <span class="id"><a href="LockSim.html#c">c</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">c</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9402')">Proof.</div>
<div class="proofscript" id="proof9402">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="inj_init_tmp">inj_init_tmp</a></span>:  <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9403')">Proof.</div>
<div class="proofscript" id="proof9403">
 <span class="id">constructor</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="setid_inj">setid_inj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">t</span>' <span class="id">v</span> <span class="id">v</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id">t</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ValRels.html#val_related">val_related</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE.mu">mu</a></span>) <span class="id"><a href="LockSim.html#v">v</a></span> <span class="id">v</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>)(<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id">t</span>' <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id">v</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9404')">Proof.</div>
<div class="proofscript" id="proof9404">
 <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>;<span class="id">ex_match2</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">inj_init_tmp</span> <span class="id">setid_inj</span> <span class="id">setid_comm</span> <span class="id">setid_set</span> : <span class="id">tmpls</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_lock_eq">match_lock_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>') <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#s">s</a></span> = <span class="id">s</span>' /\ <span class="id"><a href="LockSim.html#k">k</a></span> = <span class="id">k</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9405')">Proof.</div>
<div class="proofscript" id="proof9405">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_lock_eq2">match_lock_eq2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">te</span>',<span class="id"><a href="LockSim.html#sc">sc</a></span> = <span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id">te</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9406')">Proof.</div>
<div class="proofscript" id="proof9406">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_lock_eq3">match_lock_eq3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">k2</span> <span class="id">k2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">k2</span>' <span class="id">te</span>') <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#s">s</a></span> = <span class="id">s</span>' /\ <span class="id"><a href="LockSim.html#k">k</a></span> = <span class="id">k</span>' /\ <span class="id"><a href="LockSim.html#k2">k2</a></span> = <span class="id">k2</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9407')">Proof.</div>
<div class="proofscript" id="proof9407">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_lock_eq4">match_lock_eq4</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">k2</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">te</span>',<span class="id"><a href="LockSim.html#sc">sc</a></span> = <span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id">te</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9408')">Proof.</div>
<div class="proofscript" id="proof9408">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="setid_i">setid_i</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">te</span> <span class="id">b</span> <span class="id">v</span>, (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>) <span class="id"><a href="LockSim.html#b">b</a></span> =<span class="id"><a href="LockSim.html#v">v</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9409')">Proof.</div>
<div class="proofscript" id="proof9409">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>;<span class="tactic">intros</span>;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_normal_step_lock">match_normal_step_lock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sfp</span>  <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">k2</span> <span class="id">te2</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span> <span class="id">tm</span>' <span class="id">te2</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te2</span>' <span class="id">tm</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te2</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9410')">Proof.</div>
<div class="proofscript" id="proof9410">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span>. <span class="id">exists</span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">intro</span>;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span>. <span class="id">exists</span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>;<span class="tactic">auto</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">intro</span>;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H14</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H12</span> <span class="id"><a href="code.html#r">r</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H12</span>. <span class="id">inv</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H14</span>. <span class="id">specialize</span> (<span class="id">H12</span> <span class="id"><a href="code.html#r">r</a></span>) <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H10</span> <span class="kwd">as</span> ?. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H11</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="kwd">in</span> <span class="id">H</span>,<span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">te</span>' <span class="id"><a href="code.html#r">r</a></span> = <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">te2</span> <span class="id"><a href="code.html#r">r</a></span>&lt;&gt; <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">R</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H14</span>. <span class="id">specialize</span> (<span class="id">H12</span> <span class="id"><a href="code.html#r">r</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H12</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H14</span>. <span class="id">specialize</span> (<span class="id">H12</span> <span class="id"><a href="code.html#r">r</a></span>) <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H10</span> <span class="kwd">as</span> ?. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H11</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="kwd">in</span> <span class="id">H</span>,<span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">te</span>' <span class="id"><a href="code.html#r">r</a></span> = <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">R</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_atomic_step_lock">match_atomic_step_lock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sfp</span>  <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">k2</span> <span class="id">te2</span> <span class="id">tm</span> <span class="id">k0</span> <span class="id">k3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k0">k0</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#k3">k3</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span> <span class="id">tm</span>' <span class="id">te2</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te2</span>' <span class="id">tm</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id"><a href="LockSim.html#k0">k0</a></span> <span class="id">te</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id"><a href="LockSim.html#k3">k3</a></span> <span class="id">te2</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9411')">Proof.</div>
<div class="proofscript" id="proof9411">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> (<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax">loadmax</a></span> <span class="kwd">in</span> <span class="id">R</span>. <span class="id">ex_match</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#gmeminv_loadmax_inj">gmeminv_loadmax_inj</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>;<span class="tactic">intro</span>;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>.  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>;<span class="tactic">intro</span>;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#gmeminv_loadmax_rel">gmeminv_loadmax_rel</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>; <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">tm</span>', <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id">tm</span> <span class="id">b</span>' (<span class="id">te2</span> <span class="id"><a href="code.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx0</span>. <span class="id">contradict</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H11</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#grange_perm_eq2">grange_perm_eq2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#mu_inj_b">mu_inj_b</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H12</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check">tmp_check</a></span> <span class="kwd">in</span> <span class="id">H12</span>,<span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>,<span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>,<span class="id"><a href="LockSim.html#setid_i">setid_i</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">try</span> (<span class="tactic">intro</span>;<span class="tactic">discriminate</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>,<span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>,<span class="id"><a href="LockSim.html#setid_i">setid_i</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">try</span>(<span class="tactic">intro</span>;<span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#store_gmeminv">store_gmeminv</a></span> <span class="kwd">in</span> <span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>,<span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>,<span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">try</span> (<span class="tactic">intro</span>;<span class="tactic">discriminate</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="stx">stx</a></span>:= <span class="id"><a href="SpecLang.html#Sassign">Sassign</a></span> <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Integers.html#Int.one">Int.one</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="sta">sta</a></span>:=<span class="id"><a href="SpecLang.html#Sassert">Sassert</a></span> <span class="id"><a href="LockSim.html#bexpr1">bexpr1</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="unlockfunc">unlockfunc</a></span>:= &lt;&lt;<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span> &gt;&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmp_check2">tmp_check2</a></span> <span class="id">t</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>,  (<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="Integers.html#Int.one">Int.one</a></span>)) <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="match_unlock">match_unlock</a></span>:<span class="id"><a href="SpecLang.html#core">core</a></span>-&gt;<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="id"><a href="SpecLang.html#core">core</a></span>-&gt;<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_callin">match_callin</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>)) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_beginu">match_beginu</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#State">State</a></span> (<span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span>;;<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_1</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#unlockfunc">unlockfunc</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_2</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#EntAtomState">EntAtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#EntAtomState">EntAtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)(<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_3</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>)<span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#st3">st3</a></span>;;<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>)<span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_4</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st3">st3</a></span> ((<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>)<span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st3">st3</a></span> ((<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span>)<span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_5</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t2">t2</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_6</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t2">t2</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#stx">stx</a></span>;;<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_7</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">v</span>,<span class="id"><a href="LockSim.html#t2">t2</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="LockSim.html#v">v</a></span> ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#stx">stx</a></span> ((<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#stx">stx</a></span> ((<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_8</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> ((<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>)--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_9</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> (<span class="id"><a href="LockSim.html#sta">sta</a></span>;;<span class="id"><a href="LockSim.html#st4">st4</a></span>) <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_10</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#t">t</a></span> <span class="id"><a href="LockSim.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#sta">sta</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#sta">sta</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t2">t2</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_11</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_12</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="LockSim.html#st4">st4</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_13</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st4">st4</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#st4">st4</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_14</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_15</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#ExtAtomState">ExtAtomState</a></span>  (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#ExtAtomState">ExtAtomState</a></span>  (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_16</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> (<span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span>--<span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span>) <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id">match_17</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#t">t</a></span> = <span class="id"><a href="LockSim.html#setid">setid</a></span> (<span class="id"><a href="LockSim.html#setid">setid</a></span> <span class="id"><a href="SpecLang.html#init_tmp">init_tmp</a></span> <span class="id"><a href="code.html#r">r</a></span> <span class="id"><a href="Values.html#Vzero">Vzero</a></span>) <span class="id"><a href="code.html#x">x</a></span> <span class="id"><a href="Values.html#Vone">Vone</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="SpecLang.html#Sskip">Sskip</a></span> <span class="id"><a href="SpecLang.html#Kstop">Kstop</a></span> <span class="id"><a href="LockSim.html#t">t</a></span>) <span class="id"><a href="LockSim.html#tm">tm</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_unlock_match_mem">match_unlock_match_mem</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">c</span> <span class="id">m</span>' <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> <span class="id"><a href="LockSim.html#c">c</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">c</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9412')">Proof.</div>
<div class="proofscript" id="proof9412">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_unlock_eq">match_unlock_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>') <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#s">s</a></span> = <span class="id">s</span>' /\ <span class="id"><a href="LockSim.html#k">k</a></span> = <span class="id">k</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9413')">Proof.</div>
<div class="proofscript" id="proof9413">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_unlock_eq2">match_unlock_eq2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">te</span>',<span class="id"><a href="LockSim.html#sc">sc</a></span> = <span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id">te</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9414')">Proof.</div>
<div class="proofscript" id="proof9414">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_unlock_eq3">match_unlock_eq3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">k2</span> <span class="id">k2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">k2</span>' <span class="id">te</span>') <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#s">s</a></span> = <span class="id">s</span>' /\ <span class="id"><a href="LockSim.html#k">k</a></span> = <span class="id">k</span>' /\ <span class="id"><a href="LockSim.html#k2">k2</a></span> = <span class="id">k2</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9415')">Proof.</div>
<div class="proofscript" id="proof9415">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_unlock_eq4">match_unlock_eq4</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">s</span> <span class="id">k</span> <span class="id">k2</span> <span class="id">te</span> <span class="id">m</span>' <span class="id">sc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">te</span>',<span class="id"><a href="LockSim.html#sc">sc</a></span> = <span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id">te</span>' /\ <span class="id"><a href="LockSim.html#tmp_inj">tmp_inj</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id">te</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9416')">Proof.</div>
<div class="proofscript" id="proof9416">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;    <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">tmpls</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_normal_step_unlock">match_normal_step_unlock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sfp</span>  <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">k2</span> <span class="id">te2</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span> <span class="id">tm</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">tm</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="SpecLang.html#State">State</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9417')">Proof.</div>
<div class="proofscript" id="proof9417">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="match_atomic_step_unlock">match_atomic_step_unlock</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sfp</span>  <span class="id">s</span> <span class="id">k</span> <span class="id">te</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#te">te</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">k2</span> <span class="id">te2</span> <span class="id">tm</span> <span class="id">k0</span> <span class="id">k3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s">s</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#k0">k0</a></span> <span class="id"><a href="LockSim.html#te">te</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#k3">k3</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span> <span class="id">tm</span>' <span class="id">te2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#normalstep">normalstep</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#s2">s2</a></span> <span class="id"><a href="LockSim.html#k2">k2</a></span> <span class="id"><a href="LockSim.html#te2">te2</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id">te2</span>' <span class="id">tm</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id"><a href="LockSim.html#k0">k0</a></span> <span class="id">te</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') (<span class="id"><a href="SpecLang.html#AtomState">AtomState</a></span> <span class="id">s</span>' <span class="id">k</span>' <span class="id"><a href="LockSim.html#k3">k3</a></span> <span class="id">te2</span>') (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9418')">Proof.</div>
<div class="proofscript" id="proof9418">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span>(<span class="id">Esimpl</span>;<span class="tactic">eauto</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#gmeminv_loadmax_inj">gmeminv_loadmax_inj</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>. <span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">tmpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#gmeminv_loadmax_rel">gmeminv_loadmax_rel</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">functional_extensionality</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#setid">setid</a></span>. <span class="id">ex_match2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#setid_inj">setid_inj</a></span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">tmpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#tmp_check2">tmp_check2</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H14</span> <span class="id"><a href="code.html#r">r</a></span>). <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H14</span>. <span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">subst</span> <span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_comm">setid_comm</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#setid_i">setid_i</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">m</span>,<span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="id">tm</span> <span class="id">b</span>' <span class="id"><a href="Values.html#Vone">Vone</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#mu_inj_b">mu_inj_b</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H11</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#grange_perm_eq2">grange_perm_eq2</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span>. <span class="id">ex_match2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx</span>;<span class="id">contradict</span> <span class="id">n</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_eq</span>; <span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">ex_match</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H2</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#store_gmeminv">store_gmeminv</a></span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="match_core">match_core</a></span> (<span class="id">flag</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">sc</span> <span class="id">sm</span> <span class="id">tc</span> <span class="id">tm</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="LockSim.html#flag">flag</a></span> <span class="kwd">then</span> <span class="id"><a href="LockSim.html#match_lock">match_lock</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tc">tc</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="kwd">else</span> <span class="id"><a href="LockSim.html#match_unlock">match_unlock</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tc">tc</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>.<br/>
&nbsp;<span class="kwd">End</span> <span class="id"><a href="LockSim.html#SIMULATION.MATCHSTATE">MATCHSTATE</a></span>. <br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_state">match_state</a></span>:<span class="id"><a href="MemAux.html#freelist">freelist</a></span>-&gt;<span class="id"><a href="MemAux.html#freelist">freelist</a></span>-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>-&gt;<span class="id"><a href="Injections.html#Mu">Mu</a></span>-&gt;<span class="id"><a href="Values.html#meminj">meminj</a></span>-&gt;<span class="id"><a href="SpecLang.html#core">core</a></span>*<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="id"><a href="SpecLang.html#core">core</a></span>*<span class="id"><a href="GMemory.html#gmem">gmem</a></span>-&gt;<span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="mk_match_state">mk_match_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sc</span> <span class="id">tc</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">j</span>' <span class="id">flag</span> <span class="id">tfl</span> <span class="id">sfl</span> <span class="id">mu</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GEINIT</span>:<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJINCR</span>:<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="LockSim.html#j">j</a></span> <span class="id">j</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TEMBED</span>:<span class="id">exists</span> <span class="id">tfm</span>, <span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#tfm">tfm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FLINJ</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">ofs</span>, <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>-&gt; <span class="id">j</span>' <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',<span class="id"><a href="LockSim.html#ofs">ofs</a></span>)-&gt;<span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id">b</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">COREINJ</span>: <span class="id"><a href="LockSim.html#match_core">match_core</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#flag">flag</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tc">tc</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>:<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id">j</span>' <span class="id"><a href="LockSim.html#mu">mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SLAP</span>: <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SREP</span>: <span class="id"><a href="MemAux.html#norep">norep</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TLAP</span>: <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TREP</span>: <span class="id"><a href="MemAux.html#norep">norep</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#match_state">match_state</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#flag">flag</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id">j</span>' (<span class="id"><a href="LockSim.html#sc">sc</a></span>,<span class="id"><a href="LockSim.html#sm">sm</a></span>) (<span class="id"><a href="LockSim.html#tc">tc</a></span>,<span class="id"><a href="LockSim.html#tm">tm</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="MS">MS</a></span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">mu</span> <span class="id">fp</span> <span class="id">fp</span>' <span class="id">cm</span> <span class="id">cm</span>' :<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="LockSim.html#match_state">match_state</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) <span class="id"><a href="LockSim.html#cm">cm</a></span> <span class="id">cm</span>' /\ <span class="id">LfpG</span>' <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#fp">fp</a></span> <span class="id">fp</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LfpG_emp">LfpG_emp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">fl</span> <span class="id">fp</span>, <span class="id">LfpG</span>' <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id"><a href="LockSim.html#fp">fp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="id">constructor</span>;<span class="tactic">try</span> <span class="id">constructor</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> <span class="id">inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="Inv_Ginj">Inv_Ginj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#Inv">Inv</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9419')">Proof.</div>
<div class="proofscript" id="proof9419">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#Inv">Inv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">mi_inj</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="embed_preserve">embed_preserve</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fl</span> <span class="id">m</span> <span class="id">fm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id"><a href="LockSim.html#fm">fm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fm</span>', <span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id">m</span>' <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id">fm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9420')">Proof.</div>
<div class="proofscript" id="proof9420">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">fm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">fm</span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">fm</span>)).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">valid_wd0</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="kwd">in</span> <span class="id">unchanged_on_validity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html#Str_nth">Streams.Str_nth</a></span> <span class="id"><a href="LockSim.html#n">n</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">fm</span>) = <span class="id">b0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">unchanged_on_validity</span> <span class="id">_</span> 0 <span class="id">H3</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">with</span>(<span class="id">wd</span>:=<span class="id">H2</span>);<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fmem_valid_wd">fmem_valid_wd</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">m</span>:<span class="id"><a href="FMemory.html#mem">mem</a></span>) <span class="id">n</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span>) <span class="id"><a href="LockSim.html#n">n</a></span> = <span class="id"><a href="LockSim.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.validblocks">Mem.validblocks</a></span>) &lt;-&gt; (<span class="id"><a href="LockSim.html#n">n</a></span>&lt;<span class="id"><a href="LockSim.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span>))%<span class="id">coq_nat</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9421')">Proof.</div>
<div class="proofscript" id="proof9421">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">m</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="init_embed">init_embed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_gmem">init_gmem</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim.html#local_init_rel">local_init_rel</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fm</span>, <span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#fm">fm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9422')">Proof.</div>
<div class="proofscript" id="proof9422">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#init_gmem">init_gmem</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> <span class="id">dom_match_fm</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="LockSim.html#fmem_valid_wd">fmem_valid_wd</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">x_valid_wd</span>.<br/>
&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="FMemLemmas.html#gmem_fl_wd">gmem_fl_wd</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">tfl</span> 0).<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span> <span class="kwd">with</span>(<span class="id">wd</span>:=<span class="id">H0</span>) ;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>,<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="kwd">in</span> <span class="id">tfl_free</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">tfl_free</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">tfl_norep</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tfl_free</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="gmeminv_HLRELY">gmeminv_HLRELY</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Hm</span>' <span class="id">Lm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> <span class="id"><a href="LockSim.html#Lm">Lm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HLRely">HLRely</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> <span class="id">Hm</span>' <span class="id"><a href="LockSim.html#Lm">Lm</a></span> <span class="id">Lm</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9423')">Proof.</div>
<div class="proofscript" id="proof9423">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#Inv_Ginj">Inv_Ginj</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="initsim">initsim</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">argSrc</span> <span class="id">argTgt</span> <span class="id">sc</span> <span class="id">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ARGREL</span>: <span class="id"><a href="LDSimDefs.html#arg_rel">arg_rel</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#argSrc">argSrc</a></span> <span class="id"><a href="LockSim.html#argTgt">argTgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITCORE</span>: <span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> <span class="id"><a href="LockSim.html#argSrc">argSrc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GEINIT</span>:<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#id">id</a></span> <span class="id"><a href="LockSim.html#argTgt">argTgt</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#sc">sc</a></span> /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">sfl</span> <span class="id">tfl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_gmem">init_gmem</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#init_gmem">init_gmem</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim.html#local_init_rel">local_init_rel</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span>' <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HLRely">HLRely</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id">sm</span>' <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id">tm</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id"><a href="LockSim.html#sc">sc</a></span>,<span class="id">sm</span>')(<span class="id"><a href="LockSim.html#sc">sc</a></span>,<span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9424')">Proof.</div>
<div class="proofscript" id="proof9424">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_init_state">lock_init_state</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ARGREL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SpecLang.html#init_core">init_core</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id">id</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">sc</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_release_init_state">lock_release_init_state</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">INITCORE</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sc</span> = (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="SpecLang.html#fn_body">fn_body</a></span> <span class="id"><a href="code.html#lock_release_fnbody">lock_release_fnbody</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">sc</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_release_init_state">lock_release_init_state</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_acquire_init_state">lock_acquire_init_state</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">INITCORE</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sc</span> = (<span class="id"><a href="SpecLang.html#CallStateIn">CallStateIn</a></span> (<span class="id"><a href="SpecLang.html#fn_body">fn_body</a></span> <span class="id"><a href="code.html#lock_acquire_fnbody">lock_acquire_fnbody</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">sc</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_acquire_init_state">lock_acquire_init_state</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.TGEINIT">TGEINIT</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">GEINIT</span> <span class="kwd">as</span> <span class="id">GEINIT</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">LOCALINIT</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="id">Hsimpl</span>;<span class="id">inv</span> <span class="id">GEINIT</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#inject_incr">inject_incr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#j">j</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span>,<span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">senv_injected</span>. <span class="id">inv</span> <span class="id">H9</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span>,<span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND2">SFIND2</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND2">TFIND2</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">senv_injected</span>. <span class="id">inv</span> <span class="id">H9</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span>,<span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND3">SFIND3</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND3">TFIND3</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">senv_injected</span>. <span class="id">inv</span> <span class="id">H9</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>;<span class="tactic">rewrite</span> <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#init_embed">init_embed</a></span> <span class="kwd">in</span> <span class="id">LOCALINIT</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#embed_preserve">embed_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mu_inject</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">valid_Src</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">sfl_free</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_release_init_state">lock_release_init_state</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">INITCORE</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="id">inv</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#Inv_Ginj">Inv_Ginj</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#lock_acquire_init_state">lock_acquire_init_state</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id"><a href="LockSim.html#SIMULATION.SGEINIT">SGEINIT</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">INITCORE</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#Inv_Ginj">Inv_Ginj</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H9</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H9</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_external">match_external</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">mu</span> : <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">Hfp</span> <span class="id">Lfp</span> : <span class="id"><a href="LockSim.html#footprint">footprint</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hcore</span> : <span class="id"><a href="SpecLang.html#core">core</a></span> ) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">Lcore</span> : <span class="id"><a href="SpecLang.html#core">core</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">f</span> : <span class="id"><a href="AST.html#ident">ident</a></span>) (<span class="id">sg</span> : <span class="id"><a href="AST.html#signature">signature</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">argSrc</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">sfl</span> <span class="id">tfl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> (<span class="id"><a href="LockSim.html#Hcore">Hcore</a></span>, <span class="id"><a href="LockSim.html#Hm">Hm</a></span>) (<span class="id"><a href="LockSim.html#Lcore">Lcore</a></span>, <span class="id"><a href="LockSim.html#Lm">Lm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#at_external">at_external</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#Hcore">Hcore</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#f">f</a></span>, <span class="id"><a href="LockSim.html#sg">sg</a></span>, <span class="id"><a href="LockSim.html#argSrc">argSrc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HG">HG</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_args">G_args</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#argSrc">argSrc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">argTgt</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#at_external">at_external</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#Lcore">Lcore</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#f">f</a></span>, <span class="id"><a href="LockSim.html#sg">sg</a></span>, <span class="id"><a href="LockSim.html#argTgt">argTgt</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#arg_rel">arg_rel</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#argSrc">argSrc</a></span> <span class="id"><a href="LockSim.html#argTgt">argTgt</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">LG</span>' <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> <span class="id"><a href="LockSim.html#Lm">Lm</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id"><a href="LockSim.html#Hcore">Hcore</a></span>, <span class="id"><a href="LockSim.html#Hm">Hm</a></span>) (<span class="id"><a href="LockSim.html#Lcore">Lcore</a></span>, <span class="id"><a href="LockSim.html#Lm">Lm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9425')">Proof.</div>
<div class="proofscript" id="proof9425">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="kwd">in</span>*. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#at_external">at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [?[?[]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [?[?[]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_afterext">match_afterext</a></span>:<br/>
&nbsp;<span class="kwd">forall</span> (<span class="id">mu</span> : <span class="id"><a href="Injections.html#Mu">Mu</a></span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">Hcore</span> : <span class="id"><a href="SpecLang.html#core">core</a></span>) <br/>
&nbsp;&nbsp;&nbsp;(<span class="id">Hm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">Lcore</span> : <span class="id"><a href="SpecLang.html#core">core</a></span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">Lm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">oresSrc</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Values.html#val">val</a></span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">Hcore</span>' : <span class="id"><a href="SpecLang.html#core">core</a></span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">oresTgt</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">sfl</span> <span class="id">tfl</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id"><a href="LockSim.html#Hcore">Hcore</a></span>, <span class="id"><a href="LockSim.html#Hm">Hm</a></span>) (<span class="id"><a href="LockSim.html#Lcore">Lcore</a></span>, <span class="id"><a href="LockSim.html#Lm">Lm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_oarg">G_oarg</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#oresSrc">oresSrc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#after_external">after_external</a></span> <span class="id"><a href="LockSim.html#Hcore">Hcore</a></span> <span class="id"><a href="LockSim.html#oresSrc">oresSrc</a></span> =<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">Hcore</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ores_rel">ores_rel</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#oresSrc">oresSrc</a></span> <span class="id"><a href="LockSim.html#oresTgt">oresTgt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">Lcore</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#after_external">after_external</a></span> <span class="id"><a href="LockSim.html#Lcore">Lcore</a></span> <span class="id"><a href="LockSim.html#oresTgt">oresTgt</a></span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">Lcore</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">Hm</span>' <span class="id">Lm</span>' : <span class="id">GMem.gmem</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HLRely">HLRely</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> <span class="id">Hm</span>' <span class="id"><a href="LockSim.html#Lm">Lm</a></span> <span class="id">Lm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id">Hcore</span>', <span class="id">Hm</span>') (<span class="id">Lcore</span>', <span class="id">Lm</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9426')">Proof.</div>
<div class="proofscript" id="proof9426">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#after_external">after_external</a></span>;<span class="tactic">intros</span>;<span class="id">ex_match</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#ores_rel">ores_rel</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">destruct</span> <span class="id">oresTgt</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="kwd">in</span> *. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#embed_preserve">embed_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#gmeminv_HLRELY">gmeminv_HLRELY</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#embed_preserve">embed_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#gmeminv_HLRELY">gmeminv_HLRELY</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#ores_rel">ores_rel</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">destruct</span> <span class="id">oresTgt</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#embed_preserve">embed_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#gmeminv_HLRELY">gmeminv_HLRELY</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#embed_preserve">embed_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#gmeminv_HLRELY">gmeminv_HLRELY</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="match_halt">match_halt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  (<span class="id">mu</span> : <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">Hfp</span> <span class="id">Lfp</span> : <span class="id"><a href="LockSim.html#footprint">footprint</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hcore</span> : <span class="id"><a href="SpecLang.html#core">core</a></span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">Lcore</span> :<span class="id"><a href="SpecLang.html#core">core</a></span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Lm</span> : <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">resSrc</span> : <span class="id"><a href="Values.html#val">val</a></span>) <span class="id">sfl</span> <span class="id">tfl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> (<span class="id"><a href="LockSim.html#Hcore">Hcore</a></span>, <span class="id"><a href="LockSim.html#Hm">Hm</a></span>) (<span class="id"><a href="LockSim.html#Lcore">Lcore</a></span>, <span class="id"><a href="LockSim.html#Lm">Lm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#halt">halt</a></span> <span class="id"><a href="LockSim.html#Hcore">Hcore</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#resSrc">resSrc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HG">HG</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_arg">G_arg</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#resSrc">resSrc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">resTgt</span> : <span class="id"><a href="Values.html#val">val</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#halt">halt</a></span> <span class="id"><a href="LockSim.html#Lcore">Lcore</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="LockSim.html#resTgt">resTgt</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#res_rel">res_rel</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) <span class="id"><a href="LockSim.html#resSrc">resSrc</a></span> <span class="id"><a href="LockSim.html#resTgt">resTgt</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">LG</span>' <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Hm">Hm</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> <span class="id"><a href="LockSim.html#Lm">Lm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9427')">Proof.</div>
<div class="proofscript" id="proof9427">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#halt">halt</a></span>,<span class="id"><a href="LockSim.html#MS">MS</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="id">inv</span> <span class="id">COREINJ</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;  <span class="id">constructor</span>;  <span class="id">inv</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;1,3:<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [?[?[]]];<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_perm_eq">range_perm_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">b</span> <span class="id">m2</span> <span class="id">b</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Finject">Finject</a></span> <span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#f">f</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>',0)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Writable">Writable</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> <span class="id">b</span>' 0 4 <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Writable">Writable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9428')">Proof.</div>
<div class="proofscript" id="proof9428">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.range_perm">Mem.range_perm</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">inj0</span>. <span class="id">inv</span> <span class="id">mi_inj</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span> + 0 = <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="fstep_fleq">fstep_fleq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#fstep">fstep</a></span> <span class="id"><a href="LockSim.html#ge">ge</a></span> <span class="id"><a href="LockSim.html#c">c</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> <span class="id"><a href="LockSim.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9429')">Proof.</div>
<div class="proofscript" id="proof9429">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">ex_match2</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax">storemax</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">ex_match2</span>;<span class="id">inv</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_fleq">mem_alloc_fleq</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LfpG_loadb">LfpG_loadb</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">fl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="LockSim.html#fl">fl</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">LfpG</span>' <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="SpecLang.html#loadmax_fp">loadmax_fp</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>)(<span class="id"><a href="SpecLang.html#loadmax_fp">loadmax_fp</a></span> <span class="id">b</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9430')">Proof.</div>
<div class="proofscript" id="proof9430">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#loadmax_fp">loadmax_fp</a></span>,<span class="id"><a href="FMemOpFP.html#load_fp">FMemOpFP.load_fp</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span>,<span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>. <span class="id">inv</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_reads">FP.ge_reads</a></span>;<span class="tactic">simpl</span>;<span class="id">constructor</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>,<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>,<span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mu_inject</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_range</span>';<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="LfpG_storeb">LfpG_storeb</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">fl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ge_init_inj">ge_init_inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="LockSim.html#fl">fl</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">LfpG</span>' <span class="id"><a href="LockSim.html#fl">fl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="SpecLang.html#storemax_fp">storemax_fp</a></span> <span class="id"><a href="LockSim.html#SIMULATION.b">b</a></span>)(<span class="id"><a href="SpecLang.html#storemax_fp">storemax_fp</a></span> <span class="id">b</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9431')">Proof.</div>
<div class="proofscript" id="proof9431">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#storemax_fp">storemax_fp</a></span>,<span class="id"><a href="FMemOpFP.html#store_fp">FMemOpFP.store_fp</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span>,<span class="id"><a href="Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span>,<span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">senv_injected</span> <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span>,<span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">senv_injected</span>. <span class="id">inv</span> <span class="id">senv_injected</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.ge_writes">FP.ge_writes</a></span>;<span class="tactic">simpl</span>;<span class="id">constructor</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>,<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>,<span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mu_inject</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_range</span>';<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id">alloc_reach</span>'':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">stk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> 0 0 = (<span class="id">m</span>',<span class="id"><a href="LockSim.html#stk">stk</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">L</span> <span class="id">b</span>, <span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span> -&gt; <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MemClosures.reach</span>' (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span> <span class="id"><a href="LockSim.html#L">L</a></span> <span class="id"><a href="LockSim.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9432')">Proof.</div>
<div class="proofscript" id="proof9432">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">L</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHL</span> <span class="id">_</span> <span class="id">H5</span>).<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">IHL</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b</span>'0&lt;&gt;<span class="id">stk</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>;<span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">n</span>). <span class="id">instantiate</span>(1:=<span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_rc">alloc_rc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">stk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> 0 0 = (<span class="id">m</span>',<span class="id"><a href="LockSim.html#stk">stk</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>) <span class="id"><a href="LockSim.html#l">l</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id"><a href="LockSim.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9433')">Proof.</div>
<div class="proofscript" id="proof9433">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">no_undef</span> <span class="id">no_vundef</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">alloc_reach</span>'' <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">reachable_closure</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">reachable_closure</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;1,2: <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>,<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> <span class="kwd">in</span> *;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">reachable_closure</span> <span class="id">no_vundef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>,<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">e</span>. <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">no_undef</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>;<span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">reachable_closure</span> <span class="id">no_undef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>,<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">e</span>. <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>;<span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_mem_inj_1">alloc_mem_inj_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m3</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m3">m3</a></span>, <span class="id"><a href="LockSim.html#z">z</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m3">m3</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9434')">Proof.</div>
<div class="proofscript" id="proof9434">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">mi_perm</span>' : <span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> <span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">k</span> : <span class="id"><a href="Memperm.html#perm_kind">perm_kind</a></span>) (<span class="id">p</span> : <span class="id"><a href="Memperm.html#permission">permission</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id">mu</span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m3</span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#p">p</a></span> -&gt; <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m2</span>)<span class="id"><a href="LockSim.html#b2">b2</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span> + <span class="id"><a href="LockSim.html#delta">delta</a></span>) <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">p</span>). <span class="id">instantiate</span>(1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.range_perm">GMem.range_perm</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b1</span> &lt;&gt; <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_memval</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">inv</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_mem_inj_2">alloc_mem_inj_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)(<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m3</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m3">m3</a></span>, <span class="id"><a href="LockSim.html#z">z</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m3">m3</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9435')">Proof.</div>
<div class="proofscript" id="proof9435">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">mi_perm</span>' : <span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> <span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">k</span> : <span class="id"><a href="Memperm.html#perm_kind">perm_kind</a></span>) (<span class="id">p</span> : <span class="id"><a href="Memperm.html#permission">permission</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id">mu</span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="LockSim.html#b2">b2</a></span>, <span class="id"><a href="LockSim.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span>) <span class="id"><a href="LockSim.html#b1">b1</a></span> <span class="id"><a href="LockSim.html#ofs">ofs</a></span> <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#p">p</a></span> -&gt; <span class="id"><a href="GMemory.html#GMem.perm">GMem.perm</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m3</span>)<span class="id"><a href="LockSim.html#b2">b2</a></span> (<span class="id"><a href="LockSim.html#ofs">ofs</a></span> + <span class="id"><a href="LockSim.html#delta">delta</a></span>) <span class="id"><a href="LockSim.html#k">k</a></span> <span class="id"><a href="LockSim.html#p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span> &lt;&gt; <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inj_range</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_memval</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="id">inv</span> <span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_mem_inj">alloc_mem_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)(<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m3</span> <span class="id">m4</span> <span class="id">z2</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m3">m3</a></span>, <span class="id"><a href="LockSim.html#z">z</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m4">m4</a></span>, <span class="id"><a href="LockSim.html#z2">z2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.mem_inj">GMem.mem_inj</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m3">m3</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m4">m4</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9436')">Proof.</div>
<div class="proofscript" id="proof9436">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_mem_inj_1">alloc_mem_inj_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_mem_inj_2">alloc_mem_inj_2</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_inj">alloc_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span>)(<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m3</span> <span class="id">m4</span> <span class="id">z</span> <span class="id">z2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m1">m1</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m3">m3</a></span>, <span class="id"><a href="LockSim.html#z">z</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m2">m2</a></span> 0 0 = (<span class="id"><a href="LockSim.html#m4">m4</a></span>, <span class="id"><a href="LockSim.html#z2">z2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#Ginject">Ginject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>(<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>))(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m3">m3</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m4">m4</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9437')">Proof.</div>
<div class="proofscript" id="proof9437">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">ginj0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#alloc_mem_inj">alloc_mem_inj</a></span> <span class="kwd">in</span> <span class="id">mi_inj</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mi_freeblocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H3</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H5</span>|- *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_mappedblocks</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>,<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="kwd">in</span> <span class="id">H</span>|- *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.meminj_no_overlap">GMem.meminj_no_overlap</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b1</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span> <span class="kwd">in</span> <span class="id">H9</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span> <span class="kwd">in</span> <span class="id">H10</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_no_overlap</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">auto</span>. <span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_range</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm_inv</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b1</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">mi_freeblocks</span> <span class="id">mi_mappedblocks</span> <span class="id">mi_no_overlap</span> <span class="id">mi_representable</span> <span class="id">mi_perm_inv</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b1</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_dom</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">R2</span>;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.perm">Mem.perm</a></span> <span class="id">m2</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id"><a href="Memperm.html#Max">Max</a></span> <span class="id"><a href="Memperm.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mi_inj</span>. <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">ofs</span>+0=<span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">inj_weak</span>. <span class="tactic">apply</span> <span class="id">inj_range</span>' <span class="kwd">in</span> <span class="id">Hx</span>. <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">gvalinj0</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#strip">strip</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>;<span class="tactic">auto</span>).<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_zero_gmeminv">alloc_zero_gmeminv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">stk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>)(<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#m">m</a></span> 0 0 = (<span class="id">m</span>',<span class="id"><a href="LockSim.html#stk">stk</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span>)(<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>' <span class="id">stk</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> 0 0 = (<span class="id">tm</span>',<span class="id">stk</span>')/\ <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9438')">Proof.</div>
<div class="proofscript" id="proof9438">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#gmeminv">gmeminv</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">tm</span>' <span class="id">stk</span>', <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">tm</span> 0 0 = (<span class="id">tm</span>',<span class="id">stk</span>')).<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_rc">alloc_rc</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_rc">alloc_rc</a></span>;<span class="tactic">try</span> <span class="id">eexact</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_inj">alloc_inj</a></span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="id">Opaque</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_tau_step">match_tau_step</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">Hfp</span> <span class="id">sfp</span> <span class="id">Lfp</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">c</span> <span class="id">tc</span> <span class="id">c</span>' <span class="id">sm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> (<span class="id"><a href="LockSim.html#c">c</a></span>, <span class="id"><a href="LockSim.html#sm">sm</a></span>) (<span class="id"><a href="LockSim.html#tc">tc</a></span>, <span class="id"><a href="LockSim.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#step">step</a></span> <span class="id"><a href="LockSim.html#SIMULATION.sge">sge</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#c">c</a></span> <span class="id"><a href="LockSim.html#sm">sm</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> <span class="id">c</span>' <span class="id">sm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HfpG">HfpG</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfp</span> <span class="id">tc</span>' <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SpecLang.html#step">step</a></span> <span class="id"><a href="LockSim.html#SIMULATION.tge">tge</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#tc">tc</a></span> <span class="id"><a href="LockSim.html#tm">tm</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span> <span class="id">tc</span>' <span class="id">tm</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id"><a href="LockSim.html#sfl">sfl</a></span> <span class="id"><a href="LockSim.html#tfl">tfl</a></span> <span class="id"><a href="LockSim.html#mu">mu</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="LockSim.html#Hfp">Hfp</a></span> <span class="id"><a href="LockSim.html#sfp">sfp</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="LockSim.html#Lfp">Lfp</a></span> <span class="id"><a href="LockSim.html#tfp">tfp</a></span>) (<span class="id">c</span>',<span class="id">sm</span>')(<span class="id">tc</span>',<span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9439')">Proof.</div>
<div class="proofscript" id="proof9439">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">sm</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">flag</span> [<span class="id">MATCH</span> <span class="id">LFPG</span>]] <span class="id">STEP</span> <span class="id">HFPG</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">STEP</span>. <span class="tactic">subst</span> <span class="id">c0</span> <span class="id">gm</span> <span class="id">fp</span> <span class="id">c</span>'0 <span class="id">gm</span>'.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">Hsimpl</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="SpecLangWDDET.html#SpecLang_wd">SpecLang_wd</a></span>  <span class="kwd">as</span> <span class="id">WD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">flag</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">COREMATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_lock_eq2">match_lock_eq2</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [<span class="id">te2</span>'[<span class="id">TC</span> <span class="id">TMPINJ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_normal_step_lock">match_normal_step_lock</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#fstep_fleq">fstep_fleq</a></span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREMATCH</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">COREMATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_lock_eq4">match_lock_eq4</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [?[? <span class="id">TMPINJ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_atomic_step_lock">match_atomic_step_lock</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_lock_match_mem">match_lock_match_mem</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">symmetry</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#fstep_fleq">fstep_fleq</a></span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREMATCH</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span> <span class="id">b1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_loadb">LfpG_loadb</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_storeb">LfpG_storeb</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_zero_gmeminv">alloc_zero_gmeminv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 5;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_fleq">mem_alloc_fleq</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inject_block">Bset.inject_block</a></span>,<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TLAP</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>,<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>,<span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>,<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>,<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">COREMATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_unlock_eq2">match_unlock_eq2</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">subst</span> <span class="id">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_normal_step_unlock">match_normal_step_unlock</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_unlock_match_mem">match_unlock_match_mem</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>). <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">symmetry</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#fstep_fleq">fstep_fleq</a></span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREMATCH</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">COREMATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_unlock_eq4">match_unlock_eq4</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_atomic_step_unlock">match_atomic_step_unlock</a></span> <span class="kwd">in</span> <span class="id">COREINJ</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#match_unlock_match_mem">match_unlock_match_mem</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R2</span> <span class="kwd">as</span> (<span class="id">R2</span>&amp;<span class="id">R3</span>&amp;<span class="id">R4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">symmetry</span>;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#fstep_fleq">fstep_fleq</a></span>;<span class="tactic">eauto</span>; <span class="id">econstructor</span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREMATCH</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_emp">LfpG_emp</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.SFIND">SFIND</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span> <span class="id">b1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="LockSim.html#SIMULATION.TFIND">TFIND</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_loadb">LfpG_loadb</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#LfpG_storeb">LfpG_storeb</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">COREINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#alloc_zero_gmeminv">alloc_zero_gmeminv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AGMU</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span> 5;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_fleq">mem_alloc_fleq</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LfpG</span>'<span class="id">_union</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">FMemOpFP.emp_loc_match</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inject_block">Bset.inject_block</a></span>,<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">TLAP</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>,<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>,<span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>,<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span>,<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">FMemOpFP.uncheck_alloc_fp</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">ex_match2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>,<span class="id"><a href="MemAux.html#get_block">get_block</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="LockSim.html#SIMULATION">SIMULATION</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="locksim">locksim</a></span>:<br/>
&nbsp;&nbsp;@<span class="id"><a href="LDSim.html#ldsim">ldsim</a></span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span> <span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9440')">Proof.</div>
<div class="proofscript" id="proof9440">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSim.html#ldsim">ldsim</a></span>,<span class="id"><a href="code.html#lock_comp_unit">lock_comp_unit</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#F">F</a></span>,<span class="id"><a href="SpecLang.html#V">V</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ge</span>':= (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AST.html#mkprogram">prog_defs</a></span> := (<span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span>, <span class="id"><a href="code.html#lock_L">lock_L</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: (<span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span>, <span class="id"><a href="code.html#lock_acquire">lock_acquire</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: (<span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span>, <span class="id"><a href="code.html#lock_release">lock_release</a></span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">prog_public</span> := <span class="id"><a href="code.html#lock_L_ident">lock_L_ident</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="code.html#lock_acquire_ident">lock_acquire_ident</a></span> :: <span class="id"><a href="code.html#lock_release_ident">lock_release_ident</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">prog_main</span> := 1%<span class="id">positive</span> |})) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="LockSim.html#ge">ge</a></span> = <span class="id">ge</span>').<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">ge</span>,<span class="id">ge</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">ge</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">sb</span>[<span class="id">SSYMB</span> <span class="id">SVAR</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_gvar_from_ge">find_lock_gvar_from_ge</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">tb</span>[<span class="id">TSYMB</span> <span class="id">TVAR</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">sb2</span>[<span class="id">SSYMB2</span> <span class="id">SLOCK</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">sb3</span>[<span class="id">SSYMB3</span> <span class="id">SUNLOCK</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_acquire_from_ge">find_lock_acquire_from_ge</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">tb2</span>[<span class="id">TSYMB2</span> <span class="id">TLOCK</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#find_lock_release_from_ge">find_lock_release_from_ge</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">tb3</span>[<span class="id">TSYMB3</span> <span class="id">TUNLOCK</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>,<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span>, (<span class="kwd">fun</span> <span class="id">a</span> <span class="id">b</span> =&gt;<span class="id"><a href="LockSim.html#MS">MS</a></span> <span class="id">sge</span> <span class="id">tge</span> <span class="id">tb</span> <span class="id">sb</span> <span class="id">tb2</span> <span class="id">sb2</span> <span class="id">tb3</span> <span class="id">sb3</span> <span class="id">sfl</span> <span class="id">tfl</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">AGMU</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LockSim.html#MS">MS</a></span>;<span class="tactic">intros</span>;<span class="id">Hsimpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#ge_related_ge_lessmatch">ge_related_ge_lessmatch</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#ge_related_ge_lessmatch">ge_related_ge_lessmatch</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LockSim.html#ge_lessmatch_comm">ge_lessmatch_comm</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#ge_lessmatch_trans">ge_lessmatch_trans</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="LockSim.html#initsim">initsim</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_tau_step">match_tau_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_external">match_external</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_afterext">match_afterext</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SpecLang.html#speclang">speclang</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LockSim.html#match_halt">match_halt</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
