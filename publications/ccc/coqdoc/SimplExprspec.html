<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SimplExprspec</title>
<meta name="description" content="Documentation of Coq module SimplExprspec" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SimplExprspec</h1>
<div class="coq">
<br/>
<div class="doc">Relational specification of expression simplification. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Coqlib</span> <span class="id">Maps</span> <span class="id">Errors</span> <span class="id">Integers</span> <span class="id">Floats</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">AST</span> <span class="id">Linking</span> <span class="id">Memory</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Ctypes</span> <span class="id">Cop</span> <span class="id">Csyntax</span> <span class="id">Clight</span> <span class="id">SimplExpr</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">SPEC</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">gensym_monad_scope</span>.<br/>
<br/>
<h1> Relational specification of the translation. </h1>
<br/>
<h2> Translation of expressions </h2>
<br/>
<div class="doc">This specification covers:
<ul>
<li>
 all cases of <span class="bracket"><span class="id">transl_lvalue</span></span> and <span class="bracket"><span class="id">transl_rvalue</span></span>;
</li>
<li>
 two additional cases for <span class="bracket"><span class="id">Csyntax.Eparen</span></span>, so that reductions of <span class="bracket"><span class="id">Csyntax.Econdition</span></span>
  expressions are properly tracked;
</li>
<li>
 three additional cases allowing <span class="bracket"><span class="id">Csyntax.Eval</span> <span class="id">v</span></span> C expressions to match
  any Clight expression <span class="bracket"><span class="id">a</span></span> that evaluates to <span class="bracket"><span class="id">v</span></span> in any environment
  matching the given temporary environment <span class="bracket"><span class="id">le</span></span>.
</li>
</ul>
</div>
<br/>
<span class="kwd">Definition</span> <span class="id">final</span> (<span class="id">dst</span>: <span class="id">destination</span>) (<span class="id">a</span>: <span class="id">expr</span>) : <span class="id">list</span> <span class="id">statement</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">dst</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">For_val</span> =&gt; <span class="id">nil</span><br/>
&nbsp;&nbsp;| <span class="id">For_effects</span> =&gt; <span class="id">nil</span><br/>
&nbsp;&nbsp;| <span class="id">For_set</span> <span class="id">sd</span> =&gt; <span class="id">do_set</span> <span class="id">sd</span> <span class="id">a</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_rvalof</span>: <span class="id">type</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">list</span> <span class="id">statement</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">list</span> <span class="id">ident</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_rvalof_nonvol</span>: <span class="kwd">forall</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_is_volatile</span> <span class="id">ty</span> = <span class="id">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">nil</span> <span class="id">a</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_rvalof_vol</span>: <span class="kwd">forall</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">t</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">type_is_volatile</span> <span class="id">ty</span> = <span class="id">true</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> <span class="id">ty</span> <span class="id">a</span> (<span class="id">make_set</span> <span class="id">t</span> <span class="id">a</span> :: <span class="id">nil</span>) (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_expr</span>: <span class="id">temp_env</span> -&gt; <span class="id">destination</span> -&gt; <span class="id">Csyntax.expr</span> -&gt; <span class="id">list</span> <span class="id">statement</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">list</span> <span class="id">ident</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_var</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">id</span> <span class="id">ty</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Evar</span> <span class="id">id</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">final</span> <span class="id">dst</span> (<span class="id">Evar</span> <span class="id">id</span> <span class="id">ty</span>)) (<span class="id">Evar</span> <span class="id">id</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_deref</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ederef</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Ederef</span> <span class="id">a1</span> <span class="id">ty</span>)) (<span class="id">Ederef</span> <span class="id">a1</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_field</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">f</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Efield</span> <span class="id">e1</span> <span class="id">f</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Efield</span> <span class="id">a1</span> <span class="id">f</span> <span class="id">ty</span>)) (<span class="id">Efield</span> <span class="id">a1</span> <span class="id">f</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_val_effect</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">nil</span> <span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_val_value</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">a</span> = <span class="id">ty</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">tge</span> <span class="id">e</span> <span class="id">le</span>' <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id">In</span> <span class="id">id</span> <span class="id">tmp</span> -&gt; <span class="id">le</span>'!<span class="id">id</span> = <span class="id">le</span>!<span class="id">id</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">tge</span> <span class="id">e</span> <span class="id">le</span>' <span class="id">m</span> <span class="id">a</span> <span class="id">v</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> (<span class="id">Csyntax.Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nil</span> <span class="id">a</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_val_set</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">sd</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">a</span> = <span class="id">ty</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">tge</span> <span class="id">e</span> <span class="id">le</span>' <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id">In</span> <span class="id">id</span> <span class="id">tmp</span> -&gt; <span class="id">le</span>'!<span class="id">id</span> = <span class="id">le</span>!<span class="id">id</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eval_expr</span> <span class="id">tge</span> <span class="id">e</span> <span class="id">le</span>' <span class="id">m</span> <span class="id">a</span> <span class="id">v</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> <span class="id">sd</span>) (<span class="id">Csyntax.Eval</span> <span class="id">v</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">do_set</span> <span class="id">sd</span> <span class="id">a</span>) <span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_sizeof</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">ty</span>' <span class="id">ty</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Esizeof</span> <span class="id">ty</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">final</span> <span class="id">dst</span> (<span class="id">Esizeof</span> <span class="id">ty</span>' <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Esizeof</span> <span class="id">ty</span>' <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_alignof</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">ty</span>' <span class="id">ty</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ealignof</span> <span class="id">ty</span>' <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">final</span> <span class="id">dst</span> (<span class="id">Ealignof</span> <span class="id">ty</span>' <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ealignof</span> <span class="id">ty</span>' <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_valof</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">tmp</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> (<span class="id">Csyntax.typeof</span> <span class="id">e1</span>) <span class="id">a1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt; <span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Evalof</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">final</span> <span class="id">dst</span> <span class="id">a2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">a2</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_addrof</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">tmp</span> <span class="id">sl1</span> <span class="id">a1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Eaddrof</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Eaddrof</span> <span class="id">a1</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Eaddrof</span> <span class="id">a1</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_unop</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">tmp</span> <span class="id">sl1</span> <span class="id">a1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Eunop</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Eunop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Eunop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_binop</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt; <span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ebinop</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_cast</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ecast</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">final</span> <span class="id">dst</span> (<span class="id">Ecast</span> <span class="id">a1</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ecast</span> <span class="id">a1</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqand_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">t</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_val</span> <span class="id">t</span> <span class="id">ty</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> (<span class="id">Csyntax.Eseqand</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sset</span> <span class="id">t</span> (<span class="id">Econst_int</span> <span class="id">Int.zero</span> <span class="id">ty</span>)) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqand_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eseqand</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>) <span class="id">Sskip</span> :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqand_set</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">sd</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_set</span> <span class="id">ty</span> <span class="id">sd</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> (<span class="id">sd_temp</span> <span class="id">sd</span>) <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> <span class="id">sd</span>) (<span class="id">Csyntax.Eseqand</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">makeseq</span> (<span class="id">do_set</span> <span class="id">sd</span> (<span class="id">Econst_int</span> <span class="id">Int.zero</span> <span class="id">ty</span>))) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqor_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">t</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_val</span> <span class="id">t</span> <span class="id">ty</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> (<span class="id">Csyntax.Eseqor</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">Sset</span> <span class="id">t</span> (<span class="id">Econst_int</span> <span class="id">Int.one</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">makeseq</span> <span class="id">sl2</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqor_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eseqor</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> <span class="id">Sskip</span> (<span class="id">makeseq</span> <span class="id">sl2</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seqor_set</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">sd</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_set</span> <span class="id">ty</span> <span class="id">sd</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> (<span class="id">sd_temp</span> <span class="id">sd</span>) <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> <span class="id">sd</span>) (<span class="id">Csyntax.Eseqor</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> (<span class="id">do_set</span> <span class="id">sd</span> (<span class="id">Econst_int</span> <span class="id">Int.one</span> <span class="id">ty</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">makeseq</span> <span class="id">sl2</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_condition_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> <span class="id">t</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDbase</span> <span class="id">ty</span> <span class="id">ty</span> <span class="id">t</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDbase</span> <span class="id">ty</span> <span class="id">ty</span> <span class="id">t</span>)) <span class="id">e3</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;  <span class="id">incl</span> <span class="id">tmp3</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> (<span class="id">Csyntax.Econdition</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>) (<span class="id">makeseq</span> <span class="id">sl3</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_condition_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e3</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp3</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Econdition</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>) (<span class="id">makeseq</span> <span class="id">sl3</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_condition_set</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">sd</span> <span class="id">t</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDcons</span> <span class="id">ty</span> <span class="id">ty</span> <span class="id">t</span> <span class="id">sd</span>)) <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDcons</span> <span class="id">ty</span> <span class="id">ty</span> <span class="id">t</span> <span class="id">sd</span>)) <span class="id">e3</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp3</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> <span class="id">sd</span>) (<span class="id">Csyntax.Econdition</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">makeif</span> <span class="id">a1</span> (<span class="id">makeseq</span> <span class="id">sl2</span>) (<span class="id">makeseq</span> <span class="id">sl3</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_assign_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eassign</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">make_assign</span> <span class="id">a1</span> <span class="id">a2</span> :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_assign_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">t</span> <span class="id">tmp</span> <span class="id">ty1</span> <span class="id">ty2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp1</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty1</span> = <span class="id">Csyntax.typeof</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty2</span> = <span class="id">Csyntax.typeof</span> <span class="id">e2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Eassign</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Sset</span> <span class="id">t</span> (<span class="id">Ecast</span> <span class="id">a2</span> <span class="id">ty1</span>) ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">make_assign</span> <span class="id">a1</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">final</span> <span class="id">dst</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_assignop_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span> <span class="id">ty1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty1</span> = <span class="id">Csyntax.typeof</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> <span class="id">ty1</span> <span class="id">a1</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt; <span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp3</span> -&gt; <span class="id">list_disjoint</span> <span class="id">tmp2</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp3</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eassignop</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">sl3</span> ++ <span class="id">make_assign</span> <span class="id">a1</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a3</span> <span class="id">a2</span> <span class="id">tyres</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_assignop_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> <span class="id">t</span> <span class="id">tmp</span> <span class="id">ty1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> <span class="id">ty1</span> <span class="id">a1</span> <span class="id">sl3</span> <span class="id">a3</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt; <span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp3</span> -&gt; <span class="id">list_disjoint</span> <span class="id">tmp2</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp3</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp1</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp2</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty1</span> = <span class="id">Csyntax.typeof</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Eassignop</span> <span class="id">op</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">tyres</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">sl3</span> ++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Sset</span> <span class="id">t</span> (<span class="id">Ecast</span> (<span class="id">Ebinop</span> <span class="id">op</span> <span class="id">a3</span> <span class="id">a2</span> <span class="id">tyres</span>) <span class="id">ty1</span>) ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">make_assign</span> <span class="id">a1</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">final</span> <span class="id">dst</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_postincr_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">id</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">ty1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_rvalof</span> <span class="id">ty1</span> <span class="id">a1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty1</span> = <span class="id">Csyntax.typeof</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Epostincr</span> <span class="id">id</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">make_assign</span> <span class="id">a1</span> (<span class="id">transl_incrdecr</span> <span class="id">id</span> <span class="id">a2</span> <span class="id">ty1</span>) :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_postincr_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">id</span> <span class="id">e1</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">t</span> <span class="id">ty1</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt; ~<span class="id">In</span> <span class="id">t</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ty1</span> = <span class="id">Csyntax.typeof</span> <span class="id">e1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Epostincr</span> <span class="id">id</span> <span class="id">e1</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">make_set</span> <span class="id">t</span> <span class="id">a1</span> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">make_assign</span> <span class="id">a1</span> (<span class="id">transl_incrdecr</span> <span class="id">id</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) <span class="id">ty1</span>) ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">final</span> <span class="id">dst</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty1</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_comma</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e2</span> <span class="id">sl2</span> <span class="id">a2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ecomma</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ty</span>) (<span class="id">sl1</span> ++ <span class="id">sl2</span>) <span class="id">a2</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_call_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">el2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">el2</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Ecall</span> <span class="id">e1</span> <span class="id">el2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">Scall</span> <span class="id">None</span> <span class="id">a1</span> <span class="id">al2</span> :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_call_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">e1</span> <span class="id">el2</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> <span class="id">t</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dst</span> &lt;&gt; <span class="id">For_effects</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">el2</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt; <span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ecall</span> <span class="id">e1</span> <span class="id">el2</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl1</span> ++ <span class="id">sl2</span> ++ <span class="id">Scall</span> (<span class="id">Some</span> <span class="id">t</span>) <span class="id">a1</span> <span class="id">al2</span> :: <span class="id">final</span> <span class="id">dst</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_builtin_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">el</span> <span class="id">ty</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmp1</span> <span class="id">any</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">el</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">el</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl</span> ++ <span class="id">Sbuiltin</span> <span class="id">None</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">al</span> :: <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_builtin_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">el</span> <span class="id">ty</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmp1</span> <span class="id">t</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dst</span> &lt;&gt; <span class="id">For_effects</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">el</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> (<span class="id">Csyntax.Ebuiltin</span> <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">el</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sl</span> ++ <span class="id">Sbuiltin</span> (<span class="id">Some</span> <span class="id">t</span>) <span class="id">ef</span> <span class="id">tyargs</span> <span class="id">al</span> :: <span class="id">final</span> <span class="id">dst</span> (<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_paren_val</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">t</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDbase</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">t</span>)) <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> (<span class="id">Csyntax.Eparen</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sl1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Etempvar</span> <span class="id">t</span> <span class="id">ty</span>) <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_paren_effects</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> <span class="id">any</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_effects</span> (<span class="id">Csyntax.Eparen</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span>) <span class="id">sl1</span> <span class="id">any</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_paren_set</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">t</span> <span class="id">sd</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> <span class="id">any</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> (<span class="id">SDcons</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">t</span> <span class="id">sd</span>)) <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">In</span> <span class="id">t</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> (<span class="id">For_set</span> <span class="id">sd</span>) (<span class="id">Csyntax.Eparen</span> <span class="id">e1</span> <span class="id">tycast</span> <span class="id">ty</span>) <span class="id">sl1</span> <span class="id">any</span> <span class="id">tmp</span><br/>
<br/>
<span class="kwd">with</span> <span class="id">tr_exprlist</span>: <span class="id">temp_env</span> -&gt; <span class="id">Csyntax.exprlist</span> -&gt; <span class="id">list</span> <span class="id">statement</span> -&gt; <span class="id">list</span> <span class="id">expr</span> -&gt; <span class="id">list</span> <span class="id">ident</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_nil</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">Csyntax.Enil</span> <span class="id">nil</span> <span class="id">nil</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_cons</span>: <span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">el2</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">For_val</span> <span class="id">e1</span> <span class="id">sl1</span> <span class="id">a1</span> <span class="id">tmp1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">el2</span> <span class="id">sl2</span> <span class="id">al2</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">list_disjoint</span> <span class="id">tmp1</span> <span class="id">tmp2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl</span> <span class="id">tmp1</span> <span class="id">tmp</span> -&gt; <span class="id">incl</span> <span class="id">tmp2</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span> (<span class="id">Csyntax.Econs</span> <span class="id">e1</span> <span class="id">el2</span>) (<span class="id">sl1</span> ++ <span class="id">sl2</span>) (<span class="id">a1</span> :: <span class="id">al2</span>) <span class="id">tmp</span>.<br/>
<br/>
<span class="kwd">Scheme</span> <span class="id">tr_expr_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">tr_expr</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">tr_exprlist_ind2</span> := <span class="id">Minimality</span> <span class="kwd">for</span> <span class="id">tr_exprlist</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">tr_expr_exprlist</span> <span class="id">from</span> <span class="id">tr_expr_ind2</span>, <span class="id">tr_exprlist_ind2</span>.<br/>
<br/>
<div class="doc">Useful invariance properties. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">tr_expr_invariant</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>, <span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span>', (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">In</span> <span class="id">x</span> <span class="id">tmps</span> -&gt; <span class="id">le</span>'!<span class="id">x</span> = <span class="id">le</span>!<span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span>' <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span><br/>
<span class="kwd">with</span> <span class="id">tr_exprlist_invariant</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span>, <span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span>', (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">In</span> <span class="id">x</span> <span class="id">tmps</span> -&gt; <span class="id">le</span>'!<span class="id">x</span> = <span class="id">le</span>!<span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_exprlist</span> <span class="id">le</span>' <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4285')">Proof.</div>
<div class="proofscript" id="proof4285">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">le</span>'!<span class="id">id</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">le</span>'!<span class="id">id</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">tr_rvalof_monotone</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">b</span> <span class="id">tmps</span>, <span class="id">tr_rvalof</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">b</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tmps</span>', <span class="id">incl</span> <span class="id">tmps</span> <span class="id">tmps</span>' -&gt; <span class="id">tr_rvalof</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">b</span> <span class="id">tmps</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4286')">Proof.</div>
<div class="proofscript" id="proof4286">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">unfold</span> <span class="id">incl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">tr_expr_monotone</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>, <span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tmps</span>', <span class="id">incl</span> <span class="id">tmps</span> <span class="id">tmps</span>' -&gt; <span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>'<br/>
<span class="kwd">with</span> <span class="id">tr_exprlist_monotone</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span>, <span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tmps</span>', <span class="id">incl</span> <span class="id">tmps</span> <span class="id">tmps</span>' -&gt; <span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4287')">Proof.</div>
<div class="proofscript" id="proof4287">
&nbsp;&nbsp;<span class="id">specialize</span> <span class="id">tr_rvalof_monotone</span>. <span class="tactic">intros</span> <span class="id">RVALOF</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">unfold</span> <span class="id">incl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">econstructor</span>; <span class="tactic">unfold</span> <span class="id">incl</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Top-level translation </h2>
<br/>
<div class="doc">The "top-level" translation is equivalent to <span class="bracket"><span class="id">tr_expr</span></span> above
  for source terms.  It brings additional flexibility in the matching
  between Csyntax values and Cminor expressions: in the case of
  <span class="bracket"><span class="id">tr_expr</span></span>, the Cminor expression must not depend on memory,
  while in the case of <span class="bracket"><span class="id">tr_top</span></span> it can depend on the current memory
  state. </div>
<br/>
<span class="kwd">Section</span> <span class="id">TR_TOP</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">ge</span>: <span class="id">genv</span>.<br/>
<span class="kwd">Variable</span> <span class="id">e</span>: <span class="id">env</span>.<br/>
<span class="kwd">Variable</span> <span class="id">le</span>: <span class="id">temp_env</span>.<br/>
<span class="kwd">Variable</span> <span class="id">m</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_top</span>: <span class="id">destination</span> -&gt; <span class="id">Csyntax.expr</span> -&gt; <span class="id">list</span> <span class="id">statement</span> -&gt; <span class="id">expr</span> -&gt; <span class="id">list</span> <span class="id">ident</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_top_val_val</span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeof</span> <span class="id">a</span> = <span class="id">ty</span> -&gt; <span class="id">eval_expr</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_top</span> <span class="id">For_val</span> (<span class="id">Csyntax.Eval</span> <span class="id">v</span> <span class="id">ty</span>) <span class="id">nil</span> <span class="id">a</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;| <span class="id">tr_top_base</span>: <span class="kwd">forall</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmp</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_top</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmp</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">TR_TOP</span>.<br/>
<br/>
<h2> Translation of statements </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_expression</span>: <span class="id">Csyntax.expr</span> -&gt; <span class="id">statement</span> -&gt; <span class="id">expr</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_expression_intro</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>, <span class="id">tr_top</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">For_val</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expression</span> <span class="id">r</span> (<span class="id">makeseq</span> <span class="id">sl</span>) <span class="id">a</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_expr_stmt</span>: <span class="id">Csyntax.expr</span> -&gt; <span class="id">statement</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_expr_stmt_intro</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>, <span class="id">tr_top</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">For_effects</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr_stmt</span> <span class="id">r</span> (<span class="id">makeseq</span> <span class="id">sl</span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_if</span>: <span class="id">Csyntax.expr</span> -&gt; <span class="id">statement</span> -&gt; <span class="id">statement</span> -&gt; <span class="id">statement</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_if_intro</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>, <span class="id">tr_top</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">For_val</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> (<span class="id">makeseq</span> (<span class="id">sl</span> ++ <span class="id">makeif</span> <span class="id">a</span> <span class="id">s1</span> <span class="id">s2</span> :: <span class="id">nil</span>)).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_stmt</span>: <span class="id">Csyntax.statement</span> -&gt; <span class="id">statement</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_skip</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">Csyntax.Sskip</span> <span class="id">Sskip</span><br/>
&nbsp;&nbsp;| <span class="id">tr_do</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expr_stmt</span> <span class="id">r</span> <span class="id">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sdo</span> <span class="id">r</span>) <span class="id">s</span><br/>
&nbsp;&nbsp;| <span class="id">tr_seq</span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">ts1</span> <span class="id">ts2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s1</span> <span class="id">ts1</span> -&gt; <span class="id">tr_stmt</span> <span class="id">s2</span> <span class="id">ts2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Ssequence</span> <span class="id">s1</span> <span class="id">s2</span>) (<span class="id">Ssequence</span> <span class="id">ts1</span> <span class="id">ts2</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_ifthenelse</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s</span>' <span class="id">a</span> <span class="id">ts1</span> <span class="id">ts2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expression</span> <span class="id">r</span> <span class="id">s</span>' <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s1</span> <span class="id">ts1</span> -&gt; <span class="id">tr_stmt</span> <span class="id">s2</span> <span class="id">ts2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sifthenelse</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span>) (<span class="id">Ssequence</span> <span class="id">s</span>' (<span class="id">Sifthenelse</span> <span class="id">a</span> <span class="id">ts1</span> <span class="id">ts2</span>))<br/>
&nbsp;&nbsp;| <span class="id">tr_while</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s</span>' <span class="id">ts1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">Sskip</span> <span class="id">Sbreak</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s1</span> <span class="id">ts1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Swhile</span> <span class="id">r</span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sloop</span> (<span class="id">Ssequence</span> <span class="id">s</span>' <span class="id">ts1</span>) <span class="id">Sskip</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_dowhile</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s</span>' <span class="id">ts1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">Sskip</span> <span class="id">Sbreak</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s1</span> <span class="id">ts1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sdowhile</span> <span class="id">r</span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sloop</span> <span class="id">ts1</span> <span class="id">s</span>')<br/>
&nbsp;&nbsp;| <span class="id">tr_for_1</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s3</span> <span class="id">s4</span> <span class="id">s</span>' <span class="id">ts3</span> <span class="id">ts4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">Sskip</span> <span class="id">Sbreak</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s3</span> <span class="id">ts3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s4</span> <span class="id">ts4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sfor</span> <span class="id">Csyntax.Sskip</span> <span class="id">r</span> <span class="id">s3</span> <span class="id">s4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Sloop</span> (<span class="id">Ssequence</span> <span class="id">s</span>' <span class="id">ts4</span>) <span class="id">ts3</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_for_2</span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">r</span> <span class="id">s3</span> <span class="id">s4</span> <span class="id">s</span>' <span class="id">ts1</span> <span class="id">ts3</span> <span class="id">ts4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">Sskip</span> <span class="id">Sbreak</span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s1</span> &lt;&gt; <span class="id">Csyntax.Sskip</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s1</span> <span class="id">ts1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s3</span> <span class="id">ts3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s4</span> <span class="id">ts4</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sfor</span> <span class="id">s1</span> <span class="id">r</span> <span class="id">s3</span> <span class="id">s4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ssequence</span> <span class="id">ts1</span> (<span class="id">Sloop</span> (<span class="id">Ssequence</span> <span class="id">s</span>' <span class="id">ts4</span>) <span class="id">ts3</span>))<br/>
&nbsp;&nbsp;| <span class="id">tr_break</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">Csyntax.Sbreak</span> <span class="id">Sbreak</span><br/>
&nbsp;&nbsp;| <span class="id">tr_continue</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">Csyntax.Scontinue</span> <span class="id">Scontinue</span><br/>
&nbsp;&nbsp;| <span class="id">tr_return_none</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sreturn</span> <span class="id">None</span>) (<span class="id">Sreturn</span> <span class="id">None</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_return_some</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s</span>' <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expression</span> <span class="id">r</span> <span class="id">s</span>' <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sreturn</span> (<span class="id">Some</span> <span class="id">r</span>)) (<span class="id">Ssequence</span> <span class="id">s</span>' (<span class="id">Sreturn</span> (<span class="id">Some</span> <span class="id">a</span>)))<br/>
&nbsp;&nbsp;| <span class="id">tr_switch</span>: <span class="kwd">forall</span> <span class="id">r</span> <span class="id">ls</span> <span class="id">s</span>' <span class="id">a</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_expression</span> <span class="id">r</span> <span class="id">s</span>' <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_lblstmts</span> <span class="id">ls</span> <span class="id">tls</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sswitch</span> <span class="id">r</span> <span class="id">ls</span>) (<span class="id">Ssequence</span> <span class="id">s</span>' (<span class="id">Sswitch</span> <span class="id">a</span> <span class="id">tls</span>))<br/>
&nbsp;&nbsp;| <span class="id">tr_label</span>: <span class="kwd">forall</span> <span class="id">lbl</span> <span class="id">s</span> <span class="id">ts</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s</span> <span class="id">ts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Slabel</span> <span class="id">lbl</span> <span class="id">s</span>) (<span class="id">Slabel</span> <span class="id">lbl</span> <span class="id">ts</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_goto</span>: <span class="kwd">forall</span> <span class="id">lbl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> (<span class="id">Csyntax.Sgoto</span> <span class="id">lbl</span>) (<span class="id">Sgoto</span> <span class="id">lbl</span>)<br/>
<br/>
<span class="kwd">with</span> <span class="id">tr_lblstmts</span>: <span class="id">Csyntax.labeled_statements</span> -&gt; <span class="id">labeled_statements</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_ls_nil</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_lblstmts</span> <span class="id">Csyntax.LSnil</span> <span class="id">LSnil</span><br/>
&nbsp;&nbsp;| <span class="id">tr_ls_cons</span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">s</span> <span class="id">ls</span> <span class="id">ts</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">s</span> <span class="id">ts</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_lblstmts</span> <span class="id">ls</span> <span class="id">tls</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_lblstmts</span> (<span class="id">Csyntax.LScons</span> <span class="id">c</span> <span class="id">s</span> <span class="id">ls</span>) (<span class="id">LScons</span> <span class="id">c</span> <span class="id">ts</span> <span class="id">tls</span>).<br/>
<br/>
<h1> Correctness proof with respect to the specification. </h1>
<br/>
<h2> Properties of the monad </h2>
<br/>
<span class="kwd">Remark</span> <span class="id">bind_inversion</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id">mon</span> <span class="id">A</span>) (<span class="id">g</span>: <span class="id">A</span> -&gt; <span class="id">mon</span> <span class="id">B</span>) (<span class="id">y</span>: <span class="id">B</span>) (<span class="id">z1</span> <span class="id">z3</span>: <span class="id">generator</span>) <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">bind</span> <span class="id">f</span> <span class="id">g</span> <span class="id">z1</span> = <span class="id">Res</span> <span class="id">y</span> <span class="id">z3</span> <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>, <span class="id">exists</span> <span class="id">z2</span>, <span class="id">exists</span> <span class="id">I1</span>, <span class="id">exists</span> <span class="id">I2</span>,<br/>
&nbsp;&nbsp;<span class="id">f</span> <span class="id">z1</span> = <span class="id">Res</span> <span class="id">x</span> <span class="id">z2</span> <span class="id">I1</span> /\ <span class="id">g</span> <span class="id">x</span> <span class="id">z2</span> = <span class="id">Res</span> <span class="id">y</span> <span class="id">z3</span> <span class="id">I2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4288')">Proof.</div>
<div class="proofscript" id="proof4288">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">I</span>. <span class="tactic">unfold</span> <span class="id">bind</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">z1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id">g</span> <span class="id">a</span> <span class="id">g</span>'); <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">bind2_inversion</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span> <span class="id">Csyntax</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id">mon</span> (<span class="id">A</span>*<span class="id">B</span>)) (<span class="id">g</span>: <span class="id">A</span> -&gt; <span class="id">B</span> -&gt; <span class="id">mon</span> <span class="id">Csyntax</span>) (<span class="id">y</span>: <span class="id">Csyntax</span>) (<span class="id">z1</span> <span class="id">z3</span>: <span class="id">generator</span>) <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">bind2</span> <span class="id">f</span> <span class="id">g</span> <span class="id">z1</span> = <span class="id">Res</span> <span class="id">y</span> <span class="id">z3</span> <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>, <span class="id">exists</span> <span class="id">x2</span>, <span class="id">exists</span> <span class="id">z2</span>, <span class="id">exists</span> <span class="id">I1</span>, <span class="id">exists</span> <span class="id">I2</span>,<br/>
&nbsp;&nbsp;<span class="id">f</span> <span class="id">z1</span> = <span class="id">Res</span> (<span class="id">x1</span>,<span class="id">x2</span>) <span class="id">z2</span> <span class="id">I1</span> /\ <span class="id">g</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">z2</span> = <span class="id">Res</span> <span class="id">y</span> <span class="id">z3</span> <span class="id">I2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4289')">Proof.</div>
<div class="proofscript" id="proof4289">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">bind2</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">bind_inversion</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">x1</span> <span class="id">x2</span>] [<span class="id">z2</span> [<span class="id">I1</span> [<span class="id">I2</span> [<span class="id">P</span> <span class="id">Q</span>]]]]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>; <span class="id">exists</span> <span class="id">x2</span>; <span class="id">exists</span> <span class="id">z2</span>; <span class="id">exists</span> <span class="id">I1</span>; <span class="id">exists</span> <span class="id">I2</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">monadInv1</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">subst</span><br/>
&nbsp;&nbsp;| (@<span class="id">ret</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">subst</span><br/>
&nbsp;&nbsp;| (@<span class="id">error</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (<span class="id">bind</span> ?<span class="id">F</span> ?<span class="id">G</span> ?<span class="id">Z</span> = <span class="id">Res</span> ?<span class="id">X</span> ?<span class="id">Z</span>' ?<span class="id">I</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span> := <span class="tactic">fresh</span> "<span class="id">x</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">z</span> := <span class="tactic">fresh</span> "<span class="id">z</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">I1</span> := <span class="tactic">fresh</span> "<span class="id">I</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">I2</span> := <span class="tactic">fresh</span> "<span class="id">I</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">EQ1</span> := <span class="tactic">fresh</span> "<span class="id">EQ</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">EQ2</span> := <span class="tactic">fresh</span> "<span class="id">EQ</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">bind_inversion</span> <span class="id">_</span> <span class="id">_</span> <span class="id">F</span> <span class="id">G</span> <span class="id">X</span> <span class="id">Z</span> <span class="id">Z</span>' <span class="id">I</span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">x</span> [<span class="id">z</span> [<span class="id">I1</span> [<span class="id">I2</span> [<span class="id">EQ1</span> <span class="id">EQ2</span>]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">monadInv1</span> <span class="id">EQ2</span>)))))))<br/>
&nbsp;&nbsp;&nbsp;| (<span class="id">bind2</span> ?<span class="id">F</span> ?<span class="id">G</span> ?<span class="id">Z</span> = <span class="id">Res</span> ?<span class="id">X</span> ?<span class="id">Z</span>' ?<span class="id">I</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span> := <span class="tactic">fresh</span> "<span class="id">x</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span> := <span class="tactic">fresh</span> "<span class="id">y</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">z</span> := <span class="tactic">fresh</span> "<span class="id">z</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">I1</span> := <span class="tactic">fresh</span> "<span class="id">I</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">I2</span> := <span class="tactic">fresh</span> "<span class="id">I</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">EQ1</span> := <span class="tactic">fresh</span> "<span class="id">EQ</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">EQ2</span> := <span class="tactic">fresh</span> "<span class="id">EQ</span>" <span class="kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">bind2_inversion</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">F</span> <span class="id">G</span> <span class="id">X</span> <span class="id">Z</span> <span class="id">Z</span>' <span class="id">I</span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">x</span> [<span class="id">y</span> [<span class="id">z</span> [<span class="id">I1</span> [<span class="id">I2</span> [<span class="id">EQ1</span> <span class="id">EQ2</span>]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">monadInv1</span> <span class="id">EQ2</span>))))))))<br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">monadInv</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (@<span class="id">ret</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (@<span class="id">error</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (<span class="id">bind</span> ?<span class="id">F</span> ?<span class="id">G</span> ?<span class="id">Z</span> = <span class="id">Res</span> ?<span class="id">X</span> ?<span class="id">Z</span>' ?<span class="id">I</span>) =&gt; <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (<span class="id">bind2</span> ?<span class="id">F</span> ?<span class="id">G</span> ?<span class="id">Z</span> = <span class="id">Res</span> ?<span class="id">X</span> ?<span class="id">Z</span>' ?<span class="id">I</span>) =&gt; <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| (?<span class="id">F</span> <span class="id">_</span> = <span class="id">Res</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="tactic">progress</span> <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>) || <span class="tactic">unfold</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H</span>); <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h2> Freshness and separation properties. </h2>
<br/>
<span class="kwd">Definition</span> <span class="id">within</span> (<span class="id">id</span>: <span class="id">ident</span>) (<span class="id">g1</span> <span class="id">g2</span>: <span class="id">generator</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">Ple</span> (<span class="id">gen_next</span> <span class="id">g1</span>) <span class="id">id</span> /\ <span class="id">Plt</span> <span class="id">id</span> (<span class="id">gen_next</span> <span class="id">g2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">gensym_within</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ty</span> <span class="id">g1</span> <span class="id">id</span> <span class="id">g2</span> <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">gensym</span> <span class="id">ty</span> <span class="id">g1</span> = <span class="id">Res</span> <span class="id">id</span> <span class="id">g2</span> <span class="id">I</span> -&gt; <span class="id">within</span> <span class="id">id</span> <span class="id">g1</span> <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4290')">Proof.</div>
<div class="proofscript" id="proof4290">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">Ple_refl</span>. <span class="tactic">apply</span> <span class="id">Plt_succ</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">within_widen</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">g1</span> <span class="id">g2</span> <span class="id">g1</span>' <span class="id">g2</span>',<br/>
&nbsp;&nbsp;<span class="id">within</span> <span class="id">id</span> <span class="id">g1</span> <span class="id">g2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Ple</span> (<span class="id">gen_next</span> <span class="id">g1</span>') (<span class="id">gen_next</span> <span class="id">g1</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">Ple</span> (<span class="id">gen_next</span> <span class="id">g2</span>) (<span class="id">gen_next</span> <span class="id">g2</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">within</span> <span class="id">id</span> <span class="id">g1</span>' <span class="id">g2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4291')">Proof.</div>
<div class="proofscript" id="proof4291">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Ple_trans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Plt_Ple_trans</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">contained</span> (<span class="id">l</span>: <span class="id">list</span> <span class="id">ident</span>) (<span class="id">g1</span> <span class="id">g2</span>: <span class="id">generator</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id">In</span> <span class="id">id</span> <span class="id">l</span> -&gt; <span class="id">within</span> <span class="id">id</span> <span class="id">g1</span> <span class="id">g2</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_nil</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g1</span> <span class="id">g2</span>, <span class="id">contained</span> <span class="id">nil</span> <span class="id">g1</span> <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4292')">Proof.</div>
<div class="proofscript" id="proof4292">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_widen</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span> <span class="id">g1</span>' <span class="id">g2</span>',<br/>
&nbsp;&nbsp;<span class="id">contained</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Ple</span> (<span class="id">gen_next</span> <span class="id">g1</span>') (<span class="id">gen_next</span> <span class="id">g1</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">Ple</span> (<span class="id">gen_next</span> <span class="id">g2</span>) (<span class="id">gen_next</span> <span class="id">g2</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">contained</span> <span class="id">l</span> <span class="id">g1</span>' <span class="id">g2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4293')">Proof.</div>
<div class="proofscript" id="proof4293">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">within_widen</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_cons</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span>,<br/>
&nbsp;&nbsp;<span class="id">within</span> <span class="id">id</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">contained</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">contained</span> (<span class="id">id</span> :: <span class="id">l</span>) <span class="id">g1</span> <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4294')">Proof.</div>
<div class="proofscript" id="proof4294">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_app</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">g1</span> <span class="id">g2</span>,<br/>
&nbsp;&nbsp;<span class="id">contained</span> <span class="id">l1</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">contained</span> <span class="id">l2</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">contained</span> (<span class="id">l1</span> ++ <span class="id">l2</span>) <span class="id">g1</span> <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4295')">Proof.</div>
<div class="proofscript" id="proof4295">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">in_app_or</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_disjoint</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g1</span> <span class="id">l1</span> <span class="id">g2</span> <span class="id">l2</span> <span class="id">g3</span>,<br/>
&nbsp;&nbsp;<span class="id">contained</span> <span class="id">l1</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">contained</span> <span class="id">l2</span> <span class="id">g2</span> <span class="id">g3</span> -&gt; <span class="id">list_disjoint</span> <span class="id">l1</span> <span class="id">l2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4296')">Proof.</div>
<div class="proofscript" id="proof4296">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intro</span>; <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">Csyntax</span> <span class="id">D</span>].<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">Plt_strict</span> <span class="id">x</span>). <span class="tactic">apply</span> <span class="id">Plt_Ple_trans</span> <span class="kwd">with</span> (<span class="id">gen_next</span> <span class="id">g2</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contained_notin</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">g1</span> <span class="id">l</span> <span class="id">g2</span> <span class="id">id</span> <span class="id">g3</span>,<br/>
&nbsp;&nbsp;<span class="id">contained</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">within</span> <span class="id">id</span> <span class="id">g2</span> <span class="id">g3</span> -&gt; ~<span class="id">In</span> <span class="id">id</span> <span class="id">l</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4297')">Proof.</div>
<div class="proofscript" id="proof4297">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">Csyntax</span> <span class="id">D</span>]. <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">Plt_strict</span> <span class="id">id</span>). <span class="tactic">apply</span> <span class="id">Plt_Ple_trans</span> <span class="kwd">with</span> (<span class="id">gen_next</span> <span class="id">g2</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">dest_below</span> (<span class="id">dst</span>: <span class="id">destination</span>) (<span class="id">g</span>: <span class="id">generator</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">dst</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">For_set</span> <span class="id">sd</span> =&gt; <span class="id">Plt</span> (<span class="id">sd_temp</span> <span class="id">sd</span>) <span class="id">g</span>.(<span class="id">gen_next</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id">dest_for_val_below</span>: <span class="kwd">forall</span> <span class="id">g</span>, <span class="id">dest_below</span> <span class="id">For_val</span> <span class="id">g</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4298')">Proof.</div>
<div class="proofscript" id="proof4298">
 <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">dest_for_effect_below</span>: <span class="kwd">forall</span> <span class="id">g</span>, <span class="id">dest_below</span> <span class="id">For_effects</span> <span class="id">g</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4299')">Proof.</div>
<div class="proofscript" id="proof4299">
 <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dest_for_set_seqbool_val</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tmp</span> <span class="id">ty</span> <span class="id">g1</span> <span class="id">g2</span>,<br/>
&nbsp;&nbsp;<span class="id">within</span> <span class="id">tmp</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">dest_below</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_val</span> <span class="id">tmp</span> <span class="id">ty</span>)) <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4300')">Proof.</div>
<div class="proofscript" id="proof4300">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dest_for_set_seqbool_set</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sd</span> <span class="id">ty</span> <span class="id">g</span>, <span class="id">dest_below</span> (<span class="id">For_set</span> <span class="id">sd</span>) <span class="id">g</span> -&gt; <span class="id">dest_below</span> (<span class="id">For_set</span> (<span class="id">sd_seqbool_set</span> <span class="id">ty</span> <span class="id">sd</span>)) <span class="id">g</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4301')">Proof.</div>
<div class="proofscript" id="proof4301">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dest_for_set_condition_val</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tmp</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">g1</span> <span class="id">g2</span>, <span class="id">within</span> <span class="id">tmp</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">dest_below</span> (<span class="id">For_set</span> (<span class="id">SDbase</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">tmp</span>)) <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4302')">Proof.</div>
<div class="proofscript" id="proof4302">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dest_for_set_condition_set</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sd</span> <span class="id">tmp</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">g1</span> <span class="id">g2</span>, <span class="id">dest_below</span> (<span class="id">For_set</span> <span class="id">sd</span>) <span class="id">g2</span> -&gt; <span class="id">within</span> <span class="id">tmp</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; <span class="id">dest_below</span> (<span class="id">For_set</span> (<span class="id">SDcons</span> <span class="id">tycast</span> <span class="id">ty</span> <span class="id">tmp</span> <span class="id">sd</span>)) <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4303')">Proof.</div>
<div class="proofscript" id="proof4303">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sd_temp_notin</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sd</span> <span class="id">g1</span> <span class="id">g2</span> <span class="id">l</span>, <span class="id">dest_below</span> (<span class="id">For_set</span> <span class="id">sd</span>) <span class="id">g1</span> -&gt; <span class="id">contained</span> <span class="id">l</span> <span class="id">g1</span> <span class="id">g2</span> -&gt; ~<span class="id">In</span> (<span class="id">sd_temp</span> <span class="id">sd</span>) <span class="id">l</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4304')">Proof.</div>
<div class="proofscript" id="proof4304">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">Plt_strict</span> (<span class="id">sd_temp</span> <span class="id">sd</span>)). <span class="tactic">apply</span> <span class="id">Plt_Ple_trans</span> <span class="kwd">with</span> (<span class="id">gen_next</span> <span class="id">g1</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dest_below_le</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dst</span> <span class="id">g1</span> <span class="id">g2</span>,<br/>
&nbsp;&nbsp;<span class="id">dest_below</span> <span class="id">dst</span> <span class="id">g1</span> -&gt; <span class="id">Ple</span> <span class="id">g1</span>.(<span class="id">gen_next</span>) <span class="id">g2</span>.(<span class="id">gen_next</span>) -&gt; <span class="id">dest_below</span> <span class="id">dst</span> <span class="id">g2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4305')">Proof.</div>
<div class="proofscript" id="proof4305">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">Plt_Ple_trans</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">gensym_within</span> <span class="id">within_widen</span> <span class="id">contained_widen</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contained_cons</span> <span class="id">contained_app</span> <span class="id">contained_disjoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contained_notin</span> <span class="id">contained_nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dest_for_set_seqbool_val</span> <span class="id">dest_for_set_seqbool_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dest_for_set_condition_val</span> <span class="id">dest_for_set_condition_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sd_temp_notin</span> <span class="id">dest_below_le</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">incl_refl</span> <span class="id">incl_tl</span> <span class="id">incl_app</span> <span class="id">incl_appl</span> <span class="id">incl_appr</span> <span class="id">incl_same_head</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">in_eq</span> <span class="id">in_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ple_trans</span> <span class="id">Ple_refl</span>: <span class="id">gensym</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">dest_for_val_below</span> <span class="id">dest_for_effect_below</span>.<br/>
<br/>
<h2> Correctness of the translation functions </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id">finish_meets_spec_1</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dst</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">sl</span>' <span class="id">a</span>',<br/>
&nbsp;&nbsp;<span class="id">finish</span> <span class="id">dst</span> <span class="id">sl</span> <span class="id">a</span> = (<span class="id">sl</span>', <span class="id">a</span>') -&gt; <span class="id">sl</span>' = <span class="id">sl</span> ++ <span class="id">final</span> <span class="id">dst</span> <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4306')">Proof.</div>
<div class="proofscript" id="proof4306">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">app_nil_end</span>. <span class="tactic">apply</span> <span class="id">app_nil_end</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">finish_meets_spec_2</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dst</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">sl</span>' <span class="id">a</span>',<br/>
&nbsp;&nbsp;<span class="id">finish</span> <span class="id">dst</span> <span class="id">sl</span> <span class="id">a</span> = (<span class="id">sl</span>', <span class="id">a</span>') -&gt; <span class="id">a</span>' = <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4307')">Proof.</div>
<div class="proofscript" id="proof4307">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">UseFinish</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id">finish</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = (<span class="id">_</span>, <span class="id">_</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> (<span class="id">finish_meets_spec_2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> (<span class="id">finish_meets_spec_1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">add_dest</span> (<span class="id">dst</span>: <span class="id">destination</span>) (<span class="id">tmps</span>: <span class="id">list</span> <span class="id">ident</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">dst</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">For_set</span> <span class="id">sd</span> =&gt; <span class="id">sd_temp</span> <span class="id">sd</span> :: <span class="id">tmps</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">tmps</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">add_dest_incl</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dst</span> <span class="id">tmps</span>, <span class="id">incl</span> <span class="id">tmps</span> (<span class="id">add_dest</span> <span class="id">dst</span> <span class="id">tmps</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4308')">Proof.</div>
<div class="proofscript" id="proof4308">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">tr_expr_add_dest</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>,<br/>
&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> (<span class="id">add_dest</span> <span class="id">dst</span> <span class="id">tmps</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4309')">Proof.</div>
<div class="proofscript" id="proof4309">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">tr_expr_monotone</span> <span class="kwd">with</span> <span class="id">tmps</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">add_dest_incl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_valof_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">g</span> <span class="id">sl</span> <span class="id">b</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_valof</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">g</span> = <span class="id">Res</span> (<span class="id">sl</span>, <span class="id">b</span>) <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tmps</span>, <span class="id">tr_rvalof</span> <span class="id">ty</span> <span class="id">a</span> <span class="id">sl</span> <span class="id">b</span> <span class="id">tmps</span> /\ <span class="id">contained</span> <span class="id">tmps</span> <span class="id">g</span> <span class="id">g</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4310')">Proof.</div>
<div class="proofscript" id="proof4310">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transl_valof</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">type_is_volatile</span> <span class="id">ty</span>) <span class="id">eqn</span>:?; <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x</span> :: <span class="id">nil</span>); <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id">nil</span> <span class="id">ident</span>); <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Scheme</span> <span class="id">expr_ind2</span> := <span class="kwd">Induction</span> <span class="kwd">for</span> <span class="id">Csyntax.expr</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">exprlist_ind2</span> := <span class="kwd">Induction</span> <span class="kwd">for</span> <span class="id">Csyntax.exprlist</span> <span class="kwd">Sort</span> <span class="kwd">Prop</span>.<br/>
<span class="id">Combined</span> <span class="kwd">Scheme</span> <span class="id">expr_exprlist_ind</span> <span class="id">from</span> <span class="id">expr_ind2</span>, <span class="id">exprlist_ind2</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_meets_spec</span>:<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span> <span class="id">dst</span> <span class="id">g</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_expr</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">g</span> = <span class="id">Res</span> (<span class="id">sl</span>, <span class="id">a</span>) <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dest_below</span> <span class="id">dst</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tmps</span>, (<span class="kwd">forall</span> <span class="id">le</span>, <span class="id">tr_expr</span> <span class="id">le</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> (<span class="id">add_dest</span> <span class="id">dst</span> <span class="id">tmps</span>)) /\ <span class="id">contained</span> <span class="id">tmps</span> <span class="id">g</span> <span class="id">g</span>')<br/>
&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">g</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transl_exprlist</span> <span class="id">rl</span> <span class="id">g</span> = <span class="id">Res</span> (<span class="id">sl</span>, <span class="id">al</span>) <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tmps</span>, (<span class="kwd">forall</span> <span class="id">le</span>, <span class="id">tr_exprlist</span> <span class="id">le</span> <span class="id">rl</span> <span class="id">sl</span> <span class="id">al</span> <span class="id">tmps</span>) /\ <span class="id">contained</span> <span class="id">tmps</span> <span class="id">g</span> <span class="id">g</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4311')">Proof.</div>
<div class="proofscript" id="proof4311">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">expr_exprlist_ind</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span>; <span class="tactic">intros</span>.<br/>
&nbsp;val&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="id">exists</span> (@<span class="id">nil</span> <span class="id">ident</span>); <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
<span class="id">Opaque</span> <span class="id">makeif</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
&nbsp;var&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">UseFinish</span>. <span class="id">constructor</span>.<br/>
&nbsp;field&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">tmp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;valof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">transl_valof_meets_spec</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;deref&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;addrof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;unop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;binop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;cast&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">tr_expr_add_dest</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;seqand&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqand_val</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqand_effects</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqand_set</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;seqor&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqor_val</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqor_effects</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_seqor_set</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;condition&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H2</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp3</span> [<span class="id">E</span> <span class="id">F</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_condition_val</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp3</span> [<span class="id">E</span> <span class="id">F</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_condition_effects</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;test&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span> 10 <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp3</span> [<span class="id">E</span> <span class="id">F</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">tr_condition_set</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;sizeof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id">nil</span> <span class="id">ident</span>); <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">constructor</span>.<br/>
&nbsp;alignof&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">UseFinish</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id">nil</span> <span class="id">ident</span>); <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">constructor</span>.<br/>
&nbsp;assign&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ2</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x1</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tr_assign_val</span> <span class="kwd">with</span> (<span class="id">dst</span> := <span class="id">For_val</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x1</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tr_assign_val</span> <span class="kwd">with</span> (<span class="id">dst</span> := <span class="id">For_set</span> <span class="id">sd</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;assignop&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">transl_valof_meets_spec</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp3</span> [<span class="id">E</span> <span class="id">F</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ3</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x2</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tr_assignop_val</span> <span class="kwd">with</span> (<span class="id">dst</span> := <span class="id">For_val</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x2</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span> ++ <span class="id">tmp3</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tr_assignop_val</span> <span class="kwd">with</span> (<span class="id">dst</span> := <span class="id">For_set</span> <span class="id">sd</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;postincr&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">transl_valof_meets_spec</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;comma&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">list_disjoint_cons_r</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id">incl_tran</span>. 2: <span class="tactic">apply</span> <span class="id">add_dest_incl</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ2</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x1</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x1</span> :: <span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_app</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;builtin&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">monadInv</span> <span class="id">EQ0</span>; <span class="tactic">simpl</span> <span class="id">add_dest</span> <span class="kwd">in</span> *.<br/>
&nbsp;for&nbsp;value&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;for&nbsp;effects&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tmp1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;for&nbsp;set&nbsp;*)</span>&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">x0</span> :: <span class="id">tmp1</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">app_ass</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">contained_cons</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;loc&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;paren&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>.<br/>
&nbsp;nil&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>; <span class="id">exists</span> (@<span class="id">nil</span> <span class="id">ident</span>); <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">gensym</span>. <span class="id">constructor</span>.<br/>
&nbsp;cons&nbsp;*)</span>&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmp2</span> [<span class="id">Csyntax</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tmp1</span> ++ <span class="id">tmp2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gensym</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_expr_meets_spec</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">dst</span> <span class="id">g</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">transl_expr</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">g</span> = <span class="id">Res</span> (<span class="id">sl</span>, <span class="id">a</span>) <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">dest_below</span> <span class="id">dst</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tmps</span>, <span class="kwd">forall</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span>, <span class="id">tr_top</span> <span class="id">ge</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">dst</span> <span class="id">r</span> <span class="id">sl</span> <span class="id">a</span> <span class="id">tmps</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4312')">Proof.</div>
<div class="proofscript" id="proof4312">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id">proj1</span> <span class="id">transl_meets_spec</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tmps</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">add_dest</span> <span class="id">dst</span> <span class="id">tmps</span>); <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">tr_top_base</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_expression_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">g</span> <span class="id">s</span> <span class="id">a</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_expression</span> <span class="id">r</span> <span class="id">g</span> = <span class="id">Res</span> (<span class="id">s</span>, <span class="id">a</span>) <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_expression</span> <span class="id">r</span> <span class="id">s</span> <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4313')">Proof.</div>
<div class="proofscript" id="proof4313">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">transl_expr_meets_spec</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tmps</span> <span class="id">A</span>]. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_expr_stmt_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">g</span> <span class="id">s</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_expr_stmt</span> <span class="id">r</span> <span class="id">g</span> = <span class="id">Res</span> <span class="id">s</span> <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_expr_stmt</span> <span class="id">r</span> <span class="id">s</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4314')">Proof.</div>
<div class="proofscript" id="proof4314">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">transl_expr_meets_spec</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tmps</span> <span class="id">A</span>]. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_if_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">g</span> <span class="id">s</span> <span class="id">g</span>' <span class="id">I</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_if</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">g</span> = <span class="id">Res</span> <span class="id">s</span> <span class="id">g</span>' <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_if</span> <span class="id">r</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4315')">Proof.</div>
<div class="proofscript" id="proof4315">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">transl_expr_meets_spec</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tmps</span> <span class="id">A</span>]. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_stmt_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">g</span> <span class="id">ts</span> <span class="id">g</span>' <span class="id">I</span>, <span class="id">transl_stmt</span> <span class="id">s</span> <span class="id">g</span> = <span class="id">Res</span> <span class="id">ts</span> <span class="id">g</span>' <span class="id">I</span> -&gt; <span class="id">tr_stmt</span> <span class="id">s</span> <span class="id">ts</span><br/>
<span class="kwd">with</span> <span class="id">transl_lblstmt_meets_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">g</span> <span class="id">ts</span> <span class="id">g</span>' <span class="id">I</span>, <span class="id">transl_lblstmt</span> <span class="id">s</span> <span class="id">g</span> = <span class="id">Res</span> <span class="id">ts</span> <span class="id">g</span>' <span class="id">I</span> -&gt; <span class="id">tr_lblstmts</span> <span class="id">s</span> <span class="id">ts</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4316')">Proof.</div>
<div class="proofscript" id="proof4316">
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">transl_expression_meets_spec</span> <span class="id">transl_expr_stmt_meets_spec</span> <span class="id">transl_if_meets_spec</span>; <span class="tactic">intros</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span>.<br/>
<span class="id">Opaque</span> <span class="id">transl_expression</span> <span class="id">transl_expr_stmt</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">transl_stmt_meets_spec</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">I</span>; <span class="tactic">intros</span> <span class="id">TR</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">TR</span>); <span class="tactic">try</span> (<span class="id">constructor</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">is_Sskip</span> <span class="id">s1</span>); <span class="id">monadInv</span> <span class="id">EQ4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tr_for_1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tr_for_2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="id">monadInv</span> <span class="id">TR</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">transl_lblstmt_meets_spec</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">s</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">I</span>; <span class="tactic">intros</span> <span class="id">TR</span>;<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Relational presentation for the transformation of functions, fundefs, and variables. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_function</span>: <span class="id">Csyntax.function</span> -&gt; <span class="id">Clight.function</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_function_intro</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_stmt</span> <span class="id">f</span>.(<span class="id">Csyntax.fn_body</span>) <span class="id">tf</span>.(<span class="id">fn_body</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fn_return</span> <span class="id">tf</span> = <span class="id">Csyntax.fn_return</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fn_callconv</span> <span class="id">tf</span> = <span class="id">Csyntax.fn_callconv</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fn_params</span> <span class="id">tf</span> = <span class="id">Csyntax.fn_params</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fn_vars</span> <span class="id">tf</span> = <span class="id">Csyntax.fn_vars</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_function</span> <span class="id">f</span> <span class="id">tf</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tr_fundef</span>: <span class="id">Csyntax.fundef</span> -&gt; <span class="id">Clight.fundef</span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">tr_internal</span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_function</span> <span class="id">f</span> <span class="id">tf</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_fundef</span> (<span class="id">Internal</span> <span class="id">f</span>) (<span class="id">Internal</span> <span class="id">tf</span>)<br/>
&nbsp;&nbsp;| <span class="id">tr_external</span>: <span class="kwd">forall</span> <span class="id">ef</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tr_fundef</span> (<span class="id">External</span> <span class="id">ef</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span>) (<span class="id">External</span> <span class="id">ef</span> <span class="id">targs</span> <span class="id">tres</span> <span class="id">cconv</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_function_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_function</span> <span class="id">f</span> = <span class="id">OK</span> <span class="id">tf</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_function</span> <span class="id">f</span> <span class="id">tf</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4317')">Proof.</div>
<div class="proofscript" id="proof4317">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transl_function</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">transl_stmt</span> (<span class="id">Csyntax.fn_body</span> <span class="id">f</span>) (<span class="id">initial_generator</span> <span class="id">tt</span>)) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id">transl_stmt_meets_spec</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">transl_fundef_spec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fd</span> <span class="id">tfd</span>,<br/>
&nbsp;&nbsp;<span class="id">transl_fundef</span> <span class="id">fd</span> = <span class="id">OK</span> <span class="id">tfd</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">tr_fundef</span> <span class="id">fd</span> <span class="id">tfd</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4318')">Proof.</div>
<div class="proofscript" id="proof4318">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transl_fundef</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fd</span>; <span class="id">Errors.monadInv</span> <span class="id">H</span>.<br/>
+ <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id">transl_function_spec</span>; <span class="tactic">eauto</span>.<br/>
+ <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">SPEC</span>.<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
