<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module AsmWD</title>
<meta name="description" content="Documentation of Coq module AsmWD" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module AsmWD</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="loadframe.html">loadframe</a></span> <span class="id"><a href="AsmLang.html">AsmLang</a></span> <span class="id"><a href="AsmDET.html">AsmDET</a></span> <span class="id"><a href="DetLemma.html">DetLemma</a></span> <span class="id"><a href="helpers.html">helpers</a></span> <span class="id"><a href="FMemory.html">FMemory</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="FMemLemmas.html">FMemLemmas</a></span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_args_fleq">store_args_fleq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">args</span> <span class="id">tys</span> <span class="id">ofs</span> <span class="id">sp</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>' = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6526')">Proof.</div>
<div class="proofscript" id="proof6526">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">args</span>;<span class="tactic">intros</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="id">ex_match</span>;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> ?;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>;<span class="tactic">congruence</span>). <br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="store_args_eff">store_args_eff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">args</span> <span class="id">tys</span> <span class="id">ofs</span> <span class="id">sp</span> <span class="id">m</span> <span class="id">m</span>'<br/>
,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6527')">Proof.</div>
<div class="proofscript" id="proof6527">
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">args</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">R1</span>. <span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="tactic">subst</span>;<span class="id">fold</span> <span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id">IHargs</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="id">fold</span> <span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span>;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> ?;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">rewrite</span> &lt;-<span class="id">H0</span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> ?;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> ?;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span> <span class="kwd">in</span> <span class="id">Hx3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span> <span class="kwd">in</span> <span class="id">R</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Hx3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp1</span>:= (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tint">AST.Tint</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> (<span class="id"><a href="Stacklayout.html#fe_ofs_arg">Stacklayout.fe_ofs_arg</a></span> + <span class="id">ofs</span>))))).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_compare_ints_eq">MemPre_compare_ints_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">rs</span> <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#compare_ints">compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>= <span class="id"><a href="AsmLang.html#compare_ints">compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6528')">Proof.</div>
<div class="proofscript" id="proof6528">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_ints">compare_ints</a></span>,<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmpu">Values.Val.cmpu</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#MemPre_cmpu_valid_pointer_eq">MemPre_cmpu_valid_pointer_eq</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Values.html#Val.cmpu">Values.Val.cmpu</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#MemPre_cmpu_valid_pointer_eq">MemPre_cmpu_valid_pointer_eq</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_compare_ints_fp_eq">MemPre_compare_ints_fp_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6529')">Proof.</div>
<div class="proofscript" id="proof6529">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">_</span> ? <span class="id">_</span>].<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">all</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">H1</span>:<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> ?<span class="id">a</span> ?<span class="id">b</span> ?<span class="id">c</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>, <span class="id">H2</span>:<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> ?<span class="id">d</span> ?<span class="id">b</span> ?<span class="id">c</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |-<span class="id">_</span>=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">erewrite</span> <span class="id"><a href="FMemLemmas.html#unchanged_perm_range_locset_1_valid_pointer">unchanged_perm_range_locset_1_valid_pointer</a></span> <span class="kwd">with</span>(<span class="id">m</span>:=<span class="id">a</span>)(<span class="id">m</span>':=<span class="id">d</span>) <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H2</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_implies">unchanged_perm_implies</a></span>;<span class="tactic">try</span> (<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#CmpMemPermExists">CmpMemPermExists</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_perm_comm">unchanged_perm_comm</a></span> <span class="kwd">in</span> <span class="id">CmpMemPermExists</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#CmpMemPermExists">CmpMemPermExists</a></span>);<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_subset">belongsto_subset</a></span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="id">solv_locs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compare_ints_fp_emp_eff">compare_ints_fp_emp_eff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> (<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6530')">Proof.</div>
<div class="proofscript" id="proof6530">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#of_optfp">Cop_fp.of_optfp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>,<span class="id">j</span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Integers.Int.eq</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>,<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Integers.Int.eq</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>,<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">Values.eq_block</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">FMemOpFP.weak_valid_pointer_fp</a></span>,<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>;<span class="tactic">simpl</span>;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_compare_ints_LPost">MemPre_compare_ints_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">rs</span> <span class="id">i</span> <span class="id">j</span> <span class="id">rs</span>' <span class="id">m</span>' (<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m0</span>' := <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> <span class="id"><a href="AsmWD.html#Fleq">Fleq</a></span>) <span class="kwd">in</span>                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Next</span> (<span class="id"><a href="Asm.html#nextinstr">Asm.nextinstr</a></span> (<span class="id"><a href="AsmLang.html#compare_ints">compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)) <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="kwd">Next</span> <span class="id">rs</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id">m</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Next</span> (<span class="id"><a href="Asm.html#nextinstr">Asm.nextinstr</a></span> (<span class="id"><a href="AsmLang.html#compare_ints">compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id">m0</span>')) <span class="id">m0</span>' = <span class="kwd">Next</span> <span class="id">rs</span>' <span class="id">m0</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id">m0</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>')(<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6531')">Proof.</div>
<div class="proofscript" id="proof6531">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>' = <span class="id">m0</span>). <span class="tactic">unfold</span> <span class="id">m0</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">f_equal</span>. <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#MemPre_compare_ints_eq">MemPre_compare_ints_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>.  <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">erewrite</span> <span class="id"><a href="AsmWD.html#MemPre_compare_ints_fp_eq">MemPre_compare_ints_fp_eq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_effect_emp">MemPost_effect_emp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#compare_ints_fp_emp_eff">compare_ints_fp_emp_eff</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_check_compare_ints_eq">MemPre_check_compare_ints_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">i</span> <span class="id">j</span> (<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m0</span>' := <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> <span class="id"><a href="AsmWD.html#Fleq">Fleq</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="AsmLang.html#compare_ints_fp">compare_ints_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#check_compare_ints">check_compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id"><a href="AsmLang.html#check_compare_ints">check_compare_ints</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id">m0</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6532')">Proof.</div>
<div class="proofscript" id="proof6532">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#check_compare_ints">check_compare_ints</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>' = <span class="id">m0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">m0</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> (<span class="id"><a href="FMemLemmas.html#MemPre_cmpu_valid_pointer_eq">MemPre_cmpu_valid_pointer_eq</a></span> <span class="id">m</span> <span class="id">m0</span>'); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="MemPre_compare_longs_LPost">MemPre_compare_longs_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">rs</span> <span class="id">i</span> <span class="id">j</span> <span class="id">rs</span>' <span class="id">m</span>' (<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m0</span>' := <span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> <span class="id"><a href="AsmWD.html#Fleq">Fleq</a></span>) <span class="kwd">in</span>                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Next</span> (<span class="id"><a href="Asm.html#nextinstr">Asm.nextinstr</a></span> (<span class="id"><a href="AsmLang.html#compare_longs">compare_longs</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)) <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="kwd">Next</span> <span class="id">rs</span>' <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id"><a href="AsmWD.html#m0">m0</a></span> (<span class="id"><a href="AsmLang.html#compare_longs_fp">compare_longs_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id">m</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Next</span> (<span class="id"><a href="Asm.html#nextinstr">Asm.nextinstr</a></span> (<span class="id"><a href="AsmLang.html#compare_longs">compare_longs</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id">m0</span>')) <span class="id">m0</span>' = <span class="kwd">Next</span> <span class="id">rs</span>' <span class="id">m0</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#compare_longs_fp">compare_longs_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> = <span class="id"><a href="AsmLang.html#compare_longs_fp">compare_longs_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id">m0</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>')(<span class="id"><a href="AsmLang.html#compare_longs_fp">compare_longs_fp</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6533')">Proof.</div>
<div class="proofscript" id="proof6533">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_effect_emp">MemPost_effect_emp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#compare_longs_fp">compare_longs_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#cmplu_bool_fp_total">Cop_fp.cmplu_bool_fp_total</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#effects_union">effects_union</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.emp_union_locs">Locs.emp_union_locs</a></span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.eq_refl">Locs.eq_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LPre_evalbuiltin_args_equiv">LPre_evalbuiltin_args_equiv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fp</span> <span class="id">ge</span> <span class="id">rs</span> <span class="id">args</span> <span class="id">vargs</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id">m</span>' <span class="id"><a href="AsmWD.html#fp">fp</a></span>)(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#eval_builtin_args_fp">MemOpFP.eval_builtin_args_fp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.to_senv">Globalenvs.Genv.to_senv</a></span> <span class="id"><a href="AsmWD.html#ge">ge</a></span>) <span class="id"><a href="AsmWD.html#rs">rs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="AsmWD.html#rs">rs</a></span> (<span class="id"><a href="Asm.html#IR">Asm.IR</a></span> <span class="id"><a href="Asm.html#RSP">Asm.RSP</a></span>)) <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#eval_builtin_args">eval_builtin_args</a></span> (@<span class="id"><a href="Globalenvs.html#Genv.to_senv">Globalenvs.Genv.to_senv</a></span> <span class="id"><a href="AsmWD.html#F">F</a></span> <span class="id"><a href="AsmWD.html#V">V</a></span> <span class="id"><a href="AsmWD.html#ge">ge</a></span>) <span class="id"><a href="AsmWD.html#rs">rs</a></span> (<span class="id"><a href="AsmWD.html#rs">rs</a></span>(<span class="id"><a href="Asm.html#IR">Asm.IR</a></span> <span class="id"><a href="Asm.html#RSP">Asm.RSP</a></span>)) <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#vargs">vargs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#eval_builtin_args">eval_builtin_args</a></span> (<span class="id"><a href="Globalenvs.html#Genv.to_senv">Globalenvs.Genv.to_senv</a></span> <span class="id"><a href="AsmWD.html#ge">ge</a></span>) <span class="id"><a href="AsmWD.html#rs">rs</a></span> (<span class="id"><a href="AsmWD.html#rs">rs</a></span>(<span class="id"><a href="Asm.html#IR">Asm.IR</a></span> <span class="id"><a href="Asm.html#RSP">Asm.RSP</a></span>)) (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="AsmWD.html#Fleq">Fleq</a></span>)) <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#vargs">vargs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6534')">Proof.</div>
<div class="proofscript" id="proof6534">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#eval_builtin_args">eval_builtin_args</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">fp</span> <span class="id">Memeq</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">Memeq</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span> <span class="kwd">in</span> <span class="id">Memeq</span>;[|<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHlist_forall2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span> <span class="kwd">in</span> <span class="id">Memeq</span>;[|<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H5</span> <span class="id">IHlist_forall2</span> <span class="id">H0</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">fp1</span> <span class="id">H4</span> <span class="id">Memeq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> (<span class="id">constructor</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 3.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">IHeval_builtin_arg1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHeval_builtin_arg2</span>;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mempre_store_args_rec_fmem_LPost">Mempre_store_args_rec_fmem_LPost</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">args</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">sp</span> <span class="id">ofs</span> <span class="id">tys</span> <span class="id">m1</span> (<span class="id">Memeq</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id">m</span>'(<span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span>))(<span class="id">Fleq</span>:<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>  (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loadframe.html#store_args_rec_fmem">store_args_rec_fmem</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m</span>' (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="AsmWD.html#Fleq">Fleq</a></span>))  (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span>') (<span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="id"><a href="AsmWD.html#sp">sp</a></span> <span class="id"><a href="AsmWD.html#ofs">ofs</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span> = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6535')">Proof.</div>
<div class="proofscript" id="proof6535">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">args</span>;<span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>;<span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPostemp">MemPostemp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">ex_match</span>;<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">assert</span>(<span class="id">Memeq2</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>) <span class="id">m</span>'(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tint">AST.Tint</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))));[<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>|];<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>)<span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">Lp1</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">e1</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">e2</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">eauto</span>;[|<span class="tactic">split</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>];<span class="id">fold</span> <span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">destruct</span> <span class="id">Lp2</span> <span class="kwd">as</span> [<span class="id">Memeq3</span> <span class="id">Fleq3</span>];<span class="tactic">rewrite</span> (<span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx1</span>) <span class="kwd">in</span> <span class="id">Fleq3</span>;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq3</span>) <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">e3</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">e4</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;[<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span>;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq3</span>);<span class="id">Hsimpl</span>;<span class="tactic">rewrite</span> <span class="id">R1</span>,<span class="id">H8</span>;<span class="tactic">auto</span>|<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span>;<span class="tactic">auto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">rewrite</span> <span class="id">Hx1</span>;<span class="tactic">auto</span>];<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>; <span class="tactic">assert</span>(<span class="id">Memeq2</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>) <span class="id">m</span>'(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tfloat">AST.Tfloat</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))));[<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>|];<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>)<span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">Lp1</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">e1</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">e2</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">eauto</span>;[|<span class="tactic">split</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>];<span class="id">fold</span> <span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">destruct</span> <span class="id">Lp2</span> <span class="kwd">as</span> [<span class="id">Memeq3</span> <span class="id">Fleq3</span>];<span class="tactic">rewrite</span> (<span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx1</span>) <span class="kwd">in</span> <span class="id">Fleq3</span>;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq3</span>) <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">e3</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">e4</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;[<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span>;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq3</span>);<span class="id">Hsimpl</span>;<span class="tactic">rewrite</span> <span class="id">R1</span>,<span class="id">H8</span>;<span class="tactic">auto</span>|<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span>;<span class="tactic">auto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">rewrite</span> <span class="id">Hx1</span>;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>; <span class="tactic">assert</span>(<span class="id">Memeq2</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>) <span class="id">m</span>'(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))));[<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>|];<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>)<span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">Lp1</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">e1</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">e2</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">eauto</span>;[|<span class="tactic">split</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>];<span class="id">fold</span> <span class="id"><a href="loadframe.html#store_args_rec_fp">store_args_rec_fp</a></span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">destruct</span> <span class="id">Lp2</span> <span class="kwd">as</span> [<span class="id">Memeq3</span> <span class="id">Fleq3</span>];<span class="tactic">rewrite</span> (<span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx1</span>) <span class="kwd">in</span> <span class="id">Fleq3</span>;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq3</span>) <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">e3</span>;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">e4</span>;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">Lp2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;[<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span>;<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">R1</span>;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq3</span>);<span class="id">Hsimpl</span>;<span class="tactic">rewrite</span> <span class="id">R1</span>,<span class="id">H8</span>;<span class="tactic">auto</span>|<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span>;<span class="tactic">auto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Lp2</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<span class="tactic">rewrite</span> <span class="id">Hx1</span>;<span class="tactic">auto</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>,<span class="id">Hx3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Memeq2</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>) <span class="id">m</span>'(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tint">AST.Tint</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> (<span class="id">ofs</span> +4))))).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp1</span>:=(<span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))),&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.  <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> <span class="id">e1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Memeq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp1</span>:= (<span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))) <span class="kwd">in</span> <span class="id">Memeq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span> <span class="kwd">in</span> <span class="id">Memeq</span>. <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> <span class="id">fleq1</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">Memeq3</span> <span class="id">Fleq3</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Memeq4</span>:<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m0</span>) (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id"><a href="AST.html#Tint">AST.Tint</a></span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span> )))). <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">fleq1</span> <span class="kwd">in</span> <span class="id">Fleq3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq3</span>) <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> <span class="id">e3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">e4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> <span class="id">fleq2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Memeq4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H10</span> <span class="kwd">as</span> [<span class="id">Memeq5</span> <span class="id">Fleq5</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">fleq2</span> <span class="kwd">in</span> <span class="id">Fleq5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq5</span>) <span class="kwd">in</span> <span class="id">Memeq5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H11</span> <span class="kwd">as</span> <span class="id">e6</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">e5</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H12</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m0</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq3</span>).<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>. <br/>
<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x0</span> <span class="kwd">as</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x0</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m2</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m2</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m2</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) <span class="id">Fleq5</span>).<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">store_stack_fmem</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id">R1</span>,<span class="id">H16</span>,<span class="id">H5</span>,<span class="id">R2</span>,<span class="id">H17</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">fleq1</span>,<span class="id">fleq2</span>, <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp1</span>:=(<span class="id"><a href="loadframe.html#store_stack_fp">store_stack_fp</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> <span class="id">ofs</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="cmpu_bool_fp_total_eq">cmpu_bool_fp_total_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">c</span> <span class="id">i</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop_fp.html#of_optfp">Cop_fp.of_optfp</a></span> (<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#c">c</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span>) = <span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#c">c</a></span> <span class="id"><a href="AsmWD.html#i">i</a></span> <span class="id"><a href="AsmWD.html#j">j</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6536')">Proof.</div>
<div class="proofscript" id="proof6536">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Cop_fp.html#of_optfp">Cop_fp.of_optfp</a></span>,<span class="id"><a href="Cop_fp.html#cmpu_bool_fp">Cop_fp.cmpu_bool_fp</a></span>,<span class="id"><a href="Cop_fp.html#cmpu_bool_fp_total">Cop_fp.cmpu_bool_fp_total</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">ex_match2</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="Asm_local_eff">Asm_local_eff</a></span>:<span class="id"><a href="InteractionSemantics.html#corestep_local_eff">corestep_local_eff</a></span> (<span class="id"><a href="InteractionSemantics.html#step">InteractionSemantics.step</a></span> <span class="id"><a href="AsmLang.html#AsmLang">AsmLang</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6537')">Proof.</div>
<div class="proofscript" id="proof6537">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_local_eff">corestep_local_eff</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>;<span class="tactic">try</span>(<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr_fp">exec_instr_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span>(<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>;<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span>( <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_load">exec_load</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span>( <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_store">exec_store</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_store_fp">exec_store_fp</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span>;<span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> ( <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#goto_label">goto_label</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx0</span>) <span class="kwd">in</span> *;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="FMemory.html#Mem.alloc_freelist">Mem.alloc_freelist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>) <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span> <span class="kwd">in</span> <span class="id">H1</span> ;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_union_fp">LEffect_union_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_free_eff">mem_free_eff</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_fleq">mem_alloc_fleq</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#store_args_fleq">store_args_fleq</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_fp">store_args_fp</a></span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr&nbsp;in&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;i;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_load,Mem.loadv&nbsp;in&nbsp;H5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_load_fp,FMemOpFP.loadv_fp.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;ASM_local.eval_addrmode;inv&nbsp;H5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Mem.load;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H0.&nbsp;apply&nbsp;LEffect_refl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex_match.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;mem_storev_eff&nbsp;in&nbsp;Hx0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;FP.union_comm_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;LEffect_union_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H0.&nbsp;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex_match.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subst.&nbsp;inv&nbsp;H5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;mem_storev_eff&nbsp;in&nbsp;Hx2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;FP.union_comm_eq;apply&nbsp;LEffect_union_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;FP.union_comm_eq;apply&nbsp;LEffect_union_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H0;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H0.&nbsp;apply&nbsp;LEffect_refl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;*)</span>Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Asm_locality_1">Asm_locality_1</a></span>: <span class="id"><a href="InteractionSemantics.html#corestep_locality_1">corestep_locality_1</a></span> (<span class="id"><a href="InteractionSemantics.html#step">InteractionSemantics.step</a></span> <span class="id"><a href="AsmLang.html#AsmLang">AsmLang</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6538')">Proof.</div>
<div class="proofscript" id="proof6538">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_locality_1">corestep_locality_1</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">Memeq</span> <span class="id">Fleq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr_fp">exec_instr_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_match</span>;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">inv</span> <span class="id">H4</span>;<span class="id">exists</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'0)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'0) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Fleq</span>))); <span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>;[<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>|<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>;<span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx2</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx3</span>; <span class="tactic">eauto</span>]|<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPostemp">MemPostemp</a></span>];<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#goto_label">goto_label</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="id">inv</span> <span class="id">H</span>;<span class="id">exists</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'0)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'0) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Fleq</span>)));<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>;[<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>|<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>,<span class="id"><a href="AsmLang.html#goto_label">goto_label</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx1</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx2</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx1</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx2</span>;<span class="tactic">eauto</span>]|<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPostemp">MemPostemp</a></span>];<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_load">exec_load</a></span>,<span class="id"><a href="AsmLang.html#exec_load_fp">exec_load_fp</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span> <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>; <span class="id">exists</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'0)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'0) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span>'0 <span class="id">m0</span> <span class="id">Fleq</span>)));<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>;[<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>|<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>,<span class="id"><a href="AsmLang.html#exec_load">exec_load</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>;<span class="tactic">eauto</span>;<span class="id">erewrite</span> <span class="id">H0</span>;<span class="tactic">eauto</span>]| <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_loadv_fp">MemPost_loadv_fp</a></span>];<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_store">exec_store</a></span>,<span class="id"><a href="AsmLang.html#exec_store_fp">exec_store_fp</a></span> <span class="kwd">in</span> *;<span class="id">ex_match</span>;<span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;[<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>|];<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>,<span class="id"><a href="AsmLang.html#exec_store">exec_store</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> (<span class="tactic">try</span> <span class="id">erewrite</span> <span class="id"><a href="AsmWD.html#MemPre_check_compare_ints_eq">MemPre_check_compare_ints_eq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#MemPre_compare_ints_LPost">MemPre_compare_ints_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#MemPre_compare_longs_LPost">MemPre_compare_longs_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">subst</span>;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span> <span class="kwd">with</span>(<span class="id">wd</span>:=<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span>'0 <span class="id">m0</span> <span class="id">Fleq</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>;<span class="tactic">eauto</span>;<span class="tactic">auto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="AsmWD.html#MemPre_check_compare_ints_eq">MemPre_check_compare_ints_eq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#MemPre_compare_ints_LPost">MemPre_compare_ints_LPost</a></span> <span class="kwd">with</span> (<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">subst</span>. <span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span> <span class="kwd">with</span> (<span class="id">wd</span>:=<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span>'0 <span class="id">m0</span> <span class="id">Fleq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>, <span class="id">Hx1</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="AsmWD.html#MemPre_check_compare_ints_eq">MemPre_check_compare_ints_eq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#MemPre_compare_ints_LPost">MemPre_compare_ints_LPost</a></span> <span class="kwd">with</span> (<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">subst</span>. <span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span> <span class="kwd">with</span> (<span class="id">wd</span>:=<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span>'0 <span class="id">m0</span> <span class="id">Fleq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Hx0</span>, <span class="id">Hx1</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_alloc_LPost">MemPre_mem_alloc_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx0</span> <span class="kwd">as</span> ?;[|<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="InteractionSemantics.html#LPre">LPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span>) <span class="id">m0</span>  (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="FMemOpFP.html#alloc_fp">FMemOpFP.alloc_fp</a></span> <span class="id">m1</span> 0 <span class="id">sz</span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="AST.html#Mptr">AST.Mptr</a></span>  (<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">b0</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id">ofs_link</span>))(<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="AST.html#Mptr">AST.Mptr</a></span>  (<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">b0</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>)<span class="id">ofs_ra</span>)))) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">Hx0</span> <span class="kwd">as</span> <span class="id">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hx0</span> <span class="kwd">as</span> <span class="id">A1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">Mem.alloc_freelist</a></span> <span class="kwd">in</span> <span class="id">Hx0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">Hx0</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="InteractionSemantics.html#LPre">LPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>)  (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="AST.html#Mptr">AST.Mptr</a></span> (<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">b0</span> <span class="id"><a href="Integers.html#Ptrofs.zero">Integers.Ptrofs.zero</a></span>) <span class="id">ofs_link</span>))(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_subset">LPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">Mempre2</span> <span class="id">Fleq2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq2</span>) <span class="kwd">in</span> <span class="id">Mempre2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> <span class="id">e3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> <span class="id">Lp1</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e3</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e4</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> <span class="id">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e3</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx1</span> <span class="kwd">in</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H12</span> <span class="kwd">as</span> [<span class="id">Mempre3</span> <span class="id">Fleq3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_storev_LPost">LPre_mem_storev_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq3</span>) <span class="kwd">in</span> <span class="id">Mempre3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">Hx2</span> <span class="kwd">as</span> <span class="id">e5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_eff">mem_storev_eff</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">e6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_storev_fleq">mem_storev_fleq</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">Hx1</span>,<span class="id">Hx0</span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H14</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e5</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span> /\ <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span> = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">A1</span> <span class="id">H0</span>;<span class="tactic">clear</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A1</span>;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x</span> =(<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq2</span>) <span class="id">H4</span> <span class="id">H17</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H18</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id">x0</span> =   (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m2</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m2</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) <span class="id">Fleq3</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x0</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m2</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m2</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x0</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m2</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x0</span>) <span class="id">Fleq3</span>). <span class="id">Hsimpl</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H19</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H13</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr_fp">exec_instr_fp</a></span>;<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#LPre_mem_free_LPost">LPre_mem_free_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPost_comm">LPost_comm</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq">MemPre_mem_loadv_eq</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">Hx1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:= (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="AST.html#Mptr">AST.Mptr</a></span>(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id"><a href="Values.html#Vptr">Values.Vptr</a></span> <span class="id">b0</span> <span class="id">i0</span>) <span class="id">ofs_link</span>))),&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>. <span class="id">instantiate</span>(2:=(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span>(1:=<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m1</span> <span class="id">m0</span> <span class="id">Fleq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr">exec_instr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx2</span>,<span class="id">H4</span>,<span class="id">H7</span>,<span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_instr_fp">exec_instr_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">Mempre</span> <span class="id">Fleq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m0</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Fleq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#LPre_evalbuiltin_args_equiv">LPre_evalbuiltin_args_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_effect_emp">MemPost_effect_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H6</span>. <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">rs</span> <span class="id">ge</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">args</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enough</span>(<span class="id"><a href="Footprint.html#Locs.eq">Locs.eq</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="id">fp1</span>) <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#effects_union">effects_union</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">args</span> <span class="id">H2</span> <span class="id">IHargs</span> <span class="id">fp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">rs</span> <span class="id">ge</span> <span class="id">fp1</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">a</span>;<span class="tactic">intros</span>;<span class="id">inv</span> <span class="id">H1</span>;<span class="tactic">try</span>(<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>;<span class="tactic">fail</span>);<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHa1</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id">IHa2</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#effects_union">effects_union</a></span>.  <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>,<span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">m</span> <span class="id">args</span> <span class="id">rs</span> <span class="id">ef</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#extcall_arguments">extcall_arguments</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#ef">ef</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>' <span class="id">fp</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>') <span class="id"><a href="AsmWD.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>)(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m</span>')(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ASM_local.html#extcall_arguments_fp">ASM_local.extcall_arguments_fp</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#ef">ef</a></span> <span class="id"><a href="AsmWD.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#extcall_arguments">extcall_arguments</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id">m</span>' <span class="id"><a href="AsmWD.html#ef">ef</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#extcall_arguments">extcall_arguments</a></span>,<span class="id"><a href="ASM_local.html#extcall_arguments_fp">ASM_local.extcall_arguments_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eapply</span> <span class="id">IHlist_forall2</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span> <span class="id">fp1</span> <span class="id">fp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H6</span>. <span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq2">MemPre_mem_loadv_eq2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq2">MemPre_mem_loadv_eq2</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_loadv_eq2">MemPre_mem_loadv_eq2</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="FMemLemmas.html#combine">combine</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'0)(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m</span>'0)(<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m</span>'0 <span class="id">m0</span> <span class="id">H2</span>)) <span class="kwd">as</span> <span class="id">m1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">m1</span> = <span class="id">m0</span>). <span class="tactic">rewrite</span> <span class="id">Heqm1</span>,<span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">L</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H6</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id"><a href="FMemory.html#embed">embed</a></span> <span class="id">m0</span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m</span>'0) <span class="id">m1</span>). <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqm1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m0</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>. <span class="tactic">rewrite</span> <span class="id">H6</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPost_effect_emp">MemPost_effect_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H4</span>. <span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="ASM_local.html#extcall_arguments_fp">ASM_local.extcall_arguments_fp</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H4</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#effects_union">effects_union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">IHload_arguments_fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHload_arguments_fp</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">fp2</span> <span class="id">H0</span> <span class="id">H4</span> <span class="id">fp</span> <span class="id">pll</span> <span class="id">IHload_arguments_fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="InteractionSemantics.html#effects_union">effects_union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#loadv_fp_emp_effects">loadv_fp_emp_effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id">ty</span>)(<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id">rs</span> (<span class="id"><a href="Asm.html#IR">Asm.IR</a></span> <span class="id"><a href="Asm.html#RSP">Asm.RSP</a></span>))(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> (<span class="id"><a href="Stacklayout.html#fe_ofs_arg">Stacklayout.fe_ofs_arg</a></span> + 4 * <span class="id">ofs</span>)))) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> (<span class="id"><a href="AST.html#chunk_of_type">AST.chunk_of_type</a></span> <span class="id">ty0</span>) (<span class="id"><a href="Values.html#Val.offset_ptr">Values.Val.offset_ptr</a></span> (<span class="id">rs</span> (<span class="id"><a href="Asm.html#IR">Asm.IR</a></span> <span class="id"><a href="Asm.html#RSP">Asm.RSP</a></span>))(<span class="id"><a href="Integers.html#Ptrofs.repr">Integers.Ptrofs.repr</a></span> (<span class="id"><a href="Stacklayout.html#fe_ofs_arg">Stacklayout.fe_ofs_arg</a></span> + 4 * <span class="id">ofs0</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.locs_eq">Locs.locs_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>,<span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#Locs.union_refl">Locs.union_refl</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m0</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>;[|<span class="id">econstructor</span>;<span class="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#MemPostemp">MemPostemp</a></span>.<br/>
&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">Memeq</span> <span class="id">Fleq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#MemPre_mem_alloc_LPost">MemPre_mem_alloc_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq</span>) <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_eff">mem_alloc_eff</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> <span class="id">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPre_LEffect_LPost_Rule">LPre_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H6</span> <span class="kwd">as</span> [<span class="id">Memeq2</span> <span class="id">Fleq2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemLemmas.html#mem_alloc_fleq">mem_alloc_fleq</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">fleq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">fleq1</span> <span class="kwd">in</span> <span class="id">Fleq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#Mempre_store_args_rec_fmem_LPost">Mempre_store_args_rec_fmem_LPost</a></span> <span class="kwd">with</span>(<span class="id">Fleq</span>:=<span class="id">Fleq2</span>) <span class="kwd">in</span> <span class="id">Memeq2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_eff">store_args_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">e3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemLemmas.html#strip_combine">strip_combine</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">e4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LPost_LEffect_LPost_Rule">LPost_LEffect_LPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">e3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">fleq1</span> <span class="kwd">in</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_fp">store_args_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#store_args_fleq">store_args_fleq</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">fleq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_refl">combine_refl</a></span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">R1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="FMemLemmas.html#combine_equiv2">combine_equiv2</a></span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span>)(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m2</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m2</span>)(<span class="id"><a href="FMemLemmas.html#fmem_strip_fl_wd">fmem_strip_fl_wd</a></span> <span class="id">x</span>) (<span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="id">m2</span> (<span class="id"><a href="FMemory.html#strip">strip</a></span> <span class="id">x</span>) <span class="id">Fleq2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">x</span> = <span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">Mem.alloc_freelist</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">x</span> = <span class="id"><a href="FMemory.html#Mem.nextblockid">Mem.nextblockid</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#gmem_fl_wd_embed">gmem_fl_wd_embed</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_fmem">store_args_fmem</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R1</span>,<span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;m0.&nbsp;destruct&nbsp;H0;split;econstructor;eauto;try&nbsp;apply&nbsp;MemPostemp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;econstructor;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;gmem_fl_wd_embed;eauto.&nbsp;rewrite&nbsp;strip_combine;eauto.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;H0&nbsp;as&nbsp;[Memeq&nbsp;Fleq].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr&nbsp;in&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;ex_match;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_load,exec_load_fp&nbsp;in&nbsp;*;ex_match;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_mem_loadv_eq&nbsp;in&nbsp;Hx&nbsp;as&nbsp;?;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(strip&nbsp;(combine&nbsp;m0&nbsp;(Mem.freelist&nbsp;m'0)(Mem.nextblockid&nbsp;m'0)&nbsp;(FreelistEq_mem_fl_wd&nbsp;m'0&nbsp;m0&nbsp;Fleq)));split;[econstructor;eauto;[eapply&nbsp;gmem_fl_wd_embed;eauto|econstructor;eauto;unfold&nbsp;exec_locked_instr,exec_load;try&nbsp;rewrite&nbsp;Hx;eauto;erewrite&nbsp;H0;eauto]|&nbsp;rewrite&nbsp;strip_combine;split;auto;apply&nbsp;MemPost_loadv_fp].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_store,exec_store_fp&nbsp;in&nbsp;*;ex_match;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;LPre_mem_storev_LPost&nbsp;with(Fleq:=Fleq)&nbsp;in&nbsp;Hx1&nbsp;as&nbsp;?;eauto;Hsimpl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;unfold&nbsp;exec_locked_instr_fp&nbsp;in&nbsp;Memeq.&nbsp;eapply&nbsp;MemPre_subset;eauto.&nbsp;rewrite&nbsp;FP.union_comm_eq.&nbsp;apply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_mem_loadv_eq&nbsp;in&nbsp;Hx0&nbsp;as&nbsp;?;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;unfold&nbsp;exec_locked_instr_fp&nbsp;in&nbsp;Memeq.&nbsp;eapply&nbsp;MemPre_subset;eauto.&nbsp;apply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eexists.&nbsp;split;eauto.&nbsp;econstructor;eauto.&nbsp;apply&nbsp;gmem_fl_wd_embed.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor;eauto.&nbsp;unfold&nbsp;exec_locked_instr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H0.&nbsp;rewrite&nbsp;H6.&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;FP.union_comm_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;H2;split;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;MemPost.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;effects_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;unchanged_content_union2;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPost_effect_emp.&nbsp;apply&nbsp;loadv_fp_emp_effects.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_store,exec_store_fp&nbsp;in&nbsp;*;ex_match;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;LPre_mem_storev_LPost&nbsp;with(Fleq:=Fleq)&nbsp;in&nbsp;Hx3&nbsp;as&nbsp;?;eauto;Hsimpl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;unfold&nbsp;exec_locked_instr_fp&nbsp;in&nbsp;Memeq.&nbsp;eapply&nbsp;MemPre_subset;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hx0,Hx1,FP.fp_union_assoc,FP.union_comm_eq;apply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_mem_loadv_eq&nbsp;in&nbsp;Hx0&nbsp;as&nbsp;?;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;unfold&nbsp;exec_locked_instr_fp&nbsp;in&nbsp;Memeq.&nbsp;eapply&nbsp;MemPre_subset;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hx0,Hx1.&nbsp;&nbsp;apply&nbsp;FP.union_subset.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pose&nbsp;proof&nbsp;Hx1&nbsp;as&nbsp;?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enough(E1:&nbsp;MemPre&nbsp;(strip&nbsp;m1)(strip(combine&nbsp;m0&nbsp;(Mem.freelist&nbsp;m1)&nbsp;(Mem.nextblockid&nbsp;m1)(FreelistEq_mem_fl_wd&nbsp;m1&nbsp;m0&nbsp;Fleq)))((Cop_fp.cmpu_bool_fp_total&nbsp;m1&nbsp;Integers.Ceq&nbsp;v&nbsp;(rs&nbsp;(Asm.IR&nbsp;Asm.RAX))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_cmpu_valid_pointer_ceq&nbsp;in&nbsp;Hx1;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;eapply&nbsp;MemPre_subset;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;2.&nbsp;rewrite&nbsp;strip_combine.&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hx0,Hx1,FP.union_comm_eq,&lt;-&nbsp;FP.fp_union_assoc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;cmpu_bool_fp_total_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eexists.&nbsp;split;eauto.&nbsp;econstructor;eauto.&nbsp;apply&nbsp;gmem_fl_wd_embed.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor;eauto.&nbsp;unfold&nbsp;exec_locked_instr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H0.&nbsp;rewrite&nbsp;H6.&nbsp;rewrite&nbsp;Hx1.&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H6.&nbsp;rewrite&nbsp;Hx0.&nbsp;rewrite&nbsp;Hx1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_cmpu_valid_pointer_ceq,Hx1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal.&nbsp;f_equal.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Focus&nbsp;3.&nbsp;destruct&nbsp;H2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;MemPost,exec_locked_instr_fp.&nbsp;rewrite&nbsp;Hx0,H7.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;effects_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;unchanged_content_union2;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPost_effect_emp.&nbsp;apply&nbsp;loadv_fp_emp_effects.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;effects_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;unchanged_content_union2;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPost_effect_emp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;cmpu_bool_fp_total_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;cmpu_bool_fp_effemp.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;strip_combine&nbsp;in&nbsp;*.&nbsp;auto.&nbsp;do&nbsp;2&nbsp;&nbsp;rewrite&nbsp;cmpu_bool_fp_total_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;&nbsp;LPre_cmpu_bool_fp_total_eq;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;strip_combine.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_subset;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.&nbsp;rewrite&nbsp;Hx0,H7.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;FP.union_comm_eq.&nbsp;rewrite&nbsp;&lt;-&nbsp;FP.fp_union_assoc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;cmpu_bool_fp_total_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Hx0&nbsp;in&nbsp;*.&nbsp;rewrite&nbsp;Hx1&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enough(MemPre&nbsp;(strip&nbsp;m'0)&nbsp;m0&nbsp;((Cop_fp.cmpu_bool_fp_total&nbsp;m'0&nbsp;Integers.Ceq&nbsp;v&nbsp;(rs&nbsp;(Asm.IR&nbsp;Asm.RAX))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enough(MemPre&nbsp;(strip&nbsp;m'0)&nbsp;m0&nbsp;(FMemOpFP.loadv_fp&nbsp;AST.Mint32&nbsp;(ASM_local.eval_addrmode&nbsp;ge&nbsp;a&nbsp;rs))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eexists;split.&nbsp;econstructor;eauto.&nbsp;eapply&nbsp;gmem_fl_wd_embed.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;econstructor;eauto.&nbsp;unfold&nbsp;exec_locked_instr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_mem_loadv_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_cmpu_valid_pointer_ceq.&nbsp;rewrite&nbsp;Hx1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;strip_combine.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPre_comm.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;LPre_cmpu_bool_fp_total_eq;eauto.&nbsp;eauto.&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_locked_instr_fp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_mem_loadv_eq;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;MemPre_cmpu_valid_pointer_ceq;eauto.&nbsp;rewrite&nbsp;Hx1.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal.&nbsp;f_equal.&nbsp;erewrite&nbsp;LPre_cmpu_bool_fp_eq;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_subset;try&nbsp;apply&nbsp;H0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;Cop_fp.of_optfp,Cop_fp.cmpu_bool_fp,Cop_fp.cmpu_bool_fp_total.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex_match2;try&nbsp;inv&nbsp;Hx;try&nbsp;apply&nbsp;FP.subset_refl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;strip_combine.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;LPre_cmpu_bool_fp_total_eq;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPre_comm;auto.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;strip_combine.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;MemPost.&nbsp;rewrite&nbsp;effects_union;apply&nbsp;unchanged_content_union2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPost_effect_emp.&nbsp;apply&nbsp;loadv_fp_emp_effects.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;MemPost_effect_emp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;cmpu_bool_fp_effemp0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_subset;try&nbsp;apply&nbsp;Memeq;eauto.&nbsp;apply&nbsp;FP.union_subset.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;MemPre_subset;eauto.&nbsp;rewrite&nbsp;FP.union_comm_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(FP.subset&nbsp;(Cop_fp.cmpu_bool_fp_total&nbsp;m'0&nbsp;Integers.Ceq&nbsp;v&nbsp;(rs&nbsp;(Asm.IR&nbsp;Asm.RAX)))(ASM_local.of_optfp&nbsp;(Cop_fp.cmpu_bool_fp&nbsp;m'0&nbsp;Integers.Ceq&nbsp;v&nbsp;(rs&nbsp;(Asm.IR&nbsp;Asm.RAX))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;Cop_fp.cmpu_bool_fp,Cop_fp.cmpu_bool_fp_total,ASM_local.of_optfp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex_match2;try&nbsp;apply&nbsp;FP.subset_refl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;FP.subset_union_subset;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}&nbsp;*)</span>&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#FreelistEq_mem_fl_wd">FreelistEq_mem_fl_wd</a></span> <span class="kwd">in</span> <span class="id">f</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;Focus&nbsp;2.&nbsp;eapply&nbsp;FreelistEq_mem_fl_wd;eauto.<br/>
&nbsp;&nbsp;eauto.&nbsp;*)</span>Qed.</div>
<br/>
<br/>
<div class="doc">Forward </div>
<span class="kwd">Lemma</span> <span class="id"><a name="exec_store_forward">exec_store_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m0</span> <span class="id">m0</span>' <span class="id">fl</span> <span class="id">ge</span> <span class="id">chunk</span> <span class="id">a</span> <span class="id">rs</span> <span class="id">ir</span> <span class="id">vl</span> <span class="id">rs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#fl">fl</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AsmLang.html#exec_store">exec_store</a></span> <span class="id"><a href="AsmWD.html#ge">ge</a></span> <span class="id"><a href="AsmWD.html#chunk">chunk</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> <span class="id"><a href="AsmWD.html#a">a</a></span> <span class="id"><a href="AsmWD.html#rs">rs</a></span> <span class="id"><a href="AsmWD.html#ir">ir</a></span> <span class="id"><a href="AsmWD.html#vl">vl</a></span> = <span class="kwd">Next</span> <span class="id">rs</span>' <span class="id">m0</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMemory.GMem.forward</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id">m0</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6539')">Proof.</div>
<div class="proofscript" id="proof6539">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_store">exec_store</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="ASM_local.html#eval_addrmode">ASM_local.eval_addrmode</a></span> <span class="id">ge</span> <span class="id">a</span> <span class="id">rs</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="FMemory.html#Mem.store">FMemory.Mem.store</a></span> <span class="id">eqn</span>:<span class="id">STORE</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_args_forward">store_args_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">fl</span> <span class="id">m0</span> <span class="id">stk</span> <span class="id">args</span> <span class="id">tys</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#embed">FMemory.embed</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> <span class="id"><a href="AsmWD.html#fl">fl</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loadframe.html#store_args_fmem">loadframe.store_args_fmem</a></span> <span class="id"><a href="AsmWD.html#m0">m0</a></span> <span class="id"><a href="AsmWD.html#stk">stk</a></span> <span class="id"><a href="AsmWD.html#args">args</a></span> <span class="id"><a href="AsmWD.html#tys">tys</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMemory.GMem.forward</a></span> <span class="id"><a href="AsmWD.html#m">m</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="AsmWD.html#m1">m1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6540')">Proof.</div>
<div class="proofscript" id="proof6540">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">args</span>. <span class="id">revert</span> <span class="id">m</span> <span class="id">fl</span> <span class="id">m0</span> <span class="id">stk</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_fmem">loadframe.store_args_fmem</a></span>. <span class="tactic">generalize</span> 0.  <span class="tactic">induction</span> <span class="id">args</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_args_rec_fmem">loadframe.store_args_rec_fmem</a></span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">tys</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMemory.GMem.forward_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">tys</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<span class="id">Hx</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="loadframe.html#store_stack_fmem">loadframe.store_stack_fmem</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span> <span class="kwd">in</span> <span class="id">Hx</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMemory.GMem.forward_trans</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHargs</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="FMemLemmas.html#embed_refl">embed_refl</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span> <span class="kwd">in</span> <span class="id">Hx0</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="FMemLemmas.html#embed_refl">embed_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMemory.GMem.forward_trans</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHargs</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="FMemLemmas.html#embed_refl">embed_refl</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Asm_wd">Asm_wd</a></span>: <span class="id"><a href="InteractionSemantics.html#wd">wd</a></span> <span class="id"><a href="AsmLang.html#AsmLang">AsmLang</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6541')">Proof.</div>
<div class="proofscript" id="proof6541">
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<br/>
<div class="doc">forward <span class="bracket">*</span> </div>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_forward">corestep_forward</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="FMemory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#exec_load">exec_load</a></span>, <span class="id"><a href="AsmLang.html#goto_label">goto_label</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;exec&nbsp;load&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="kwd">Next</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?<span class="id">Hx</span>; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMemory.GMem.forward_refl</a></span>; <span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#exec_store_forward">exec_store_forward</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
<div class="doc">alloc frame </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMemory.GMem.forward_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id">m1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#alloc_forward">alloc_forward</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMemory.GMem.forward_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id">fl</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">FMemory.Mem.alloc_freelist</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#store_forward">store_forward</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id">fl</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.store_freelist">FMemory.Mem.store_freelist</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.store_freelist">FMemory.Mem.store_freelist</a></span> <span class="kwd">in</span> <span class="id">Hx0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">FMemory.Mem.alloc_freelist</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
<div class="doc">free frame </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemLemmas.html#free_forward">free_forward</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> (<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMemory.GMem.forward_refl</a></span>; <span class="tactic">fail</span>).<br/>
<div class="doc">store_args </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemLemmas.html#alloc_forward">alloc_forward</a></span> ; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AsmWD.html#store_args_forward">store_args_forward</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMemory.GMem.forward_trans</a></span>. <span class="tactic">exact</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">fl</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FMemory.html#Mem.alloc_freelist">FMemory.Mem.alloc_freelist</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
<div class="doc">exec locked instr </div>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;i;&nbsp;try&nbsp;discriminate;&nbsp;unfold&nbsp;exec_locked_instr&nbsp;in&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;exec_load&nbsp;in&nbsp;H4.&nbsp;destruct&nbsp;FMemory.Mem.loadv;&nbsp;inv&nbsp;H4.&nbsp;inv&nbsp;H0;&nbsp;auto&nbsp;using&nbsp;GMemory.GMem.forward_refl.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;FMemory.Mem.loadv;&nbsp;try&nbsp;discriminate;&nbsp;destruct&nbsp;FMemory.Mem.storev&nbsp;eqn:STORE;&nbsp;inv&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(ASM_local.eval_addrmode);&nbsp;simpl&nbsp;in&nbsp;STORE;&nbsp;try&nbsp;discriminate;&nbsp;eapply&nbsp;store_forward;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;H:&nbsp;match&nbsp;?x&nbsp;with&nbsp;_&nbsp;=&gt;&nbsp;_&nbsp;end&nbsp;=&nbsp;Next&nbsp;_&nbsp;_&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;&nbsp;destruct&nbsp;x&nbsp;eqn:?Hx;&nbsp;inv&nbsp;H<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;ASM_local.eval_addrmode;&nbsp;try&nbsp;discriminate.&nbsp;&nbsp;eapply&nbsp;store_forward;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;H0;&nbsp;auto&nbsp;using&nbsp;GMemory.GMem.forward_refl.&nbsp;*)</span>&nbsp;&nbsp;}<br/>
<div class="doc">local eff <span class="bracket">***</span> </div>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#Asm_local_eff">Asm_local_eff</a></span>.<br/>
&nbsp;&nbsp;}<br/>
<div class="doc">locality 1 <span class="bracket">***</span> </div>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#Asm_locality_1">Asm_locality_1</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;}<br/>
<div class="doc">locality 2 <span class="bracket">*</span> </div>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="DetLemma.html#step_det_loc1_loc2">step_det_loc1_loc2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmDET.html#Asm_det">Asm_det</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#Asm_locality_1">Asm_locality_1</a></span>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
<div class="doc">init forward </div>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">init_gmem_valid</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#init_gmem">init_gmem</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AsmLang.html#init_mem">init_mem</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">dom_match_fm</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<br/>
<div class="doc">eqmem <span class="bracket">*</span> </div>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="DetLemma.html#eff_loc1_memeqcorestep">eff_loc1_memeqcorestep</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DetLemma.html#step_mem_injc">step_mem_injc</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#Asm_local_eff">Asm_local_eff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="AsmWD.html#Asm_locality_1">Asm_locality_1</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_not_at_external">corestep_not_at_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">q</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="helpers.html#i64ext_extcall">i64ext_extcall</a></span> <span class="kwd">in</span> <span class="id">H12</span>. <span class="tactic">destruct</span> <span class="id">H12</span>. <span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_not_halted">corestep_not_halted</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">q</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#at_external_halted_excl">at_external_halted_excl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">q</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Asm_wdFP">Asm_wdFP</a></span>: <span class="id"><a href="InteractionSemantics.html#wdFP">wdFP</a></span> <span class="id"><a href="AsmLang.html#AsmLang">AsmLang</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6542')">Proof.</div>
<div class="proofscript" id="proof6542">
 <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#wd_wdFP">wd_wdFP</a></span>, <span class="id"><a href="AsmWD.html#Asm_wd">Asm_wd</a></span>. Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
