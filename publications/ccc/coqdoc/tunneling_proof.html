<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module tunneling_proof</title>
<meta name="description" content="Documentation of Coq module tunneling_proof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module tunneling_proof</h1>
<div class="coq">
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="IS_local.html">IS_local</a></span> <span class="id"><a href="LTL.html">LTL</a></span> <span class="id"><a href="LTL_local.html">LTL_local</a></span> <span class="id"><a href="LDSim_local.html">LDSim_local</a></span> <span class="id">Tunneling</span> <span class="id"><a href="tunneling.html">tunneling</a></span> <span class="id"><a href="Errors.html">Errors</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Op_fp.html">Op_fp</a></span> <span class="id"><a href="LDSimDefs_local.html">LDSimDefs_local</a></span> <span class="id"><a href="val_casted.html">val_casted</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Injections.html">Injections</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">Axioms</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span>:=<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_cu">match_cu</a></span> (<span class="id">su</span> <span class="id">tu</span>:<span class="id"><a href="LTL_local.html#LTL_comp_unit">LTL_comp_unit</a></span>):=<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="Errors.html#OK">OK</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="tunneling_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="tunneling_proof.html#su">su</a></span> <span class="id"><a href="tunneling_proof.html#tu">tu</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="tunneling.html#transf_program">transf_program</a></span> <span class="id"><a href="tunneling_proof.html#p">p</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="tunneling_proof.html#tp">tp</a></span> -&gt; <span class="id"><a href="tunneling_proof.html#match_cu">match_cu</a></span> <span class="id"><a href="tunneling_proof.html#p">p</a></span> <span class="id"><a href="tunneling_proof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7447')">Proof.</div>
<div class="proofscript" id="proof7447">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit">match_transform_partial_cunit</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="measure_edge">measure_edge</a></span> (<span class="id">u</span>: <span class="id">U.t</span>) (<span class="id">pc</span> <span class="id">s</span>: <span class="id"><a href="LTL.html#node">node</a></span>) (<span class="id">f</span>: <span class="id"><a href="LTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : <span class="id"><a href="LTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> (<span class="id">U.repr</span> <span class="id"><a href="tunneling_proof.html#u">u</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="kwd">then</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> (<span class="id">U.repr</span> <span class="id"><a href="tunneling_proof.html#u">u</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="kwd">then</span> (<span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> + <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> + 1)%<span class="id">nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">record_goto</span>' (<span class="id">uf</span>: <span class="id">U.t</span> * (<span class="id"><a href="LTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)) (<span class="id">pc</span>: <span class="id"><a href="LTL.html#node">node</a></span>) (<span class="id">b</span>: <span class="id"><a href="LTL.html#bblock">bblock</a></span>) : <span class="id">U.t</span> * (<span class="id"><a href="LTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id">s</span> :: <span class="id">b</span>' =&gt; <span class="kwd">let</span> (<span class="id">u</span>, <span class="id">f</span>) := <span class="id"><a href="tunneling_proof.html#uf">uf</a></span> <span class="kwd">in</span> (<span class="id">U.union</span> <span class="id"><a href="tunneling_proof.html#u">u</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="id">s</span>, <span class="id"><a href="tunneling_proof.html#measure_edge">measure_edge</a></span> <span class="id"><a href="tunneling_proof.html#u">u</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="id">s</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="tunneling_proof.html#uf">uf</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="branch_map_correct">branch_map_correct</a></span> (<span class="id">c</span>: <span class="id"><a href="LTL.html#code">code</a></span>) (<span class="id">uf</span>: <span class="id">U.t</span> * (<span class="id"><a href="LTL.html#node">node</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="tunneling_proof.html#c">c</a></span>!<span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id">s</span> :: <span class="id">b</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">U.repr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> \/ (<span class="id">U.repr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id">U.repr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span>) <span class="id">s</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span> <span class="id">s</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">U.repr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id"><a href="tunneling_proof.html#pc">pc</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">record_gotos</span>'<span class="id">_correct</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#branch_map_correct">branch_map_correct</a></span> <span class="id"><a href="tunneling_proof.html#c">c</a></span> (<span class="id"><a href="Maps.html#PTree.fold">PTree.fold</a></span> <span class="id">record_goto</span>' <span class="id"><a href="tunneling_proof.html#c">c</a></span> (<span class="id">U.empty</span>, <span class="kwd">fun</span> (<span class="id">x</span>: <span class="id"><a href="LTL.html#node">node</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7448')">Proof.</div>
<div class="proofscript" id="proof7448">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> <span class="id">c</span> <span class="id">uf</span> =&gt; <span class="id"><a href="tunneling_proof.html#branch_map_correct">branch_map_correct</a></span> <span class="id"><a href="tunneling_proof.html#c">c</a></span> <span class="id"><a href="tunneling_proof.html#uf">uf</a></span>).<br/>
&nbsp;extensionality&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
&nbsp;base&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="tactic">apply</span> <span class="id">U.repr_empty</span>.<br/>
&nbsp;inductive&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m</span> <span class="id">uf</span> <span class="id">pc</span> <span class="id">bb</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">uf</span> <span class="kwd">as</span> [<span class="id">u</span> <span class="id">f</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PC</span>: <span class="id">U.repr</span> <span class="id">u</span> <span class="id">pc</span> = <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">H1</span> <span class="id">pc</span>). <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">record_goto</span>' (<span class="id">u</span>, <span class="id">f</span>) <span class="id">pc</span> <span class="id">bb</span> = (<span class="id">u</span>, <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">s</span>, <span class="id">exists</span> <span class="id">bb</span>', <span class="id">bb</span> = <span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> :: <span class="id">bb</span>' /\ <span class="id">record_goto</span>' (<span class="id">u</span>, <span class="id">f</span>) <span class="id">pc</span> <span class="id">bb</span> = (<span class="id">U.union</span> <span class="id">u</span> <span class="id">pc</span> <span class="id"><a href="tunneling_proof.html#s">s</a></span>, <span class="id"><a href="tunneling_proof.html#measure_edge">measure_edge</a></span> <span class="id">u</span> <span class="id">pc</span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">record_goto</span>'; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">bb</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">auto</span>. <span class="id">right</span>. <span class="id">exists</span> <span class="id">s</span>; <span class="id">exists</span> <span class="id">bb</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">B</span> | [<span class="id">s</span> [<span class="id">bb</span>' [<span class="id">EQ</span> <span class="id">B</span>]]]].<br/>
&nbsp;u&nbsp;and&nbsp;f&nbsp;are&nbsp;unchanged&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">intro</span> <span class="id">pc</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">pc</span>' <span class="id">pc</span>). <span class="tactic">subst</span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">bb</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;b&nbsp;is&nbsp;Lbranch&nbsp;s,&nbsp;u&nbsp;becomes&nbsp;union&nbsp;u&nbsp;pc&nbsp;s,&nbsp;f&nbsp;becomes&nbsp;measure_edge&nbsp;u&nbsp;pc&nbsp;s&nbsp;f&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">intro</span> <span class="id">pc</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">pc</span>' <span class="id">pc</span>). <span class="tactic">subst</span> <span class="id">pc</span>'. <span class="tactic">rewrite</span> <span class="id">EQ</span>.<br/>
&nbsp;The&nbsp;new&nbsp;instruction&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">U.repr_union_2</span> <span class="id">u</span> <span class="id">pc</span> <span class="id">s</span>); <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">U.repr_union_3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#measure_edge">measure_edge</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> (<span class="id">U.repr</span> <span class="id">u</span> <span class="id">s</span>) <span class="id">pc</span>). <span class="tactic">auto</span>. <span class="id">right</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">PC</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#peq_true">peq_true</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;An&nbsp;old&nbsp;instruction&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">U.repr</span> <span class="id">u</span> <span class="id">pc</span>' = <span class="id">pc</span>' -&gt; <span class="id">U.repr</span> (<span class="id">U.union</span> <span class="id">u</span> <span class="id">pc</span> <span class="id">s</span>) <span class="id">pc</span>' = <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="tactic">at</span> 2. <span class="tactic">apply</span> <span class="id">U.repr_union_1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">H1</span> <span class="id">pc</span>'). <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id">m</span>!<span class="id">pc</span>'); <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">P</span> | [<span class="id">P</span> <span class="id">Q</span>]]. <span class="id">left</span>; <span class="tactic">auto</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">U.sameclass_union_2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#measure_edge">measure_edge</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> (<span class="id">U.repr</span> <span class="id">u</span> <span class="id">s</span>) <span class="id">pc</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> (<span class="id">U.repr</span> <span class="id">u</span> <span class="id">s0</span>) <span class="id">pc</span>). <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">record_gotos</span>' (<span class="id">f</span>: <span class="id"><a href="LTL.html#function">function</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.fold">PTree.fold</a></span> <span class="id">record_goto</span>' <span class="id"><a href="tunneling_proof.html#f">f</a></span>.(<span class="id"><a href="LTL.html#fn_code">fn_code</a></span>) (<span class="id">U.empty</span>, <span class="kwd">fun</span> (<span class="id">x</span>: <span class="id"><a href="LTL.html#node">node</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">record_gotos_gotos</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">record_gotos</span>' <span class="id"><a href="tunneling_proof.html#f">f</a></span>) = <span class="id">record_gotos</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7449')">Proof.</div>
<div class="proofscript" id="proof7449">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">record_gotos</span>', <span class="id">record_gotos</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.fold_spec">PTree.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Maps.html#PTree.elements">PTree.elements</a></span> (<span class="id"><a href="LTL.html#fn_code">fn_code</a></span> <span class="id">f</span>)) (<span class="id">U.empty</span>) (<span class="kwd">fun</span> <span class="id">_</span> : <span class="id"><a href="LTL.html#node">node</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">record_goto</span>' <span class="tactic">at</span> 2. <span class="tactic">unfold</span> <span class="id">record_goto</span> <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">a</span>). <span class="tactic">apply</span> <span class="id">IHl</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">apply</span> <span class="id">IHl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="branch_target">branch_target</a></span> (<span class="id">f</span>: <span class="id"><a href="LTL.html#function">function</a></span>) (<span class="id">pc</span>: <span class="id"><a href="LTL.html#node">node</a></span>) : <span class="id"><a href="LTL.html#node">node</a></span> :=<br/>
&nbsp;&nbsp;<span class="id">U.repr</span> (<span class="id">record_gotos</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="count_gotos">count_gotos</a></span> (<span class="id">f</span>: <span class="id"><a href="LTL.html#function">function</a></span>) (<span class="id">pc</span>: <span class="id"><a href="LTL.html#node">node</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">record_gotos</span>' <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="record_gotos_correct">record_gotos_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>.(<span class="id"><a href="LTL.html#fn_code">fn_code</a></span>)!<span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id">s</span> :: <span class="id">b</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id">s</span> /\ <span class="id"><a href="tunneling_proof.html#count_gotos">count_gotos</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id">s</span> &lt; <span class="id"><a href="tunneling_proof.html#count_gotos">count_gotos</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> = <span class="id"><a href="tunneling_proof.html#pc">pc</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7450')">Proof.</div>
<div class="proofscript" id="proof7450">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">record_gotos</span>'<span class="id">_correct</span> <span class="id">f</span>.(<span class="id"><a href="LTL.html#fn_code">fn_code</a></span>) <span class="id">pc</span>). <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id">record_gotos</span>' <span class="id">f</span>). <span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#branch_map_correct">branch_map_correct</a></span>, <span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span>, <span class="id"><a href="tunneling_proof.html#count_gotos">count_gotos</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">record_gotos_gotos</span>'. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Preservation of semantics </h1>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION">PRESERVATION</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.scu">scu</a></span> <span class="id"><a name="PRESERVATION.tcu">tcu</a></span>: <span class="id"><a href="LTL_local.html#LTL_comp_unit">LTL_comp_unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.sge">sge</a></span> <span class="id"><a name="PRESERVATION.tge">tge</a></span>: <span class="id"><a href="LTL.html#genv">LTL.genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.SGEINIT">SGEINIT</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.scu">scu</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.TGEINIT">TGEINIT</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tcu">tcu</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.S_EQ">S_EQ</a></span>: <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>) = <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.TRANSF">TRANSF</a></span>: <span class="id"><a href="tunneling_proof.html#match_cu">match_cu</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.scu">scu</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tcu">tcu</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge_match">ge_match</a></span>: <span class="id"><a href="LDSim_local.html#ge_match_strict">ge_match_strict</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7451')">Proof.</div>
<div class="proofscript" id="proof7451">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_ge_match_strict">match_cu_ge_match_strict</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="genv_match">genv_match</a></span>: <span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="Errors.html#OK">OK</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="tunneling_proof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>) <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7452')">Proof.</div>
<div class="proofscript" id="proof7452">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span>: <span class="id"><a href="AST.html#ident">ident</a></span>), <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7453')">Proof.</div>
<div class="proofscript" id="proof7453">
 <span class="tactic">destruct</span> <span class="id"><a href="tunneling_proof.html#genv_match">genv_match</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funct_ptr_translated">funct_ptr_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">f</span>: <span class="id"><a href="LTL.html#fundef">LTL.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7454')">Proof.</div>
<div class="proofscript" id="proof7454">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="tunneling_proof.html#genv_match">genv_match</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">tunnel_fundef</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>,<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PTree.get">Maps.PTree.get</a></span>) <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>). <span class="tactic">rewrite</span> <span class="id">Heqo</span> <span class="kwd">in</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span>: <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">f</span>: <span class="id"><a href="LTL.html#fundef">LTL.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7455')">Proof.</div>
<div class="proofscript" id="proof7455">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#funct_ptr_translated">funct_ptr_translated</a></span>;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="senv_preserved">senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7456')">Proof.</div>
<div class="proofscript" id="proof7456">
 <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_senv_preserved">match_cu_senv_preserved</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved">sig_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="LTL.html#funsig">funsig</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) = <span class="id"><a href="LTL.html#funsig">funsig</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7457')">Proof.</div>
<div class="proofscript" id="proof7457">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stacksize_preserved">stacksize_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) = <span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7458')">Proof.</div>
<div class="proofscript" id="proof7458">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">tunnel_function</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zeq">zeq</a></span> (<span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>) 0); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_function_translated">find_function_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ros</span> <span class="id">rs</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="LTL.html#find_function">find_function</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#ros">ros</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="LTL.html#find_function">find_function</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#ros">ros</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7459')">Proof.</div>
<div class="proofscript" id="proof7459">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">f</span>; <span class="tactic">destruct</span> <span class="id">ros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rs</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#funct_ptr_translated">funct_ptr_translated</a></span>;<span class="tactic">assumption</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">eqn</span>:?;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span>,<span class="id">Heqo</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#funct_ptr_translated">funct_ptr_translated</a></span>;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="tunneled_block">tunneled_block</a></span> (<span class="id">f</span>: <span class="id"><a href="LTL.html#function">function</a></span>) (<span class="id">b</span>: <span class="id"><a href="LTL.html#bblock">bblock</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id">tunnel_block</span> (<span class="id">record_gotos</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#b">b</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="tunneled_code">tunneled_code</a></span> (<span class="id">f</span>: <span class="id"><a href="LTL.html#function">function</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.map1">PTree.map1</a></span> (<span class="id"><a href="tunneling_proof.html#tunneled_block">tunneled_block</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) (<span class="id"><a href="LTL.html#fn_code">fn_code</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_locset">match_locset</a></span>(<span class="id">l1</span> <span class="id">l2</span>:<span class="id"><a href="LTL.html#locset">locset</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">loc</span>, <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="tunneling_proof.html#l1">l1</a></span> <span class="id"><a href="tunneling_proof.html#loc">loc</a></span>)(<span class="id"><a href="tunneling_proof.html#l2">l2</a></span> <span class="id"><a href="tunneling_proof.html#loc">loc</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_refl">match_locset_refl</a></span>: <span class="kwd">forall</span> <span class="id">l</span>, <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7460')">Proof.</div>
<div class="proofscript" id="proof7460">
 <span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">l</span>;<span class="id">constructor</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_function_translated_lessdef">find_function_translated_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ros</span> <span class="id">rs</span> <span class="id">ls</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LTL.html#find_function">find_function</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#ros">ros</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LTL.html#find_function">find_function</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#ros">ros</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7461')">Proof.</div>
<div class="proofscript" id="proof7461">
&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LTL.html#find_function">find_function</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ros</span>. <span class="tactic">destruct</span> (<span class="id">H</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">m</span>)); <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#functions_translated">functions_translated</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#funct_ptr_translated">funct_ptr_translated</a></span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_stackframes">match_stackframes</a></span>: <span class="id"><a href="LTL.html#stackframe">stackframe</a></span> -&gt; <span class="id"><a href="LTL.html#stackframe">stackframe</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stackframes_intro">match_stackframes_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">bb</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#bb">bb</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL.html#Stackframe">Stackframe</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> (<span class="id"><a href="tunneling_proof.html#tunneled_block">tunneled_block</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#bb">bb</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="state">state</a></span>:<span class="kwd">Type</span>:=<span class="id"><a href="LTL_local.html#core">core</a></span>*<span class="id"><a href="Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="tunneling_proof.html#state">state</a></span> -&gt; <span class="id"><a href="tunneling_proof.html#state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_intro">match_states_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">ts</span> <span class="id">sigres</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> (<span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id"><a href="tunneling_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>) <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_block">match_states_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">bb</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">sigres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> (<span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> <span class="id"><a href="tunneling_proof.html#bb">bb</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id"><a href="tunneling_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> (<span class="id"><a href="tunneling_proof.html#tunneled_block">tunneled_block</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#bb">bb</a></span>) <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_interm">match_states_interm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">bb</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">sigres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> (<span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> (<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span> :: <span class="id"><a href="tunneling_proof.html#bb">bb</a></span>) <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id"><a href="tunneling_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#sp">sp</a></span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>) <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_call">match_states_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">f</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">sigres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> (<span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id"><a href="tunneling_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> (<span class="id">tunnel_fundef</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_return">match_states_return</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">sigres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> (<span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id"><a href="tunneling_proof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> <span class="id"><a href="tunneling_proof.html#ls0">ls0</a></span> <span class="id"><a href="tunneling_proof.html#sigres">sigres</a></span>, <span class="id">m</span>').<br/>
<span class="kwd">Definition</span> <span class="kwd">measure</span> (<span class="id">st</span>: <span class="id"><a href="LTL_local.html#core">core</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="tunneling_proof.html#st">st</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">ls</span> <span class="id">res</span> =&gt; (<span class="id"><a href="tunneling_proof.html#count_gotos">count_gotos</a></span> <span class="id">f</span> <span class="id">pc</span> * 2)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> (<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id">pc</span> :: <span class="id">_</span>) <span class="id">ls</span> <span class="id">res</span>=&gt; (<span class="id"><a href="tunneling_proof.html#count_gotos">count_gotos</a></span> <span class="id">f</span> <span class="id">pc</span> * 2 + 1)%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">bb</span> <span class="id">ls</span> <span class="id">res</span>=&gt; 0%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">ls</span> <span class="id">res</span> =&gt; 0%<span class="id">nat</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id">s</span> <span class="id">ls</span> <span class="id">res</span> =&gt; 0%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="MS">MS</a></span> (<span class="id">b</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">n</span> <span class="id">mu</span> <span class="id">fp</span> <span class="id">fp</span>' <span class="id">cm</span> <span class="id">cm</span>': <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_states">match_states</a></span> <span class="id"><a href="tunneling_proof.html#cm">cm</a></span> <span class="id">cm</span>' /\<br/>
&nbsp;&nbsp;<span class="id">Injections.FPMatch</span>' <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#fp">fp</a></span> <span class="id">fp</span>' /\<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">c</span>, <span class="id">m</span>) := <span class="id"><a href="tunneling_proof.html#cm">cm</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">c</span>', <span class="id">m</span>') := <span class="id">cm</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="tunneling_proof.html#b">b</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>') /\<br/>
&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#n">n</a></span> = <span class="kwd">measure</span> <span class="id"><a href="tunneling_proof.html#c">c</a></span> /\ <span class="id"><a href="tunneling_proof.html#b">b</a></span> = <span class="id"><a href="tunneling_proof.html#b">b</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="tunneling_proof.html#PRESERVATION">PRESERVATION</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_parent_locset">match_parent_locset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ts</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="tunneling_proof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="LTL.html#parent_locset">parent_locset</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span>) (<span class="id"><a href="LTL.html#parent_locset">parent_locset</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7462')">Proof.</div>
<div class="proofscript" id="proof7462">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>; <span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">H</span>. <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">a1</span>; <span class="tactic">destruct</span> <span class="id">b1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> (<span class="id">H2</span> <span class="id">loc</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="return_regs_match_locset_preserved">return_regs_match_locset_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">rs</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="LTL.html#return_regs">return_regs</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="LTL.html#return_regs">return_regs</a></span> <span class="id"><a href="tunneling_proof.html#ts">ts</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7463')">Proof.</div>
<div class="proofscript" id="proof7463">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="LTL.html#return_regs">return_regs</a></span>. <span class="tactic">destruct</span> <span class="id">loc</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Conventions1.html#is_callee_save">Conventions1.is_callee_save</a></span> <span class="id">r</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="call_regs_match_locset_preserved">call_regs_match_locset_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="LTL.html#call_regs">call_regs</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="LTL.html#call_regs">call_regs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7464')">Proof.</div>
<div class="proofscript" id="proof7464">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="LTL.html#call_regs">call_regs</a></span>. <span class="tactic">destruct</span> <span class="id">loc</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">sl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_lessdef_list_refl">val_lessdef_list_refl</a></span>: <span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span> <span class="id"><a href="tunneling_proof.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7465')">Proof.</div>
<div class="proofscript" id="proof7465">
 <span class="tactic">induction</span> <span class="id">s</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="code_preserved">code_preserved</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">pc</span>, <span class="id"><a href="Coqlib.html#option_map">option_map</a></span> (<span class="id">tunnel_block</span> (<span class="id">record_gotos</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>)) ((<span class="id"><a href="LTL.html#fn_code">fn_code</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>) ! <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>) = (<span class="id"><a href="LTL.html#fn_code">fn_code</a></span> (<span class="id">tunnel_function</span> <span class="id"><a href="tunneling_proof.html#f">f</a></span>)) ! <span class="id"><a href="tunneling_proof.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7466')">Proof.</div>
<div class="proofscript" id="proof7466">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">tunnel_function</span>, <span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span>. <span class="tactic">simpl</span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.gmap1">Maps.PTree.gmap1</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_val_lessdef_list">match_locset_val_lessdef_list</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">ls</span> <span class="id">args</span>, <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt; <span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> (<span class="id"><a href="LTL.html#reglist">reglist</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#args">args</a></span>) (<span class="id"><a href="LTL.html#reglist">reglist</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> <span class="id"><a href="tunneling_proof.html#args">args</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7467')">Proof.</div>
<div class="proofscript" id="proof7467">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_set_preserved">match_locset_set_preserved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">v</span> <span class="id">v</span>' <span class="id">rs</span> <span class="id">rs</span>', <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> <span class="id">v</span>' -&gt; <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="Locations.html#Locmap.set">Locations.Locmap.set</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="Locations.html#Locmap.set">Locations.Locmap.set</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id">v</span>' <span class="id">rs</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7468')">Proof.</div>
<div class="proofscript" id="proof7468">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Locations.html#Locmap.set">Locations.Locmap.set</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Locations.html#Loc.eq">Locations.Loc.eq</a></span> <span class="id">l</span> <span class="id">loc</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">l</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.load_result_lessdef">Val.load_result_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Locations.html#Loc.diff_dec">Locations.Loc.diff_dec</a></span> <span class="id">l</span> <span class="id">loc</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_setres_preserved">match_locset_setres_preserved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">res</span> <span class="id">vres</span> <span class="id">vres</span>' <span class="id">rs</span> <span class="id">rs</span>', <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#vres">vres</a></span> <span class="id">vres</span>' -&gt; <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="Locations.html#Locmap.setres">Locations.Locmap.setres</a></span> <span class="id"><a href="tunneling_proof.html#res">res</a></span> <span class="id"><a href="tunneling_proof.html#vres">vres</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="Locations.html#Locmap.setres">Locations.Locmap.setres</a></span> <span class="id"><a href="tunneling_proof.html#res">res</a></span> <span class="id">vres</span>' <span class="id">rs</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7469')">Proof.</div>
<div class="proofscript" id="proof7469">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span>. <span class="tactic">induction</span> <span class="id">res</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">IHres2</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.loword_lessdef">Val.loword_lessdef</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHres1</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.hiword_lessdef">Val.hiword_lessdef</a></span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_undef_preserved">match_locset_undef_preserved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">rs</span> <span class="id">rs</span>', <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> (<span class="id"><a href="LTL.html#undef_regs">undef_regs</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="LTL.html#undef_regs">undef_regs</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id">rs</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7470')">Proof.</div>
<div class="proofscript" id="proof7470">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">FPMatch</span>'<span class="id">_loadv_fp_lessdef</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">a</span>' <span class="id">v</span> <span class="id">m</span> <span class="id">chunk</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>) <span class="id">mu</span>, <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id">a</span>' -&gt; <span class="id"><a href="Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> -&gt; <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt; <span class="id">FPMatch</span>' <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span>) (<span class="id"><a href="FMemOpFP.html#loadv_fp">FMemOpFP.loadv_fp</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id">a</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7471')">Proof.</div>
<div class="proofscript" id="proof7471">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">FPMatch</span>'<span class="id">_storev_fp_lessdef</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">a</span>' <span class="id">v</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">chunk</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>) <span class="id">mu</span>, <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id">a</span>' -&gt; <span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt; <span class="id">FPMatch</span>' <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span>) (<span class="id"><a href="FMemOpFP.html#storev_fp">FMemOpFP.storev_fp</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id">a</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7472')">Proof.</div>
<div class="proofscript" id="proof7472">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extends_valid_block_preserved">extends_valid_block_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span>, <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="tunneling_proof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7473')">Proof.</div>
<div class="proofscript" id="proof7473">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">mext_next</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_valid_block_preserved">storev_valid_block_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">a</span> <span class="id">v</span> <span class="id">chunk</span> <span class="id">b</span>, <span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="tunneling_proof.html#m">m</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="tunneling_proof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7474')">Proof.</div>
<div class="proofscript" id="proof7474">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_unmapped_closed_preserved">storev_unmapped_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>' <span class="id">a</span> <span class="id">a</span>' <span class="id">v</span> <span class="id">v</span>' <span class="id">chunk</span> <span class="id">mu</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id"><a href="tunneling_proof.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="tunneling_proof.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="tunneling_proof.html#chunk">chunk</a></span> <span class="id">m1</span>' <span class="id">a</span>' <span class="id">v</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#a">a</a></span> <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7475')">Proof.</div>
<div class="proofscript" id="proof7475">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">inversion</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">a</span>'; <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> (<span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">chunk</span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id">b0</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i0</span>) <span class="id">v</span> <span class="id">m2</span> <span class="id">b0</span> 0 <span class="id">v</span>' <span class="id">m2</span>'); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">replace</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i0</span> + 0) <span class="kwd">with</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i0</span>). <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_unmapped_closed_preserved">free_unmapped_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>' <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">mu</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id"><a href="tunneling_proof.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="tunneling_proof.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="tunneling_proof.html#m1">m1</a></span> <span class="id"><a href="tunneling_proof.html#b">b</a></span> <span class="id"><a href="tunneling_proof.html#lo">lo</a></span> <span class="id"><a href="tunneling_proof.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m1</span>' <span class="id"><a href="tunneling_proof.html#b">b</a></span> <span class="id"><a href="tunneling_proof.html#lo">lo</a></span> <span class="id"><a href="tunneling_proof.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> <span class="id"><a href="tunneling_proof.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7476')">Proof.</div>
<div class="proofscript" id="proof7476">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> (<span class="id"><a href="MemClosures_local.html#free_inject_unmapped_closed_preserved">MemClosures_local.free_inject_unmapped_closed_preserved</a></span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span> <span class="id">b</span> 0 <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span>'); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="list_nth_z_property">list_nth_z_property</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="tunneling_proof.html#A">A</a></span>) <span class="id">n</span> <span class="id">x</span> <span class="id">y</span> (<span class="id">f</span>: <span class="id"><a href="tunneling_proof.html#A">A</a></span> -&gt; <span class="id"><a href="tunneling_proof.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_nth_z">list_nth_z</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id"><a href="tunneling_proof.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> = <span class="id"><a href="tunneling_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_nth_z">list_nth_z</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="tunneling_proof.html#f">f</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span>) <span class="id"><a href="tunneling_proof.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="tunneling_proof.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7477')">Proof.</div>
<div class="proofscript" id="proof7477">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zeq">zeq</a></span> <span class="id">n</span> 0). <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_map_getpair">match_locset_map_getpair</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">ls</span> <span class="id">l</span>, <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt; <span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">p</span> : <span class="id"><a href="AST.html#rpair">rpair</a></span> <span class="id"><a href="Locations.html#loc">Locations.loc</a></span> =&gt; <span class="id"><a href="Locations.html#Locmap.getpair">Locations.Locmap.getpair</a></span> <span class="id"><a href="tunneling_proof.html#p">p</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) <span class="id"><a href="tunneling_proof.html#l">l</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">p</span> : <span class="id"><a href="AST.html#rpair">rpair</a></span> <span class="id"><a href="Locations.html#loc">Locations.loc</a></span> =&gt; <span class="id"><a href="Locations.html#Locmap.getpair">Locations.Locmap.getpair</a></span> <span class="id"><a href="tunneling_proof.html#p">p</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span>) <span class="id"><a href="tunneling_proof.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7478')">Proof.</div>
<div class="proofscript" id="proof7478">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.longofwords_lessdef">Val.longofwords_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_locset_get_result">match_locset_get_result</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">ls</span> <span class="id">r</span>, <span class="id"><a href="tunneling_proof.html#match_locset">match_locset</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span> -&gt; <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="val_casted.html#get_result">get_result</a></span> <span class="id"><a href="tunneling_proof.html#r">r</a></span> <span class="id"><a href="tunneling_proof.html#rs">rs</a></span>) (<span class="id"><a href="val_casted.html#get_result">get_result</a></span> <span class="id"><a href="tunneling_proof.html#r">r</a></span> <span class="id"><a href="tunneling_proof.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7479')">Proof.</div>
<div class="proofscript" id="proof7479">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#get_result">get_result</a></span>. <span class="tactic">destruct</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.longofwords_lessdef">Val.longofwords_lessdef</a></span>; <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_lessdef_implies_val_inject">val_lessdef_implies_val_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>) <span class="id">mu</span> <span class="id">v</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_arg">LDSimDefs.G_arg</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#v">v</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="tunneling_proof.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>)) <span class="id"><a href="tunneling_proof.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7480')">Proof.</div>
<div class="proofscript" id="proof7480">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">proper_mu_inject</span>. <span class="tactic">destruct</span> (<span class="id">inj_dom</span> <span class="id">b</span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">H_inj</span>]. <span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span>) <span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', 0)). <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H_inj</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">proper_mu_inject_incr</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?. <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>. <span class="tactic">eauto</span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="list_lessdef_implies_list_inject">list_lessdef_implies_list_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">sge</span> <span class="id">tge</span>: <span class="id"><a href="LTL.html#genv">genv</a></span>) <span class="id">mu</span> <span class="id">l</span> <span class="id">l</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_args">LDSimDefs.G_args</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>) <span class="id"><a href="tunneling_proof.html#l">l</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id">l</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="tunneling_proof.html#mu">mu</a></span>)) <span class="id"><a href="tunneling_proof.html#l">l</a></span> <span class="id">l</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7481')">Proof.</div>
<div class="proofscript" id="proof7481">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#val_lessdef_implies_val_inject">val_lessdef_implies_val_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">des</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H0</span>: <span class="id"><a href="tunneling_proof.html#MS">MS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (?<span class="id">Hcore</span>, ?<span class="id">Hm</span>) (?<span class="id">Lcore</span>, ?<span class="id">Lm</span>) |-<span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H_match_state</span> [<span class="id">H_FPmatch</span> [<span class="id">H_SharedSrc</span> [<span class="id">H_SharedTgt</span> [<span class="id">H_mu_id</span> [<span class="id">H_closure</span> [<span class="id">H_measure</span> <span class="id">H_true</span>]]]]]]]; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H0</span>: <span class="id"><a href="tunneling_proof.html#MS">MS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> ?<span class="id">Hc</span> ?<span class="id">Lc</span> |-<span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hc</span> <span class="kwd">as</span> [<span class="id">score</span> <span class="id">sm</span>]; <span class="tactic">destruct</span> <span class="id">Lc</span> <span class="kwd">as</span> [<span class="id">tcore</span> <span class="id">tm</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H_match_state</span> [<span class="id">H_FPmatch</span> [<span class="id">H_SharedSrc</span> [<span class="id">H_SharedTgt</span> [<span class="id">H_mu_id</span> [<span class="id">H_closure</span> [<span class="id">H_measure</span> <span class="id">H_true</span>]]]]]]]; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">resolvfp</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">_</span> <span class="id"><a href="tunneling_proof.html#empfp">empfp</a></span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="tunneling_proof.html#empfp">empfp</a></span> <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp1</span>' |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union</span>'; <span class="tactic">auto</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> ?<span class="id">fp1</span>' |- <span class="id">Injections.FPMatch</span>' ?<span class="id">mu</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) ?<span class="id">fp1</span>' =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="tactic">auto</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) <span class="id">_</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span>' ?<span class="id">fp1</span> |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span>' <span class="id">_</span>) <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) <span class="id">_</span>)=&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.subset_parallel_union">FP.subset_parallel_union</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>' |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> ?<span class="id">fp</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>' |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp</span>' <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_union_subset">FP.subset_union_subset</a></span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;| |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="tunneling_proof.html#empfp">empfp</a></span> =&gt; <span class="tactic">apply</span> <span class="id">Injections.fp_match_emp</span>'<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp1</span> ?<span class="id">fp2</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_subset_T</span>' <span class="kwd">with</span> <span class="id">fp2</span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) ?<span class="id">fp2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_S</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_T</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union_T</span>'; <span class="id">resolvfp</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp2</span> ?<span class="id">fp1</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp1</span> <span class="id">_</span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> ?<span class="id">fp2</span> <span class="id">_</span>) <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Injections.fp_match_union</span>'; <span class="id">resolvfp</span>                                          <br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> ?<span class="id">fp2</span>) <span class="id">_</span> -&gt; ~ <span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> ?<span class="id">mu</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> <span class="id">_</span> ?<span class="id">fp2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Injections.html#fp_match_local_block">Injections.fp_match_local_block</a></span>; <span class="tactic">auto</span>                                          <br/>
&nbsp;&nbsp;| |- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_refl">FP.subset_refl</a></span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Op_fp.html#fp_inject">fp_inject</a></span> <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span>', <span class="id">H</span>': <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Op_fp.html#fp_inject_fp_match">fp_inject_fp_match</a></span>; <span class="id">inv</span> <span class="id">H</span>'; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Op_fp.html#fp_inject">fp_inject</a></span> <span class="id"><a href="Values.html#inject_id">inject_id</a></span> ?<span class="id">fp</span> ?<span class="id">fp</span>'|- <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> ?<span class="id">fp</span>' ?<span class="id">fp</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Op_fp.html#fp_inject_id_fp_subset">fp_inject_id_fp_subset</a></span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">Injections.FPMatch</span>' <span class="id">_</span> ?<span class="id">fp</span> ?<span class="id">fp</span> =&gt; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eresolvfp</span>:= <span class="id">resolvfp</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">resvalid</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
<div class="doc">valid blocks </div>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>,<span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="tunneling_proof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span><br/>
<div class="doc">Mem inv </div>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#free_inject_unmapped_closed_preserved">MemClosures_local.free_inject_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>, <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>', <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Ex_index</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> ?<span class="id">s</span> ?<span class="id">f</span> ?<span class="id">sp</span> (<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> ?<span class="id">pc</span> :: ?<span class="id">bb</span>) ?<span class="id">rs</span> ?<span class="id">sigres</span>] =&gt; <span class="id">exists</span> (<span class="kwd">measure</span> (<span class="id"><a href="LTL_local.html#Core_Block">Core_Block</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> (<span class="id"><a href="LTL.html#Lbranch">Lbranch</a></span> <span class="id">pc</span> :: <span class="id">bb</span>) <span class="id">rs</span> <span class="id">sigres</span>))<br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span>] =&gt; <span class="id">exists</span> 0%<span class="id">nat</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> ?<span class="id">s</span> ?<span class="id">v</span> ?<span class="id">sigres</span>] =&gt; <span class="id">eexists</span> <br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Right</span> := <span class="id">right</span>; <span class="tactic">do</span> 4 <span class="id">eexists</span>; <span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>|<span class="id">resolvfp</span>].<br/>
<span class="kwd">Ltac</span> <span class="id">FP</span>:= <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">P</span> /\ <span class="id">_</span> =&gt; <span class="tactic">assert</span> <span class="id">P</span>; [<span class="id">eresolvfp</span>| <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">auto</span>; <span class="tactic">fail</span>|])] <span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Left</span> := <span class="id">left</span>; <span class="id">Ex_index</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="id">eresolvfp</span>].<br/>
<span class="kwd">Ltac</span> <span class="id">splitMS</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;[<span class="id">econstructor</span>; <span class="id">eresolvfp</span> |<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="id">eresolvfp</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">split</span>; [<span class="tactic">auto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">eauto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span>]]]]]].<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_local_ldsim">transf_local_ldsim</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">su</span> <span class="id">tu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="tunneling.html#transf_program">transf_program</a></span> <span class="id"><a href="tunneling_proof.html#su">su</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="tunneling_proof.html#tu">tu</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sge</span> <span class="id">sG</span> <span class="id">tge</span> <span class="id">tG</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span> <span class="id"><a href="LTL_local.html#LTL_IS">LTL_IS</a></span> <span class="id"><a href="tunneling_proof.html#su">su</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#sG">sG</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="IS_local.html#init_genv_local">init_genv_local</a></span> <span class="id"><a href="LTL_local.html#LTL_IS">LTL_IS</a></span> <span class="id"><a href="tunneling_proof.html#tu">tu</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span> <span class="id"><a href="tunneling_proof.html#tG">tG</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim_local.html#local_ldsim">local_ldsim</a></span> <span class="id"><a href="tunneling_proof.html#sG">sG</a></span> <span class="id"><a href="tunneling_proof.html#tG">tG</a></span> <span class="id"><a href="tunneling_proof.html#sge">sge</a></span> <span class="id"><a href="tunneling_proof.html#tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7482')">Proof.</div>
<div class="proofscript" id="proof7482">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="LTL_local.html#init_genv">init_genv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_match</span>: <span class="id"><a href="tunneling_proof.html#match_cu">match_cu</a></span> <span class="id">su</span> <span class="id">tu</span>) <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">instantiate</span>(3:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
&nbsp;&nbsp;<span class="id">instantiate</span>(2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Peano.html#lt">lt</a></span>). <span class="id">instantiate</span>(1:=<span class="id"><a href="tunneling_proof.html#MS">MS</a></span> <span class="id">sG</span> <span class="id">tG</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">des</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">H_mu_id</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">H_mu_id</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#ge_match">ge_match</a></span> <span class="id">su</span> <span class="id">tu</span>); <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">assert</span> (<span class="id">argSrc</span> = <span class="id">argTgt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H7</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#G_args">LDSimDefs.G_args</a></span>, <span class="id"><a href="LDSimDefs.html#G_arg">LDSimDefs.G_arg</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#arg_rel">LDSimDefs.arg_rel</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">induction</span> <span class="id">H6</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> (<span class="id">IHinject_list</span> <span class="id">H13</span>); <span class="tactic">auto</span>). <span class="tactic">inversion</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHinject_list</span> <span class="id">H16</span>). <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span>; <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="LTL_local.html#init_core">init_core</a></span>, <span class="id"><a href="CUAST.html#generic_init_core">generic_init_core</a></span>, <span class="id"><a href="LTL_local.html#fundef_init">fundef_init</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_symbol</span>: <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">tG</span> <span class="id">id</span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">sG</span> <span class="id">id</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span>; <span class="tactic">eauto</span>) . <span class="tactic">rewrite</span> <span class="id">H_symbol</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">sG</span> <span class="id">id</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id">sG</span> <span class="id">b</span>) <span class="id">eqn</span>: <span class="id">H_funct_ptr</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#funct_ptr_translated">funct_ptr_translated</a></span> <span class="kwd">in</span>  <span class="id">H_funct_ptr</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_funct_ptr</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id">argTgt</span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="LTL.html#fn_sig">fn_sig</a></span> <span class="id">f</span>))); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>; <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H7</span>. <span class="tactic">clear</span> <span class="id">H_symbol</span>. <span class="tactic">clear</span> <span class="id">H_funct_ptr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H6</span>. <span class="tactic">clear</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_dom_match</span>: <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">sG</span> = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">sm</span>) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_dom_match</span>': <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">tG</span> = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_extends</span>: <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id">sm</span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#inject_implies_extends">inject_implies_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H_dom_match</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id">b0</span>). <span class="tactic">rewrite</span> <span class="id">mu_shared_src</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mu_inject</span>. <span class="tactic">destruct</span> (<span class="id">inj_dom</span> <span class="id">b0</span> <span class="id">H9</span>) <span class="kwd">as</span> [<span class="id">b</span>' ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>'. <span class="id">exists</span> 0. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H10</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LDSim_local.html#mem_mu_inj">mem_mu_inj</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H_dom_match</span>, &lt;- <span class="id">H_dom_match</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_mem</span>: <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">sm</span> = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_mem</span>': <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span> = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H9</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_refl">match_locset_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_rely_extends">extends_rely_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">fp_match_emp</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H_mem</span>. <span class="tactic">apply</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H_mem</span>'. <span class="tactic">apply</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H7</span>. <span class="tactic">unfold</span> <span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> <span class="id">H11</span>. <span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">inversion</span> <span class="id">H9</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">bb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H_match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="tunneling_proof.html#record_gotos_correct">record_gotos_correct</a></span> <span class="id">f</span> <span class="id">pc</span>) <span class="kwd">as</span> <span class="id">Hbranch</span>; <span class="tactic">clear</span> <span class="id">HeqHbranch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">Hbranch</span>. <span class="tactic">rewrite</span> <span class="id">Hbranch</span>. <span class="id">Right</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="tunneling_proof.html#code_preserved">code_preserved</a></span>, <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H_match_state</span>. <span class="tactic">destruct</span> <span class="id">i</span>; <span class="tactic">try</span> (<span class="id">right</span>; <span class="tactic">do</span> 4 <span class="id">eexists</span>; <span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#plus_one">plus_one</a></span>; <span class="id">constructor</span>; <span class="id">remember</span> (<span class="id"><a href="tunneling_proof.html#record_gotos_correct">record_gotos_correct</a></span> <span class="id">f</span> <span class="id">pc</span>) <span class="kwd">as</span> <span class="id">Hbranch</span>; <span class="tactic">clear</span> <span class="id">HeqHbranch</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">Hbranch</span>; <span class="tactic">rewrite</span> <span class="id">Hbranch</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="tunneling_proof.html#code_preserved">code_preserved</a></span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span> | <span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id">fp_match_union</span>'; <span class="tactic">auto</span>; <span class="tactic">apply</span> <span class="id">fp_match_emp</span>' | <span class="tactic">split</span>; [<span class="id">constructor</span>; <span class="tactic">auto</span> | <span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id">fp_match_union</span>'; <span class="tactic">auto</span>; <span class="tactic">apply</span> <span class="id">fp_match_emp</span>' | <span class="tactic">split</span>; <span class="tactic">auto</span>]]]]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">pc</span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id">f</span> <span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">constructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="tunneling_proof.html#code_preserved">code_preserved</a></span>, &lt;- <span class="id">e</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">auto</span>. <span class="id">eresolvfp</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="tunneling_proof.html#record_gotos_correct">record_gotos_correct</a></span> <span class="id">f</span> <span class="id">pc</span>) <span class="kwd">as</span> <span class="id">Hbranch</span>; <span class="tactic">clear</span> <span class="id">HeqHbranch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">Hbranch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hbranch</span> <span class="kwd">as</span> [<span class="id">Hbranch</span> | [<span class="id">H_branch_target</span> <span class="id">Hcount</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">H_branch_target</span>. <span class="id">Left</span>. <span class="tactic">simpl</span>. <span class="tactic">omega</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H_match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#match_locset_val_lessdef_list">match_locset_val_lessdef_list</a></span> <span class="id">rs</span> <span class="id">ls0</span> <span class="id">args</span>) <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> <span class="id">H_lessdef_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Op.html#eval_operation_preserved">Op.eval_operation_preserved</a></span> <span class="id">sG</span> <span class="id">tG</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>))) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Op.html#eval_operation_lessdef">Op.eval_operation_lessdef</a></span> <span class="id">tG</span> <span class="id">sp</span> <span class="id">op</span> <span class="id">H_lessdef_list</span> <span class="id">H17</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">H_op</span> <span class="id">H_lessdef</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Op_fp.html#eval_operation_fp_preserved">Op_fp.eval_operation_fp_preserved</a></span> <span class="id">sG</span> <span class="id">tG</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>))) <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Op_fp.html#eval_operation_lessdef_fp">Op_fp.eval_operation_lessdef_fp</a></span> <span class="id">tG</span> <span class="id">sp</span> <span class="id">op</span> <span class="id">H_lessdef_list</span> <span class="id">H17</span> <span class="id">H0</span> <span class="id">H5</span>) <span class="kwd">as</span> [<span class="id">Lfp</span>' [<span class="id">H_op_fp</span> <span class="id">H_lessdef_fp</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#match_locset_val_lessdef_list">match_locset_val_lessdef_list</a></span> <span class="id">rs</span> <span class="id">ls0</span> <span class="id">args</span>) <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> <span class="id">H_lessdef_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Op.html#eval_addressing_preserved">Op.eval_addressing_preserved</a></span> <span class="id">sG</span> <span class="id">tG</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>))) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Op.html#eval_addressing_lessdef">Op.eval_addressing_lessdef</a></span> <span class="id">tG</span> <span class="id">sp</span> <span class="id">addr</span> <span class="id">H_lessdef_list</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">a</span>' [<span class="id">H_op</span> <span class="id">H_lessdef</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H17</span> <span class="id">H5</span> <span class="id">H_lessdef</span>) <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">H_op</span>' <span class="id">H_lessdef</span>']].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">FPMatch</span>'<span class="id">_loadv_fp_lessdef</span> <span class="id">a</span> <span class="id">a</span>' <span class="id">v</span> <span class="id">Hm</span>' <span class="id">chunk</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">mu</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">FPMatch</span>'<span class="id">_loadv_fp_lessdef</span> <span class="id">a</span> <span class="id">a</span>' <span class="id">v</span> <span class="id">Hm</span>' <span class="id">chunk</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">mu</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#match_locset_val_lessdef_list">match_locset_val_lessdef_list</a></span> <span class="id">rs</span> <span class="id">ls0</span> <span class="id">args</span>) <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> <span class="id">H_lessdef_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Op.html#eval_addressing_preserved">Op.eval_addressing_preserved</a></span> <span class="id">sG</span> <span class="id">tG</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>))) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Op.html#eval_addressing_lessdef">Op.eval_addressing_lessdef</a></span> <span class="id">tG</span> <span class="id">sp</span> <span class="id">addr</span> <span class="id">H_lessdef_list</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">a</span>' [<span class="id">H_op</span> <span class="id">H_lessdef</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.storev_extends">Mem.storev_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H17</span> <span class="id">H5</span> <span class="id">H_lessdef</span> (<span class="id">H16</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">src</span>))) <span class="kwd">as</span> [<span class="id">Lm</span>' [<span class="id">H_op</span>' <span class="id">H_extend</span>']].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">FPMatch</span>'<span class="id">_storev_fp_lessdef</span> <span class="id">a</span> <span class="id">a</span>' (<span class="id">rs</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">src</span>)) <span class="id">Hm</span> <span class="id">Hm</span>' <span class="id">chunk</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">mu</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">FPMatch</span>'<span class="id">_storev_fp_lessdef</span> <span class="id">a</span> <span class="id">a</span>' (<span class="id">rs</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">src</span>)) <span class="id">Hm</span> <span class="id">Hm</span>' <span class="id">chunk</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">mu</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H_SharedSrc</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#storev_valid_block_preserved">storev_valid_block_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H_SharedTgt</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#storev_valid_block_preserved">storev_valid_block_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#storev_unmapped_closed_preserved">storev_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="id">Right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (2:= (<span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span> (<span class="id"><a href="LTL.html#Stackframe">Stackframe</a></span> (<span class="id">tunnel_function</span> <span class="id">f</span>) <span class="id">sp</span> <span class="id">ls0</span> (<span class="id">tunnel_block</span> (<span class="id">record_gotos</span> <span class="id">f</span>) <span class="id">bb</span>) :: <span class="id">ts</span>) (<span class="id">tunnel_fundef</span> <span class="id">fd</span>) <span class="id">ls0</span> <span class="id">sigres</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="tunneling_proof.html#find_function_translated_lessdef">find_function_translated_lessdef</a></span> <span class="id">su</span> <span class="id">tu</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#sig_preserved">sig_preserved</a></span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H17</span> <span class="id">H7</span>) <span class="kwd">as</span> [<span class="id">Lm</span>' [<span class="id">H_mem</span> <span class="id">H_extends</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">instantiate</span> (2:= (<span class="id"><a href="LTL_local.html#Core_Callstate">Core_Callstate</a></span> <span class="id">ts</span> (<span class="id">tunnel_fundef</span> <span class="id">fd</span>) (<span class="id"><a href="LTL.html#return_regs">return_regs</a></span> (<span class="id"><a href="LTL.html#parent_locset">parent_locset</a></span> <span class="id">ts</span>) <span class="id">ls0</span>) <span class="id">sigres</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="tunneling_proof.html#find_function_translated_lessdef">find_function_translated_lessdef</a></span> <span class="id">su</span> <span class="id">tu</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#return_regs_match_locset_preserved">return_regs_match_locset_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_parent_locset">match_parent_locset</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#sig_preserved">sig_preserved</a></span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#return_regs_match_locset_preserved">return_regs_match_locset_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_parent_locset">match_parent_locset</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Events.html#eval_builtin_args_lessdef">Events.eval_builtin_args_lessdef</a></span> <span class="id">ls0</span> <span class="id">H18</span> <span class="id">H19</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">vargs</span>' [<span class="id">H_vargs</span> <span class="id">H_lessdef_vargs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Events.html#external_call_mem_extends">Events.external_call_mem_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H7</span> <span class="id">H19</span> <span class="id">H_lessdef_vargs</span>) <span class="kwd">as</span> [<span class="id">vres</span>' [<span class="id">Lm</span>' [<span class="id">H_res</span> [<span class="id">H_lessdef_res</span> [<span class="id">H_extends</span> <span class="id">H_unchanged</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="helpers.html#i64ext_effects">helpers.i64ext_effects</a></span> <span class="kwd">in</span> <span class="id">H_res</span> <span class="kwd">as</span> <span class="id">H_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H_equal</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Events.html#eval_builtin_args_preserved">Events.eval_builtin_args_preserved</a></span> <span class="id">tG</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp_lessdef">MemOpFP.eval_builtin_args_fp_lessdef</a></span> <span class="kwd">with</span> <span class="id">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemOpFP.html#eval_builtin_args_fp_preserved">MemOpFP.eval_builtin_args_fp_preserved</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#symbols_preserved">symbols_preserved</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">H3</span> <span class="id">H1</span> <span class="id">H2</span> (<span class="id"><a href="tunneling_proof.html#transf_program_match">transf_program_match</a></span> <span class="id">su</span> <span class="id">tu</span> <span class="id">H</span>)). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Events.html#external_call_symbols_preserved">Events.external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#senv_preserved">senv_preserved</a></span> <span class="id">su</span> <span class="id">tu</span>); <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_setres_preserved">match_locset_setres_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">exists</span> (<span class="kwd">measure</span> (<span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">rs</span> <span class="id">sigres</span>)). <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">omega</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#match_locset_val_lessdef_list">match_locset_val_lessdef_list</a></span> <span class="id">rs</span> <span class="id">ls0</span> <span class="id">args</span>) <span class="kwd">in</span> <span class="id">H16</span> <span class="kwd">as</span> <span class="id">H_lessdef_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Op_fp.html#eval_condition_lessdef_fp">eval_condition_lessdef_fp</a></span> <span class="id">cond</span> <span class="id">H_lessdef_list</span> <span class="id">H17</span> <span class="id">H0</span> <span class="id">H5</span>) <span class="kwd">as</span> [<span class="id">Lfp</span>' [<span class="id">H_op</span> <span class="id">H_inject</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">instantiate</span> (2:= (<span class="id"><a href="LTL_local.html#Core_State">Core_State</a></span> <span class="id">ts</span> (<span class="id">tunnel_function</span> <span class="id">f</span>) <span class="id">sp</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id">f</span> <span class="id">pc1</span>) <span class="kwd">else</span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id">f</span> <span class="id">pc2</span>)) (<span class="id"><a href="LTL.html#undef_regs">undef_regs</a></span> (<span class="id"><a href="Machregs.html#destroyed_by_cond">Machregs.destroyed_by_cond</a></span> <span class="id">cond</span>) <span class="id">ls0</span>) <span class="id">sigres</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Op.html#eval_condition_lessdef">Op.eval_condition_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">resvalid</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_n</span>: <span class="id">ls0</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">arg</span>) = <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H16</span> (<span class="id"><a href="Locations.html#R">Locations.R</a></span> <span class="id">arg</span>)); <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_pc</span>: <span class="id"><a href="Coqlib.html#list_nth_z">list_nth_z</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id">U.repr</span> (<span class="id">record_gotos</span> <span class="id">f</span>)) <span class="id">tbl</span>) (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="tunneling_proof.html#branch_target">branch_target</a></span> <span class="id">f</span> <span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#list_nth_z_property">list_nth_z_property</a></span>; <span class="tactic">eauto</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H16</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">Lm</span>' [<span class="id">H_mem</span> <span class="id">H_extends</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splitMS</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#return_regs_match_locset_preserved">return_regs_match_locset_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_parent_locset">match_parent_locset</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_mem</span>: <span class="id">exists</span> <span class="id">Lm</span>', <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">Lm</span> 0 (<span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> (<span class="id">tunnel_function</span> <span class="id">f</span>)) = (<span class="id">Lm</span>', <span class="id">sp</span>) /\ <span class="id"><a href="Memory.html#Mem.extends">Mem.extends</a></span> <span class="id">Hm</span>' <span class="id">Lm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_extends">Mem.alloc_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_stacksize_preserved</span>: <span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> (<span class="id">tunnel_function</span> <span class="id">f</span>) = <span class="id"><a href="LTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_mem</span> <span class="kwd">as</span> [<span class="id">Lm</span>' [<span class="id">H_mem</span> <span class="id">H_extends</span>]]. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">eapply</span> <span class="id">fp_match_subset_T</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>. <span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">MemOpFP.alloc_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>) <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_refl">FP.subset_refl</a></span>. <span class="tactic">apply</span> <span class="id">H14</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_undef_preserved">match_locset_undef_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#call_regs_match_locset_preserved">call_regs_match_locset_preserved</a></span>; <span class="tactic">auto</span>. <span class="id">eresolvfp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="tunneling_proof.html#stacksize_preserved">stacksize_preserved</a></span>. <span class="tactic">eapply</span> <span class="id">fp_match_subset_T</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="LDSimDefs_local.html#fp_match_id">fp_match_id</a></span>; <span class="tactic">apply</span> <span class="id">H_mu_id</span>. <span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#alloc_fp">MemOpFP.alloc_fp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>) <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.subset_refl">FP.subset_refl</a></span>. <span class="tactic">apply</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#match_locset_map_getpair">match_locset_map_getpair</a></span> <span class="id">rs</span> <span class="id">ls0</span> (<span class="id"><a href="Conventions1.html#loc_arguments">Conventions1.loc_arguments</a></span> (<span class="id"><a href="AST.html#ef_sig">ef_sig</a></span> <span class="id">ef</span>))) <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> <span class="id">H_match_locset_pair</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Events.html#external_call_mem_extends">Events.external_call_mem_extends</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H6</span> <span class="id">H15</span> <span class="id">H_match_locset_pair</span>) <span class="kwd">as</span> [<span class="id">vres</span>' [<span class="id">Lm</span>' [<span class="id">H_res</span> [<span class="id">H_lessdef_res</span> [<span class="id">H_extends</span> <span class="id">H_unchanged</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="helpers.html#i64ext_effects">helpers.i64ext_effects</a></span> <span class="kwd">in</span> <span class="id">H_res</span> <span class="kwd">as</span> <span class="id">H_equal</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_equal</span>; <span class="tactic">subst</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Events.html#external_call_symbols_preserved">Events.external_call_symbols_preserved</a></span> <span class="kwd">with</span> <span class="id">sG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="tunneling_proof.html#senv_preserved">senv_preserved</a></span> <span class="id">su</span> <span class="id">tu</span>); <span class="tactic">auto</span>. <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> (<span class="id"><a href="AST.html#ef_sig">ef_sig</a></span> <span class="id">ef</span>)); <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.loword_lessdef">Val.loword_lessdef</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Values.html#Val.hiword_lessdef">Val.hiword_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H7</span>; <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">subst</span>. <span class="id">Right</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="id">eresolvfp</span>. <span class="id">splitMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">f0</span>; <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="id">sG</span> <span class="id">name</span>) <span class="id">eqn</span>: <span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_symbol</span>: <span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="id">tG</span> <span class="id">name</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_genvs_invert_symbol_from_string_preserved">match_genvs_invert_symbol_from_string_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#genv_match">genv_match</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f1</span>; <span class="tactic">destruct</span> <span class="id">f2</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v1</span>; <span class="tactic">destruct</span> <span class="id">v2</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H_symbol</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id"><a href="GAST.html#ent_atom">GAST.ent_atom</a></span> || <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id"><a href="GAST.html#ext_atom">GAST.ext_atom</a></span>); <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">p</span> : <span class="id"><a href="AST.html#rpair">rpair</a></span> <span class="id"><a href="Locations.html#loc">Locations.loc</a></span> =&gt; <span class="id"><a href="Locations.html#Locmap.getpair">Locations.Locmap.getpair</a></span> <span class="id"><a href="tunneling_proof.html#p">p</a></span> <span class="id">ls1</span>) (<span class="id"><a href="Conventions1.html#loc_arguments">Conventions1.loc_arguments</a></span> <span class="id">sg</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#arg_rel">LDSimDefs.arg_rel</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#list_lessdef_implies_list_inject">list_lessdef_implies_list_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_map_getpair">match_locset_map_getpair</a></span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H_mu_id</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">MemClosures_local.unmapped_closed_reach_closed_preserved_by_injection</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">fp_match_emp</span>'. <span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_match_state</span>; <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">oresSrc</span>); <span class="tactic">destruct</span> (<span class="id"><a href="AST.html#sig_res">sig_res</a></span> <span class="id">sg</span>) <span class="id">eqn</span>: <span class="id">E</span>; <span class="id">inv</span> <span class="id">H7</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">oresTgt</span>; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_equal</span>: <span class="id">v</span> = <span class="id">v0</span>). <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#G_arg">LDSimDefs.G_arg</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#res_rel">LDSimDefs.res_rel</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">proper_mu_inject_incr</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">H_inject</span>. <span class="tactic">inversion</span> <span class="id">H_inject</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id">ts</span> (<span class="id"><a href="Locations.html#Locmap.setpair">Locations.Locmap.setpair</a></span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> <span class="id">sg</span>) <span class="id">v0</span> <span class="id">ls1</span>) <span class="id">sigres</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="val_casted.html#val_has_type_func">val_has_type_func</a></span> <span class="id">v0</span> <span class="id">t</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H5</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> <span class="id">sg</span>); <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_rely_extends">extends_rely_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">fp_match_emp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>') <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>') <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r0</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>. <span class="tactic">apply</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="LTL_local.html#Core_Returnstate">Core_Returnstate</a></span> <span class="id">ts</span> (<span class="id"><a href="Locations.html#Locmap.setpair">Locations.Locmap.setpair</a></span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> <span class="id">sg</span>) <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id">ls1</span>) <span class="id">sigres</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">oresTgt</span>; <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">clear</span> <span class="id">H6</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> <span class="id">sg</span>); <span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_set_preserved">match_locset_set_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_rely_extends">extends_rely_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id">fp_match_emp</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>') <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Hm</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>') <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">Lm</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r0</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#reach_closed_unmapped_closed">MemClosures_local.reach_closed_unmapped_closed</a></span>. <span class="tactic">apply</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcore</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="id">inv</span> <span class="id">H_match_state</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">stack</span>; <span class="tactic">inversion</span> <span class="id">H7</span>; <span class="tactic">clear</span> <span class="id">H7</span>. <span class="tactic">inversion</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="val_casted.html#get_result">get_result</a></span> (<span class="id"><a href="Conventions1.html#loc_result">Conventions1.loc_result</a></span> {| <span class="id"><a href="AST.html#mksignature">sig_args</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="id">sig_res</span> := <span class="id">sigres</span>; <span class="id">sig_cc</span> := <span class="id"><a href="AST.html#cc_default">cc_default</a></span> |}) <span class="id">ls1</span>) <span class="kwd">as</span> <span class="id">resTgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_lessdef</span>: <span class="id"><a href="Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id">resSrc</span> <span class="id">resTgt</span>). <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="tunneling_proof.html#match_locset_get_result">match_locset_get_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_equal</span>: <span class="id">resSrc</span> = <span class="id">resTgt</span>). <span class="tactic">inversion</span> <span class="id">H_lessdef</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">resTgt</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#res_rel">LDSimDefs.res_rel</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="tunneling_proof.html#val_lessdef_implies_val_inject">val_lessdef_implies_val_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H_mu_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id">MemClosures_local.unmapped_closed_reach_closed_preserved_by_injection</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="LDSimDefs_local.html#extends_reach_closed_implies_inject">extends_reach_closed_implies_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
