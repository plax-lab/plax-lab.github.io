<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SmileReorder</title>
<meta name="description" content="Documentation of Coq module SmileReorder" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SmileReorder</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="GAST.html">GAST</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="GlobSemantics.html">GlobSemantics</a></span> <span class="id"><a href="GlobSemantics_Lemmas.html">GlobSemantics_Lemmas</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span> <span class="id"><a href="TypedSemantics.html">TypedSemantics</a></span> .<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="DRF.html">DRF</a></span> <span class="id"><a href="USimDRF.html">USimDRF</a></span> <span class="id"><a href="NPDRF.html">NPDRF</a></span> <span class="id"><a href="FPLemmas.html">FPLemmas</a></span> <span class="id"><a href="PRaceLemmas.html">PRaceLemmas</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical.html">Classical</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Wf.html">Wf</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
<div class="doc">This file contains lemmas about reordering under the condition of data-race-free, used in the semantics equivalence of P and NP.</div>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "'&lt;&lt;' <span class="id">i</span> ',' <span class="id">c</span> ',' <span class="id">sg</span> ',' <span class="id">F</span> '&gt;&gt;'" := {|<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i</span>; <span class="id">Core.c</span> := <span class="id">c</span>; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span>|} (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Local</span> <span class="kwd">Definition</span> <span class="id"><a name="pc_valid_tid">pc_valid_tid</a></span> {<span class="id">ge</span>}:= @<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "{ <span class="id">A</span> , <span class="id">B</span> , <span class="id">C</span> , <span class="id">D</span> }" := {|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">A</span>;<span class="id">cur_tid</span>:=<span class="id">B</span>;<span class="id">gm</span>:=<span class="id">C</span>;<span class="id">atom_bit</span>:= <span class="id">D</span>|}(<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).  <span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := ({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |}) (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Ltac</span> <span class="id">Hsimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>:?<span class="id">a</span>,<span class="id">H2</span>:?<span class="id">a</span>-&gt;?<span class="id">b</span>|-<span class="id">_</span>=&gt;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">H1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>/\<span class="id">_</span>|-<span class="id">_</span>=&gt; <span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>|-<span class="id">_</span>=&gt;<span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Esimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span>=&gt;<span class="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>=&gt;<span class="id">eexists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">clear_get</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> *;(<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>)).<br/>
<span class="kwd">Ltac</span> <span class="id">clear_set</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.set2">Maps.PMap.set2</a></span> <span class="kwd">in</span> *;(<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>)).<br/>
<span class="kwd">Ltac</span> <span class="id">solv_thread</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> ,<br/>
&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.is_emp">CallStack.is_emp</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.emp_cs">CallStack.emp_cs</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> *;(<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>));<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span>, <span class="id">H1</span>:<span class="id">context</span> [ ?<span class="id">P</span> ] |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span> |- <span class="id">context</span> [ ?<span class="id">P</span> ] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <br/>
&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="id">GDefLemmas.solv_eq</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="id">clear_set</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Ltac</span> <span class="id">solv_thread_alt</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">Coqlib.inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span>,<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> ,<br/>
&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.is_emp">CallStack.is_emp</a></span>, <span class="id"><a href="GlobDefs.html#CallStack.emp_cs">CallStack.emp_cs</a></span> <span class="kwd">in</span> *; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> *;(<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">subst</span>));<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span>, <span class="id">H1</span>:<span class="id">context</span> [ ?<span class="id">P</span> ] |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span> |- <span class="id">context</span> [ ?<span class="id">P</span> ] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Reorder">Reorder</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="Reorder.GE">GE</a></span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="Reorder.wdge">wdge</a></span>:<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="changepc">changepc</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>)(<span class="id">b</span>:<span class="id"><a href="GlobDefs.html#Bit">Bit</a></span>):<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>), <span class="id"><a href="SmileReorder.html#t">t</a></span>,<span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>),<span class="id"><a href="SmileReorder.html#b">b</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="mem_eq_pc">mem_eq_pc</a></span> (<span class="id">pc</span> <span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>)(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_refl">mem_eq_pc_refl</a></span>:<span class="kwd">forall</span> <span class="id">p</span>,<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8603')">Proof.</div>
<div class="proofscript" id="proof8603">
 <span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>]]];<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_sym">mem_eq_pc_sym</a></span>:<span class="kwd">forall</span> <span class="id">p</span> <span class="id">p</span>',<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id">p</span>'-&gt;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">p</span>' <span class="id"><a href="SmileReorder.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8604')">Proof.</div>
<div class="proofscript" id="proof8604">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">eapply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>]]];<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_trans">mem_eq_pc_trans</a></span>:<span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span>,<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#p1">p1</a></span> <span class="id"><a href="SmileReorder.html#p2">p2</a></span> -&gt;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#p2">p2</a></span> <span class="id"><a href="SmileReorder.html#p3">p3</a></span>-&gt;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#p1">p1</a></span> <span class="id"><a href="SmileReorder.html#p3">p3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8605')">Proof.</div>
<div class="proofscript" id="proof8605">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?),1 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">eapply</span> <span class="id">GMem.eq</span>'<span class="id">_trans</span>]]];<span class="tactic">eauto</span>;<span class="tactic">congruence</span>. Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Memperm_validblock">Memperm_validblock</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.perm">GMemory.GMem.perm</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> <span class="id"><a href="SmileReorder.html#ofs">ofs</a></span> <span class="id"><a href="SmileReorder.html#k">k</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8606')">Proof.</div>
<div class="proofscript" id="proof8606">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.valid_block">GMemory.GMem.valid_block</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GMemory.html#GMem.perm">GMemory.GMem.perm</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">invalid_noaccess</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="localstep_memeff">localstep_memeff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">cc</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8607')">Proof.</div>
<div class="proofscript" id="proof8607">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="SmileReorder.html#Reorder.wdge">wdge</a></span> <span class="id">i_x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">wdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_local_eff">corestep_local_eff</a></span> <span class="kwd">in</span> <span class="id">step_local_eff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">step_local_eff</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="id">Function</span> <span class="id">getcurcore</span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):= <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
&nbsp;&nbsp;<span class="id">Function</span> <span class="id">getfl</span> (<span class="id">c</span>:@<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>).<br/>
&nbsp;&nbsp;<span class="id">Function</span> <span class="id">getcurcs</span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):= <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_getcs_exists">gettop_getcs_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8608')">Proof.</div>
<div class="proofscript" id="proof8608">
 <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_push_exists">gettop_push_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">c</span>,@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span>, <span class="id">exists</span> <span class="id">c</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8609')">Proof.</div>
<div class="proofscript" id="proof8609">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#gettop_getcs_exists">gettop_getcs_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="coreupdate_exists">coreupdate_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">cc</span>,<span class="id">exists</span> <span class="id">c</span>', @<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8610')">Proof.</div>
<div class="proofscript" id="proof8610">
 <span class="tactic">intros</span>. <span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_update_exists">gettop_update_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">c</span>,@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cc</span>  <span class="id">c</span>', <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id">c</span>' -&gt;<span class="id">exists</span> <span class="id">thdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">c</span>' <span class="id">thdp</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8611')">Proof.</div>
<div class="proofscript" id="proof8611">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_getcs_exists">gettop_getcs_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_pop_exists">gettop_pop_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">c</span>,@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8612')">Proof.</div>
<div class="proofscript" id="proof8612">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">eqn</span>:?;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="update_gettop_exists">update_gettop_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">c</span> <span class="id">thdp</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8613')">Proof.</div>
<div class="proofscript" id="proof8613">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="pop_gettop_exists">pop_gettop_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">i</span> <span class="id">thdp</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8614')">Proof.</div>
<div class="proofscript" id="proof8614">
 <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">eqn</span>:?;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>. <span class="tactic">rewrite</span> <span class="id">Heqp</span>. <span class="tactic">destruct</span> <span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">eqn</span>:?;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">t</span>;<span class="tactic">inversion</span> <span class="id">Heqo</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_preserve">gettop_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8615')">Proof.</div>
<div class="proofscript" id="proof8615">
 <span class="tactic">destruct</span> 3 <span class="kwd">as</span>[[]|[|[?[?[]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>. Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_backwards_preserve">gettop_backwards_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8616')">Proof.</div>
<div class="proofscript" id="proof8616">
 <span class="tactic">destruct</span> 3 <span class="kwd">as</span>[[]|[|[?[?[]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="valid_tid_preserve">valid_tid_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8617')">Proof.</div>
<div class="proofscript" id="proof8617">
 <span class="tactic">destruct</span> 2 <span class="kwd">as</span>[[]|[|[?[?[]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8618')">Proof.</div>
<div class="proofscript" id="proof8618">
 <span class="tactic">destruct</span> 2 <span class="kwd">as</span>[[]|[|[?[?[]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="halted_preserve">halted_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span> <span class="id">tp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> /\ <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tp</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8619')">Proof.</div>
<div class="proofscript" id="proof8619">
 <span class="tactic">destruct</span> 2 <span class="kwd">as</span>[[]|[|[?[?[?[?[]]]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">econstructor</span>;<span class="id">solv_thread</span>. Qed.</div>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="halted_preserve_alter">halted_preserve_alter</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id">t</span>' <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> /\ <span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id">t</span>')\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span> <span class="id">tp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id">t</span>' <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> /\ <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tp</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8620')">Proof.</div>
<div class="proofscript" id="proof8620">
  <span class="tactic">destruct</span> 3 <span class="kwd">as</span> [[]|[[]|[?[?[?[?[]]]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>; <span class="id">econstructor</span>;<span class="id">solv_thread</span>.  Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="halted_backwards_preserve">halted_backwards_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">t</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">c</span>',@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> /\ <span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id">t</span>')\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">mid</span> <span class="id">c</span>' <span class="id">sg</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id">t</span>' <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8621')">Proof.</div>
<div class="proofscript" id="proof8621">
 <span class="tactic">destruct</span> 2 <span class="kwd">as</span> [[]|[[]|[?[?[]]]]];<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">econstructor</span>;<span class="id">solv_thread</span>.  Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_update_unique">thdp_update_unique</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">c</span> <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thdp</span>' = <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8622')">Proof.</div>
<div class="proofscript" id="proof8622">
 <span class="tactic">intros</span>;<span class="id">solv_thread</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_push_unique">thdp_push_unique</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">thdp</span>' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thdp</span>'=<span class="id">thdp</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8623')">Proof.</div>
<div class="proofscript" id="proof8623">
 <span class="tactic">intros</span>;<span class="id">solv_thread</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_unique">thdp_pop_unique</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">thdp</span>' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">thdp</span>'=<span class="id">thdp</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8624')">Proof.</div>
<div class="proofscript" id="proof8624">
 <span class="tactic">intros</span>;<span class="id">solv_thread</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_eff">corestep_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8625')">Proof.</div>
<div class="proofscript" id="proof8625">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_step_eff">glob_step_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8626')">Proof.</div>
<div class="proofscript" id="proof8626">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;[<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_eff">corestep_eff</a></span>;<span class="tactic">eauto</span>| | | | | | | | |];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_aftercore">corestep_aftercore</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8627')">Proof.</div>
<div class="proofscript" id="proof8627">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globstep_aftercore">globstep_aftercore</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt; <span class="id"><a href="SmileReorder.html#x">x</a></span> &lt;&gt; <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> -&gt; <span class="id"><a href="SmileReorder.html#x">x</a></span> &lt;&gt; <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8628')">Proof.</div>
<div class="proofscript" id="proof8628">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> (<span class="id">solv_thread</span>;<span class="id">eexists</span>;<span class="id">solv_thread</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_aftercore">corestar_aftercore</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c0</span>,<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c0">c0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8629')">Proof.</div>
<div class="proofscript" id="proof8629">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;[<span class="id">eexists</span>|<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestep_aftercore">corestep_aftercore</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="id">eexists</span>];<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_Fpreservation">core_Fpreservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span> <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> = <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8630')">Proof.</div>
<div class="proofscript" id="proof8630">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">clear</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H_core_step</span> <span class="id">wdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">clear</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>;<span class="tactic">clear</span> <span class="id">H_tp_core</span>;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">clear</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_Fpreservation">corestar_Fpreservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span> <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> = <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8631')">Proof.</div>
<div class="proofscript" id="proof8631">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c</span> <span class="id">c</span>' <span class="id">H0</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">c1</span>,<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">s</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>'0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;[|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">c1</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#core_Fpreservation">core_Fpreservation</a></span> <span class="kwd">in</span> <span class="id">Tmp1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="subset_effect">subset_effect</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span>)(<span class="id"><a href="InteractionSemantics.html#effects">effects</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8632')">Proof.</div>
<div class="proofscript" id="proof8632">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#effects">effects</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> <span class="id">fp1</span> <span class="id">b</span> <span class="id">ofs</span>)%<span class="id">bool</span> <span class="id">eqn</span>:<span class="id">eq1</span>, ( <span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> <span class="id">fp1</span> <span class="id">b</span> <span class="id">ofs</span>)%<span class="id">bool</span> <span class="id">eqn</span>:<span class="id">eq2</span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="subset_depend">subset_depend</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> (<span class="id"><a href="InteractionSemantics.html#depends">depends</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span>)(<span class="id"><a href="InteractionSemantics.html#depends">depends</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8633')">Proof.</div>
<div class="proofscript" id="proof8633">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#depends">depends</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> <span class="id">fp1</span> <span class="id">b</span> <span class="id">ofs</span>)%<span class="id">bool</span> <span class="id">eqn</span>:<span class="id">eq1</span>, ( <span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> <span class="id">fp1</span> <span class="id">b</span> <span class="id">ofs</span>)%<span class="id">bool</span> <span class="id">eqn</span>:<span class="id">eq2</span>;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="perm_effect_lemma">perm_effect_lemma</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#perm_effect">perm_effect</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="SmileReorder.html#b">b</a></span> <span class="id"><a href="SmileReorder.html#ofs">ofs</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#perm_effect">perm_effect</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> <span class="id"><a href="SmileReorder.html#ofs">ofs</a></span> \/ <span class="id"><a href="InteractionSemantics.html#perm_effect">perm_effect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id">m</span>' <span class="id"><a href="SmileReorder.html#b">b</a></span> <span class="id"><a href="SmileReorder.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8634')">Proof.</div>
<div class="proofscript" id="proof8634">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">assert</span>(<span class="id"><a href="GMemory.html#GMem.perm">GMemory.GMem.perm</a></span> <span class="id">m0</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span> \/ ~<span class="id"><a href="GMemory.html#GMem.perm">GMemory.GMem.perm</a></span> <span class="id">m0</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>;<span class="tactic">destruct</span> <span class="id">H2</span>;[<span class="id">right</span>;<span class="id">econstructor</span>|<span class="id">left</span>;<span class="id">econstructor</span>|<span class="id">left</span>;<span class="id">econstructor</span> 2|<span class="id">right</span>;<span class="id">econstructor</span> 2];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="localstar_eff">localstar_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">cc</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span> (<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>)) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id">m</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8635')">Proof.</div>
<div class="proofscript" id="proof8635">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_eff">corestar_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8636')">Proof.</div>
<div class="proofscript" id="proof8636">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_refl">LEffect_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">c</span>',<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">s</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_aftercore">corestep_aftercore</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">c</span>'',<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">s</span>''=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestar_aftercore">corestar_aftercore</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">Tmp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">Tmp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_eff">corestep_eff</a></span> <span class="kwd">in</span> <span class="id">Tmp2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">x</span> = <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestar_Fpreservation">corestar_Fpreservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">c</span> = <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#core_Fpreservation">core_Fpreservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">Tmp2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_trans_union">LEffect_trans_union</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="localstep_locality1">localstep_locality1</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">cc</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LPre">LPre</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>', <span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m1</span>' /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> <span class="id">m</span>' <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8637')">Proof.</div>
<div class="proofscript" id="proof8637">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="SmileReorder.html#Reorder.wdge">wdge</a></span> <span class="id">i_x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">wdge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#corestep_locality_1">corestep_locality_1</a></span> <span class="kwd">in</span> <span class="id">step_locality_1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">step_locality_1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="corestep_locality1">corestep_locality1</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc1</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LPre">LPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span> <span class="id">c</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\ <span class="id"><a href="InteractionSemantics.html#LPost">LPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>) /\ <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>' /\<span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="id">pc</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8638')">Proof.</div>
<div class="proofscript" id="proof8638">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_core</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#localstep_locality1">localstep_locality1</a></span> <span class="kwd">with</span>(<span class="id">m1</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#gm">GlobDefs.gm</a></span>)) <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> [<span class="id">m2</span>[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">thdp</span>'',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) <span class="id">c</span>' <span class="id">thdp</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)) <span class="id">eqn</span>:<span class="id">eq3</span>;[|<span class="tactic">inversion</span> <span class="id">H1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> {|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">x</span>;<span class="id">cur_tid</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>);<span class="id">gm</span>:=<span class="id">m2</span>;<span class="id">atom_bit</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>)|}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">c</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc1</span>={|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>);<span class="id">cur_tid</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>);<span class="id">gm</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#gm">GlobDefs.gm</a></span>);<span class="id">atom_bit</span>:=<span class="id">pc1</span>.(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span>) |}). <span class="tactic">destruct</span> <span class="id">pc1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H5</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcore">getcurcore</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="Freelists">Freelists</a></span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="flmap">flmap</a></span> (<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>=&gt; <span class="id"><a href="SmileReorder.html#Freelists">Freelists</a></span>.(<span class="id"><a href="GlobDefs.html#FLists.flist_content">FLists.flist_content</a></span>) (<span class="id"><a href="SmileReorder.html#Freelists">Freelists</a></span>.(<span class="id"><a href="GlobDefs.html#FLists.thread_flmap">FLists.thread_flmap</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="allocated_block">allocated_block</a></span> := <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobalAlloc">GlobalAlloc</a></span> (<span class="id">m1</span> <span class="id">m2</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#in_fl">MemAux.in_fl</a></span> (<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>) <span class="id"><a href="SmileReorder.html#b">b</a></span>. <br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GlobalFreelistEq">GlobalFreelistEq</a></span> (<span class="id">m1</span> <span class="id">m2</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#in_fl">MemAux.in_fl</a></span> (<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>) <span class="id"><a href="SmileReorder.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobalAlloc_refl">GlobalAlloc_refl</a></span>: <span class="kwd">forall</span> <span class="id">m</span> <span class="id">t</span>, <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8639')">Proof.</div>
<div class="proofscript" id="proof8639">
 <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">intros</span>;<span class="id">contradiction</span>. Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobalFreelistEq_refl">GlobalFreelistEq_refl</a></span>: <span class="kwd">forall</span> <span class="id">m</span> <span class="id">t</span>, <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8640')">Proof.</div>
<div class="proofscript" id="proof8640">
 <span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobalFreelistEq_comm">GlobalFreelistEq_comm</a></span>: <span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">t</span>,<span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8641')">Proof.</div>
<div class="proofscript" id="proof8641">
 <span class="tactic">split</span>;<span class="tactic">intros</span>;<span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LocalAlloc_GlobalAlloc">LocalAlloc_GlobalAlloc</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">t</span> <span class="id">i</span> <span class="id">fl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8642')">Proof.</div>
<div class="proofscript" id="proof8642">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GlobalFreelistEq_freelisteq">GlobalFreelistEq_freelisteq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">t</span> <span class="id">i</span> <span class="id">fl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8643')">Proof.</div>
<div class="proofscript" id="proof8643">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#FreelistEq">FreelistEq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GEffect">GEffect</a></span> (<span class="id">m1</span> <span class="id">m2</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemEffect">MemEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> /\ <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GPre">GPre</a></span> (<span class="id">m1</span> <span class="id">m2</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPre">MemPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> /\ <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GPost">GPost</a></span> (<span class="id">m1</span> <span class="id">m2</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">t</span>:<span class="id"><a href="GlobDefs.html#tid">tid</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#MemPost">MemPost</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> /\ <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_comm">GPre_comm</a></span>:<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">fp</span> <span class="id">t</span>, <span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt; <span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8644')">Proof.</div>
<div class="proofscript" id="proof8644">
 <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GPre">GPre</a></span>;<span class="tactic">split</span>;<span class="tactic">destruct</span> <span class="id">H</span>;[<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_comm">MemPre_comm</a></span>|<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq_comm">GlobalFreelistEq_comm</a></span>];<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_subset">GPre_subset</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8645')">Proof.</div>
<div class="proofscript" id="proof8645">
 <span class="tactic">destruct</span> 1;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPost_comm">GPost_comm</a></span>:<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">fp</span> <span class="id">t</span>, <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt; <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8646')">Proof.</div>
<div class="proofscript" id="proof8646">
 <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span>;<span class="tactic">split</span>;<span class="tactic">destruct</span> <span class="id">H</span>;[<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_comm">unchanged_content_comm</a></span>|<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq_comm">GlobalFreelistEq_comm</a></span>];<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPost_union">GPost_union</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt; <span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt; <span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id">m2</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m1</span>' <span class="id">m2</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8647')">Proof.</div>
<div class="proofscript" id="proof8647">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span>,<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span>;<span class="tactic">intros</span>. <span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPost_MemEffect_MemPost_Rule">MemPost_MemEffect_MemPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEffect_GEffect">LEffect_GEffect</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">i</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">fl</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8648')">Proof.</div>
<div class="proofscript" id="proof8648">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_LEffect_GPost_Rule">GPre_LEffect_GPost_Rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">fl</span> <span class="id">t</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id">m0</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8649')">Proof.</div>
<div class="proofscript" id="proof8649">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>,<span class="id">H1</span>,<span class="id">H2</span>,<span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_MemEffect_MemPost_Rule">MemPre_MemEffect_MemPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPost_LEffect_GPost_Rule1">GPost_LEffect_GPost_Rule1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">fl</span> <span class="id">t</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id">m0</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#LEffect">LEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#fl">fl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m0</span>' <span class="id">m1</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8650')">Proof.</div>
<div class="proofscript" id="proof8650">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? [] [] [] [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPost_MemEffect_MemPost_Rule">MemPost_MemEffect_MemPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">t</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id">m0</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8651')">Proof.</div>
<div class="proofscript" id="proof8651">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>,<span class="id">H1</span>,<span class="id">H2</span>,<span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_MemEffect_MemPost_Rule">MemPre_MemEffect_MemPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GPost_GEffect_GPost_Rule1">GPost_GEffect_GPost_Rule1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">t</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id">m0</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m0</span>' <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">m0</span>' <span class="id">m1</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8652')">Proof.</div>
<div class="proofscript" id="proof8652">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [] [] [] [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPost_MemEffect_MemPost_Rule">MemPost_MemEffect_MemPost_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="Reorder.wd_GE">wd_GE</a></span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m0">m0</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8653')">Proof.</div>
<div class="proofscript" id="proof8653">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="SmileReorder.html#Reorder.wd_GE">wd_GE</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_fpsmile_MemPre_Rule">MemEffect_fpsmile_MemPre_Rule</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="InteractionSemantics.html#ValidityPreserve">ValidityPreserve</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="kwd">in</span> *;<span class="tactic">eauto</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>,<span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">thread_fl_disj</span> <span class="kwd">with</span>(<span class="id">n1</span>:=<span class="id">x</span>)(<span class="id">n2</span>:=<span class="id">i</span>)<span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">flist_disj</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#Freelists">Freelists</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="thread_sim">thread_sim</a></span>(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>)(<span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).(<span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) = <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).(<span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="curcorefl_flmap_exists">curcorefl_flmap_exists</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">id</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#id">id</a></span>= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="SmileReorder.html#flmap">flmap</a></span> <span class="id"><a href="SmileReorder.html#id">id</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8654')">Proof.</div>
<div class="proofscript" id="proof8654">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> @<span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">c</span> (<span class="id">c</span>::<span class="id">t1</span>)). <span class="tactic">compute</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> @<span class="id"><a href="GlobDefs.html#ThreadPool.fid_belongsto">ThreadPool.fid_belongsto</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">c</span> <span class="id">H1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#flmap">flmap</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getfl">getfl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_Glocality">corestep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'. <br/>
<div class="toggleproof" onclick="toggleDisplay('proof8655')">Proof.</div>
<div class="proofscript" id="proof8655">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? ? <span class="id">invthdp</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">tideq</span>&amp;<span class="id">biteq</span>&amp;<span class="id">cseq</span>&amp;<span class="id">mapeq</span>);<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">cseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#curcorefl_flmap_exists">curcorefl_flmap_exists</a></span> <span class="kwd">in</span> <span class="id">invthdp</span>  <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span>,<span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq_freelisteq">GlobalFreelistEq_freelisteq</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="InteractionSemantics.html#LPre">LPre</a></span> <span class="id">tgm</span> <span class="id">tgm</span>' <span class="id">fp</span> (<span class="id"><a href="SmileReorder.html#getfl">getfl</a></span> <span class="id">c</span>)). <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#localstep_locality1">localstep_locality1</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_update_exists">gettop_update_exists</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>]];<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> [].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">c</span>' <span class="id">cc</span>' <span class="id">H_tp_core</span> <span class="id">H_core_upd</span> <span class="id">H_tp_upd</span> <span class="id">H6</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">x</span> <span class="id">H0</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq">GlobalFreelistEq</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="InteractionSemantics.html#ValidityPreserve">ValidityPreserve</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H9</span>;<span class="tactic">clear</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="InteractionSemantics.html#ValidityPreserve">ValidityPreserve</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>;<span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#LocalAlloc">LocalAlloc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">b</span> <span class="id">i</span> <span class="id">H3</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="id">tgm</span> <span class="id">b</span> \/ ~ <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="id">tgm</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(~ <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="id">tgm</span>' <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">eapply</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="callstep_Glocality">callstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8656')">Proof.</div>
<div class="proofscript" id="proof8656">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span> [<span class="id">biteq</span> [<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;-<span class="id">cseq</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_push_exists">gettop_push_exists</a></span> <span class="kwd">with</span>(<span class="id">mid</span>:=<span class="id">new_ix</span>)(<span class="id">c0</span>:=<span class="id">cc</span>')(<span class="id">sg</span>:=<span class="id">sg</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>];<span class="tactic">auto</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="retstep_Glocality">retstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8657')">Proof.</div>
<div class="proofscript" id="proof8657">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] ? ? ? [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span>[<span class="id">biteq</span>[<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_pop_exists">gettop_pop_exists</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">x</span> <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_update_exists">gettop_update_exists</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="entatstep_Glocality">entatstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8658')">Proof.</div>
<div class="proofscript" id="proof8658">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] ? ? ? [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span>[<span class="id">biteq</span>[<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_update_exists">gettop_update_exists</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">x</span> <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extatstep_Glocality">extatstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8659')">Proof.</div>
<div class="proofscript" id="proof8659">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] ? ? ? [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span>[<span class="id">biteq</span>[<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_update_exists">gettop_update_exists</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">x</span> <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="efprintstep_Glocality">efprintstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8660')">Proof.</div>
<div class="proofscript" id="proof8660">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] ? ? ? [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span>[<span class="id">biteq</span>[<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_update_exists">gettop_update_exists</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">x</span> <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globhaltstep_Glocality">globhaltstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8661')">Proof.</div>
<div class="proofscript" id="proof8661">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] ? ? ? [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'] ? [<span class="id">tideq</span>[<span class="id">biteq</span>[<span class="id">cseq</span> <span class="id">mapeq</span>]]] ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span> <span class="kwd">in</span> <span class="id">cseq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id">tid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">cseq</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#gettop_pop_exists">gettop_pop_exists</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">x</span> <span class="id">tid</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>;<span class="tactic">eauto</span>|<span class="tactic">split</span>];<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globstep_Glocality">globstep_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8662')">Proof.</div>
<div class="proofscript" id="proof8662">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#callstep_Glocality">callstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#retstep_Glocality">retstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#entatstep_Glocality">entatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extatstep_Glocality">extatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#efprintstep_Glocality">efprintstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globhaltstep_Glocality">globhaltstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globstep_eff">globstep_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8663')">Proof.</div>
<div class="proofscript" id="proof8663">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span>(<span class="id">constructor</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_refl">MemEffect_refl</a></span>;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">try</span> <span class="tactic">intros</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#curcorefl_flmap_exists">curcorefl_flmap_exists</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#LocalAlloc_GlobalAlloc">LocalAlloc_GlobalAlloc</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="taustar_eff">taustar_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8664')">Proof.</div>
<div class="proofscript" id="proof8664">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_refl">MemEffect_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc_refl">GlobalAlloc_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHtau_star</span> <span class="id">L1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#globstep_eff">globstep_eff</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>,<span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_union_fp">MemEffect_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp</span>') <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_union_fp">MemEffect_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp</span>) <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_trans">MemEffect_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">s</span>') <span class="id">b</span> \/ ~ <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">s</span>') <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="taustar_Glocality">taustar_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8665')">Proof.</div>
<div class="proofscript" id="proof8665">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">pc1</span>. <span class="tactic">intros</span> <span class="id">H</span> <span class="id">H0</span>;<span class="id">revert</span> <span class="id">pc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span> <span class="id">fp</span> <span class="id">fp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span> <span class="id">fp</span>' <span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_subset">GPre_subset</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_subset">GPre_subset</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#tau">tau</a></span>&lt;&gt;<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">inversion</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_Glocality">globstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span>?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>'). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#globstep_eff">globstep_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#globstep_eff">globstep_eff</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H15</span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHtau_star</span> <span class="id">_</span> <span class="id">H10</span> <span class="id">H17</span> <span class="id">H16</span>) <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPost_union">GPost_union</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#taustar_eff">taustar_eff</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span> <span class="kwd">as</span> (?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span>. <span class="tactic">rewrite</span> <span class="id">H21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#taustar_eff">taustar_eff</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_Glocality">npnsw_step_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8666')">Proof.</div>
<div class="proofscript" id="proof8666">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];[<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>|<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#callstep_Glocality">callstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>|<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#retstep_Glocality">retstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H</span>];<span class="tactic">eauto</span>;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">p</span>&amp;?&amp;?&amp;?);<span class="id">exists</span> <span class="id">p</span>;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span> =&gt; <span class="tactic">split</span> <span class="kwd">end</span>;<span class="tactic">auto</span>;[<span class="id">left</span>|<span class="id">right</span>;<span class="id">left</span>|<span class="id">right</span>;<span class="id">right</span>];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_eff">npnsw_step_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8667')">Proof.</div>
<div class="proofscript" id="proof8667">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#curcorefl_flmap_exists">curcorefl_flmap_exists</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#LocalAlloc_GlobalAlloc">LocalAlloc_GlobalAlloc</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_refl">MemEffect_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">intros</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_refl">MemEffect_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">intros</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_thdpinv">npnsw_step_thdpinv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8668')">Proof.</div>
<div class="proofscript" id="proof8668">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8669')">Proof.</div>
<div class="proofscript" id="proof8669">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;[|<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H</span>];<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_eff">npnsw_taustar_eff</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GEffect">GEffect</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8670')">Proof.</div>
<div class="proofscript" id="proof8670">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;[<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_refl">MemEffect_refl</a></span>|<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span>;<span class="tactic">intros</span>;<span class="id">contradiction</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHtau_star</span> <span class="id">L1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>,<span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_union_fp">MemEffect_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp</span>') <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_union_fp">MemEffect_union_fp</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp</span>) <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemEffect_trans">MemEffect_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#GlobalAlloc">GlobalAlloc</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#allocated_block">allocated_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">s</span>') <span class="id">b</span> \/ ~ <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">s</span>') <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>. <span class="tactic">destruct</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_Glocality">npnsw_taustar_Glocality</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#GPost">GPost</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id">pc1</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) /\ <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8671')">Proof.</div>
<div class="proofscript" id="proof8671">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>;<span class="tactic">split</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#MemPost">MemPost</a></span>. <span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">s</span>)(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>) <span class="id">fp</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#MemPre_subset">MemPre_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_Glocality">npnsw_step_Glocality</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">step1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">step1</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">step1</span>&amp;<span class="id">Post1</span>&amp;<span class="id">sim1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">step1</span> <span class="kwd">as</span> <span class="id">inv1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">inv0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">step1</span> <span class="kwd">as</span> <span class="id">Eff1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">Eff0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Eq1</span>:<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Eq1</span> <span class="kwd">in</span> <span class="id">Eff1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">Pre2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">Pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">sim1</span> <span class="kwd">as</span> <span class="id">Tmp1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Tmp1</span> <span class="kwd">as</span> (<span class="id">pc2</span>&amp;<span class="id">star</span>'&amp;<span class="id">post</span>'&amp;<span class="id">sim</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star</span>' <span class="kwd">as</span> <span class="id">Eff2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">Eff3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPost_GEffect_GPost_Rule1">GPost_GEffect_GPost_Rule1</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">step1</span> <span class="kwd">as</span> [<span class="id">L</span>|[<span class="id">L</span>|<span class="id">L</span>]];<span class="tactic">inversion</span> <span class="id">L</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Notation</span> "{-| <span class="id">PC</span> , <span class="id">T</span> }" := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;({|<span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">PC</span>; <span class="id">cur_tid</span> := <span class="id">T</span>;<span class="id">gm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">PC</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">PC</span> |})  (<span class="tactic">at</span> <span class="id">level</span> 70,<span class="id">right</span> <span class="id">associativity</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_getanocore">corestep_getanocore</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">fp</span> <span class="id">t</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8672')">Proof.</div>
<div class="proofscript" id="proof8672">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">t</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>)) <span class="id">eqn</span>:<span class="id">e1</span>;[|<span class="tactic">inversion</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">e1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_getanocore">corestar_getanocore</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8673')">Proof.</div>
<div class="proofscript" id="proof8673">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_getanocore">corestep_getanocore</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="dif_thd_disj_fl">dif_thd_disj_fl</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#disj">MemAux.disj</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8674')">Proof.</div>
<div class="proofscript" id="proof8674">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span>*;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">eqn</span>:<span class="id">e1</span>;[|<span class="tactic">inversion</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">t2</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>))) <span class="id">eqn</span>:<span class="id">e2</span>;[|<span class="tactic">inversion</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">cs_inv</span> <span class="kwd">in</span> <span class="id">e1</span> <span class="kwd">as</span> [? <span class="id">_</span> <span class="id">_</span>];<span class="tactic">apply</span> <span class="id">cs_inv</span> <span class="kwd">in</span> <span class="id">e2</span> <span class="kwd">as</span> [? <span class="id">_</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">fid_belongsto</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">fid_belongsto0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [[] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">flist_disj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">thread_fl_disj</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">x</span> <span class="id">x0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>;<span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="local_reorder_rule2">local_reorder_rule2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i1</span> <span class="id">F1</span> <span class="id">cc1</span> <span class="id">m1</span> <span class="id">fp1</span> <span class="id">cc1</span>' <span class="id">m1</span>' <span class="id">i2</span> <span class="id">F2</span> <span class="id">fp2</span> <span class="id">cc2</span> <span class="id">cc2</span>' <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">md1</span>:= <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i1">i1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fl1</span>:= <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F1">F1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">md2</span>:= <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i2">i2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fl2</span>:= <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span>(<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F2">F2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="SmileReorder.html#md1">md1</a></span>)(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="SmileReorder.html#md1">md1</a></span>) <span class="id"><a href="SmileReorder.html#fl1">fl1</a></span> <span class="id"><a href="SmileReorder.html#cc1">cc1</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">cc1</span>' <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="SmileReorder.html#md2">md2</a></span>)(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="SmileReorder.html#md2">md2</a></span>) <span class="id"><a href="SmileReorder.html#fl2">fl2</a></span> <span class="id"><a href="SmileReorder.html#cc2">cc2</a></span> <span class="id">m1</span>' <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">cc2</span>' <span class="id"><a href="SmileReorder.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#disj">MemAux.disj</a></span> <span class="id"><a href="SmileReorder.html#fl1">fl1</a></span> <span class="id"><a href="SmileReorder.html#fl2">fl2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="SmileReorder.html#md2">md2</a></span>)(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="SmileReorder.html#md2">md2</a></span>) <span class="id"><a href="SmileReorder.html#fl2">fl2</a></span> <span class="id"><a href="SmileReorder.html#cc2">cc2</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">cc2</span>' <span class="id">m</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>'',<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="SmileReorder.html#md1">md1</a></span>)(<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="SmileReorder.html#md1">md1</a></span>) <span class="id"><a href="SmileReorder.html#fl1">fl1</a></span> <span class="id"><a href="SmileReorder.html#cc1">cc1</a></span> <span class="id">m</span>' <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">cc1</span>' <span class="id">m</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' <span class="id">m</span>'' <span class="id"><a href="SmileReorder.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8675')">Proof.</div>
<div class="proofscript" id="proof8675">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_fpsmile_LPre_Rule">LEffect_fpsmile_LPre_Rule</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#localstep_locality1">localstep_locality1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">constructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">L3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#disj_comm">disj_comm</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">H1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">H2</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_fpsmile_LPre_Rule">LEffect_fpsmile_LPre_Rule</a></span> <span class="kwd">in</span> <span class="id">H2</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#LPre_comm">LPre_comm</a></span> <span class="kwd">in</span> <span class="id">H2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#localstep_locality1">localstep_locality1</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">fp1</span>) ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">H</span>:<span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>|-<span class="id">_</span>]=&gt; <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#localstep_memeff">localstep_memeff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id">F1</span>) <span class="kwd">as</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id">F2</span>) <span class="kwd">as</span> <span class="id">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span> <span class="id">H6</span>. <span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#LEffect_LPost_fpsmile_memeq">LEffect_LPost_fpsmile_memeq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">exact</span> <span class="id">H0</span>. <span class="tactic">exact</span> <span class="id">H2</span>. <span class="tactic">exact</span> <span class="id">H3</span>. <span class="tactic">exact</span> <span class="id">H4</span>. <span class="tactic">exact</span> <span class="id">H5</span>. <span class="tactic">exact</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="ptree_set_sym">ptree_set_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">i</span> <span class="id">j</span> <span class="id">m</span> (<span class="id">v1</span> <span class="id">v2</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#i">i</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.set">Maps.PTree.set</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#v1">v1</a></span> (<span class="id"><a href="Maps.html#PTree.set">Maps.PTree.set</a></span> <span class="id"><a href="SmileReorder.html#j">j</a></span> <span class="id"><a href="SmileReorder.html#v2">v2</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.set">Maps.PTree.set</a></span> <span class="id"><a href="SmileReorder.html#j">j</a></span> <span class="id"><a href="SmileReorder.html#v2">v2</a></span> (<span class="id"><a href="Maps.html#PTree.set">Maps.PTree.set</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#v1">v1</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8676')">Proof.</div>
<div class="proofscript" id="proof8676">
 <span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id">m</span>,<span class="id">j</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">IHi</span>;<span class="tactic">auto</span>;<span class="tactic">intro</span>;<span class="tactic">subst</span>);<span class="id">contradiction</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="pmap_set_sym">pmap_set_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">i</span> <span class="id">j</span> <span class="id">m</span> (<span class="id">v1</span> <span class="id">v2</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#i">i</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#v1">v1</a></span> (<span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id"><a href="SmileReorder.html#j">j</a></span> <span class="id"><a href="SmileReorder.html#v2">v2</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id"><a href="SmileReorder.html#j">j</a></span> <span class="id"><a href="SmileReorder.html#v2">v2</a></span> (<span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#v1">v1</a></span> <span class="id"><a href="SmileReorder.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8677')">Proof.</div>
<div class="proofscript" id="proof8677">
 <span class="tactic">unfold</span> <span class="id"><a href="Maps.html#PMap.set">Maps.PMap.set</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>;<span class="tactic">f_equal</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#ptree_set_sym">ptree_set_sym</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_upd_dif_eq">thdp_upd_dif_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">thdp1</span> <span class="id">thdp1</span>' <span class="id">thdp2</span> <span class="id">thdp2</span>' <span class="id">t1</span> <span class="id">t2</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id">thdp1</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id">thdp2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> = <span class="id">thdp2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8678')">Proof.</div>
<div class="proofscript" id="proof8678">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1,1,1,1;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">clear</span> <span class="id">H5</span> <span class="id">H8</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">cs</span>'0 = <span class="id">cs</span>'1). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H11</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">cs</span>'=<span class="id">cs</span>'2). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H12</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#pmap_set_sym">pmap_set_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_reorder_rule">corestep_reorder_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>', <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8679')">Proof.</div>
<div class="proofscript" id="proof8679">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="MemAux.html#disj">MemAux.disj</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>))(<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c0</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>) <span class="id">t2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#dif_thd_disj_fl">dif_thd_disj_fl</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#local_reorder_rule2">local_reorder_rule2</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">m</span>'[?[<span class="id">m</span>''[]]]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L1</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>) <span class="id">t2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Maps.html#PMap.get">Maps.PMap.get</a></span> <span class="id">t2</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>')) <span class="id">eqn</span>:<span class="id">e1</span>;[|<span class="tactic">inversion</span> <span class="id">H_tp_core0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span> <span class="kwd">in</span> <span class="id">e1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">e1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="TypedSemantics.html#local_core_step">local_core_step</a></span> <span class="kwd">as</span> [?[?[]]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L2</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">x0</span> <span class="id">t1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="TypedSemantics.html#local_core_step">local_core_step</a></span> <span class="kwd">as</span> [?[?[]]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id">x</span> = <span class="id">c</span>'0). <span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">inversion</span> <span class="id">H_core_upd0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id">x1</span> = <span class="id">c</span>'). <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">inversion</span> <span class="id">H_core_upd</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( <span class="id">thdp</span>'0 = <span class="id">x2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#thdp_upd_dif_eq">thdp_upd_dif_eq</a></span>;[<span class="tactic">apply</span> <span class="id">H_tp_upd</span>| | | | ];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">split</span>;[|<span class="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">solv_thread_sym</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="id">econstructor</span>;<span class="tactic">simpl</span>;<span class="id">solv_thread</span>;<span class="tactic">simpl</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">f_equal</span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pmap_set_sym">pmap_set_sym</a></span>;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">f_equal</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_update_sym">thdp_update_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">c1</span>' <span class="id">thdp2</span> <span class="id">c2</span>' <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id">c1</span>' <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c2</span>' <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c2</span>' <span class="id">thdp</span>' /\ <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id">c1</span>' <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8680')">Proof.</div>
<div class="proofscript" id="proof8680">
  <span class="id">solv_thread_sym</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_update_push_sym">thdp_update_push_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">c1</span> <span class="id">thdp2</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\ <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8681')">Proof.</div>
<div class="proofscript" id="proof8681">
 <span class="id">solv_thread_sym</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_update_pop_sym">thdp_update_pop_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">c1</span> <span class="id">thdp2</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8682')">Proof.</div>
<div class="proofscript" id="proof8682">
 <span class="id">solv_thread_sym</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_push_sym">thdp_push_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">mid1</span> <span class="id">c1</span> <span class="id">sg1</span> <span class="id">thdp2</span> <span class="id">mid2</span> <span class="id">c2</span> <span class="id">sg2</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid2">mid2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id"><a href="SmileReorder.html#sg2">sg2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid2">mid2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id"><a href="SmileReorder.html#sg2">sg2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8683')">Proof.</div>
<div class="proofscript" id="proof8683">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread_sym</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">FunctionalExtensionality.functional_extensionality</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_push_update_sym">thdp_push_update_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">mid1</span> <span class="id">c1</span> <span class="id">sg1</span> <span class="id">thdp2</span> <span class="id">c2</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c2">c2</a></span> <span class="id">thdp</span>'/\ <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8684')">Proof.</div>
<div class="proofscript" id="proof8684">
 <span class="id">solv_thread_sym</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_push_pop_sym">thdp_push_pop_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">mid1</span> <span class="id">c1</span> <span class="id">sg1</span> <span class="id">thdp2</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#mid1">mid1</a></span> <span class="id"><a href="SmileReorder.html#c1">c1</a></span> <span class="id"><a href="SmileReorder.html#sg1">sg1</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8685')">Proof.</div>
<div class="proofscript" id="proof8685">
 <span class="id">solv_thread_sym</span>.  Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_sym_weak">thdp_pop_sym_weak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">thdp2</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>' /\ <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8686')">Proof.</div>
<div class="proofscript" id="proof8686">
 <span class="id">solv_thread_sym</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_sym">thdp_pop_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">thdp2</span> <span class="id">c</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp4</span> <span class="id">c</span>' <span class="id">thdp5</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp5">thdp5</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp2</span> <span class="id">tp3</span> <span class="id">tp4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#tp2">tp2</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#tp2">tp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#tp3">tp3</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#tp3">tp3</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#tp4">tp4</a></span>/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#tp4">tp4</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp5">thdp5</a></span>.                         <br/>
<div class="toggleproof" onclick="toggleDisplay('proof8687')">Proof.</div>
<div class="proofscript" id="proof8687">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread_sym</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.set2">Maps.PMap.set2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="SmileReorder.html#pmap_set_sym">pmap_set_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">thdp2</span> <span class="id">c</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>' ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8688')">Proof.</div>
<div class="proofscript" id="proof8688">
 <span class="id">solv_thread_sym</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_update_sym">thdp_pop_update_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">thdp2</span> <span class="id">c</span> <span class="id">thdp3</span> <span class="id">c</span>' <span class="id">thdp4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id">c</span>' <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>''/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>'' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8689')">Proof.</div>
<div class="proofscript" id="proof8689">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_push_sym_weak">thdp_pop_push_sym_weak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">thdp2</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">thdp3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8690')">Proof.</div>
<div class="proofscript" id="proof8690">
 <span class="id">solv_thread_sym</span>.  Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_pop_push_sym">thdp_pop_push_sym</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>&lt;&gt;<span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp1</span> <span class="id">c</span>' <span class="id">thdp2</span> <span class="id">thdp3</span> <span class="id">mid</span> <span class="id">c</span> <span class="id">sg</span> <span class="id">thdp4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="SmileReorder.html#thdp2">thdp2</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp3">thdp3</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">thdp</span>' <span class="id">thdp</span>'',<span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="SmileReorder.html#thdp1">thdp1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="SmileReorder.html#mid">mid</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span> <span class="id"><a href="SmileReorder.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">thdp</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>'' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id">c</span>' <span class="id"><a href="SmileReorder.html#thdp4">thdp4</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8691')">Proof.</div>
<div class="proofscript" id="proof8691">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_push_sym">thdp_update_push_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_push_sym_weak">thdp_pop_push_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="gettop_valid_tid">gettop_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">c</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#thdp">thdp</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8692')">Proof.</div>
<div class="proofscript" id="proof8692">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Coqlib.html#Plt">Coqlib.Plt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt">BinPos.Pos.lt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.ge">BinPos.Pos.ge</a></span> <span class="id">t</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">thdp</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">tp_finite</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqo</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="step_switchable">step_switchable</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8693')">Proof.</div>
<div class="proofscript" id="proof8693">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">c</span>,<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span> <span class="id">tid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#c">c</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">eauto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">Coqlib.inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_local_step">mem_eq_local_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i_x</span> <span class="id">F</span> <span class="id">cc</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">m1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m1">m1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i_x">i_x</a></span>)) (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#F">F</a></span>) <span class="id"><a href="SmileReorder.html#cc">cc</a></span> <span class="id"><a href="SmileReorder.html#m2">m2</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">m2</span>' /\ <span class="id">GMem.eq</span>' <span class="id">m1</span>' <span class="id">m2</span>'. <br/>
<div class="toggleproof" onclick="toggleDisplay('proof8694')">Proof.</div>
<div class="proofscript" id="proof8694">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="SmileReorder.html#Reorder.wdge">wdge</a></span> <span class="id">i_x</span>) <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#eq_mem_eq_corestep">eq_mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">eq_mem_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">eq_mem_step</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_corestep">mem_eq_corestep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8695')">Proof.</div>
<div class="proofscript" id="proof8695">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>';<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_local_step">mem_eq_local_step</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_core_star">mem_eq_core_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#star">star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8696')">Proof.</div>
<div class="proofscript" id="proof8696">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">revert</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">constructor</span>|<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">e</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestep">mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHstar</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">econstructor</span>|];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_coreN">mem_eq_coreN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8697')">Proof.</div>
<div class="proofscript" id="proof8697">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestep">mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_N</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_corestar">mem_eq_corestar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8698')">Proof.</div>
<div class="proofscript" id="proof8698">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_globstep">mem_eq_globstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8699')">Proof.</div>
<div class="proofscript" id="proof8699">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp0</span> <span class="id">tid0</span> <span class="id">tgm0</span> <span class="id">tbit0</span>],<span class="id">pc</span>' <span class="kwd">as</span> [? ? <span class="id">tgm1</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">L</span>[<span class="id">L1</span>[<span class="id">L2</span> <span class="id">L3</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">try</span>(<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_local_step">mem_eq_local_step</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_non_evt_star">mem_eq_non_evt_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="ETrace.html#non_evt_star">non_evt_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">pc</span>'' <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8700')">Proof.</div>
<div class="proofscript" id="proof8700">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">i</span> <span class="id">l</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">s1</span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id">fp1</span> <span class="id">s2</span> /\( <span class="id"><a href="SmileReorder.html#l">l</a></span> = <span class="id"><a href="ETrace.html#tau">tau</a></span> \/ <span class="id"><a href="SmileReorder.html#l">l</a></span> = <span class="id"><a href="ETrace.html#sw">sw</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHnon_evt_star</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x2</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_finalstate">mem_eq_pc_finalstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8701')">Proof.</div>
<div class="proofscript" id="proof8701">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_abort">mem_eq_pc_abort</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8702')">Proof.</div>
<div class="proofscript" id="proof8702">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_sym">mem_eq_pc_sym</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_swstar">mem_eq_swstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#sw_star">sw_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8703')">Proof.</div>
<div class="proofscript" id="proof8703">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span>' <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H0</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'. <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> ;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsw_star</span> <span class="id">_</span> <span class="id">H2</span>) <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_silent_diverge">mem_eq_pc_silent_diverge</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#silent_diverge">silent_diverge</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8704')">Proof.</div>
<div class="proofscript" id="proof8704">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_swstar">mem_eq_swstar</a></span> <span class="kwd">with</span>(<span class="id">pc</span>':=<span class="id">pc</span>') <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> [?[]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">with</span>(<span class="id">pc</span>':=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [?[]];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="starN">starN</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span> -&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> -&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="star0">star0</a></span>:<span class="kwd">forall</span> <span class="id">s</span>,<span class="id"><a href="SmileReorder.html#starN">starN</a></span> 0 <span class="id"><a href="SmileReorder.html#s">s</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#s">s</a></span><br/>
&nbsp;&nbsp;| <span class="id">star_step</span>':<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">e</span> <span class="id">fp1</span> <span class="id">s2</span> <span class="id">l</span> <span class="id">fp2</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#s1">s1</a></span> <span class="id"><a href="SmileReorder.html#e">e</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#starN">starN</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#s3">s3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#starN">starN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>) <span class="id"><a href="SmileReorder.html#s1">s1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="SmileReorder.html#e">e</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#s3">s3</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_starN_equiv">star_starN_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="SmileReorder.html#starN">starN</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8705')">Proof.</div>
<div class="proofscript" id="proof8705">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span>. <span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">l</span> <span class="id">fp</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_globstar">mem_eq_globstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8706')">Proof.</div>
<div class="proofscript" id="proof8706">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#star_starN_equiv">star_starN_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">l</span> <span class="id">fp</span> <span class="id">pce</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>. <span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_glob_taustar">mem_eq_glob_taustar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8707')">Proof.</div>
<div class="proofscript" id="proof8707">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">pce</span> <span class="id">H</span> <span class="id">H0</span>;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_glob_tauN">mem_eq_glob_tauN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8708')">Proof.</div>
<div class="proofscript" id="proof8708">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">H</span> <span class="id">i</span>;<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">H</span>;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_npnsw_step_star">mem_eq_npnsw_step_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8709')">Proof.</div>
<div class="proofscript" id="proof8709">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [];<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">pce</span> <span class="id">H</span> <span class="id">H0</span>;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp0</span> <span class="id">pc</span>'' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">s</span>' <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[]];<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;[<span class="id">left</span>|<span class="id">right</span>;<span class="id">left</span>|<span class="id">right</span>;<span class="id">right</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_npnsw_step_starN">mem_eq_npnsw_step_starN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fp</span> <span class="id">pce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pce</span>',<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pce</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pce">pce</a></span> <span class="id">pce</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8710')">Proof.</div>
<div class="proofscript" id="proof8710">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">revert</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span> <span class="id">pce</span> <span class="id">H</span> <span class="id">H0</span>;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp0</span> <span class="id">pc</span>'' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">s</span>' <span class="id">pc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [|[]];<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_globstep">mem_eq_globstep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;[<span class="id">left</span>|<span class="id">right</span>;<span class="id">left</span>|<span class="id">right</span>;<span class="id">right</span>];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> [?[]];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_predict_tau_star">np_predict_tau_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">fp</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPDRF.html#np_predict">np_predict</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">fp</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>}) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8711')">Proof.</div>
<div class="proofscript" id="proof8711">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">apply</span> <span class="id"><a href="NPDRF.html#np_normal_tau_N_exists">np_normal_tau_N_exists</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="id">eexists</span>;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_star_glob_star">tau_star_glob_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8712')">Proof.</div>
<div class="proofscript" id="proof8712">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>;<span class="tactic">clear</span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSemantics.html#Call">GlobSemantics.Call</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSemantics.html#Return">GlobSemantics.Return</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSemantics.html#Halt">GlobSemantics.Halt</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSemantics.html#Ent_Atom">GlobSemantics.Ent_Atom</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_step_glob_step">np_step_glob_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>',<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">l</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8713')">Proof.</div>
<div class="proofscript" id="proof8713">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#call_step_equiv">call_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#ret_step_equiv">ret_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#extat_step_equiv">extat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#thrdhalt_step_equiv">thrdhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#allhalt_step_equiv">allhalt_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.  <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">x</span>,<span class="id">l</span>=<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#efprint_step_equiv">efprint_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_star_glob_star">np_star_glob_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>',<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">l</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8714')">Proof.</div>
<div class="proofscript" id="proof8714">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1. <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span>  <span class="id"><a href="SmileReorder.html#np_step_glob_step">np_step_glob_step</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H1</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">e</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_I_corestep">npnsw_step_I_corestep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8715')">Proof.</div>
<div class="proofscript" id="proof8715">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">intro</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_I_core_taustar">npnsw_taustar_I_core_taustar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span>  <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8716')">Proof.</div>
<div class="proofscript" id="proof8716">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_I_corestep">npnsw_step_I_corestep</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_I_corestep">npnsw_step_I_corestep</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8717')">Proof.</div>
<div class="proofscript" id="proof8717">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span>;<span class="tactic">intros</span>;<span class="tactic">destruct</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">H</span>: ~ <span class="id">_</span> |- ~ <span class="id">_</span>] =&gt; <span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H</span> <span class="kwd">end</span>;<span class="id">solv_thread</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8718')">Proof.</div>
<div class="proofscript" id="proof8718">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="tactic">auto</span>;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_pc_valid_tid_preservation">npnsw_step_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_O_preservation">npnsw_step_O_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8719')">Proof.</div>
<div class="proofscript" id="proof8719">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8720')">Proof.</div>
<div class="proofscript" id="proof8720">
 <span class="tactic">induction</span> 1;<span class="tactic">auto</span>;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_O_preservation">npnsw_step_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8721')">Proof.</div>
<div class="proofscript" id="proof8721">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8722')">Proof.</div>
<div class="proofscript" id="proof8722">
 <span class="tactic">induction</span> 1;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_tid_preservation">npnsw_step_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">congruence</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>})({-|<span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8723')">Proof.</div>
<div class="proofscript" id="proof8723">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#getcurcs">getcurcs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span> =&gt; <span class="tactic">split</span> <span class="kwd">end</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>; <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_taustar_diff_thread_sim">npnsw_taustar_diff_thread_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t">t</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>})({-|<span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8724')">Proof.</div>
<div class="proofscript" id="proof8724">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">t</span> <span class="id">H0</span>;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">IHtau_star</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span>|[<span class="id">H</span>|<span class="id">H</span>]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#thread_sim">thread_sim</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span> =&gt; <span class="tactic">split</span> <span class="kwd">end</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tau_star_to_star">tau_star_to_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>:<span class="kwd">Type</span>) <span class="id">step</span> (<span class="id">s1</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>) <span class="id">fp</span> (<span class="id">s2</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#s1">s1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#s1">s1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8725')">Proof.</div>
<div class="proofscript" id="proof8725">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1. <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">x</span>). <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="cons_star_star">cons_star_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>:<span class="kwd">Type</span>) <span class="id">step</span> (<span class="id">s1</span> <span class="id">s2</span> <span class="id">s3</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>) <span class="id">l1</span> <span class="id">l2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#s1">s1</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#s2">s2</a></span> <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#s1">s1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#l2">l2</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>) <span class="id"><a href="SmileReorder.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8726')">Proof.</div>
<div class="proofscript" id="proof8726">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHstar</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">e</span> <span class="id">l</span>) <span class="id">l2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id">l</span> <span class="id">l2</span>));<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_star_glob_star">npnsw_star_glob_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8727')">Proof.</div>
<div class="proofscript" id="proof8727">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extended_glob_reorder_case1">extended_glob_reorder_case1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8728')">Proof.</div>
<div class="proofscript" id="proof8728">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">fail</span>);<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">thdp</span> = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> ({<span class="id">thdp</span>,<span class="id">tid</span>,<span class="id">tgm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>})). <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#local_reorder_rule2">local_reorder_rule2</a></span> <span class="kwd">with</span>(<span class="id">fp1</span>:=<span class="id">fp1</span>) <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#disj_comm">disj_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#dif_thd_disj_fl">dif_thd_disj_fl</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H_tp_core</span>;<span class="tactic">f_equal</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>]];<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_push_sym">thdp_update_push_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_pop_sym">thdp_update_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 3;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 7;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> ;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H_not_halted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_pop_sym">thdp_update_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 4;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_backwards_preserve">halted_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">clear_ands</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">_</span> |- <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">_</span> |- <span class="id">exists</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">eexists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">gettop_simpl</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>:<span class="id">_</span>|-<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">_</span> <span class="id">_</span> = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>) <span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">build_step</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">_</span> |- <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">econstructor</span>;<span class="id">gettop_simpl</span>;<span class="tactic">eauto</span>;<span class="id">gettop_simpl</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">valid_tid_simpl</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H</span>:<span class="id">_</span>|- <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_preserve">valid_tid_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>) <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">halted_preserve_auto</span>':=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_backwards_preserve">halted_backwards_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">esplit</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">_</span> ?<span class="id">t</span> |- ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">_</span> ?<span class="id">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_backwards_preserve">halted_backwards_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> (<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">left</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">try</span>(<span class="id">right</span>;<span class="id">right</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">eexists</span>;<span class="id">esplit</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>);<span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">mem_eq_tactic</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>:<span class="id">_</span>|-<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> ?<span class="id">a</span> ?<span class="id">a</span> =&gt; <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extended_glob_reorder_case2">extended_glob_reorder_case2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#call">call</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8729')">Proof.</div>
<div class="proofscript" id="proof8729">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H17</span>;<span class="tactic">fail</span>);[<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_update_sym">thdp_push_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_sym">thdp_push_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_pop_sym">thdp_push_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>; <span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_update_sym">thdp_push_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)| <span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_update_sym">thdp_push_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)| |<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_pop_sym">thdp_push_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)];<span class="tactic">eauto</span>; <span class="tactic">do</span> 2 <span class="id">clear_ands</span>;<span class="id">build_step</span>;<span class="id">valid_tid_simpl</span>;<span class="id">halted_preserve_auto</span>';<span class="tactic">do</span> 2 <span class="id">clear_ands</span>;<span class="id">build_step</span>;<span class="id">mem_eq_tactic</span>.    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span>;<span class="tactic">eauto</span>.    <br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">steptac</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">clear_ands</span>;<span class="id">build_step</span>;<span class="id">valid_tid_simpl</span>;<span class="id">halted_preserve_auto</span>';<span class="id">mem_eq_tactic</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extended_glob_reorder_case3">extended_glob_reorder_case3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#ret">ret</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8730')">Proof.</div>
<div class="proofscript" id="proof8730">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">inversion</span> <span class="id">H17</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym">thdp_pop_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_core0</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H_tp_caller</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>; <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_push_sym">thdp_pop_push_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H_tp_core0</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span> <span class="id">H2</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_caller</span> <span class="id">H_tp_pop</span> <span class="id">H6</span> <span class="id">H7</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_sym">thdp_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_core0</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H6</span> <span class="id">H_tp_caller0</span> <span class="id">H_tp_pop0</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#GReturn">GReturn</a></span> <span class="kwd">with</span>(<span class="id">c1</span>:=<span class="id">c</span>)(<span class="id">res1</span>:=<span class="id">res</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_caller</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H8</span> <span class="id">H2</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym">thdp_pop_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_core0</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H8</span> <span class="id">H_tp_caller</span> <span class="id">H_tp_pop</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H_not_halted</span>;<span class="id">econstructor</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">Maps.PMap.gso</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_pop_sym">thdp_update_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_sym_weak">thdp_pop_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp1</span>:=<span class="id">thdp</span>') <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span> <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H8</span> <span class="id">H_thread_halt</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop0</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="id">solv_thread</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({<span class="id">thdp</span>'0,<span class="id">t1</span>,<span class="id">tgm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>});<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x0</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_caller</span> <span class="id">H8</span> <span class="id">H9</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>;<span class="id">solv_thread</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extended_glob_reorder_case4">extended_glob_reorder_case4</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#efprint">efprint</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8731')">Proof.</div>
<div class="proofscript" id="proof8731">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">fail</span>);[<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_push_sym">thdp_update_push_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_pop_sym">thdp_update_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_pop_sym">thdp_update_pop_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)|<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?)| ];<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x0</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="multisw">multisw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8732')">Proof.</div>
<div class="proofscript" id="proof8732">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="uselesssw">uselesssw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8733')">Proof.</div>
<div class="proofscript" id="proof8733">
 <span class="tactic">inversion</span> 1;<span class="tactic">simpl</span>;<span class="tactic">intro</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="extended_glob_reorder_case5">extended_glob_reorder_case5</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l2">l2</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8734')">Proof.</div>
<div class="proofscript" id="proof8734">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">fail</span>);<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>. <span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_push_sym_weak">thdp_pop_push_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_sym_weak">thdp_pop_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_preserve">gettop_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">x0</span>) <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H2</span> <span class="id">H_tp_core</span> <span class="id">H_tp_pop</span> <span class="id">H_thread_halt</span> <span class="id">H</span> <span class="id">H7</span> <span class="id">H8</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">econstructor</span>;<span class="id">solv_thread</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_sym_weak">thdp_pop_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globstep_reorder_rule">globstep_reorder_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l1">l1</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l2">l2</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8735')">Proof.</div>
<div class="proofscript" id="proof8735">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span>;<span class="tactic">try</span> (<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">rewrite</span> &lt;- <span class="id">H13</span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="id">Coqlib.inv</span> <span class="id">H1</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case1">extended_glob_reorder_case1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case2">extended_glob_reorder_case2</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case3">extended_glob_reorder_case3</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case4">extended_glob_reorder_case4</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case5">extended_glob_reorder_case5</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_reorder_rule">corestar_reorder_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>', <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8736')">Proof.</div>
<div class="proofscript" id="proof8736">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">fp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">H</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="id">econstructor</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[|<span class="tactic">split</span>;[|<span class="tactic">split</span>]];<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_reorder_rule">corestep_reorder_rule</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(({-|<span class="id">x0</span>,<span class="id">t2</span>}) = <span class="id">x0</span>). <span class="tactic">destruct</span> <span class="id">x0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H11</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>,<span class="id">pc</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_npnsw_step_type">glob_npnsw_step_type</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' /\ (<span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#call">call</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#ret">ret</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8737')">Proof.</div>
<div class="proofscript" id="proof8737">
 <span class="tactic">destruct</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_reorder">npnswstep_reorder</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8738')">Proof.</div>
<div class="proofscript" id="proof8738">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#glob_npnsw_step_type">glob_npnsw_step_type</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">x</span>&amp;<span class="id">step1</span>&amp;<span class="id">type1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#glob_npnsw_step_type">glob_npnsw_step_type</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">y</span>&amp;<span class="id">step2</span>&amp;<span class="id">type2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">type1</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc1</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">type2</span> <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">step2</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="ETrace.html#tau">tau</a></span>&lt;&gt;<span class="id"><a href="ETrace.html#sw">sw</a></span>). <span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_reorder_rule">globstep_reorder_rule</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">type2</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">type1</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_star_reorder">npnswstep_star_reorder</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8739')">Proof.</div>
<div class="proofscript" id="proof8739">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({-|<span class="id">pc</span>,<span class="id">t2</span>}). <span class="tactic">split</span>;[<span class="id">constructor</span>|<span class="id">exists</span> <span class="id">pc1</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp1</span> <span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp1</span> <span class="id">fp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnswstep_reorder">npnswstep_reorder</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">step1</span>&amp;<span class="id">pc2</span>'&amp;<span class="id">step2</span>&amp;<span class="id">memeq</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_npnsw_step_starN">mem_eq_npnsw_step_starN</a></span> <span class="kwd">in</span> <span class="id">memeq</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">memeq</span>' <span class="kwd">as</span> (<span class="id">pce</span>'&amp;<span class="id">tauN</span>'&amp;<span class="id">memeq</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> [<span class="id">H6</span>|[<span class="id">H6</span>|<span class="id">H6</span>]];<span class="id">Coqlib.inv</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">tauN</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>. <span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc1</span>' = ({-|<span class="id">pc1</span>',<span class="id">t2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">step1</span> <span class="kwd">as</span> [<span class="id">s1</span>|[<span class="id">s1</span>|<span class="id">s1</span>]];<span class="id">Coqlib.inv</span> <span class="id">s1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H10</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pce</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">memeq</span>' <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_corestar_reorder">npnswstep_corestar_reorder</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc2</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8740')">Proof.</div>
<div class="proofscript" id="proof8740">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({-|<span class="id">pc</span>,<span class="id">t2</span>}). <span class="tactic">split</span>;[<span class="id">constructor</span>|<span class="id">exists</span> <span class="id">pc1</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_refl">mem_eq_pc_refl</a></span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp1</span> <span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp1</span> <span class="id">fp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#glob_npnsw_step_type">glob_npnsw_step_type</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globstep_reorder_rule">globstep_reorder_rule</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">step1</span>&amp;<span class="id">pc2</span>'&amp;<span class="id">step2</span>&amp;<span class="id">memeq1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">memeq1</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id">t2</span>). <span class="id">Coqlib.inv</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span> <span class="kwd">in</span> *;<span class="tactic">clear</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> ({-|<span class="id">pc1</span>',<span class="id">t1</span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp1</span> <span class="id">pc2</span>'). <span class="tactic">destruct</span> <span class="id">H9</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H12</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H12</span> <span class="kwd">as</span> (<span class="id">pc10</span>&amp;<span class="id">star1</span>&amp;<span class="id">pc20</span>&amp;<span class="id">step</span>'&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc10</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>' = <span class="id">t2</span>). <span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">auto</span>. <span class="tactic">assert</span>(<span class="id">pc1</span>' = ({-|<span class="id">pc1</span>',<span class="id">t2</span>})). <span class="tactic">destruct</span> <span class="id">pc1</span>';<span class="tactic">subst</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc20</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x1</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span>). <span class="tactic">destruct</span> <span class="id">H11</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H13</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">step1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H6</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">L</span>;<span class="tactic">inversion</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">L</span>;<span class="tactic">inversion</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="outofatom_glob_reorder_rule">outofatom_glob_reorder_rule</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">pc3</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">x</span> <span class="id">y</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc3">pc3</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l1">l1</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l2">l2</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc3">pc3</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> <span class="id">pc</span>' <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>})/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc3">pc3</a></span> ({-|<span class="id">pc</span>'',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc3">pc3</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8741')">Proof.</div>
<div class="proofscript" id="proof8741">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc</span> = {-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>}). <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc2</span> = ({-|<span class="id">pc1</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H13</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H13</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc1</span>). <span class="id">Coqlib.inv</span> <span class="id">H6</span>;<span class="tactic">auto</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H14</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">clear</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span> (<span class="id">Coqlib.inv</span> <span class="id">H6</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case1">extended_glob_reorder_case1</a></span> <span class="kwd">with</span>(<span class="id">pc1</span>:=<span class="id">pc1</span>)<span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H12</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>) <span class="kwd">in</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x</span> = ({-|<span class="id">x</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">x</span>})). <span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">L1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">x</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H22</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H16</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case2">extended_glob_reorder_case2</a></span> <span class="kwd">with</span>(<span class="id">pc1</span>:=<span class="id">pc1</span>) <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">x0</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>) <span class="kwd">as</span> <span class="id">t1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case3">extended_glob_reorder_case3</a></span> <span class="kwd">with</span>(<span class="id">pc1</span>:=<span class="id">pc1</span>) <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H15</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span>}))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>)<span class="kwd">as</span> <span class="id">t1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H18</span>;<span class="tactic">inversion</span> <span class="id">H18</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case4">extended_glob_reorder_case4</a></span> <span class="kwd">with</span>(<span class="id">pc1</span>:=<span class="id">pc1</span>) <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">clear</span> <span class="id">H14</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H15</span>;<span class="tactic">clear</span> <span class="id">H15</span>;<span class="tactic">subst</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">GlobDefs.thread_pool</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">GlobDefs.cur_tid</a></span> <span class="id">pc2</span>}))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extended_glob_reorder_case5">extended_glob_reorder_case5</a></span> <span class="kwd">with</span>(<span class="id">pc1</span>:=<span class="id">pc1</span>) <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">clear</span> <span class="id">H14</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_switchable">step_switchable</a></span> <span class="kwd">in</span> <span class="id">H15</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H15</span>;<span class="tactic">clear</span> <span class="id">H15</span>;<span class="tactic">subst</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H14</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">GlobDefs.thread_pool</a></span> ({-|<span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#cur_tid">GlobDefs.cur_tid</a></span> <span class="id">pc2</span>}))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H17</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="stepN">stepN</a></span>:(@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="id"><a href="ETrace.html#glabel">glabel</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>)-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt;@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="stepN_emp">stepN_emp</a></span>:<span class="kwd">forall</span> <span class="id">step</span> <span class="id">pc</span>,<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> 0 <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="stepN_cons">stepN_cons</a></span>:<span class="kwd">forall</span> <span class="id">step</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>' <span class="id">pc</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id">pc</span>' <span class="id">l</span>' <span class="id">fp</span>' <span class="id">pc</span>''-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id">l</span>')(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">fp</span>') <span class="id">pc</span>''.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stepN_star">stepN_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">step</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8742')">Proof.</div>
<div class="proofscript" id="proof8742">
  <span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="star_stepN">star_stepN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">step</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8743')">Proof.</div>
<div class="proofscript" id="proof8743">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">IHstar</span>;<span class="id">eexists</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_corestepN">mem_eq_corestepN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">pc1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8744')">Proof.</div>
<div class="proofscript" id="proof8744">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">inversion</span> 2;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">l0</span>=<span class="id"><a href="ETrace.html#tau">tau</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_corestep">mem_eq_corestep</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="entat_afterstep">entat_afterstep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">x</span> <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#extat">extat</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8745')">Proof.</div>
<div class="proofscript" id="proof8745">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_change">mem_eq_pc_change</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">pc</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>})({-|<span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#t">t</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8746')">Proof.</div>
<div class="proofscript" id="proof8746">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="atom_block">atom_block</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>)(<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span> <span class="id">l</span>' <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id">l</span>' <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span>  <span class="id">l</span>') (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="half_atom_block">half_atom_block</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>)(<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="ETrace.html#glabel">glabel</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">pc</span>':@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span> <span class="id">l1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="adjust_list_order">adjust_list_order</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span>)(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#l2">l2</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8747')">Proof.</div>
<div class="proofscript" id="proof8747">
 <span class="tactic">intros</span>;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">List.app_assoc</a></span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="changepc_curtid">changepc_curtid</a></span>: <span class="kwd">forall</span> <span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>,({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>}) = <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8748')">Proof.</div>
<div class="proofscript" id="proof8748">
 <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="appnil">appnil</a></span>:<span class="kwd">forall</span> <span class="id">A</span> <span class="id">l</span>,@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="SmileReorder.html#A">A</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="SmileReorder.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8749')">Proof.</div>
<div class="proofscript" id="proof8749">
 <span class="tactic">induction</span> <span class="id">l</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">IHl</span>.  <span class="tactic">simpl</span>;<span class="tactic">rewrite</span>&lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">List.app_assoc</a></span>;<span class="tactic">auto</span>. Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_open_reorderstep1">atomblock_open_reorderstep1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8750')">Proof.</div>
<div class="proofscript" id="proof8750">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">fail</span>);<span class="id">Coqlib.inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_update_sym">thdp_push_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym">thdp_pop_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp1</span>:=<span class="id">thdp</span>') <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_caller</span> <span class="id">H</span> <span class="id">H3</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> (<span class="id">solv_thread</span>;<span class="id">solv_thread</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_open_reorderstep2">atomblock_open_reorderstep2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8751')">Proof.</div>
<div class="proofscript" id="proof8751">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="id">Coqlib.inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_push_update_sym">thdp_push_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym">thdp_pop_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp1</span>:=<span class="id">thdp</span>') <span class="kwd">in</span> <span class="id">H_tp_core0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_backwards_preserve">gettop_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_caller</span> <span class="id">H</span> <span class="id">H3</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>;<span class="tactic">try</span> (<span class="id">solv_thread</span>;<span class="id">solv_thread</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_pop_update_sym_weak">thdp_pop_update_sym_weak</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#thdp_update_sym">thdp_update_sym</a></span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>;<span class="id">steptac</span>;<span class="id">steptac</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_open_reorder_corestep">atomblock_open_reorder_corestep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' <span class="id">pc2</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8752')">Proof.</div>
<div class="proofscript" id="proof8752">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> ({-|<span class="id">pc1</span>,<span class="id">t2</span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp2</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc2</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc1</span>,<span class="id">pc2</span>;<span class="id">Coqlib.inv</span> <span class="id">H3</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="SmileReorder.html#globstep_reorder_rule">globstep_reorder_rule</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id">x</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span> <span class="id">t1</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id">pc1</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc2</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">H</span> <span class="id">H7</span> <span class="id">H0</span> <span class="id">L1</span> <span class="id">H2</span> <span class="id">H4</span> <span class="id">H5</span> <span class="id">H6</span> <span class="id">H1</span>) <span class="kwd">as</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?). <span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x0</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>);<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x1</span> <span class="id">t1</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>);<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> (<span class="id">econstructor</span>;<span class="tactic">eauto</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="kwd">in</span> *;<span class="tactic">destruct</span> <span class="id">H10</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_open_reorder_core_tauN">atomblock_open_reorder_core_tauN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">x</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' <span class="id">pc2</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8753')">Proof.</div>
<div class="proofscript" id="proof8753">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>; <span class="id">Coqlib.inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;[<span class="id">constructor</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">auto</span>|<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">s</span>' = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">s</span>' <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_corestep">atomblock_open_reorder_corestep</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x1</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">inversion</span> <span class="id">H8</span>|];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_sym">mem_eq_pc_sym</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L2</span> <span class="kwd">as</span> (?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H14</span> <span class="kwd">as</span> <span class="id">L3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x0</span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x0</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H20</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x3</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="tactic">split</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H15</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">GMem.eq</span>'<span class="id">_trans</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H10</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">with</span>(<span class="id">pc</span>:=(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>));<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span>;<span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_open_reorder_corestar">atomblock_open_reorder_corestar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span>  (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc1</span>'/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc1</span>' <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc2</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc2</span>' = <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">GMem.eq</span>' <span class="id">pc2</span>'.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>) <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>.(<span class="id"><a href="GlobDefs.html#gm">gm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8754')">Proof.</div>
<div class="proofscript" id="proof8754">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_star_tau_N_equiv">tau_star_tau_N_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [<span class="id">i</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_core_tauN">atomblock_open_reorder_core_tauN</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">eexists</span>;<span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="taustar_fpconflict_split">taustar_fpconflict_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">step</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="SmileReorder.html#A">A</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp10</span> <span class="id">fp11</span> <span class="id">pc10</span> <span class="id">pc11</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp10">fp10</a></span> <span class="id"><a href="SmileReorder.html#pc10">pc10</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#step">step</a></span> <span class="id"><a href="SmileReorder.html#pc10">pc10</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp11">fp11</a></span> <span class="id"><a href="SmileReorder.html#pc11">pc11</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#fp10">fp10</a></span> /\ <span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#fp11">fp11</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="SmileReorder.html#fp10">fp10</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="SmileReorder.html#fp11">fp11</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8755')">Proof.</div>
<div class="proofscript" id="proof8755">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span> \/ ~<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp</span> <span class="id">fp2</span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp</span>' <span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">fp10</span>&amp;<span class="id">fp11</span>&amp;<span class="id">pc10</span>&amp;<span class="id">pc11</span>&amp;<span class="id">star1</span>&amp;<span class="id">step1</span>&amp;<span class="id">smile1</span>&amp;<span class="id">conflict1</span>&amp;<span class="id">subset1</span>&amp;<span class="id">subset2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp</span> <span class="id">fp10</span>),<span class="id">fp11</span>,<span class="id">pc10</span>,<span class="id">pc11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp</span>'). <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsubset_trans">fpsubset_trans</a></span>;<span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">fp</span>,<span class="id">s</span>,<span class="id">s</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>;<span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [];<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span>. <span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#smile_conflict">smile_conflict</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="kwd">forall</span> <span class="id">fp</span>,<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="id">Locs.unfolds</span>;<span class="tactic">intros</span>;<span class="tactic">simpl</span>;<span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_subset">FP.union_subset</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="changeatombit_corestep_preserve">changeatombit_corestep_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>'(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8756')">Proof.</div>
<div class="proofscript" id="proof8756">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="changeatombit_corestar_preserve">changeatombit_corestar_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>'(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8757')">Proof.</div>
<div class="proofscript" id="proof8757">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">s</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">s</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="changeatombitI_corestar_preserve">changeatombitI_corestar_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>'(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8758')">Proof.</div>
<div class="proofscript" id="proof8758">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">s</span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">s</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>) <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>' = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="changepc_again">changepc_again</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">t</span> <span class="id">i</span> <span class="id">t</span>' <span class="id">i</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">t</span>' <span class="id">i</span>') <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8759')">Proof.</div>
<div class="proofscript" id="proof8759">
 <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mem_eq_pc_changepc">mem_eq_pc_changepc</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">t</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span>)(<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8760')">Proof.</div>
<div class="proofscript" id="proof8760">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>;<span class="tactic">destruct</span> 1 <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_taustar">corestar_taustar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8761')">Proof.</div>
<div class="proofscript" id="proof8761">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestep_changebit">corestep_changebit</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>'(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8762')">Proof.</div>
<div class="proofscript" id="proof8762">
 <span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_changebit">corestar_changebit</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8763')">Proof.</div>
<div class="proofscript" id="proof8763">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s1</span> =<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s2</span>). <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_changebit">corestep_changebit</a></span> <span class="kwd">with</span>(<span class="id">x</span>:=<span class="id">x</span>) <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestepN_changebit">corestepN_changebit</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#stepN">stepN</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">pc</span>' (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="SmileReorder.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8764')">Proof.</div>
<div class="proofscript" id="proof8764">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>'0). <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_changebit">corestep_changebit</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="half_atom_block_glob_predict_star_alter">half_atom_block_glob_predict_star_alter</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#half_atom_block">half_atom_block</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>}) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_predict_star_alter">glob_predict_star_alter</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8765')">Proof.</div>
<div class="proofscript" id="proof8765">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#half_atom_block">half_atom_block</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">with</span> (<span class="id">fp</span>:=<span class="id">fp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestar_taustar">corestar_taustar</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="atomblockN">atomblockN</a></span> (<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)(<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>)(<span class="id">fp</span>:<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)(<span class="id">pc</span>':<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc1</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#entat">entat</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc2</span>,<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="step_equiv_tau_star_equiv">step_equiv_tau_star_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">step1</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="id"><a href="ETrace.html#glabel">glabel</a></span>-&gt;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>-&gt; @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<span class="kwd">Prop</span>) <span class="id">step2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span> <span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#step1">step1</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="SmileReorder.html#step2">step2</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>')-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span> <span class="id">pc</span> <span class="id">pc</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="SmileReorder.html#step1">step1</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' &lt;-&gt; <span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="SmileReorder.html#step2">step2</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8766')">Proof.</div>
<div class="proofscript" id="proof8766">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">intro</span>;<span class="tactic">induction</span> <span class="id">H0</span>; [<span class="id">constructor</span>|<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>|<span class="id">constructor</span>|<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>;<span class="tactic">eapply</span> <span class="id">H</span>;<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8767')">Proof.</div>
<div class="proofscript" id="proof8767">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="step_memeqpc_preserve">step_memeqpc_preserve</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">l</span> <span class="id">fp</span> <span class="id">x</span> <span class="id">pc1</span> <span class="id">pc1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span> &lt;&gt; <span class="id"><a href="TypedSemantics.html#core">core</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span> &lt;&gt; <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">pc</span>' <span class="id">pc1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8768')">Proof.</div>
<div class="proofscript" id="proof8768">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>], <span class="id">pc1</span> <span class="kwd">as</span> [<span class="id">thdp</span>' <span class="id">tid</span>' <span class="id">tgm</span>' <span class="id">tbit</span>'],<span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">split</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">P</span> = <span class="id">_</span>, <span class="id">H2</span>: ?<span class="id">P</span> = <span class="id">_</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H2</span>;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">P</span> = <span class="id">_</span> , <span class="id">H2</span>: <span class="id">_</span> = ?<span class="id">P</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H2</span>;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: <span class="id">_</span> = ?<span class="id">P</span>, <span class="id">H2</span>: <span class="id">_</span> = ?<span class="id">P</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H2</span>;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">a</span> ?<span class="id">b</span> ?<span class="id">c</span> ?<span class="id">d</span> <span class="id">_</span>,<span class="id">H2</span>:?<span class="id">a</span> ?<span class="id">b</span> ?<span class="id">c</span> ?<span class="id">d</span> <span class="id">_</span>|-<span class="id">_</span>]=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H1</span>;<span class="id">Coqlib.inv</span> <span class="id">H2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<span class="tactic">try</span> <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="atomblock_reorder">atomblock_reorder</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">i</span> <span class="id">l</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">pc</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t1">t1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#Reorder.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc</span>' /\ <span class="id">exists</span> <span class="id">pc</span>'',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id">pc</span>',<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id">pc</span>'' /\ <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> ({-|<span class="id">pc</span>'',<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>}).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8769')">Proof.</div>
<div class="proofscript" id="proof8769">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#atomblockN">atomblockN</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep1">atomblock_open_reorderstep1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">x0</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x3</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span>;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_coreN">mem_eq_coreN</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> (?&amp;?&amp;?);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorder_core_tauN">atomblock_open_reorder_core_tauN</a></span> <span class="kwd">in</span> <span class="id">H10</span> <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x6</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">destruct</span> <span class="id">x4</span>,<span class="id">x6</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> * ;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H14</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> [? <span class="id">_</span>];<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">steptac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H19</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#atomblock_open_reorderstep2">atomblock_open_reorderstep2</a></span> <span class="kwd">in</span> <span class="id">H19</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">clear_ands</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x2</span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x2</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H24</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">x5</span> = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x5</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H15</span> <span class="kwd">as</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">T</span> <span class="kwd">as</span> [];<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x5</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H24</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>( ({-|<span class="id">x8</span>,<span class="id">t1</span>}) = <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x8</span> <span class="id">t1</span> <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x8</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H20</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H24</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">x0</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x3</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">try</span> (<span class="tactic">split</span>;[<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>|];<span class="tactic">simpl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H12</span>;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span> <span class="id">x4</span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id">x6</span> <span class="id">t2</span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#tauN_taustar">tauN_taustar</a></span> <span class="kwd">in</span> <span class="id">H13</span> <span class="kwd">as</span> <span class="id">T2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">T2</span> <span class="kwd">as</span> [];<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc">mem_eq_pc</a></span>;<span class="tactic">repeat</span> <span class="id">clear_ands</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_sym</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span> <span class="kwd">in</span> <span class="id">H25</span> <span class="kwd">as</span> <span class="id">L</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#step_memeqpc_preserve">step_memeqpc_preserve</a></span> <span class="kwd">in</span> <span class="id">L</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H19</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#mem_eq_pc_trans">mem_eq_pc_trans</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H19</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H21</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H27</span> <span class="kwd">in</span> <span class="id">H31</span>;<span class="tactic">inversion</span> <span class="id">H31</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">L</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H23</span>. <span class="tactic">apply</span> <span class="id">GMem.eq</span>'<span class="id">_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H16</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H21</span> <span class="kwd">in</span> <span class="id">H25</span>;<span class="tactic">inversion</span> <span class="id">H25</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">H10</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>;<span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H16</span> <span class="kwd">in</span> <span class="id">H20</span>;<span class="tactic">inversion</span> <span class="id">H20</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="List_i_split">List_i_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>:<span class="kwd">Type</span>)(<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)(<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="SmileReorder.html#A">A</a></span>)(<span class="id">p</span>:<span class="id"><a href="SmileReorder.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">List.nth_error</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l1</span> <span class="id">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#l">l</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#l2">l2</a></span>) /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="SmileReorder.html#l1">l1</a></span> = <span class="id"><a href="SmileReorder.html#i">i</a></span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8770')">Proof.</div>
<div class="proofscript" id="proof8770">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>,<span class="id">l</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>;<span class="id">Coqlib.inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [?[?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">a</span> <span class="id">x</span>),<span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span>. <span class="tactic">f_equal</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="SmileReorder.html#Reorder">Reorder</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRaceLemmas">PRaceLemmas</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="PRaceLemmas.GE">GE</a></span>:<span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="invpc">invpc</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>):<span class="kwd">Prop</span>:=<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="cur_valid_id">cur_valid_id</a></span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>):=<span class="id"><a href="SmileReorder.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="pc_cur_tid">pc_cur_tid</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>}) = <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8771')">Proof.</div>
<div class="proofscript" id="proof8771">
 <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="cur_valid_id_sw">cur_valid_id_sw</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>-&gt;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_sw">glob_sw</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t">t</a></span>}) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8772')">Proof.</div>
<div class="proofscript" id="proof8772">
 <span class="tactic">destruct</span> <span class="id">pc</span>,2;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">intros</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="cur_valid_id_nohalt">cur_valid_id_nohalt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span>' <span class="id">l</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> <span class="id">pc</span>' <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8773')">Proof.</div>
<div class="proofscript" id="proof8773">
 <span class="tactic">destruct</span> 2;<span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>. <span class="id">contradiction</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8774')">Proof.</div>
<div class="proofscript" id="proof8774">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#invpc">invpc</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#pc_valid_tid">pc_valid_tid</a></span>;<span class="tactic">unfold</span> <span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">split</span>;<span class="tactic">try</span>( <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>);<span class="tactic">intro</span> <span class="id">halt</span>;<span class="tactic">inversion</span> <span class="id">halt</span>;<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> *;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H_tp_core</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnsw_star_fpnotemp_cur_valid_id">npnsw_star_fpnotemp_cur_valid_id</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#fp">fp</a></span>&lt;&gt; <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8775')">Proof.</div>
<div class="proofscript" id="proof8775">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">pc</span> <span class="id">fl</span> <span class="id">pc</span>' <span class="id">wdge</span> <span class="id">invpc</span> ?  ?;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp</span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> \/ <span class="id">fp</span> &lt;&gt; <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_star</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span> = <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">s</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[]];<span class="id">Coqlib.inv</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#pc_valid_tid">pc_valid_tid</a></span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">right</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H0</span>;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">right</span>;<span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">eexists</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp1</span>:=<span class="id">thdp</span>') <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#valid_tid_backwards_preserve">valid_tid_backwards_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span> <span class="kwd">with</span>(<span class="id">thdp2</span>:=<span class="id">thdp</span>')<span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#halted_preserve">halted_preserve</a></span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_thdpinv">npnsw_step_thdpinv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_predict_fpnotemp_validtid">glob_predict_fpnotemp_validtid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">b</span> <span class="id">t</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span> <span class="id"><a href="SmileReorder.html#b">b</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#fp">fp</a></span>&lt;&gt;<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="SmileReorder.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8776')">Proof.</div>
<div class="proofscript" id="proof8776">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1;<span class="tactic">subst</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H0</span>. <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_star_tp_inv2">GE_mod_wd_star_tp_inv2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#GE">GE</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8777')">Proof.</div>
<div class="proofscript" id="proof8777">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 3;<span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_npstar_tp_inv">GE_mod_wd_npstar_tp_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8778')">Proof.</div>
<div class="proofscript" id="proof8778">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">auto</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHstar</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push_inv">ThreadPool.push_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="lang_wd_mod_wd">lang_wd_mod_wd</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8779')">Proof.</div>
<div class="proofscript" id="proof8779">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span> <span class="kwd">as</span> [[] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>];<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">ge_init</span> <span class="id">ix</span>) <span class="kwd">as</span> [<span class="id">l</span>[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_cur_valid_tid">npnswstep_cur_valid_tid</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#invpc">invpc</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#cur_valid_id">cur_valid_id</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8780')">Proof.</div>
<div class="proofscript" id="proof8780">
 <span class="tactic">inversion</span> 2 <span class="kwd">as</span> [|[]];<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">split</span>;[<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#gettop_valid_tid">gettop_valid_tid</a></span>;<span class="tactic">eauto</span>|<span class="tactic">intro</span>;<span class="id">solv_thread</span>]). Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_tau_no_atom_type">glob_tau_no_atom_type</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#glob_halt">glob_halt</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#call">call</a></span> \/ <span class="id"><a href="SmileReorder.html#x">x</a></span> = <span class="id"><a href="TypedSemantics.html#ret">ret</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8781')">Proof.</div>
<div class="proofscript" id="proof8781">
 <span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">intros</span>;<span class="tactic">auto</span>;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>. Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_taustep">npnswstep_taustep</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id"><a href="SmileReorder.html#l">l</a></span> = <span class="id"><a href="ETrace.html#tau">tau</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8782')">Proof.</div>
<div class="proofscript" id="proof8782">
 <span class="tactic">inversion</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_l1">npnswstep_l1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id">exists</span> <span class="id">i</span>,<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' /\ (<span class="id"><a href="SmileReorder.html#i">i</a></span>=<span class="id"><a href="TypedSemantics.html#core">core</a></span> \/ <span class="id"><a href="SmileReorder.html#i">i</a></span>=<span class="id"><a href="TypedSemantics.html#call">call</a></span> \/ <span class="id"><a href="SmileReorder.html#i">i</a></span> = <span class="id"><a href="TypedSemantics.html#ret">ret</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8783')">Proof.</div>
<div class="proofscript" id="proof8783">
 <span class="tactic">inversion</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_l3">npnswstep_l3</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>' <span class="id">i</span>,@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;(<span class="id"><a href="SmileReorder.html#i">i</a></span>=<span class="id"><a href="TypedSemantics.html#core">core</a></span>\/<span class="id"><a href="SmileReorder.html#i">i</a></span>=<span class="id"><a href="TypedSemantics.html#call">call</a></span>\/<span class="id"><a href="SmileReorder.html#i">i</a></span>=<span class="id"><a href="TypedSemantics.html#ret">ret</a></span>)-&gt;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8784')">Proof.</div>
<div class="proofscript" id="proof8784">
 <span class="tactic">destruct</span> 2 <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span>;<span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_l2">npnswstep_l2</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8785')">Proof.</div>
<div class="proofscript" id="proof8785">
 <span class="tactic">inversion</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstar_bit">npnswstar_bit</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8786')">Proof.</div>
<div class="proofscript" id="proof8786">
 <span class="tactic">induction</span> 1;<span class="tactic">intros</span>;<span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l2">npnswstep_l2</a></span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">congruence</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_tau_star_star">core_tau_star_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">l</span>,<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8787')">Proof.</div>
<div class="proofscript" id="proof8787">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHtau_star</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="core_tau_star_tau_star">core_tau_star_tau_star</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8788')">Proof.</div>
<div class="proofscript" id="proof8788">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="predict_step_ex">predict_step_ex</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">pc</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">l1</span> <span class="id">fp1</span> <span class="id">pc1</span> <span class="id">l2</span> <span class="id">fp2</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t1">t1</a></span>}) <span class="id"><a href="SmileReorder.html#l1">l1</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#core">core</a></span>\/<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#call">call</a></span>\/<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#ret">ret</a></span> -&gt; <span class="id"><a href="SmileReorder.html#l2">l2</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#sw">sw</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t2">t2</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>',<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#y">y</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="SmileReorder.html#l2">l2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8789')">Proof.</div>
<div class="proofscript" id="proof8789">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnswstep_l3">npnswstep_l3</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_eff">npnsw_step_eff</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_step_diff_thread_sim">npnsw_step_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span>;<span class="tactic">subst</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#callstep_Glocality">callstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#retstep_Glocality">retstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>. <span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#entatstep_Glocality">entatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#extatstep_Glocality">extatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#efprintstep_Glocality">efprintstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#globhaltstep_Glocality">globhaltstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="predict_step_ex_alt">predict_step_ex_alt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">pc</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">fp1</span> <span class="id">pc1</span>  <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span>,<span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>))-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#x">x</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t1">t1</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>,<span class="id"><a href="SmileReorder.html#t2">t2</a></span>}) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#core">core</a></span>\/<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#call">call</a></span>\/<span class="id"><a href="SmileReorder.html#x">x</a></span>=<span class="id"><a href="TypedSemantics.html#ret">ret</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#t2">t2</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#t1">t1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span>', <span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="SmileReorder.html#t2">t2</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8790')">Proof.</div>
<div class="proofscript" id="proof8790">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [|[]];<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H2</span>;<span class="tactic">subst</span>;<span class="tactic">clear</span> <span class="id">H2</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">t</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>'0 <span class="id">t2</span> <span class="id">c</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="id">solv_thread</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">t</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>'0 <span class="id">t2</span> <span class="id">c</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>;<span class="id">solv_thread</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">t</span>',<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>'' <span class="id">t2</span> <span class="id">c</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>. <span class="id">solv_thread</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">Coqlib.peq</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="npnswstep_changebitO">npnswstep_changebitO</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> (<span class="id"><a href="SmileReorder.html#changepc">changepc</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id">pc</span>'(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>) <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8791')">Proof.</div>
<div class="proofscript" id="proof8791">
 <span class="tactic">inversion</span> 1 <span class="kwd">as</span> [|[]];<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">subst</span>;<span class="tactic">unfold</span> <span class="id"><a href="SmileReorder.html#changepc">changepc</a></span>;<span class="tactic">simpl</span>;[<span class="id">left</span>|<span class="id">right</span>;<span class="id">left</span>|<span class="id">right</span>;<span class="id">right</span>];<span class="id">econstructor</span>;<span class="tactic">eauto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tauN_I_split">tauN_I_split</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>') \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">pc1</span> <span class="id">j</span> <span class="id">fp1</span> <span class="id">pc2</span> <span class="id">fp2</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#j">j</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="TypedSemantics.html#extat">extat</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#k">k</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id">pc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> = <span class="id"><a href="SmileReorder.html#fp">fp</a></span> /\ <span class="id"><a href="SmileReorder.html#j">j</a></span>+<span class="id"><a href="SmileReorder.html#k">k</a></span>+1=<span class="id"><a href="SmileReorder.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8792')">Proof.</div>
<div class="proofscript" id="proof8792">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">s</span>') <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fp0</span>=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>). <span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">auto</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_exists">type_glob_step_exists</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">Heqb</span>;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_assoc">FP.fp_union_assoc</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="coretauN_globtauN">coretauN_globtauN</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">i</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> (@<span class="id"><a href="TypedSemantics.html#type_glob_step">type_glob_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="TypedSemantics.html#core">core</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_N">tau_N</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="SmileReorder.html#i">i</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8793')">Proof.</div>
<div class="proofscript" id="proof8793">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">i</span>;<span class="tactic">intros</span>;<span class="id">Coqlib.inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHi</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_inv_npstar">thdp_inv_npstar</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#star">star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span>) <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc</span>'.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8794')">Proof.</div>
<div class="proofscript" id="proof8794">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 2;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHstar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobSim.html#GlobSim.thp_inv_preservation">GlobSim.GlobSim.thp_inv_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="init_property_1">init_property_1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8795')">Proof.</div>
<div class="proofscript" id="proof8795">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>] <span class="id">t</span> [];<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="config_thdp_init_property1">config_thdp_init_property1</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) <span class="id"><a href="SmileReorder.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8796')">Proof.</div>
<div class="proofscript" id="proof8796">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span> <span class="kwd">as</span> [<span class="id">thdp</span> <span class="id">tid</span> <span class="id">tgm</span> <span class="id">tbit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">t</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">compute</span> -[<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>] <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.spawn">ThreadPool.spawn</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#Plt_succ_inv">Coqlib.Plt_succ_inv</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHinit</span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="id">contradict</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="init_property_1_alt">init_property_1_alt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">pc</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#pc_valid_tid">pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8797')">Proof.</div>
<div class="proofscript" id="proof8797">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#init_property_1">init_property_1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#config_thdp_init_property1">config_thdp_init_property1</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="thdp_inv_race_config_equiv">thdp_inv_race_config_equiv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  <span class="id">pc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#race_config">race_config</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt; @<span class="id"><a href="USimDRF.html#np_race_config_base">np_race_config_base</a></span> <span class="id"><a href="SmileReorder.html#PRaceLemmas.GE">GE</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8798')">Proof.</div>
<div class="proofscript" id="proof8798">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PRaceLemmas.html#race_equiv">race_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span> <span class="kwd">as</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_race_equiv">predict_equiv_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L1</span> <span class="kwd">as</span> [<span class="id">L3</span> <span class="id">L4</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#glob_predict_fpnotemp_validtid">glob_predict_fpnotemp_validtid</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">L1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#glob_predict_fpnotemp_validtid">glob_predict_fpnotemp_validtid</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">L2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H3</span>;<span class="id">Coqlib.inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp1</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="SmileReorder.html#npnsw_step_cur_valid_id">npnsw_step_cur_valid_id</a></span> <span class="kwd">with</span>(<span class="id">fp</span>:=<span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">id1</span>:=<span class="id">t1</span>)(<span class="id">id2</span>:=<span class="id">t2</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H8</span> <span class="kwd">as</span> <span class="id">L5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L5</span> <span class="kwd">as</span> [<span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#star_core_step_equiv">star_core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H3</span>;<span class="tactic">auto</span>. <span class="tactic">intro</span> <span class="id">T</span>;<span class="tactic">inversion</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.conflict_sym">FP.conflict_sym</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">t2</span>&lt;&gt;<span class="id">t1</span>). <span class="tactic">intro</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#race_atom_1">race_atom_1</a></span> <span class="kwd">with</span>(<span class="id">id1</span>:=<span class="id">t2</span>)(<span class="id">id2</span>:=<span class="id">t1</span>)(<span class="id">fp3</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>)(<span class="id">pc1</span>:=({-|<span class="id">pc</span>,<span class="id">t2</span>}));<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H8</span>;<span class="tactic">clear</span>;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#corestar_tid_bit_preserve">corestar_tid_bit_preserve</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">L5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">L5</span> <span class="kwd">as</span> [<span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#star_core_step_equiv">star_core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">intro</span> <span class="id">T</span>;<span class="tactic">inversion</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#race_atom_1">race_atom_1</a></span> <span class="kwd">with</span>(<span class="id">id1</span>:=<span class="id">t1</span>)(<span class="id">id2</span>:=<span class="id">t2</span>)(<span class="id">fp3</span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>)(<span class="id">pc1</span>:=({-|<span class="id">pc</span>,<span class="id">t1</span>}));<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H7</span>;<span class="tactic">clear</span>;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_elim">type_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="SmileReorder.html#PRaceLemmas">PRaceLemmas</a></span>.<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Race_Proof">Race_Proof</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_race_config_base_case0_star_race">np_race_config_base_case0_star_race</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>) <span class="id">id1</span> <span class="id">id2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">pc1</span> <span class="id">pc2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span> : <span class="id">fintype.ordinal</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.M">GlobEnv.M</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>), <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#id1">id1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#pc_valid_tid">GSimDefs.pc_valid_tid</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#id2">id2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SmileReorder.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="SmileReorder.html#id2">id2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>, <span class="id"><a href="SmileReorder.html#id1">id1</a></span>}) <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc1">pc1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> ({-|<span class="id"><a href="SmileReorder.html#pc">pc</a></span>, <span class="id"><a href="SmileReorder.html#id2">id2</a></span>}) <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc2">pc2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id"><a href="SmileReorder.html#fp1">fp1</a></span> <span class="id"><a href="SmileReorder.html#fp2">fp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#star_race">star_race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8799')">Proof.</div>
<div class="proofscript" id="proof8799">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">id1</span> <span class="id">id2</span> <span class="id">fp1</span> <span class="id">fp2</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">modwdge</span> <span class="id">wdge</span> <span class="id">thdpinv</span>  <span class="id">bitO</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#conflict_min_rule_extended">conflict_min_rule_extended</a></span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span> <span class="kwd">as</span> (<span class="id">pc10</span>&amp;<span class="id">pc11</span>&amp;<span class="id">fp10</span>&amp;<span class="id">fp11</span>&amp;<span class="id">star1</span>&amp;<span class="id">biteq1</span>&amp;<span class="id">step1</span>&amp;<span class="id">biteq2</span>&amp;<span class="id">pc20</span>&amp;<span class="id">pc21</span>&amp;<span class="id">fp20</span>&amp;<span class="id">fp21</span>&amp;<span class="id">star2</span>&amp;<span class="id">biteq3</span>&amp;<span class="id">step2</span>&amp;<span class="id">biteq4</span>&amp;<span class="id">fpsmile1</span>&amp;<span class="id">fpsmile2</span>&amp;<span class="id">fpsmile3</span>&amp;<span class="id">fpconflict1</span>&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">fp1</span> <span class="id">fp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nptaustar_nohalt">nptaustar_nohalt</a></span> <span class="kwd">in</span> <span class="id">star1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nonhalt_biteq_taustar_npnsw_tau_star_equiv">nonhalt_biteq_taustar_npnsw_tau_star_equiv</a></span> <span class="kwd">in</span> <span class="id">star1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nptaustar_nohalt">nptaustar_nohalt</a></span> <span class="kwd">in</span> <span class="id">star2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nonhalt_biteq_taustar_npnsw_tau_star_equiv">nonhalt_biteq_taustar_npnsw_tau_star_equiv</a></span> <span class="kwd">in</span> <span class="id">star2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">Eff1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">fpsmile1</span> <span class="kwd">as</span> <span class="id">Pre1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fpsmile4</span>:<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp10</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp20</span> <span class="id">fp21</span>)). <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">fpsmile4</span> <span class="kwd">as</span> <span class="id">Pre1</span>';<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc</span>,<span class="id">id1</span>}) = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc</span>,<span class="id">id2</span>})). <span class="tactic">destruct</span> <span class="id">pc</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">gmeq</span> <span class="kwd">in</span> <span class="id">Pre1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq</span>': (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc10</span>, <span class="id">id2</span>})) = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc10</span>). <span class="tactic">destruct</span> <span class="id">pc10</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">gmeq</span>' <span class="kwd">in</span> <span class="id">Pre1</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">Pre1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_diff_thread_sim">npnsw_taustar_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">thread_sim1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">thread_sim1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">thdpinv1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_Glocality">npnsw_taustar_Glocality</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">G1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G1</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">star2</span>'&amp;<span class="id">Post0</span>&amp;<span class="id">thread_sim2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">fpconflict1</span> <span class="kwd">as</span> <span class="id">fp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp1</span> <span class="kwd">as</span> [<span class="id">fp11notemp</span> <span class="id">fp21notemp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">step2</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">step2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">step2</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">biteq2</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">step1</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">step1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">biteq1</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">step1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">step2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star2</span>' <span class="kwd">as</span> <span class="id">Eff2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">star2</span>' <span class="kwd">as</span> <span class="id">thdpinv2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">fpsmile1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span> <span class="kwd">in</span> <span class="id">fpsmile3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">Eff2</span> <span class="kwd">as</span> <span class="id">Pre2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq3</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc10</span>,<span class="id">id2</span>}) = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc10</span>);<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq4</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>' = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc1</span>',<span class="id">id1</span>}));<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">gmeq3</span> <span class="kwd">in</span> <span class="id">Pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">Pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">tid1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">tid1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">tid1</span> <span class="kwd">in</span> <span class="id">Pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">gmeq4</span> <span class="kwd">in</span> <span class="id">Pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_diff_thread_sim">npnsw_taustar_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">star2</span>' <span class="kwd">as</span> <span class="id">thread_sim</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">thread_sim</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">E1</span>:({-|<span class="id">pc10</span>,<span class="id">id1</span>}) = <span class="id">pc10</span>). <span class="tactic">destruct</span> <span class="id">pc10</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E1</span> <span class="kwd">in</span> <span class="id">thread_sim</span>';<span class="tactic">clear</span> <span class="id">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">Pre2</span> <span class="kwd">as</span> <span class="id">G</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G</span> <span class="kwd">as</span> (<span class="id">pc3</span>&amp;<span class="id">step3</span>&amp;<span class="id">Post3</span>&amp;<span class="id">thread_sim3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Post0</span>. <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPost_comm">GPost_comm</a></span> <span class="kwd">in</span> <span class="id">Post0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">Eff</span>';<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span> <span class="kwd">in</span> <span class="id">Pre1</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">tid2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">tid2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">tid2</span> <span class="kwd">in</span> <span class="id">Pre1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">Pre1</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">thdpinv3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">Pre1</span>' <span class="kwd">as</span> <span class="id">G</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G</span> <span class="kwd">as</span> (<span class="id">pc4</span>&amp;<span class="id">step4</span>&amp;<span class="id">Post4</span>&amp;<span class="id">thread_sim4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">O1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star2</span>' <span class="kwd">as</span> <span class="id">tid3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">tid3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="PRaceLemmas.html#race">race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id">pc1</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span>;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">L</span>:<span class="id">pc1</span>' = ({-|<span class="id">pc1</span>',<span class="id">id2</span>})). <span class="tactic">destruct</span> <span class="id">pc1</span>';<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">L</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">star1</span> <span class="id">star2</span> <span class="id">star2</span>' <span class="id">step1</span> <span class="id">step2</span> <span class="id">step3</span> <span class="id">step4</span> <span class="id">H2</span> <span class="id">thdpinv</span> <span class="id">H</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">modwdge</span> <span class="id">wdge</span> <span class="id">O1</span> <span class="id">bitO</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">valid</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">valid</span> <span class="kwd">as</span> [<span class="id">v1</span> <span class="id">v2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">swstep1</span>:<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc10</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc10</span>,<span class="id">id2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc10</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">swstep0</span>:<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">id1</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>; <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">swstep1</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">star2</span>' <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#star_race">star_race</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#app">app</a></span> <span class="id">x0</span> <span class="id">x1</span>),(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp10</span> <span class="id">fp20</span>),<span class="id">pc1</span>';<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="np_race_config_base_star_race">np_race_config_base_star_race</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">pc</span>:@<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ix</span> : <span class="id">fintype.ordinal</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.M">GlobEnv.M</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span>), <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#ix">ix</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="USimDRF.html#np_race_config_base">np_race_config_base</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> -&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PRaceLemmas.html#star_race">star_race</a></span> <span class="id"><a href="PRaceLemmas.html#glob_predict">glob_predict</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8800')">Proof.</div>
<div class="proofscript" id="proof8800">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">modwdge</span> <span class="id">wdge</span> ?  <span class="id">bitO</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#np_race_config_base_case0_star_race">np_race_config_base_case0_star_race</a></span> <span class="kwd">with</span>(<span class="id">id1</span>:=<span class="id">id1</span>);<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp1</span> <span class="id">fp2</span> \/ ~<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> <span class="id">fp1</span> <span class="id">fp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#np_race_config_base_case0_star_race">np_race_config_base_case0_star_race</a></span> <span class="kwd">with</span>(<span class="id">id1</span>:=<span class="id">id1</span>)(<span class="id">id2</span>:=<span class="id">id2</span>) <span class="kwd">in</span> <span class="id">H14</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.smile_conflict_compat">FP.smile_conflict_compat</a></span> <span class="kwd">in</span> <span class="id">H14</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#conflict_min_rule_extended">conflict_min_rule_extended</a></span> <span class="kwd">in</span> <span class="id">H13</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H9</span> <span class="id">H10</span> <span class="id">H11</span> <span class="id">H12</span> <span class="id">pc2</span> <span class="id">pc11</span>.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H13</span> <span class="kwd">as</span> (<span class="id">pc11</span>&amp;<span class="id">pc12</span>&amp;<span class="id">fp11</span>&amp;<span class="id">fp12</span>&amp;<span class="id">star1</span>&amp;<span class="id">biteq1</span>&amp;<span class="id">step1</span>&amp;<span class="id">biteq2</span>&amp;<span class="id">pc20</span>&amp;<span class="id">pc21</span>&amp;<span class="id">fp21</span>&amp;<span class="id">fp22</span>&amp;<span class="id">star2</span>&amp;<span class="id">biteq3</span>&amp;<span class="id">step2</span>&amp;<span class="id">biteq4</span>&amp;<span class="id">fpsmile1</span>&amp;<span class="id">fpsmile2</span>&amp;<span class="id">fpsmile3</span>&amp;<span class="id">fpconflict1</span>&amp;<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">fpsmile4</span>&amp;<span class="id">fpsmile5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span> <span class="kwd">in</span> <span class="id">fpsmile4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_subset">fpsmile_subset</a></span> <span class="kwd">in</span> <span class="id">fpsmile5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H14</span> <span class="id">fp2</span> <span class="id">fp10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nptaustar_nohalt">nptaustar_nohalt</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nonhalt_biteq_taustar_npnsw_tau_star_equiv">nonhalt_biteq_taustar_npnsw_tau_star_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">Eff0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">O0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">v0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">inv0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">tideq0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">O0</span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc10</span>) <span class="id">eqn</span>:<span class="id">biteq5</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">clear</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">biteq5</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">O0</span> <span class="kwd">in</span> <span class="id">biteq5</span>;<span class="tactic">inversion</span> <span class="id">biteq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#entat_step_equiv">entat_step_equiv</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">inv1</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc10</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">biteq6</span>: <span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc10</span> = <span class="id">id1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Coqlib.inv</span> <span class="id">H7</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">biteq1</span> <span class="kwd">in</span> <span class="id">biteq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nptaustar_nohalt">nptaustar_nohalt</a></span> <span class="kwd">in</span> <span class="id">star1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nonhalt_biteq_taustar_npnsw_tau_star_equiv">nonhalt_biteq_taustar_npnsw_tau_star_equiv</a></span> <span class="kwd">in</span> <span class="id">star1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">biteq1</span> <span class="kwd">in</span> <span class="id">biteq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">step1</span> <span class="kwd">as</span> [<span class="id">x</span> <span class="id">step1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>;<span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">step1</span>;<span class="tactic">subst</span>;<span class="tactic">inversion</span> <span class="id">biteq1</span>;<span class="tactic">inversion</span> <span class="id">biteq2</span>;<span class="id">contradiction</span>;<span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">step1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Tmp</span>:<span class="id"><a href="PRaceLemmas.html#glob_npnsw_step">glob_npnsw_step</a></span> <span class="id">pc11</span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fp12</span> <span class="id">pc12</span>). <span class="id">left</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span> <span class="kwd">in</span> <span class="id">Tmp</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus2star">tau_plus2star</a></span> <span class="kwd">in</span> <span class="id">Tmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_star_star">tau_star_star</a></span> <span class="kwd">in</span> <span class="id">Tmp</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">biteq1</span> <span class="kwd">in</span> <span class="id">biteq5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">pc11</span> <span class="id">biteq1</span> <span class="id">star1</span> <span class="id">step1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">Tmp</span> <span class="id">into</span> <span class="id">star1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nptaustar_nohalt">nptaustar_nohalt</a></span> <span class="kwd">in</span> <span class="id">star2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#nonhalt_biteq_taustar_npnsw_tau_star_equiv">nonhalt_biteq_taustar_npnsw_tau_star_equiv</a></span> <span class="kwd">in</span> <span class="id">star2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">Eff1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">O1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_pc_valid_tid_preservation">npnsw_taustar_pc_valid_tid_preservation</a></span> <span class="kwd">with</span>(<span class="id">t</span>:=<span class="id">id1</span>)<span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">v1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">inv2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">tideq1</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fpsmile6</span>:<span class="id"><a href="Footprint.html#FP.smile">FP.smile</a></span> <span class="id">fp21</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp11</span> <span class="id">fp12</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#fpsmile_union">fpsmile_union</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">Eff1</span> <span class="kwd">as</span> <span class="id">Pre1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_diff_thread_sim">npnsw_taustar_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">thread_sim1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sw1</span>:<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">id2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">with</span>(<span class="id">fp2</span>:=<span class="id">fp1</span>) <span class="kwd">in</span> <span class="id">Eff1</span> <span class="kwd">as</span> <span class="id">Pre2</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FPLemmas.html#fpsmile_sym">fpsmile_sym</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_Glocality">npnsw_taustar_Glocality</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">G1</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G1</span> <span class="kwd">as</span> (<span class="id">pc1</span>'&amp;<span class="id">star3</span>&amp;<span class="id">Post1</span>&amp;<span class="id">sim2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_eff">npnsw_taustar_eff</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">Eff2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_O_preservation">npnsw_taustar_O_preservation</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">O2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_thdpinv">npnsw_taustar_thdpinv</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">inv3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_tid_preservation">npnsw_taustar_tid_preservation</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">tideq2</span>;<span class="tactic">eauto</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc</span>,<span class="id">id2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc</span>,<span class="id">H2</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="PRaceLemmas.html#star_race">star_race</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">star2</span> <span class="kwd">as</span> <span class="id">Star2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#tau_star_to_star">tau_star_to_star</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">Star3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Star2</span> <span class="kwd">as</span> [<span class="id">l</span> <span class="id">Star2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Star3</span> <span class="kwd">as</span> [<span class="id">l</span>' <span class="id">Star3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">Star2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#npnsw_star_glob_star">npnsw_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">Star3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#star_step">star_step</a></span> <span class="kwd">in</span> <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id">pc20</span> <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> ({-|<span class="id">pc20</span>,<span class="id">id1</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc20</span>,<span class="id">v1</span>;<span class="tactic">simpl</span> <span class="kwd">in</span>*;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">bitO</span>. <span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H9</span> <span class="kwd">as</span> [];<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">Star3</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.emp_union_fp">FP.emp_union_fp</a></span> <span class="kwd">in</span> *;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.fp_union_emp">FP.fp_union_emp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H8</span> <span class="id">H9</span> <span class="id">Star2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">conflict2</span>:<span class="id"><a href="Footprint.html#FP.conflict">FP.conflict</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp11</span> <span class="id">fp12</span>) <span class="id">fp22</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#conflict_union">conflict_union</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">Pre3</span>:<span class="id"><a href="SmileReorder.html#GPre">GPre</a></span> <span class="id">ge</span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>')(<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">id1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#unchanged_content_emp">unchanged_content_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Post1</span>;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GlobalFreelistEq_comm">GlobalFreelistEq_comm</a></span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#entatstep_Glocality">entatstep_Glocality</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> <span class="id">G</span>;<span class="tactic">eauto</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span>;<span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;-<span class="id">tideq0</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G</span> <span class="kwd">as</span> (<span class="id">pc2</span> &amp; <span class="id">entatstep</span> &amp; <span class="id">Post2</span> &amp;<span class="id">sim3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tideq3</span>:<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc2</span> = <span class="id">id1</span>). <span class="tactic">inversion</span> <span class="id">entatstep</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">tideq4</span>:<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc10</span> = <span class="id">id1</span>). <span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">biteq7</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc2</span> = <span class="id"><a href="GlobDefs.html#I">I</a></span>). <span class="tactic">inversion</span> <span class="id">entatstep</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">inv4</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">pc2</span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>;<span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#type_glob_step_elim">type_glob_step_elim</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq1</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc2</span> = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>'). <span class="tactic">inversion</span> <span class="id">entatstep</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">gmeq2</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc10</span> = <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>). <span class="tactic">inversion</span> <span class="id">H7</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">gmeq1</span> <span class="kwd">in</span> <span class="id">Post2</span>. <span class="tactic">rewrite</span> <span class="id">gmeq2</span> <span class="kwd">in</span> <span class="id">Post2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPost_comm">GPost_comm</a></span> <span class="kwd">in</span> <span class="id">Post1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GPre_GEffect_GPost_Rule">GPre_GEffect_GPost_Rule</a></span> <span class="kwd">in</span> <span class="id">Post1</span> <span class="kwd">as</span> <span class="id">Pre4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">gmeq1</span> <span class="kwd">in</span> <span class="id">Pre4</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">gmeq2</span> <span class="kwd">in</span> <span class="id">Pre4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">Pre4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">biteq6</span> <span class="kwd">in</span> <span class="id">Pre4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_Glocality">npnsw_taustar_Glocality</a></span> <span class="kwd">in</span> <span class="id">star1</span> <span class="kwd">as</span> <span class="id">G1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">G1</span> <span class="kwd">as</span> (<span class="id">pc13</span> &amp; <span class="id">star4</span>&amp;<span class="id">Post3</span>&amp;<span class="id">sim4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span>  <span class="id"><a href="SmileReorder.html#npnsw_taustar_I_core_taustar">npnsw_taustar_I_core_taustar</a></span> <span class="kwd">in</span> <span class="id">star4</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">pc1</span>' = ({-|<span class="id">pc1</span>',<span class="id">id1</span>})). <span class="tactic">destruct</span> <span class="id">pc1</span>';<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 1 <span class="kwd">with</span>(<span class="id">fp1</span>:=(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp11</span> <span class="id">fp12</span>));<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span> 2;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#GEffect_fpsmile_disj_GPre_Rule">GEffect_fpsmile_disj_GPre_Rule</a></span> <span class="kwd">in</span> <span class="id">Eff2</span> <span class="kwd">as</span> <span class="id">Pre5</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Footprint.html#FP.emp_never_conflict">FP.emp_never_conflict</a></span> <span class="kwd">in</span> <span class="id">fpconflict1</span> <span class="kwd">as</span> [<span class="id">_</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="TypedSemantics.html#type_step_exists">type_step_exists</a></span> <span class="kwd">in</span> <span class="id">step2</span> <span class="kwd">as</span> [<span class="id">y</span> <span class="id">step2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span>;<span class="tactic">try</span>(<span class="tactic">inversion</span> <span class="id">step2</span>;<span class="tactic">subst</span>;<span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="TypedSemantics.html#core_step_equiv">core_step_equiv</a></span> <span class="kwd">in</span> <span class="id">step2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GPre_comm">GPre_comm</a></span> <span class="kwd">in</span> <span class="id">Pre5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">tideq1</span> <span class="kwd">in</span> <span class="id">Pre5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#npnsw_taustar_diff_thread_sim">npnsw_taustar_diff_thread_sim</a></span> <span class="kwd">in</span> <span class="id">star3</span> <span class="kwd">as</span> <span class="id">sim</span>';<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">eq1</span>:<span class="id">pc20</span> = ({-|<span class="id">pc20</span>,<span class="id">id2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">pc20</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">eq2</span>:<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc1</span>' =<span class="id"><a href="GlobDefs.html#gm">gm</a></span> ({-|<span class="id">pc1</span>',<span class="id">id2</span>})).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eq2</span> <span class="kwd">in</span> <span class="id">Pre5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">sim</span>'. <span class="tactic">rewrite</span> &lt;- <span class="id">eq1</span> <span class="kwd">in</span> <span class="id">sim</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#corestep_Glocality">corestep_Glocality</a></span> <span class="kwd">in</span> <span class="id">step2</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">step2</span> <span class="kwd">as</span> (?&amp;?&amp;<span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>;<span class="tactic">intro</span> <span class="id">contra</span>;<span class="tactic">inversion</span> <span class="id">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NPRace_Race_Config">NPRace_Race_Config</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span> <span class="id">gm</span> <span class="id">ge</span> <span class="id">pc</span> <span class="id">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H1</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> <span class="id"><a href="SmileReorder.html#gm">gm</a></span> <span class="id"><a href="SmileReorder.html#ge">ge</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> <span class="id"><a href="SmileReorder.html#t">t</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPDRF.html#np_race_config">np_race_config</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span> \/ <span class="id"><a href="NPDRF.html#np_star_race_config">np_star_race_config</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="id"><a href="SmileReorder.html#pc">pc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8801')">Proof.</div>
<div class="proofscript" id="proof8801">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id">ge</span>). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invthdp</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>)). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">bO</span>:<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span>). <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="USimDRF.html#np_race_config_base">np_race_config_base</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#np_race_config_np_race_config_base_equiv">np_race_config_np_race_config_base_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="USimDRF.html#np_star_race_config_np_race_config_1_equiv">np_star_race_config_np_race_config_1_equiv</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="USimDRF.html#np_race_config_1">np_race_config_1</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Esimpl</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H5</span>;<span class="tactic">eauto</span>.  <span class="tactic">inversion</span> <span class="id">H3</span>;<span class="tactic">subst</span>;<span class="tactic">auto</span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_npstar_tp_inv">GE_mod_wd_npstar_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">v1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#np_star_glob_star">np_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#np_race_config_base_star_race">np_race_config_base_star_race</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H4</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">H0</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">clear</span> <span class="id">H1</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">ge_init</span> <span class="id">ix</span>) <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NPRace_Race">NPRace_Race</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">NL</span> <span class="id">L</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="id"><a href="SmileReorder.html#NL">NL</a></span> <span class="id"><a href="SmileReorder.html#L">L</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPDRF.html#np_race_prog">np_race_prog</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="DRF.html#race_prog">race_prog</a></span> <span class="id"><a href="SmileReorder.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8802')">Proof.</div>
<div class="proofscript" id="proof8802">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="USimDRF.html#np_race_prog_nprace_prog_equiv">np_race_prog_nprace_prog_equiv</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="USimDRF.html#nprace_prog">nprace_prog</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">gm</span>&amp;<span class="id">ge</span>&amp;<span class="id">pc</span>&amp;<span class="id">init</span>&amp;<span class="id">statement</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">wdge</span>:<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id">ge</span>). <span class="tactic">inversion</span> <span class="id">init</span>;<span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">invthdp</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>)). <span class="tactic">inversion</span> <span class="id">init</span>;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.init_inv">ThreadPool.init_inv</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">gm</span>,<span class="id">ge</span>,<span class="id">pc</span>,(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id">pc</span>);<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="USimDRF.html#np_race_config_0">np_race_config_0</a></span> <span class="kwd">in</span> <span class="id">statement</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="USimDRF.html#np_race_config_1">np_race_config_1</a></span> <span class="kwd">in</span> <span class="id">statement</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<span class="id"><a href="ETrace.html#star">star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">pc</span> <span class="id"><a href="SmileReorder.html#l">l</a></span> <span class="id"><a href="SmileReorder.html#fp">fp</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="USimDRF.html#np_race_config_base">np_race_config_base</a></span> <span class="id">pc</span>' /\ <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">pc</span>' = <span class="id"><a href="GlobDefs.html#O">O</a></span>).    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">statement</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>,<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>,<span class="id">pc</span>;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id">H0</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">init</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FPLemmas.html#star_cons_step">star_cons_step</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="id">eexists</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#GE_mod_wd_npstar_tp_inv">GE_mod_wd_npstar_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">v1</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="SmileReorder.html#np_star_glob_star">np_star_glob_star</a></span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#np_race_config_base_star_race">np_race_config_base_star_race</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv">predict_equiv</a></span> <span class="kwd">as</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#predict_equiv_to_star_race_equiv">predict_equiv_to_star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="PRaceLemmas.html#star_race_equiv">star_race_equiv</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="DRF.html#star_race_config">star_race_config</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="SmileReorder.html#cons_star_star">cons_star_star</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GAST.html#wd_langs">wd_langs</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="InteractionSemantics.html#mod_wd">mod_wd</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span> <span class="id">init</span>;<span class="tactic">clear</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">init</span>;<span class="tactic">clear</span> <span class="id">init</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<span class="tactic">clear</span> <span class="id">H0</span>;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">ge_init</span> <span class="id">ix</span>) <span class="kwd">as</span> [?[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">List.nth_error_In</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>;<span class="tactic">subst</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">End</span> <span class="id"><a href="SmileReorder.html#Race_Proof">Race_Proof</a></span>.<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
