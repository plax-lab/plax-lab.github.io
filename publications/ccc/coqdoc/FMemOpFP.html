<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module FMemOpFP</title>
<meta name="description" content="Documentation of Coq module FMemOpFP" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module FMemOpFP</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="FMemory.html">FMemory</a></span> <span class="id"><a href="MemAux.html">MemAux</a></span> <span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="LDSimDefs.html">LDSimDefs</a></span>.<br/>
<br/>
<br/>
<h2> relations on footprints </h2>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span> := <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span> := <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="LocMapped">LocMapped</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) <span class="id">sls</span> <span class="id">tb</span> <span class="id">tofs</span> : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Loc_Mapped">Loc_Mapped</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">sls</span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">tb</span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tofs</span> = <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#delta">delta</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocMapped">LocMapped</a></span> <span class="id">f</span> <span class="id">sls</span> <span class="id">tb</span> <span class="id">tofs</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="LocsMapped">LocsMapped</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">sls</span> <span class="id">tls</span>: <span class="id"><a href="Footprint.html#Locs.t">Locs.t</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Locs_Mapped">Locs_Mapped</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">tb</span> <span class="id">tofs</span>, <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">tls</span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> <span class="id"><a href="FMemOpFP.html#tofs">tofs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocMapped">LocMapped</a></span> <span class="id">f</span> <span class="id">sls</span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> <span class="id"><a href="FMemOpFP.html#tofs">tofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id">f</span> <span class="id">sls</span> <span class="id">tls</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="emp_locs_mapped">emp_locs_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sls</span>, <span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6309')">Proof.</div>
<div class="proofscript" id="proof6309">
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="fp_mapped">fp_mapped</a></span> (<span class="id">f</span>: <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">fp</span> <span class="id">tfp</span>: <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="cmps_mapped">cmps_mapped</a></span>: <span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span>) (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="reads_mapped">reads_mapped</a></span>: <span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span>) (<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="writes_mapped">writes_mapped</a></span>: <span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span>) (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="frees_mapped">frees_mapped</a></span>: <span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span>) (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>);<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="emp_fp_mapped">emp_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">fp</span>, <span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6310')">Proof.</div>
<div class="proofscript" id="proof6310">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Lemmas about fp mapped </div>
<span class="kwd">Lemma</span> <span class="id"><a name="locs_mapped_union_s">locs_mapped_union_s</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> <span class="id"><a href="FMemOpFP.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sls</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> <span class="id">sls</span>') <span class="id"><a href="FMemOpFP.html#tls">tls</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6311')">Proof.</div>
<div class="proofscript" id="proof6311">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">locs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_mapped_union_s">fp_mapped_union_s</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">fp1</span> <span class="id">tfp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="FMemOpFP.html#fp2">fp2</a></span>) <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6312')">Proof.</div>
<div class="proofscript" id="proof6312">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#locs_mapped_union_s">locs_mapped_union_s</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="locs_mapped_union_t">locs_mapped_union_t</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sls</span> <span class="id">tls1</span> <span class="id">tls2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> <span class="id"><a href="FMemOpFP.html#tls1">tls1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> <span class="id"><a href="FMemOpFP.html#tls2">tls2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#sls">sls</a></span> (<span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="id"><a href="FMemOpFP.html#tls1">tls1</a></span> <span class="id"><a href="FMemOpFP.html#tls2">tls2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6313')">Proof.</div>
<div class="proofscript" id="proof6313">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>|<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>]; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_mapped_union_t">fp_mapped_union_t</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">fp</span> <span class="id">tfp1</span> <span class="id">tfp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp2">tfp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span> <span class="id"><a href="FMemOpFP.html#tfp2">tfp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6314')">Proof.</div>
<div class="proofscript" id="proof6314">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#locs_mapped_union_t">locs_mapped_union_t</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_mapped_union">fp_mapped_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">fp1</span> <span class="id">tfp1</span> <span class="id">fp2</span> <span class="id">tfp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp2">fp2</a></span> <span class="id"><a href="FMemOpFP.html#tfp2">tfp2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemOpFP.html#fp1">fp1</a></span> <span class="id"><a href="FMemOpFP.html#fp2">fp2</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="FMemOpFP.html#tfp1">tfp1</a></span> <span class="id"><a href="FMemOpFP.html#tfp2">tfp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6315')">Proof.</div>
<div class="proofscript" id="proof6315">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#fp_mapped_union_t">fp_mapped_union_t</a></span>; [|<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#FP.union_comm_eq">FP.union_comm_eq</a></span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#fp_mapped_union_s">fp_mapped_union_s</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_incr_locs_mapped">inject_incr_locs_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ls</span> <span class="id">tls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#ls">ls</a></span> <span class="id"><a href="FMemOpFP.html#tls">tls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id">f</span>' <span class="id"><a href="FMemOpFP.html#ls">ls</a></span> <span class="id"><a href="FMemOpFP.html#tls">tls</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6316')">Proof.</div>
<div class="proofscript" id="proof6316">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_incr_fp_mapped">inject_incr_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">fp</span> <span class="id">tfp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id">f</span>' <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6317')">Proof.</div>
<div class="proofscript" id="proof6317">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#inject_incr_locs_mapped">inject_incr_locs_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_mapped_fpG">fp_mapped_fpG</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">fp</span> <span class="id">tfp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">wd_mu</span>: <span class="id">Bset.inject_weak</span>' (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJMU</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b">b</a></span>) = <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEMINJ</span>: <span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#fpG">fpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#fpG">fpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6318')">Proof.</div>
<div class="proofscript" id="proof6318">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 3. <span class="tactic">intros</span> <span class="id">Hfp</span> <span class="id">MAPPED</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MAPPED</span>. <span class="tactic">destruct</span> <span class="id">fp</span>, <span class="id">tfp</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">wd_mu</span>. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">fpG</a></span>, <span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>, <span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>, <span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>, <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">tb</span> [<span class="id">tofs</span> <span class="id">Htfp</span>].<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">Htfp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Htfp</span> <span class="kwd">as</span> [<span class="id">Htfp</span>|[<span class="id">Htfp</span>|[<span class="id">Htfp</span>|<span class="id">Htfp</span>]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">inv</span> <span class="id">cmps_mapped0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">inv</span> <span class="id">reads_mapped0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">inv</span> <span class="id">writes_mapped0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">inv</span> <span class="id">frees_mapped0</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">tb</span> <span class="id">tofs</span> <span class="id">Htfp</span>); <span class="id">inv</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Htmp</span>: <span class="id">exists</span> <span class="id">ofs</span>, <span class="id">cmps</span> <span class="id">b</span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> || (<span class="id">reads</span> <span class="id">b</span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> || (<span class="id">writes</span> <span class="id">b</span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> || <span class="id">frees</span> <span class="id">b</span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hfp</span> <span class="id">b</span> <span class="id">Htmp</span>); <span class="tactic">clear</span> <span class="id">Htmp</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">Hfp</span> <span class="kwd">as</span> [<span class="id">Hfp</span>|<span class="id">Hfp</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="tactic">apply</span> <span class="id">INJMU</span> <span class="kwd">in</span> <span class="id">Hfp</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hfp</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id">inj_range</span>' <span class="kwd">with</span> (<span class="id">b</span>:=<span class="id">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">_</span>); <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">right</span>; <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_freelist">Mem.mi_freelist</a></span>; <span class="tactic">eauto</span>]).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_mapped_LfpG">fp_mapped_LfpG</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">fp</span> <span class="id">tfp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">wd_mu</span>: <span class="id">Bset.inject_weak</span>' (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GENVRANGE</span>: <span class="kwd">forall</span> (<span class="id">b1</span> <span class="id">b2</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#b2">b2</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b1">b1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJMU</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) <span class="id"><a href="FMemOpFP.html#b">b</a></span>) = <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEMINJ</span>: <span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOOVERLAPT</span>: <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>))<br/>
&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HfpG">HfpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span>) <span class="id"><a href="FMemOpFP.html#mu">mu</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#j">j</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#LfpG">LfpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>) <span class="id"><a href="FMemOpFP.html#mu">mu</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> <span class="id"><a href="FMemOpFP.html#tfp">tfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6319')">Proof.</div>
<div class="proofscript" id="proof6319">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 5. <span class="tactic">intros</span> <span class="id">Hfp</span> <span class="id">MAPPED</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Hfp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">HtfpG</span>: <span class="id"><a href="LDSimDefs.html#fpG">fpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id">tm</span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id">mu</span>) <span class="id">tfp</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#fp_mapped_fpG">fp_mapped_fpG</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">wd_mu</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MAPPED</span>. <span class="tactic">destruct</span> <span class="id">fp</span>, <span class="id">tfp</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;[<span class="id">inv</span> <span class="id">cmps_mapped0</span>|<br/>
&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">reads_mapped0</span>|<br/>
&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">writes_mapped0</span>|<br/>
&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">frees_mapped0</span>].<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">tb</span> <span class="id">tofs</span> <span class="id">SHARED</span> <span class="id">BELONGSTO</span>; <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">BELONGSTO</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">b</span>). <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">clear</span>. <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">cbv</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">INJMU</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">cbv</span> <span class="kwd">in</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="id">inv</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_freelist">Mem.mi_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id">NOOVERLAPT</span>; <span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">tb</span> <span class="id">tofs</span> <span class="id">SHARED</span> <span class="id">BELONGSTO</span>; <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">BELONGSTO</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">b</span>). <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>; <span class="id">cbv</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">x</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>] =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">INJMU</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">cbv</span> <span class="kwd">in</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="id">inv</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_freelist">Mem.mi_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id">NOOVERLAPT</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">tb</span> <span class="id">tofs</span> <span class="id">SHARED</span> <span class="id">BELONGSTO</span>; <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">BELONGSTO</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">b</span>). <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>; <span class="id">cbv</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">x</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>] =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">INJMU</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">cbv</span> <span class="kwd">in</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="id">inv</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_freelist">Mem.mi_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id">NOOVERLAPT</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">tb</span> <span class="id">tofs</span> <span class="id">SHARED</span> <span class="id">BELONGSTO</span>; <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">BELONGSTO</span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">b</span>). <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>; <span class="id">cbv</span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">x</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>] =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">INJMU</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="id">cbv</span> <span class="kwd">in</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="id">inv</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_freelist">Mem.mi_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id">NOOVERLAPT</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<h1> Footprints of memory operations </h1>
<div class="doc">We define footprints for the following memory interfaces:
    - <span class="bracket"><span class="id">alloc</span></span>
    - <span class="bracket"><span class="id">free</span></span>
    - <span class="bracket"><span class="id">load</span></span>
    - <span class="bracket"><span class="id">store</span></span>
    - <span class="bracket"><span class="id">loadv</span></span>
    - <span class="bracket"><span class="id">storev</span></span>
    - <span class="bracket"><span class="id">loadbytes</span></span>
    - <span class="bracket"><span class="id">storebytes</span></span>
    - <span class="bracket"><span class="id">free_list</span></span>
    - <span class="bracket"><span class="id">drop_perm</span></span>
    - <span class="bracket"><span class="id">valid_pointer</span></span>
    - <span class="bracket"><span class="id">weak_valid_Pointer</span></span>
 </div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="locset">locset</a></span> := <span class="id"><a href="Footprint.html#Locs.t">Locs.t</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empls">empls</a></span> := <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="FP">FP</a></span> := <span class="id"><a href="Footprint.html#FP.Build_t">FP.Build_t</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">TODO</span></span> move to LDSimDefs </div>
<span class="kwd">Lemma</span> <span class="id"><a name="emp_loc_match">emp_loc_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">ls</span>, <span class="id"><a href="Injections.html#LocMatch">LocMatch</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span> <span class="id"><a href="FMemOpFP.html#ls">ls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6320')">Proof.</div>
<div class="proofscript" id="proof6320">
 <span class="tactic">intros</span>. <span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="range_locset">range_locset</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">size</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#locset">locset</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">b</span>' <span class="id">ofs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id">b</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id">ofs</span>' &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span>' (<span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#size">size</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_loc">range_locset_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">size</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#size">size</a></span>) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#size">size</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6321')">Proof.</div>
<div class="proofscript" id="proof6321">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span>, <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b</span>'); [<span class="tactic">subst</span> | <span class="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">auto</span>|]. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_gt_dec">Z_le_gt_dec</a></span>. <span class="tactic">omega</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_dec">Z_lt_dec</a></span>. <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_gt_dec">Z_le_gt_dec</a></span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_dec">Z_lt_dec</a></span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_inj_fp_mapped">range_locset_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">size</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#LocsMapped">LocsMapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#size">size</a></span>) (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) <span class="id"><a href="FMemOpFP.html#size">size</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6322')">Proof.</div>
<div class="proofscript" id="proof6322">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>, <span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>, <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>; <span class="tactic">auto</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">range_locset_loc</span> <span class="id">range_locset_inj_fp_mapped</span>.<br/>
<br/>
<br/>
<h2> ALLOC </h2>
<div class="doc">The footprint for allocation is wierd. Since it requires the 
    highest priority which is called "frees".... </div>
<span class="kwd">Definition</span> <span class="id"><a name="uncheck_alloc_fp">uncheck_alloc_fp</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="kwd">fun</span> <span class="id">b</span>' <span class="id">_</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id">b</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="alloc_fp">alloc_fp</a></span> (<span class="id">m</span>: <span class="id"><a href="FMemory.html#mem">mem</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_fp_loc">alloc_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> (<span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>)) <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="FMemOpFP.html#m">m</a></span>.(<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6323')">Proof.</div>
<div class="proofscript" id="proof6323">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span>, <span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">Locs.unfolds</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intro</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_parallel_inj_fp_mapped">alloc_parallel_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> (<span class="id"><a href="FMemOpFP.html#lo">lo</a></span>+<span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) (<span class="id"><a href="FMemOpFP.html#hi">hi</a></span>+<span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6324')">Proof.</div>
<div class="proofscript" id="proof6324">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="id">Locs.unfolds</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">Locs.unfolds</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id">tofs</span> - <span class="id">delta</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_LfpG">alloc_LfpG</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">tm</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="FMemOpFP.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#LfpG">LfpG</a></span> (<span class="id"><a href="FMemory.html#Mem.freelist">Mem.freelist</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span>) <span class="id"><a href="FMemOpFP.html#mu">mu</a></span> <span class="id"><a href="FMemOpFP.html#fp">fp</a></span> (<span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6325')">Proof.</div>
<div class="proofscript" id="proof6325">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span>, <span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_loc_match">emp_loc_match</a></span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#alloc_fp_loc">alloc_fp_loc</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>; <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">fpG</a></span>. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span>, <span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>, <span class="id"><a href="FMemOpFP.html#alloc_fp">alloc_fp</a></span>, <span class="id"><a href="FMemOpFP.html#uncheck_alloc_fp">uncheck_alloc_fp</a></span>, <span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.blocks">Locs.blocks</a></span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span>, <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>. <span class="id">right</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="id">eexists</span>. <span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.nextblock">Mem.nextblock</a></span>, <span class="id"><a href="MemAux.html#get_block">get_block</a></span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">alloc_fp_loc</span> <span class="id">alloc_parallel_inj_fp_mapped</span>. <br/>
&nbsp;&nbsp;<br/>
<br/>
<h2> FREE </h2>
<span class="kwd">Definition</span> <span class="id"><a name="free_fp">free_fp</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> (<span class="id"><a href="FMemOpFP.html#hi">hi</a></span> - <span class="id"><a href="FMemOpFP.html#lo">lo</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_fp_loc">free_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> (<span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6326')">Proof.</div>
<div class="proofscript" id="proof6326">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_minus">Zplus_minus</a></span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">free_fp_loc</span>.<br/>
<br/>
<br/>
<h2> LOAD </h2>
<span class="kwd">Definition</span> <span class="id"><a name="load_fp">load_fp</a></span> (<span class="id">chunk</span>: <span class="id"><a href="AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>)) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="load_fp_loc">load_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> (<span class="id"><a href="FMemOpFP.html#load_fp">load_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6327')">Proof.</div>
<div class="proofscript" id="proof6327">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#load_fp">load_fp</a></span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">load_fp_loc</span>.<br/>
<br/>
<br/>
<h2> STORE </h2>
<span class="kwd">Definition</span> <span class="id"><a name="store_fp">store_fp</a></span> (<span class="id">chunk</span>: <span class="id"><a href="AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>)) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_fp_loc">store_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> (<span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6328')">Proof.</div>
<div class="proofscript" id="proof6328">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_inj_fp_mapped">store_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6329')">Proof.</div>
<div class="proofscript" id="proof6329">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span>. <span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">STORE</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_fp_loc</span> <span class="id">store_inj_fp_mapped</span>.<br/>
<br/>
<br/>
<h2> LOADV </h2>
<span class="kwd">Definition</span> <span class="id"><a name="loadv_fp">loadv_fp</a></span> (<span class="id">chunk</span>: <span class="id"><a href="AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span>: <span class="id"><a href="Values.html#val">val</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="FMemOpFP.html#addr">addr</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="FMemOpFP.html#load_fp">load_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="FMemOpFP.html#empfp">empfp</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadv_fp_loc">loadv_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> (<span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6330')">Proof.</div>
<div class="proofscript" id="proof6330">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadv_inj_fp_mapped">loadv_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemOpFP.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6331')">Proof.</div>
<div class="proofscript" id="proof6331">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadv_fp">loadv_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">eauto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.load_valid_access">Mem.load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">loadv_fp_loc</span>.<br/>
<br/>
<br/>
<h2> STOREV </h2>
<span class="kwd">Definition</span> <span class="id"><a name="storev_fp">storev_fp</a></span> (<span class="id">chunk</span>: <span class="id"><a href="AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span>: <span class="id"><a href="Values.html#val">val</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="FMemOpFP.html#addr">addr</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="FMemOpFP.html#store_fp">store_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="FMemOpFP.html#empfp">empfp</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_fp_loc">storev_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> (<span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6332')">Proof.</div>
<div class="proofscript" id="proof6332">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storev_inj_fp_mapped">storev_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="FMemOpFP.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span> <span class="id"><a href="FMemOpFP.html#chunk">chunk</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6333')">Proof.</div>
<div class="proofscript" id="proof6333">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storev_fp">storev_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; [<span class="tactic">tauto</span>|]. <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storev_fp_loc</span> <span class="id">storev_inj_fp_mapped</span>.<br/>
<br/>
<h2> LOADBYTES </h2>
<span class="kwd">Definition</span> <span class="id"><a name="loadbytes_fp">loadbytes_fp</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#n">n</a></span>) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadbytes_fp_loc">loadbytes_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span> (<span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#n">n</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6334')">Proof.</div>
<div class="proofscript" id="proof6334">
 <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="loadbytes_inj_fp_mapped">loadbytes_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">bytes</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="FMemOpFP.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="FMemOpFP.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="FMemOpFP.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>))) <span class="id"><a href="FMemOpFP.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6335')">Proof.</div>
<div class="proofscript" id="proof6335">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">LOADBYTES</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#loadbytes_fp">loadbytes_fp</a></span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.loadbytes_range_perm">Mem.loadbytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>). <span class="tactic">omega</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">omega</span>. <br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">loadbytes_fp_loc</span> <span class="id">loadbytes_inj_fp_mapped</span>.<br/>
<br/>
<br/>
<h2> STOREBYTES </h2>
<span class="kwd">Definition</span> <span class="id"><a name="storebytes_fp">storebytes_fp</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#n">n</a></span>) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storebytes_fp_loc">storebytes_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span> (<span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> <span class="id"><a href="FMemOpFP.html#n">n</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">b</span>' = <span class="id"><a href="FMemOpFP.html#b">b</a></span> /\ <span class="id">ofs</span>' &gt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id">ofs</span>' &lt; <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> + <span class="id"><a href="FMemOpFP.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6336')">Proof.</div>
<div class="proofscript" id="proof6336">
 <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storebytes_inj_fp_mapped">storebytes_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span> <span class="id">m</span>' <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) <span class="id"><a href="FMemOpFP.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="FMemOpFP.html#bytes">bytes</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>))) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="FMemOpFP.html#bytes">bytes</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6337')">Proof.</div>
<div class="proofscript" id="proof6337">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">delta</span>. <span class="tactic">intros</span> <span class="id">MEMINJ</span> <span class="id">STOREBYTES</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#storebytes_fp">storebytes_fp</a></span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span>-<span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">bytes</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>). <br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">clear</span>. <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zgt_pos_0">Zgt_pos_0</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_succ_nat">Pos.of_succ_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">bytes</span>))). <span class="tactic">omega</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> |]. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storebytes_fp_loc</span> <span class="id">storebytes_inj_fp_mapped</span>.<br/>
<br/>
<br/>
<h2> FREE_LIST </h2>
<span class="kwd">Fixpoint</span> <span class="id"><a name="free_list_fp">free_list_fp</a></span> (<span class="id">bl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="FMemOpFP.html#bl">bl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="FMemOpFP.html#empfp">empfp</a></span><br/>
&nbsp;&nbsp;| (<span class="id">b</span>,<span class="id">lo</span>,<span class="id">hi</span>) :: <span class="id">bl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> (<span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) (<span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span> <span class="id"><a href="FMemOpFP.html#bl">bl</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_fp_loc">free_list_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bl</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> (<span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span> <span class="id"><a href="FMemOpFP.html#bl">bl</a></span>)) <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="FMemOpFP.html#b">b</a></span>,<span class="id"><a href="FMemOpFP.html#lo">lo</a></span>,<span class="id"><a href="FMemOpFP.html#hi">hi</a></span>) <span class="id"><a href="FMemOpFP.html#bl">bl</a></span> /\ <span class="id"><a href="FMemOpFP.html#lo">lo</a></span> &lt;= <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> /\ <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> &lt; <span class="id"><a href="FMemOpFP.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6338')">Proof.</div>
<div class="proofscript" id="proof6338">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">bl</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">_</span>&amp;<span class="id">_</span>&amp;<span class="id">H</span>&amp;<span class="id">_</span>). <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> ((<span class="id">b0</span>, <span class="id">lo0</span>), <span class="id">hi0</span>).<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="id">b0</span> <span class="id">lo0</span> (<span class="id">hi0</span> - <span class="id">lo0</span>) <span class="id">b</span> <span class="id">ofs</span>) <span class="kwd">as</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>, <span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span>, <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>, <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>. <span class="tactic">rewrite</span> <span class="id">IHbl</span>, <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">IHbl</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">H</span> ; [<span class="id">exists</span> <span class="id">lo0</span>, <span class="id">hi0</span>| <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">lo</span>'&amp;<span class="id">hi</span>'&amp;<span class="id">H_in</span>&amp;<span class="id">H_ofs</span>); <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">lo</span>' &amp; <span class="id">hi</span>' &amp; [<span class="id">H</span>|<span class="id">H</span>] &amp; <span class="id">Hofs</span> &amp; <span class="id">Hofs</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">right</span>; <span class="tactic">eauto</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_fp_frees">free_list_fp_frees</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bl</span>, <span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span> <span class="id"><a href="FMemOpFP.html#bl">bl</a></span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.Build_t">FP.Build_t</a></span> <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span> <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span> <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span> (<span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span> <span class="id"><a href="FMemOpFP.html#bl">bl</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6339')">Proof.</div>
<div class="proofscript" id="proof6339">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#free_list_fp">free_list_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">bl</span>. <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">empfp</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">hi</span>] <span class="id">lo</span>]. <span class="tactic">rewrite</span> <span class="id">IHbl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#free_fp">free_fp</a></span>, <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">f_equal</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">free_list_fp_loc</span> <span class="id">free_list_fp_frees</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<h2> DROP </h2>
<div class="doc">Is drop used in step relations? 
    It seems drop is only used in constructing initial memory. </div>
<br/>
<h2> VALID_POINTER </h2>
<span class="kwd">Definition</span> <span class="id"><a name="valid_pointer_fp">valid_pointer_fp</a></span> (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#FP">FP</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> 1) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valid_pointer_fp_loc">valid_pointer_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id">b</span>' /\ <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> = <span class="id">ofs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6340')">Proof.</div>
<div class="proofscript" id="proof6340">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>; (<span class="tactic">split</span>; [<span class="tactic">intuition</span> | <span class="tactic">omega</span>]).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6341')">Proof.</div>
<div class="proofscript" id="proof6341">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> (<span class="id">m</span>: <span class="id"><a href="FMemory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="FMemOpFP.html#footprint">footprint</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="FMemOpFP.html#FP">FP</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">range_locset</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> - 1) 2) <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span> <span class="id"><a href="FMemOpFP.html#empls">empls</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_pointer_fp_loc">weak_valid_pointer_fp_loc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)) <span class="id">b</span>' <span class="id">ofs</span>' &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id">b</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">ofs</span>' = <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id">ofs</span>' = <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> \/ <span class="id">ofs</span>' = <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> - 1))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6342')">Proof.</div>
<div class="proofscript" id="proof6342">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>); <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="id">left</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">try</span> <span class="tactic">omega</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> [<span class="id">H</span>'|<span class="id">H</span>']]; <span class="tactic">intuition</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="id">right</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span>|<span class="tactic">try</span> <span class="tactic">omega</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intuition</span>|<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> [<span class="id">H</span>'|<span class="id">H</span>']]; <span class="tactic">intuition</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_inj_fp_mapped">weak_valid_inj_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6343')">Proof.</div>
<div class="proofscript" id="proof6343">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>, <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>, 2 <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>, 2 <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)) <span class="id">eqn</span>:<span class="id">VALID</span>.<br/>
&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_inject">Mem.valid_pointer_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="tactic">discriminate</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span> <span class="id">tb</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_inj_valid_fp_mapped">weak_valid_inj_valid_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6344')">Proof.</div>
<div class="proofscript" id="proof6344">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>, <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)) <span class="id">eqn</span>:<span class="id">VALID</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA</span>: 0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>. <span class="id">erewrite</span> <span class="id">H0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TOFS</span>: 0 &lt;= <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span> &lt;= <span class="id"><a href="Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span>. <span class="id">erewrite</span> <span class="id">H0</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; [<span class="tactic">eauto</span>|<span class="tactic">eauto</span>| |]. <span class="id">instantiate</span> (1:=<span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#emp_locs_mapped">emp_locs_mapped</a></span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FMemOpFP.html#Loc_Mapped">Loc_Mapped</a></span> <span class="kwd">with</span> <span class="id">b</span> (<span class="id">tofs</span> - <span class="id">delta</span>) <span class="id">delta</span>; [|<span class="tactic">auto</span>|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FMemOpFP.html#range_locset_loc">range_locset_loc</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valid_inj_weak_valid_fp_mapped">valid_inj_weak_valid_fp_mapped</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="FMemOpFP.html#m">m</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#f">f</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FMemOpFP.html#tb">tb</a></span>, <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemOpFP.html#fp_mapped">fp_mapped</a></span> <span class="id"><a href="FMemOpFP.html#f">f</a></span> (<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span> <span class="id"><a href="FMemOpFP.html#tm">tm</a></span> <span class="id"><a href="FMemOpFP.html#tb">tb</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="FMemOpFP.html#ofs">ofs</a></span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="FMemOpFP.html#delta">delta</a></span>)))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6345')">Proof.</div>
<div class="proofscript" id="proof6345">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#weak_valid_pointer_fp">weak_valid_pointer_fp</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_inject">Mem.valid_pointer_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_inject_no_overflow">Mem.valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="FMemory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="FMemory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 1. <span class="tactic">rewrite</span> 2 <span class="id"><a href="Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="tactic">at</span> 1; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_inj_fp_mapped">valid_pointer_inj_fp_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ofs</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
