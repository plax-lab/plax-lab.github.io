<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module infp</title>
<meta name="description" content="Documentation of Coq module infp" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module infp</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Equality.html">Coq.Program.Equality</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetAVL.html">FSetAVL</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.Orders.html">Orders</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Mergesort.html">Mergesort</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Ordered.html">Ordered</a></span> <span class="id"><a href="Errors.html">Errors</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Events.html">Events</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Switch.html">Switch</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="LDSimDefs_local.html">LDSimDefs_local</a></span> <span class="id"><a href="LDSim_local.html">LDSim_local</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="IS_local.html">IS_local</a></span> <span class="id"><a href="val_casted.html">val_casted</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Op_fp.html">Op_fp</a></span> <span class="id"><a href="Cminor_op_footprint.html">Cminor_op_footprint</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span>  <span class="id"><a href="Cop.html">Cop</a></span> <span class="id"><a href="Cop_fp_local.html">Cop_fp_local</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="empfp">empfp</a></span>:=<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="footprint">footprint</a></span>:=<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>.<br/>
<span class="kwd">Ltac</span> <span class="id">inv_eq</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> , <span class="id">H1</span>: ?<span class="id">P</span> |- <span class="id">_</span> =&gt; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?; <span class="tactic">inversion</span> <span class="id">H</span> ;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span>, <span class="id">H1</span>:<span class="id">context</span> [ ?<span class="id">P</span> ] |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:?<span class="id">P</span> = ?<span class="id">Q</span> |- <span class="id">context</span> [ ?<span class="id">P</span> ] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">subst</span>;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Hsimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>:?<span class="id">a</span>,<span class="id">H2</span>:?<span class="id">a</span>-&gt;?<span class="id">b</span>|-<span class="id">_</span>=&gt;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">H1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>/\<span class="id">_</span>|-<span class="id">_</span>=&gt; <span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>|-<span class="id">_</span>=&gt;<span class="tactic">destruct</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">Esimpl</span>:=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>/\<span class="id">_</span>=&gt;<span class="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>:<span class="id">_</span>|-<span class="id">exists</span> <span class="id">_</span>,<span class="id">_</span>=&gt;<span class="id">eexists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="in_fp">in_fp</a></span> (<span class="id">b</span>:<span class="id"><a href="Values.html#block">block</a></span>)(<span class="id">ofs</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)(<span class="id">fp</span>:<span class="id"><a href="infp.html#footprint">footprint</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> \/<br/>
&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>\/<br/>
&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> \/<br/>
&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="in_fps">in_fps</a></span> (<span class="id">b</span>:<span class="id"><a href="Values.html#block">block</a></span>)(<span class="id">ofs</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)(<span class="id">fp</span> <span class="id">fp</span>':<span class="id"><a href="infp.html#footprint">footprint</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">fp</span>'.(<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.reads">FP.reads</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">fp</span>'.(<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>  -&gt; <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.writes">FP.writes</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">fp</span>'.(<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>  -&gt; <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.cmps">FP.cmps</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>) /\<br/>
&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id">fp</span>'.(<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>  -&gt; <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="id"><a href="infp.html#fp">fp</a></span>.(<span class="id"><a href="Footprint.html#FP.frees">FP.frees</a></span>) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_empfp">in_empfp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6986')">Proof.</div>
<div class="proofscript" id="proof6986">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fp">in_fp</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[|[|]]];<span class="id">inv</span> <span class="id">H</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="in_fp_split">in_fp_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> \/ <span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6987')">Proof.</div>
<div class="proofscript" id="proof6987">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp1</span>,<span class="id">fp2</span>; <span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fp">in_fp</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[|[|]]];<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [];<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="in_fp_union">in_fp_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6988')">Proof.</div>
<div class="proofscript" id="proof6988">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp1</span>,<span class="id">fp2</span>;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fp">in_fp</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[|[|]]];<span class="tactic">rewrite</span> <span class="id">H</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="in_fps_union">in_fps_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">fp1</span> <span class="id">fp1</span>' <span class="id">fp2</span> <span class="id">fp2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> <span class="id">fp1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span> <span class="id">fp2</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fp1</span>' <span class="id">fp2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6989')">Proof.</div>
<div class="proofscript" id="proof6989">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp1</span>,<span class="id">fp2</span>;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fp">in_fp</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="kwd">in</span> *;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">Hsimpl</span>;<span class="id">Esimpl</span>;<span class="tactic">intros</span>;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_pointer_block_eq">weak_valid_pointer_block_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">m</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> (<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id">b</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#b">b</a></span> = <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6990')">Proof.</div>
<div class="proofscript" id="proof6990">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span>,<span class="id"><a href="infp.html#in_fp">in_fp</a></span>,<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>;<span class="id">inv_eq</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>,<span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[|[|]]];<span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [|[|]];<span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> *;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="in_fp_subset">in_fp_subset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">fp1</span> <span class="id">fp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="infp.html#fp1">fp1</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fp">in_fp</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6991')">Proof.</div>
<div class="proofscript" id="proof6991">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fp1</span>,<span class="id">fp2</span>;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fp">in_fp</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.subset">Locs.subset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [|[|[|]]];<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="in_fps_emp">in_fps_emp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp">fp</a></span> <span class="id"><a href="infp.html#empfp">empfp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6992')">Proof.</div>
<div class="proofscript" id="proof6992">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="tactic">intros</span>;<span class="id">Esimpl</span>;<span class="tactic">intro</span>;<span class="id">inv</span> <span class="id">H</span>.<br/>
Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="fp_match">fp_match</a></span> <span class="id">bound</span> (<span class="id">fp</span> <span class="id">tfp</span>:<span class="id"><a href="infp.html#footprint">footprint</a></span>):<span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#bound">bound</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#in_fps">in_fps</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="id"><a href="infp.html#fp">fp</a></span> <span class="id"><a href="infp.html#tfp">tfp</a></span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fp_match_union">fp_match_union</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">fp</span> <span class="id">tfp</span> <span class="id">fp2</span> <span class="id">tfp2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> <span class="id"><a href="infp.html#fp">fp</a></span> <span class="id"><a href="infp.html#tfp">tfp</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span> <span class="id"><a href="infp.html#tfp2">tfp2</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="infp.html#fp">fp</a></span> <span class="id"><a href="infp.html#fp2">fp2</a></span>)(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="infp.html#tfp">tfp</a></span> <span class="id"><a href="infp.html#tfp2">tfp2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6993')">Proof.</div>
<div class="proofscript" id="proof6993">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="infp.html#in_fps_union">in_fps_union</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="weak_valid_pointer_eq">weak_valid_pointer_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.Build_t">FP.cmps</a></span>:= <span class="kwd">if</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> <span class="kwd">then</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span> 1 <span class="kwd">else</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="infp.html#b">b</a></span> (<span class="id"><a href="infp.html#ofs">ofs</a></span>-1) 2 ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP.reads</span>:=<span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP.writes</span>:=<span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FP.frees</span>:=<span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6994')">Proof.</div>
<div class="proofscript" id="proof6994">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span>,<span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="range_locset_belongsto_1">range_locset_belongsto_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="infp.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>') 1) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="id"><a href="infp.html#b">b</a></span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>' -1) 2) <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6995')">Proof.</div>
<div class="proofscript" id="proof6995">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>,<span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>,<span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">try</span> <span class="id">Omega.omega</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>,<span class="id"><a href="Coqlib.html#zlt">zlt</a></span>;<span class="tactic">try</span> <span class="id">Omega.omega</span>;<span class="tactic">auto</span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="cmpu_fp_infps">cmpu_fp_infps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">c</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v1</span>' <span class="id">v2</span>' <span class="id">x</span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DOMAIN</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="infp.html#b">b</a></span> <span class="id"><a href="infp.html#ge">ge</a></span>-&gt; <span class="id"><a href="infp.html#f">f</a></span> <span class="id"><a href="infp.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="infp.html#b">b</a></span>,0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IMAGE</span>: <span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<span class="id"><a href="infp.html#f">f</a></span> <span class="id"><a href="infp.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="infp.html#b2">b2</a></span>,<span class="id"><a href="infp.html#delta">delta</a></span>) -&gt; <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="infp.html#b2">b2</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> -&gt; <span class="id"><a href="infp.html#b1">b1</a></span> = <span class="id"><a href="infp.html#b2">b2</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="infp.html#f">f</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id">m</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="infp.html#f">f</a></span> <span class="id"><a href="infp.html#v1">v1</a></span> <span class="id">v1</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="infp.html#f">f</a></span> <span class="id"><a href="infp.html#v2">v2</a></span> <span class="id">v2</span>'-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#option_map">option_map</a></span> <span class="id"><a href="Values.html#Val.of_bool">Val.of_bool</a></span> (<span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="infp.html#m">m</a></span>) <span class="id"><a href="infp.html#c">c</a></span> <span class="id"><a href="infp.html#v1">v1</a></span> <span class="id"><a href="infp.html#v2">v2</a></span>) =  <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="infp.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#option_map">option_map</a></span> <span class="id"><a href="Values.html#Val.of_bool">Val.of_bool</a></span> (<span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>') <span class="id"><a href="infp.html#c">c</a></span> <span class="id">v1</span>' <span class="id">v2</span>') =<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="infp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="infp.html#fp_match">fp_match</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> (<span class="id"><a href="Cminor_op_footprint.html#cmpu_fp">cmpu_fp</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#c">c</a></span> <span class="id"><a href="infp.html#v1">v1</a></span> <span class="id"><a href="infp.html#v2">v2</a></span>)(<span class="id"><a href="Cminor_op_footprint.html#cmpu_fp">cmpu_fp</a></span> <span class="id">m</span>' <span class="id"><a href="infp.html#c">c</a></span> <span class="id">v1</span>' <span class="id">v2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6996')">Proof.</div>
<div class="proofscript" id="proof6996">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="infp.html#fp_match">fp_match</a></span>,<span class="id"><a href="Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span>,<span class="id"><a href="Cminor_op_footprint.html#cmpu_fp">cmpu_fp</a></span>,<span class="id"><a href="ValFP.html#cmpu_bool_fp_total">ValFP.cmpu_bool_fp_total</a></span> <span class="kwd">in</span> *;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H1</span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> ;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Val.cmp_different_blocks</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="id">Esimpl</span>;<span class="tactic">simpl</span>;<span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> *  |- .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">eapply</span> <span class="id">DOMAIN</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">R2</span>;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">R2</span>;<span class="id">inv</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)) <span class="id">eqn</span>:?;<span class="tactic">simpl</span>;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> [];<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>;<span class="tactic">split</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> -1 &lt;= <span class="id">ofs</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>+1 = <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> -1 +2). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H5</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> ;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Val.cmp_different_blocks</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemOpFP.html#weak_valid_pointer_fp">MemOpFP.weak_valid_pointer_fp</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#valid_pointer_fp">FMemOpFP.valid_pointer_fp</a></span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?; <span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="id">Esimpl</span>;<span class="tactic">simpl</span>;<span class="tactic">intro</span>;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">eapply</span> <span class="id">DOMAIN</span> <span class="kwd">in</span> <span class="id">H4</span> <span class="kwd">as</span> <span class="id">R</span>;<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)) <span class="id">eqn</span>:?;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">eqn</span>:?;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> -1 &lt;= <span class="id">ofs</span>). <span class="id">OmegaPlugin.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zle">zle</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>+1 = <span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> -1 +2). <span class="id">Omega.omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">H2</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heqb1</span> <span class="kwd">in</span> <span class="id">Heqb3</span>. <span class="id">inv</span> <span class="id">Heqb3</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>! <span class="id"><a href="infp.html#weak_valid_pointer_eq">weak_valid_pointer_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>;<span class="tactic">simpl</span>;<span class="id">fold</span> <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Footprint.html#Locs.locs_union_emp">Locs.locs_union_emp</a></span>. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;[|<span class="tactic">destruct</span> <span class="id"><a href="Values.html#Val.cmp_different_blocks">Val.cmp_different_blocks</a></span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="infp.html#in_fps_emp">in_fps_emp</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">unfold</span> <span class="id"><a href="infp.html#in_fps">in_fps</a></span>;<span class="tactic">simpl</span>;<span class="id">Esimpl</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b</span>=<span class="id">b3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">eqn</span>:?;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H1</span>;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (  <span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id">b3</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs0</span> (<span class="id"><a href="Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>)))) <span class="id">eqn</span>:?;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H1</span>;   <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b3</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R</span> <span class="kwd">in</span> <span class="id">H0</span>;<span class="id">inv</span> <span class="id">H0</span>;<span class="tactic">rewrite</span> <span class="id">R</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b</span>) ;<span class="tactic">try</span> <span class="id">contradiction</span>;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>! <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="infp.html#range_locset_belongsto_1">range_locset_belongsto_1</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)) <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>' <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs0</span>)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs0</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="infp.html#range_locset_belongsto_1">range_locset_belongsto_1</a></span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id"><a href="Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs0</span>)) <span class="id">eqn</span>:?;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">Heqb1</span>;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H5</span>;<span class="id">inv</span> <span class="id">H5</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#Locs.union">Locs.union</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="kwd">as</span> []; <span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H5</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">rewrite</span> <span class="id">H5</span> <span class="kwd">in</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span>;<span class="id">left</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span> <span class="kwd">in</span> <span class="id">H0</span> <span class="kwd">as</span> ?;<span class="tactic">eauto</span>;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>;<span class="tactic">eauto</span>;<span class="tactic">intro</span> <span class="id">R</span>;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">R</span>;<span class="id">inv</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#belongsto_union">belongsto_union</a></span>;<span class="id">right</span>;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="FMemOpFP.html#range_locset">FMemOpFP.range_locset</a></span>,<span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Values.html#eq_block">eq_block</a></span>;<span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unmapped_closed_alloc_1">unmapped_closed_alloc_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Hm</span>' <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id"><a href="infp.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> <span class="id"><a href="infp.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id"><a href="infp.html#lo">lo</a></span> <span class="id"><a href="infp.html#hi">hi</a></span> = (<span class="id">Hm</span>', <span class="id"><a href="infp.html#b">b</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id">Hm</span>' <span class="id"><a href="infp.html#Lm">Lm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6997')">Proof.</div>
<div class="proofscript" id="proof6997">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;2: <span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unmapped_closed_alloc_2">unmapped_closed_alloc_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">Hm</span> <span class="id">Lm</span> <span class="id">Lm</span>' <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id"><a href="infp.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TVALID</span>: <span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>,  <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> <span class="id"><a href="infp.html#b0">b0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGMU</span>: <span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> <span class="id"><a href="infp.html#lo">lo</a></span> <span class="id"><a href="infp.html#hi">hi</a></span> = (<span class="id">Lm</span>', <span class="id"><a href="infp.html#b">b</a></span>)-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id"><a href="infp.html#Hm">Hm</a></span> <span class="id">Lm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6998')">Proof.</div>
<div class="proofscript" id="proof6998">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">resvalid</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
<div class="doc">valid blocks </div>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="infp.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="infp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="infp.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>,<span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="infp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_alloc">Mem.valid_block_alloc</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m1</span> <span class="id"><a href="infp.html#x">x</a></span>), <span class="id">H</span>': <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> ?<span class="id">S</span> <span class="id"><a href="infp.html#x">x</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> ?<span class="id">m2</span> <span class="id"><a href="infp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? <span class="id">X</span>; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">X</span>; <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span><br/>
<div class="doc">Mem inv </div>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.store">Mem.store</a></span> <span class="id">_</span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#store_val_inject_unmapped_closed_preserved">MemClosures_local.store_val_inject_unmapped_closed_preserved</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#free_inject_unmapped_closed_preserved">MemClosures_local.free_inject_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>);  <span class="tactic">try</span> <span class="id">eassumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">compute</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>); <span class="tactic">try</span> <span class="tactic">omega</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span> <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>, <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H2</span>: <span class="id"><a href="Memory.html#Mem.alloc">Mem.alloc</a></span> ?<span class="id">m1</span>' <span class="id">_</span> <span class="id">_</span> = (?<span class="id">m2</span>', <span class="id">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">H3</span>: <span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id">_</span> ?<span class="id">m2</span> ?<span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_unmapped_closed_preserved">MemClosures_local.unchanged_on_unmapped_closed_preserved</a></span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="freelist_free_unmapped_closed">freelist_free_unmapped_closed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">mu</span> (<span class="id">ge</span>:<span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="infp.html#F1">F1</a></span> <span class="id"><a href="infp.html#V1">V1</a></span>)(<span class="id">tge</span>:<span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="infp.html#F2">F2</a></span> <span class="id"><a href="infp.html#V2">V2</a></span>) <span class="id">Lm</span> <span class="id">f0</span> <span class="id">sp</span> <span class="id">l</span> (<span class="id">m</span> <span class="id">m</span>' <span class="id">x</span> : <span class="id"><a href="Memory.html#mem">mem</a></span>) <span class="id">tfn</span> (<span class="id">z</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> <span class="id"><a href="infp.html#sp">sp</a></span> <span class="id"><a href="infp.html#z">z</a></span> <span class="id"><a href="infp.html#tfn">tfn</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="infp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#proper_mu">proper_mu</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> <span class="id"><a href="infp.html#tge">tge</a></span> <span class="id"><a href="infp.html#f0">f0</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="infp.html#mu">mu</a></span>) <span class="id"><a href="infp.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> <span class="id"><a href="infp.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="infp.html#sp">sp</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="infp.html#ge">ge</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="infp.html#ge">ge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="infp.html#tge">tge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id"><a href="infp.html#m">m</a></span> <span class="id"><a href="infp.html#Lm">Lm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="infp.html#b">b</a></span>, <span class="id"><a href="infp.html#lo">lo</a></span>, <span class="id"><a href="infp.html#hi">hi</a></span>) <span class="id"><a href="infp.html#l">l</a></span> -&gt; ~ <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="infp.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="infp.html#ge">ge</a></span>) /\ <span class="id"><a href="infp.html#lo">lo</a></span> = <span class="id"><a href="infp.html#z">z</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">b</span> : <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="infp.html#b">b</a></span>, <span class="id"><a href="infp.html#lo">lo</a></span>, <span class="id"><a href="infp.html#hi">hi</a></span>) <span class="id"><a href="infp.html#l">l</a></span> -&gt; <span class="id">exists</span> <span class="id">delta</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, <span class="id"><a href="infp.html#f0">f0</a></span> <span class="id"><a href="infp.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="infp.html#sp">sp</a></span>, <span class="id"><a href="infp.html#delta">delta</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">MemClosures_local.unmapped_closed</a></span> <span class="id"><a href="infp.html#mu">mu</a></span> <span class="id">m</span>' <span class="id"><a href="infp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6999')">Proof.</div>
<div class="proofscript" id="proof6999">
&nbsp;&nbsp;<span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">z</span>;<span class="tactic">intros</span> ? ? <span class="id">AGMU</span> <span class="id">SVALID</span> <span class="id">TVALID</span> <span class="id">NGE</span> <span class="id">S_EQ</span> <span class="id">RCPRESV</span> <span class="id">R</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">R</span> <span class="id">R2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RCPRESV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b</span>' &lt;&gt; <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.unchecked_free">Mem.unchecked_free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b</span>' &lt;&gt; <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.unchecked_free">Mem.unchecked_free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span> <span class="kwd">in</span> <span class="id">H2</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b</span>' &lt;&gt; <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_tgt</span> <span class="kwd">in</span> <span class="id">H</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span>&lt;- <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Transparent</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.unchecked_free">Mem.unchecked_free</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHl</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">R2</span>;<span class="tactic">eauto</span>. <span class="tactic">intros</span> [].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">R</span>;<span class="tactic">eauto</span>. <span class="tactic">intros</span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">RCPRESV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unmapped_closure</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H7</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b1</span>&lt;&gt;<span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_src</span> <span class="kwd">in</span> <span class="id">H7</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span> <span class="kwd">in</span> <span class="id">Heqo</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unmapped_no_undef</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_src</span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span> <span class="kwd">in</span> <span class="id">Heqo</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unmapped_no_vundef</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H6</span> <span class="kwd">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">contradict</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">b0</span>&lt;&gt;<span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">AGMU</span>. <span class="tactic">apply</span> <span class="id">proper_mu_inject</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">proper_mu_ge_init_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">mu_shared_src</span> <span class="kwd">in</span> <span class="id">H6</span>;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">S_EQ</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span> <span class="kwd">in</span> <span class="id">Heqo</span>;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
