<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module selectdiv_proof</title>
<meta name="description" content="Documentation of Coq module selectdiv_proof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module selectdiv_proof</h1>
<div class="coq">
<br/>
<br/>
<div class="doc">Correctness of instruction selection for integer division </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html">Zquot</a></span> <span class="id"><a href="Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Floats.html">Floats</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Cminor.html">Cminor</a></span> <span class="id"><a href="Op.html">Op</a></span> <span class="id"><a href="CminorSel.html">CminorSel</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="SelectOp.html">SelectOp</a></span> <span class="id"><a href="SelectOpproof.html">SelectOpproof</a></span> <span class="id"><a href="SplitLong.html">SplitLong</a></span> <span class="id"><a href="SplitLongproof.html">SplitLongproof</a></span> <span class="id"><a href="SelectLong.html">SelectLong</a></span> <span class="id"><a href="SelectLongproof.html">SelectLongproof</a></span> <span class="id"><a href="SelectDiv.html">SelectDiv</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="Op_fp.html">Op_fp</a></span> <span class="id"><a href="CUAST.html">CUAST</a></span> <span class="id"><a href="helpers.html">helpers</a></span> <span class="id"><a href="Cminor_local.html">Cminor_local</a></span> <span class="id"><a href="CminorSel_local.html">CminorSel_local</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="selectop_proof.html">selectop_proof</a></span> <span class="id"><a href="splitlong_proof.html">splitlong_proof</a></span> <span class="id"><a href="selectlong_proof.html">selectlong_proof</a></span> <span class="id"><a href="SelectDivproof.html">SelectDivproof</a></span>. <br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">cminorsel_scope</span>.<br/>
<br/>
<h1> Correctness of the smart constructors for division and modulus </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="CMCONSTRS">CMCONSTRS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.cu">cu</a></span>: <span class="id"><a href="CminorSel_local.html#cminorsel_comp_unit">cminorsel_comp_unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.hf">hf</a></span>: <span class="id"><a href="SplitLong.html#helper_functions">helper_functions</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CMCONSTRS.HELPERS">HELPERS</a></span>: <span class="id"><a href="splitlong_proof.html#helper_functions_declared">helper_functions_declared</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.hf">hf</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.ge">ge</a></span>: <span class="id"><a href="CminorSel.html#genv">genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CMCONSTRS.GEINIT">GEINIT</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.sp">sp</a></span>: <span class="id"><a href="Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.e">e</a></span>: <span class="id"><a href="Cminor.html#env">env</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CMCONSTRS.m">m</a></span>: <span class="id"><a href="Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subset_emp_emp">subset_emp_emp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fp</span>, <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> -&gt; <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7196')">Proof.</div>
<div class="proofscript" id="proof7196">
&nbsp;&nbsp;<span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">fp</span>; <span class="tactic">unfold</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>; <span class="tactic">intros</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">H</span>: <span class="id">context</span>[?<span class="id">x</span>] |- ?<span class="id">x</span> <span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="Footprint.html#Locs.emp">Locs.emp</a></span> <span class="id">_</span> <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:<span class="id">A</span>; <span class="tactic">auto</span> ; <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_divu_mul_fp">eval_divu_mul_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">x</span> <span class="id">y</span> <span class="id">p</span> <span class="id">M</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divu_mul_params">divu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="selectdiv_proof.html#p">p</a></span>, <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divu_mul">divu_mul</a></span> <span class="id"><a href="selectdiv_proof.html#p">p</a></span> <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7197')">Proof.</div>
<div class="proofscript" id="proof7197">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divu_mul">divu_mul</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulhu">Omulhu</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0 ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id">M</span>)) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)) <span class="id"><a href="selectdiv_proof.html#v">v</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulhu">Omulhu</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0 ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id">M</span>)) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_shruimm_fp">eval_shruimm_fp</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">subst</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divuimm_fp">eval_divuimm_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">n2</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divu">Val.divu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divuimm">divuimm</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7198')">Proof.</div>
<div class="proofscript" id="proof7198">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divuimm">divuimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">DIV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>) <span class="id">eqn</span>:<span class="id">Z2</span>; <span class="id">inv</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span> | ] <span class="id">eqn</span>:<span class="id">P2</span>.<br/>
- <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_shruimm_fp">eval_shruimm_fp</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>). <span class="id">Triv</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">Z2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divu_mul_params">divu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>] | ] <span class="id">eqn</span>:<span class="id">PARAMS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divu_mul">eval_divu_mul</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span>) :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="id">evalge</span> <span class="id">H2</span>. 2: <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divu_mul_fp">eval_divu_mul_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span>) :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_divu_base_fp">eval_divu_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">exact</span> <span class="id">H0</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>.   <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>. <br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divu_fp">eval_divu_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divu">Val.divu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divu">divu</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7199')">Proof.</div>
<div class="proofscript" id="proof7199">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divu">divu</a></span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divu_match">divu_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">InvEvalFP</span>; <span class="id">InvEval</span>; <span class="id">InvEmpFP</span>; <span class="tactic">eapply</span> <span class="id"><a href="selectdiv_proof.html#eval_divuimm_fp">eval_divuimm_fp</a></span>; <span class="tactic">eauto</span>; <span class="id">TrivFP</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_divu_base_fp">eval_divu_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_mod_from_div_fp">eval_mod_from_div_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">n</span> <span class="id">x</span> <span class="id">y</span> <span class="id">fpy</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#mod_from_div">mod_from_div</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#n">n</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7200')">Proof.</div>
<div class="proofscript" id="proof7200">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#mod_from_div">mod_from_div</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectOpproof.html#eval_mulimm">eval_mulimm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">n</span>). <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_mulimm_fp">eval_mulimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">n</span>). <span class="tactic">intros</span> [<span class="id">fp</span>' [<span class="id">A</span>' <span class="id">B</span>']]. <span class="id">Triv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_moduimm_fp">eval_moduimm_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">n2</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.modu">Val.modu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#moduimm">moduimm</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7201')">Proof.</div>
<div class="proofscript" id="proof7201">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#moduimm">moduimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">MOD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">MOD</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span>) <span class="id">eqn</span>:<span class="id">Z2</span>; <span class="id">inv</span> <span class="id">MOD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span> | ] <span class="id">eqn</span>:<span class="id">P2</span>. <br/>
&nbsp;&nbsp;-  <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_andimm_fp">eval_andimm_fp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_modu_base_fp">eval_modu_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">EvalOp</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divu_mul_params">divu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>] | ] <span class="id">eqn</span>:<span class="id">PARAMS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divu_mul">eval_divu_mul</a></span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="id">evalge</span> <span class="id">H2</span>; <span class="tactic">try</span> <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divu_mul_fp">eval_divu_mul_fp</a></span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_mod_from_div">eval_mod_from_div</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H2</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">A</span>. <span class="id">evalge</span> <span class="id">A</span>; <span class="tactic">try</span> <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_mod_from_div_fp">eval_mod_from_div_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H2</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">t</span> [<span class="id">A</span>' <span class="id">B</span>]]; <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_modu_base_fp">eval_modu_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_modu_fp">eval_modu_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.modu">Val.modu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#modu">modu</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7202')">Proof.</div>
<div class="proofscript" id="proof7202">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#modu">modu</a></span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#modu_match">modu_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">InvEvalFP</span>; <span class="id">InvEval</span>; <span class="id">eqexpr</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_moduimm">eval_moduimm</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_moduimm_fp">eval_moduimm_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">A</span>' <span class="id">B</span>']]. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_modu_base_fp">eval_modu_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_divs_mul_fp">eval_divs_mul_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">x</span> <span class="id">y</span> <span class="id">p</span> <span class="id">M</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divs_mul_params">divs_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.signed">Int.signed</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="selectdiv_proof.html#p">p</a></span>, <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divs_mul">divs_mul</a></span> <span class="id"><a href="selectdiv_proof.html#p">p</a></span> <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7203')">Proof.</div>
<div class="proofscript" id="proof7203">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divs_mul">divs_mul</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">M</span> <span class="id"><a href="Integers.html#Int.half_modulus">Int.half_modulus</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectOp.html#add">add</a></span>, <span class="id"><a href="SelectOp.html#shrimm">shrimm</a></span>, <span class="id"><a href="SelectOp.html#shruimm">shruimm</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span>;[|<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span>]; (<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span>;[|<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span>]); <span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span>;[|<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span>]; (<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span>;[|<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span>]); <span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divsimm_fp">eval_divsimm_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">n2</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divs">Val.divs</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divsimm">divsimm</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7204')">Proof.</div>
<div class="proofscript" id="proof7204">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divsimm">divsimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">generalize</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">DIV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.mone">Int.mone</a></span>) <span class="id">eqn</span>:<span class="id">Z2</span>; <span class="id">inv</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span> | ] <span class="id">eqn</span>:<span class="id">P2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 31)) <span class="id">eqn</span>:<span class="id">LT31</span>. <br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_shrximm_fp">eval_shrximm_fp</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Values.html#Val.divs_pow2">Val.divs_pow2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_divs_base_fp">eval_divs_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_divs_base_fp">eval_divs_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divs_mul_params">divs_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.signed">Int.signed</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>] | ] <span class="id">eqn</span>:<span class="id">PARAMS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divs_mul">eval_divs_mul</a></span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">A</span>. <span class="id">evalge</span> <span class="id">A</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>. <br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divs_mul_fp">eval_divs_mul_fp</a></span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">A</span>'. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_divs_base_fp">eval_divs_base_fp</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divs_fp">eval_divs_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divs">Val.divs</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divs">divs</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7205')">Proof.</div>
<div class="proofscript" id="proof7205">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divs">divs</a></span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divs_match">divs_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">InvEvalFP</span>; <span class="id">InvEval</span>; <span class="id">InvEmpFP</span>; <span class="id">eqexpr</span>; <span class="id">TrivFP</span>; <span class="tactic">eapply</span> <span class="id"><a href="selectdiv_proof.html#eval_divsimm_fp">eval_divsimm_fp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_divs_base_fp">eval_divs_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_modsimm_fp">eval_modsimm_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">n2</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.mods">Val.mods</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#modsimm">modsimm</a></span> <span class="id"><a href="selectdiv_proof.html#e1">e1</a></span> <span class="id"><a href="selectdiv_proof.html#n2">n2</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7206')">Proof.</div>
<div class="proofscript" id="proof7206">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#modsimm">modsimm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Values.html#Val.mods_divs">Val.mods_divs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">y</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">A</span>; <span class="tactic">intros</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">DIV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int.eq">Int.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int.mone">Int.mone</a></span>) <span class="id">eqn</span>:<span class="id">Z2</span>; <span class="id">inv</span> <span class="id">DIV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span> | ] <span class="id">eqn</span>:<span class="id">P2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 31)) <span class="id">eqn</span>:<span class="id">LT31</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="SelectOpproof.html#eval_shrximm">eval_shrximm</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>) (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Values.html#Val.divs_pow2">Val.divs_pow2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v1</span> [<span class="id">X</span> <span class="id">LD</span>]]. <span class="id">inv</span> <span class="id">LD</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="selectop_proof.html#eval_shrximm_fp">eval_shrximm_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> (<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span> :: <span class="id">le</span>) (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0)); <span class="tactic">eauto</span> .<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Values.html#Val.divs_pow2">Val.divs_pow2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">fp1</span> [<span class="id">X</span>' <span class="id">LD</span>']]. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">LD</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_mod_from_div">eval_mod_from_div</a></span>. <span class="id">exacteval</span> <span class="id">X</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">Y</span>. <span class="id">evalge</span> <span class="id">Y</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_mod_from_div_fp">eval_mod_from_div_fp</a></span>. <span class="id">eexact</span> <span class="id">X</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span>' [<span class="id">Y</span>' <span class="id">Z</span>]]. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">Z</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_mods_base_fp">eval_mods_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_mods_base_fp">eval_mods_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divs_mul_params">divs_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.signed">Int.signed</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>] | ] <span class="id">eqn</span>:<span class="id">PARAMS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divs_mul">eval_divs_mul</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span>:: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">B</span>. <span class="id">evalge</span> <span class="id">B</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divs_mul_fp">eval_divs_mul_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">i</span>:: <span class="id">le</span>). <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">B</span>'. <br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_mod_from_div">eval_mod_from_div</a></span>. <span class="id">exacteval</span> <span class="id">B</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">Y</span>. <span class="id">evalge</span> <span class="id">Y</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_mod_from_div_fp">eval_mod_from_div_fp</a></span>. <span class="id">eexact</span> <span class="id">B</span>. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span>' [<span class="id">Y</span>' <span class="id">Z</span>]]. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">Z</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectop_proof.html#eval_mods_base_fp">eval_mods_base_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_mods_fp">eval_mods_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;    <br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.mods">Val.mods</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#mods">mods</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7207')">Proof.</div>
<div class="proofscript" id="proof7207">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#mods">mods</a></span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">b</span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#mods_match">mods_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">InvEvalFP</span>; <span class="id">InvEmpFP</span>; <span class="id">InvEval</span>; <span class="id">eqexpr</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_modsimm">eval_modsimm</a></span>. <span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_modsimm_fp">eval_modsimm_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp1</span> [<span class="id">A</span>' <span class="id">B</span>']]. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#eval_mods_base_fp">eval_mods_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_modl_from_divl_fp">eval_modl_from_divl_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">n</span> <span class="id">x</span> <span class="id">y</span> <span class="id">fpy</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#modl_from_divl">modl_from_divl</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#n">n</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7208')">Proof.</div>
<div class="proofscript" id="proof7208">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#modl_from_divl">modl_from_divl</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_mullimm">eval_mullimm</a></span>. 2: <span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">n</span>). <span class="tactic">intros</span> (<span class="id">v1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>). <span class="id">evalge</span> <span class="id">A1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_mullimm_fp">eval_mullimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp1</span> [<span class="id">A1</span>' <span class="id">B1</span>']]. <br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A0</span>: <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">x</span>)) <span class="tactic">by</span> (<span class="id">constructor</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_subl">eval_subl</a></span>; <span class="tactic">auto</span>. <span class="id">exacteval</span> <span class="id">A0</span>. <span class="id">exacteval</span> <span class="id">A1</span>. <span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>). <span class="id">evalge</span> <span class="id">A2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_subl_fp">eval_subl_fp</a></span>. <span class="tactic">exact</span> <span class="id">A0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">Y</span> <span class="id">Z</span>]].<br/>
&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span> <span class="kwd">with</span> <span class="id">fp1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_divlu_mull_fp">eval_divlu_mull_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">x</span> <span class="id">y</span> <span class="id">p</span> <span class="id">M</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divlu_mul_params">divlu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="selectdiv_proof.html#p">p</a></span>, <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divlu_mull">divlu_mull</a></span> <span class="id"><a href="selectdiv_proof.html#p">p</a></span> <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7209')">Proof.</div>
<div class="proofscript" id="proof7209">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divlu_mull">divlu_mull</a></span>. <span class="id">exploit</span> (<span class="id"><a href="SelectDivproof.html#divlu_mul_shift">divlu_mul_shift</a></span> <span class="id">x</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A0</span>: <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">x</span>)) <span class="tactic">by</span> (<span class="id">constructor</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_mullhu">eval_mullhu</a></span>. 2: <span class="id">exacteval</span> <span class="id">A0</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id">M</span>). <span class="tactic">intros</span> (<span class="id">v1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>).<br/>
&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_mullhu_fp">eval_mullhu_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">A0</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp1</span> [<span class="id">A1</span>' <span class="id">B1</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B1</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_shrluimm">eval_shrluimm</a></span>. 2:<span class="id">exacteval</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id">p</span>). <span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrluimm_fp">eval_shrluimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">A1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">fp2</span> &amp; <span class="id">A2</span>' &amp; <span class="id">B2</span>').<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B2</span>'; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divlu_fp">eval_divlu_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;    <br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divlu">Val.divlu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divlu">divlu</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7210')">Proof.</div>
<div class="proofscript" id="proof7210">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divlu">divlu</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">b</span>) <span class="kwd">as</span> [<span class="id">n2</span>|] <span class="id">eqn</span>:<span class="id">N2</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H1</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">n1</span>|] <span class="id">eqn</span>:<span class="id">N1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">x</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n1</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="selectlong_proof.html#eval_longconst_fp">eval_longconst_fp</a></span>. <span class="id">TrivFP</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span>|] <span class="id">eqn</span>:<span class="id">POW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id"><a href="Values.html#Val.divlu_pow2">Val.divlu_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">subst</span> <span class="id">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_shrluimm">eval_shrluimm</a></span>. 2: <span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">vx</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrluimm_fp">eval_shrluimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">A</span>' <span class="id">B</span>']]. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divlu_base">eval_divlu_base</a></span>. 2: <span class="id">exacteval</span> <span class="id">H</span>. 2: <span class="id">exacteval</span> <span class="id">H1</span>. 1,2: <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divlu_base_fp">eval_divlu_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divlu_mul_params">divlu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>]|] <span class="id">eqn</span>:<span class="id">PARAMS</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divlu_mull">eval_divlu_mull</a></span>; <span class="tactic">eauto</span>. 2:<span class="id">instantiate</span> (2:=<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) 1%<span class="id">positive</span>). <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divlu_mull_fp">eval_divlu_mull_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:=<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">evalge</span> <span class="id">H4</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divlu_base">eval_divlu_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. 2:<span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divlu_base_fp">eval_divlu_base_fp</a></span>; <span class="tactic">eauto</span>.     <br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divlu_base">eval_divlu_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. 2:<span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divlu_base_fp">eval_divlu_base_fp</a></span>; <span class="tactic">eauto</span>.     <br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_modlu_fp">eval_modlu_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.modlu">Val.modlu</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#modlu">modlu</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7211')">Proof.</div>
<div class="proofscript" id="proof7211">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#modlu">modlu</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">b</span>) <span class="kwd">as</span> [<span class="id">n2</span>|] <span class="id">eqn</span>:<span class="id">N2</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">n1</span>|] <span class="id">eqn</span>:<span class="id">N1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.is_power2">Int64.is_power2</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span>|] <span class="id">eqn</span>:<span class="id">POW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_andl">eval_andl</a></span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (2:= <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.sub">Int64.sub</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.one">Int64.one</a></span>)). <span class="tactic">repeat</span> <span class="id">econstructor</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_andl_fp">eval_andl_fp</a></span>. <span class="tactic">exact</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.sub">Int64.sub</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.one">Int64.one</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">econstructor</span>. <span class="tactic">repeat</span> <span class="id">econstructor</span>. <span class="id">evalge</span> <span class="id">A</span>. <span class="id">TrivFP</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">A</span>' <span class="id">B</span>']]. <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modlu_base">eval_modlu_base</a></span>. 2: <span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modlu_base_fp">eval_modlu_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divlu_mul_params">divlu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>]|] <span class="id">eqn</span>:<span class="id">PARAMS</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divlu_mull">eval_divlu_mull</a></span>; <span class="tactic">eauto</span>. 2: <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) 1%<span class="id">positive</span>). <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divlu_mull_fp">eval_divlu_mull_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:=<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">evalge</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_modl_from_divl">eval_modl_from_divl</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H5</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="id">evalge</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_modl_from_divl_fp">eval_modl_from_divl_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H5</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modlu_base">eval_modlu_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. 2:<span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modlu_base_fp">eval_modlu_base_fp</a></span>; <span class="tactic">eauto</span>.     <br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modlu_base">eval_modlu_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. 2:<span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modlu_base_fp">eval_modlu_base_fp</a></span>; <span class="tactic">eauto</span>.     <br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_divls_mull_fp">eval_divls_mull_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">x</span> <span class="id">y</span> <span class="id">p</span> <span class="id">M</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divls_mul_params">divls_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.signed">Int64.signed</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="selectdiv_proof.html#p">p</a></span>, <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divls_mull">divls_mull</a></span> <span class="id"><a href="selectdiv_proof.html#p">p</a></span> <span class="id"><a href="selectdiv_proof.html#M">M</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7212')">Proof.</div>
<div class="proofscript" id="proof7212">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divls_mull">divls_mull</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A0</span>: <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">x</span>)) <span class="tactic">by</span> (<span class="id">constructor</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_mullhs">eval_mullhs</a></span>. 2:<span class="id">exacteval</span> <span class="id">A0</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id">M</span>).  <span class="tactic">intros</span> (<span class="id">v1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_mullhs_fp">eval_mullhs_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">evalge</span> <span class="id">A1</span>. <span class="tactic">intros</span> (<span class="id">fp1</span> &amp; <span class="id">A1</span>' &amp; <span class="id">B1</span>').<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_addl">eval_addl</a></span>; <span class="tactic">auto</span>. <span class="tactic">exact</span> <span class="id">A1</span>. <span class="id">exacteval</span> <span class="id">A0</span>. <span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_addl_fp">eval_addl_fp</a></span>; <span class="tactic">auto</span>. <span class="id">exacteval</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">A0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A2</span>. <span class="tactic">intros</span> (<span class="id">fp2</span> &amp; <span class="id">A2</span>' &amp; <span class="id">B2</span>').<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_shrluimm">eval_shrluimm</a></span>. 2:<span class="id">exacteval</span> <span class="id">A0</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 63). <span class="tactic">intros</span> (<span class="id">v3</span> &amp; <span class="id">A3</span> &amp; <span class="id">B3</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrluimm_fp">eval_shrluimm_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A3</span>. <span class="tactic">intros</span> [<span class="id">fp3</span> [<span class="id">A3</span>' <span class="id">B3</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">a4</span> := <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">M</span> <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="SelectLong.html#mullhs">mullhs</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0) (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id">M</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectLong.html#addl">addl</a></span> (<span class="id"><a href="SelectLong.html#mullhs">mullhs</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0) (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id">M</span>)) (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> 0)).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">v4</span> := <span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">M</span> <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span> <span class="kwd">then</span> <span class="id">v1</span> <span class="kwd">else</span> <span class="id">v2</span>).<br/>
&nbsp;&nbsp;<span class="id">evalge</span> <span class="id">A1</span>. <span class="id">evalge</span> <span class="id">A2</span>. <span class="id">evalge</span> <span class="id">A3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A4</span>: <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> <span class="id">a4</span> <span class="id">v4</span>). <br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">a4</span>, <span class="id">v4</span>; <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">M</span> <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span>); <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">fp4</span>,  <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span> <span class="id">a4</span> <span class="id"><a href="selectdiv_proof.html#fp4">fp4</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp4">fp4</a></span> <span class="id">fp2</span>) <span class="kwd">as</span> [<span class="id">fp4</span> [<span class="id">A4</span>' <span class="id">B4</span>']].<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">a4</span>, <span class="id">v4</span>; <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">M</span> <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span>); <span class="id">eexists</span>; (<span class="tactic">split</span>;[<span class="tactic">eauto</span>|<span class="id">TrivFP</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span> <span class="kwd">with</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>; <span class="id">TrivFP</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_shrlimm">eval_shrlimm</a></span>. 2:<span class="id">exacteval</span> <span class="id">A4</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id">p</span>). <span class="tactic">intros</span> (<span class="id">v5</span> &amp; <span class="id">A5</span> &amp; <span class="id">B5</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrlimm_fp">eval_shrlimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">A4</span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A5</span>. <span class="tactic">intros</span> (<span class="id">fp5</span> &amp; <span class="id">A5</span>' &amp; <span class="id">B5</span>').<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_addl">eval_addl</a></span>. <span class="tactic">exact</span> <span class="id">A5</span>. <span class="id">exacteval</span> <span class="id">A3</span>. <span class="tactic">intros</span> [<span class="id">v6</span> [<span class="id">A6</span> <span class="id">B6</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_addl_fp">eval_addl_fp</a></span>. <span class="id">exacteval</span> <span class="id">A5</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">A3</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A6</span>. <span class="tactic">intros</span> [<span class="id">fp6</span> [<span class="id">A6</span>' <span class="id">B6</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fp6</span> = <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span>; <span class="tactic">try</span> <span class="id">eexact</span> <span class="id">B6</span>'. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B3</span>'. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">TrivFP</span>. <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span>; <span class="tactic">try</span> <span class="id">eexact</span> <span class="id">B5</span>'. <span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span>; <span class="tactic">try</span> <span class="id">eexact</span> <span class="id">B4</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectop_proof.html#subset_trans">subset_trans</a></span>; <span class="tactic">try</span> <span class="id">eexact</span> <span class="id">B2</span>'. <span class="id">TrivFP</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divls_fp">eval_divls_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.divls">Val.divls</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divls">divls</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7213')">Proof.</div>
<div class="proofscript" id="proof7213">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divls">divls</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">b</span>) <span class="kwd">as</span> [<span class="id">n2</span>|] <span class="id">eqn</span>:<span class="id">N2</span>.<br/>
- <span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H1</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">n1</span>|] <span class="id">eqn</span>:<span class="id">N1</span>.<br/>
+ <span class="tactic">assert</span> (<span class="id">x</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n1</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n1</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="selectlong_proof.html#eval_longconst_fp">eval_longconst_fp</a></span>. <span class="id">TrivFP</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span>|] <span class="id">eqn</span>:<span class="id">POW</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 63)) <span class="id">eqn</span>:<span class="id">LT</span>.<br/>
** <span class="id">exploit</span> <span class="id"><a href="Values.html#Val.divls_pow2">Val.divls_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>. <span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrxlimm_fp">eval_shrxlimm_fp</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">Triv</span>.<br/>
** <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divls_base">eval_divls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divls_base_fp">eval_divls_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divls_base">eval_divls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divls_base_fp">eval_divls_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divls_mul_params">divls_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.signed">Int64.signed</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>]|] <span class="id">eqn</span>:<span class="id">PARAMS</span>. <br/>
** <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_divls_mull">eval_divls_mull</a></span>; <span class="tactic">eauto</span>. 2:<span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) 1%<span class="id">positive</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">A</span>. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_divls_mull_fp">eval_divls_mull_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (2:= <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>); <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">A</span>'.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">TrivFP</span>. <span class="id">TrivFP</span>.<br/>
** <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divls_base">eval_divls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divls_base_fp">eval_divls_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_divls_base">eval_divls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_divls_base_fp">eval_divls_base_fp</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_modls_fp">eval_modls_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.modls">Val.modls</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="selectdiv_proof.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#modls">modls</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7214')">Proof.</div>
<div class="proofscript" id="proof7214">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#modls">modls</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">b</span>) <span class="kwd">as</span> [<span class="id">n2</span>|] <span class="id">eqn</span>:<span class="id">N2</span>.<br/>
- <span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H1</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">n1</span>|] <span class="id">eqn</span>:<span class="id">N1</span>.<br/>
+ <span class="tactic">assert</span> (<span class="id">x</span> = <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n1</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="SelectLongproof.html#is_longconst_sound">is_longconst_sound</a></span>; <span class="tactic">try</span> <span class="id">exacteval</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n1</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="selectlong_proof.html#eval_longconst_fp">eval_longconst_fp</a></span>. <span class="id">TrivFP</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">l</span>|] <span class="id">eqn</span>:<span class="id">POW</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 63)) <span class="id">eqn</span>:<span class="id">LT</span>.<br/>
**<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>) <span class="id">eqn</span>:<span class="id">D</span>; <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Values.html#Val.divls">Val.divls</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span>) (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> (<span class="id"><a href="Integers.html#Int64.divs">Int64.divs</a></span> <span class="id">i</span> <span class="id">n2</span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">D</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Values.html#Val.divls_pow2">Val.divls_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">le</span>' := <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span>' (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span>)) <span class="tactic">by</span> (<span class="id">constructor</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>': <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id">le</span>' (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="tactic">by</span> (<span class="id">econstructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_shrxlimm">eval_shrxlimm</a></span>. 2: <span class="id">exacteval</span> <span class="id">A</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>). <span class="id">inv</span> <span class="id">B1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectlong_proof.html#eval_shrxlimm_fp">eval_shrxlimm_fp</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">fp1</span> &amp; <span class="id">A1</span>' &amp; <span class="id">B1</span>'). <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B1</span>'; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_modl_from_divl">eval_modl_from_divl</a></span>. 2:<span class="tactic">exact</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>. <span class="tactic">intro</span> <span class="id">A2</span>. <span class="id">evalge</span> <span class="id">A2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_modl_from_divl_fp">eval_modl_from_divl_fp</a></span>. <span class="id">exacteval</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>. <span class="tactic">intros</span> [<span class="id">fp</span>' [<span class="id">A2</span>' <span class="id">B2</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">B2</span>'; <span class="tactic">subst</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">TrivFP</span>.<br/>
**<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modls_base">eval_modls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modls_base_fp">eval_modls_base_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A</span>.<br/>
* <span class="tactic">destruct</span> (<span class="id"><a href="Compopts.html#optim_for_size">Compopts.optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modls_base">eval_modls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modls_base_fp">eval_modls_base_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divls_mul_params">divls_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.signed">Int64.signed</a></span> <span class="id">n2</span>)) <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">M</span>]|] <span class="id">eqn</span>:<span class="id">PARAMS</span>. <br/>
** <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="SelectDivproof.html#eval_modl_from_divl">eval_modl_from_divl</a></span>. 2:<span class="tactic">eapply</span> <span class="id"><a href="SelectDivproof.html#eval_divls_mull">eval_divls_mull</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.cu">cu</a></span>) 1%<span class="id">positive</span>). <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (2:=<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="tactic">intro</span> <span class="id">A</span>. <span class="id">evalge</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="selectdiv_proof.html#eval_modl_from_divl_fp">eval_modl_from_divl_fp</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="CminorSel_local.html#eval_expr_preserved">eval_expr_preserved</a></span>; <span class="tactic">try</span> <span class="id">gegen</span>.<br/>
&nbsp;&nbsp;&nbsp;4:<span class="tactic">eapply</span> <span class="id"><a href="SelectDivproof.html#eval_divls_mull">eval_divls_mull</a></span>. 1-3:<span class="tactic">try</span> <span class="id">gegen</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">gegen</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (2:=<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">i</span> :: <span class="id">le</span>). <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectdiv_proof.html#eval_divls_mull_fp">eval_divls_mull_fp</a></span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">fp</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="selectdiv_proof.html#subset_emp_emp">subset_emp_emp</a></span> <span class="kwd">in</span> <span class="id">D</span>; <span class="tactic">subst</span>. <span class="id">TrivFP</span>.<br/>
** <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modls_base">eval_modls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modls_base_fp">eval_modls_base_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="SelectLongproof.html#eval_modls_base">eval_modls_base</a></span>. 2:<span class="id">exacteval</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="selectlong_proof.html#eval_modls_base_fp">eval_modls_base_fp</a></span>; <span class="tactic">eauto</span>. <span class="id">exacteval</span> <span class="id">A</span>.<br/>
Qed.</div>
<br/>
<h1> Floating-point division </h1>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divf_fp">eval_divf_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divf">divf</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7215')">Proof.</div>
<div class="proofscript" id="proof7215">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">y</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divf">divf</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divf_match">divf_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divfimm">divfimm</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Floats.html#Float.exact_inverse">Float.exact_inverse</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">n2</span>' | ] <span class="id">eqn</span>:<span class="id">EINV</span>.<br/>
&nbsp;&nbsp;+ <span class="id">InvEvalFP</span>; <span class="id">InvEval</span>; <span class="id">eqexpr</span>; <span class="id">InvEmpFP</span>; <span class="id">Triv</span>.<br/>
&nbsp;&nbsp;+ <span class="id">Triv</span>.<br/>
- <span class="id">Triv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_divfs_fp">eval_divfs_fp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">le</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> <span class="id">fpx</span> <span class="id">y</span> <span class="id">fpy</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#eval_expr">eval_expr</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fp</span>, <span class="id"><a href="CminorSel_local.html#eval_expr_fp">eval_expr_fp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.ge">ge</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.sp">sp</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.e">e</a></span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS.m">m</a></span> <span class="id"><a href="selectdiv_proof.html#le">le</a></span> (<span class="id"><a href="SelectDiv.html#divfs">divfs</a></span> <span class="id"><a href="selectdiv_proof.html#a">a</a></span> <span class="id"><a href="selectdiv_proof.html#b">b</a></span>) <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> /\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="selectdiv_proof.html#fp">fp</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="selectdiv_proof.html#fpx">fpx</a></span> <span class="id"><a href="selectdiv_proof.html#fpy">fpy</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7216')">Proof.</div>
<div class="proofscript" id="proof7216">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">y</span>. <span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divfs">divfs</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="SelectDiv.html#divfs_match">divfs_match</a></span> <span class="id">b</span>); <span class="tactic">intros</span>;[|<span class="id">Triv</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="SelectDiv.html#divfsimm">divfsimm</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Floats.html#Float32.exact_inverse">Float32.exact_inverse</a></span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">n2</span>' | ] <span class="id">eqn</span>:<span class="id">EINV</span>; [|<span class="id">Triv</span>].<br/>
&nbsp;&nbsp;<span class="id">InvEvalFP</span>; <span class="id">InvEval</span>; <span class="id">eqexpr</span>; <span class="id">InvEmpFP</span>; <span class="id">Triv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="selectdiv_proof.html#CMCONSTRS">CMCONSTRS</a></span>.<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
