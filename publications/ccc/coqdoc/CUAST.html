<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CUAST</title>
<meta name="description" content="Documentation of Coq module CUAST" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CUAST</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Errors.html">Errors</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="Memory.html">Memory</a></span><br/>
<span class="id"><a href="MemClosures_local.html">MemClosures_local</a></span> <span class="id"><a href="LDSimDefs.html">LDSimDefs</a></span>.<br/>
<br/>
<br/>
<h1> general form of compilation unit, similar to AST.program </h1>
<br/>
<div class="doc">A compilation unit consists of:
<ul>
<li>
 a collection of global definitions (name and description);
</li>
<li>
 a set of public names (the names that are visible outside 
  this compilation unit).
</li>
</ul>
A global definition is either a global function or a global variable.
The type of function descriptions and that of additional information
for variables vary among the various intermediate languages and are
taken as parameters to the <span class="bracket"><span class="id">program</span></span> type.  The other parts of whole
programs are common to all languages. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="comp_unit_generic">comp_unit_generic</a></span> (<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>) : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="cu_defs">cu_defs</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="cu_public">cu_public</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#ident">ident</a></span>;<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> [<span class="id">F</span> <span class="id">V</span>].<br/>
<span class="id">Arguments</span> <span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> [<span class="id">F</span> <span class="id">V</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="comp_unit_defmap">comp_unit_defmap</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) : <span class="id"><a href="Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>.(<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cu_to_prog">cu_to_prog</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) : <span class="id"><a href="AST.html#program">AST.program</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) 1%<span class="id">positive</span>.<br/>
<br/>
<span class="kwd">Coercion</span> <span class="id"><a href="CUAST.html#cu_to_prog">cu_to_prog</a></span> : <span class="id">comp_unit_generic</span> &gt;-&gt; <span class="id">program</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="comp_unit_defmap_eq">comp_unit_defmap_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> = <span class="id"><a href="AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7000')">Proof.</div>
<div class="proofscript" id="proof7000">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cu</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span>, <span class="id"><a href="AST.html#prog_defmap">prog_defmap</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> general form of global environment, similar to Genv.globalenv, but extend genv_next </h1>
<div class="doc">extension of global environment, i.e. extending Genv.genv_next </div>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="ge_extend">ge_extend</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">bound</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">GEBOUND</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) <span class="id"><a href="CUAST.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>:=<br/>
&nbsp;&nbsp;@<span class="id"><a href="Globalenvs.html#Genv.mkgenv">Genv.mkgenv</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) <span class="id"><a href="CUAST.html#bound">bound</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7001')">Next Obligation.</div>
<div class="proofscript" id="proof7001">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7002')">Next Obligation.</div>
<div class="proofscript" id="proof7002">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7003')">Next Obligation.</div>
<div class="proofscript" id="proof7003">
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span> <span class="id">ge</span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="globalenv_generic">globalenv_generic</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>}: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id">F</span> <span class="id">V</span> -&gt; <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id">F</span> <span class="id">V</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="ge_construct">ge_construct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cu</span> <span class="id">ge</span> <span class="id">bound</span> <span class="id">ge</span>' (<span class="id">GEBOUND</span>: <span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) <span class="id"><a href="CUAST.html#bound">bound</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge">ge</a></span> = <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) 1%<span class="id">positive</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ge</span>' = <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#bound">bound</a></span> <span class="id"><a href="CUAST.html#GEBOUND">GEBOUND</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id">ge</span>'.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="GENV_GEN_EQ">GENV_GEN_EQ</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> <span class="id"><a name="GENV_GEN_EQ.F">F</a></span> <span class="id"><a name="GENV_GEN_EQ.V">V</a></span>: <span class="kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="GENV_GEN_EQ.cu">cu</a></span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.F">F</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.V">V</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="GENV_GEN_EQ.ge1">ge1</a></span> := <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> (<span class="id"><a href="AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.cu">cu</a></span>) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.cu">cu</a></span>) 1%<span class="id">positive</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Variable</span> <span class="id"><a name="GENV_GEN_EQ.ge2">ge2</a></span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.F">F</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.V">V</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="GENV_GEN_EQ.GEGEN">GEGEN</a></span>: <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.cu">cu</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globalenv_generic_senv_eq">globalenv_generic_senv_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7004')">Proof.</div>
<div class="proofscript" id="proof7004">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">globalenv_generic_senv_eq</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7005')">Proof.</div>
<div class="proofscript" id="proof7005">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globalenv_generic_find_symbol_eq">globalenv_generic_find_symbol_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span> <span class="id"><a href="CUAST.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7006')">Proof.</div>
<div class="proofscript" id="proof7006">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">globalenv_generic_find_symbol_eq</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span> <span class="id"><a href="CUAST.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7007')">Proof.</div>
<div class="proofscript" id="proof7007">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="globalenv_generic_find_funct_ptr_eq">globalenv_generic_find_funct_ptr_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7008')">Proof.</div>
<div class="proofscript" id="proof7008">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">globalenv_generic_find_funct_ptr_eq</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge1">ge1</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.ge2">ge2</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7009')">Proof.</div>
<div class="proofscript" id="proof7009">
 <span class="id">inv</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ.GEGEN">GEGEN</a></span>. <span class="tactic">auto</span>. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="CUAST.html#GENV_GEN_EQ">GENV_GEN_EQ</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">globalenv_generic_senv_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv_generic_senv_eq</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv_generic_find_symbol_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv_generic_find_symbol_eq</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv_generic_find_funct_ptr_eq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv_generic_find_funct_ptr_eq</span>' : <span class="id">gegen</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">gegen</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> ?<span class="id">ge</span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> ?<span class="id">p</span>) =&gt; <span class="tactic">eapply</span> <span class="id">globalenv_generic_senv_eq</span>'; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- <span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> ?<span class="id">p</span>) ?<span class="id">ge</span> =&gt; <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#globalenv_generic_senv_eq">globalenv_generic_senv_eq</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- (<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> ?<span class="id">ge</span> <span class="id">_</span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> ?<span class="id">p</span>) <span class="id">_</span>) =&gt; <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#globalenv_generic_find_symbol_eq">globalenv_generic_find_symbol_eq</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- (<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">_</span>) <span class="id">_</span> = <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="tactic">eapply</span> <span class="id">globalenv_generic_find_symbol_eq</span>'; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- (<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> ?<span class="id">ge</span> <span class="id">_</span> = <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> ?<span class="id">p</span>) <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#globalenv_generic_find_funct_ptr_eq">globalenv_generic_find_funct_ptr_eq</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;| |- (<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">_</span>) <span class="id">_</span> = <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">globalenv_generic_find_funct_ptr_eq</span>'; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="find_def_symbol">find_def_symbol</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">p</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>)  <span class="id">id</span> <span class="id">g</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>) ! <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#g">g</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> /\ <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#g">g</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7010')">Proof.</div>
<div class="proofscript" id="proof7010">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> {| <span class="id"><a href="AST.html#mkprogram">prog_defs</a></span> := <span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id">p</span>; <span class="id">prog_public</span> := <span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id">p</span>; <span class="id">prog_main</span> := 1%<span class="id">positive</span> |} <span class="id">id</span> <span class="id">g</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AST.html#prog_defmap">prog_defmap</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">TODO: move to cuast </div>
<span class="kwd">Lemma</span> <span class="id"><a name="find_def_inversion">find_def_inversion</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) <span class="id">ge</span> <span class="id">b</span> <span class="id">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#g">g</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="CUAST.html#id">id</a></span>, <span class="id"><a href="CUAST.html#g">g</a></span>) (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7011')">Proof.</div>
<div class="proofscript" id="proof7011">
&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">g</span>. <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Globalenvs.html#Genv.add_globals_preserves">Genv.add_globals_preserves</a></span>.<br/>
&nbsp;preserves&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">ge</span>)).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;base&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_funct_ptr_prop">find_funct_ptr_prop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">P</span>: <span class="id"><a href="CUAST.html#F">F</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) <span class="id">ge</span> <span class="id">b</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="CUAST.html#id">id</a></span>, <span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id">f</span>') (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) -&gt; <span class="id"><a href="CUAST.html#P">P</a></span> <span class="id">f</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> -&gt; <span class="id"><a href="CUAST.html#P">P</a></span> <span class="id"><a href="CUAST.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7012')">Proof.</div>
<div class="proofscript" id="proof7012">
&nbsp;&nbsp;<span class="tactic">clear</span>. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id">ge</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">DEF</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#find_def_inversion">find_def_inversion</a></span> <span class="kwd">in</span> <span class="id">DEF</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">DEF</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_funct_prop">find_funct_prop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">P</span>: <span class="id"><a href="CUAST.html#F">F</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) <span class="id">ge</span> <span class="id">v</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="CUAST.html#id">id</a></span>, <span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id">f</span>') (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) -&gt; <span class="id"><a href="CUAST.html#P">P</a></span> <span class="id">f</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> -&gt; <span class="id"><a href="CUAST.html#P">P</a></span> <span class="id"><a href="CUAST.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7013')">Proof.</div>
<div class="proofscript" id="proof7013">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#find_funct_ptr_prop">find_funct_ptr_prop</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">It seems that we have to declare external global variables as volatile
    with proper init_data (holding spaces) </div>
<br/>
<br/>
<h1> general form of initial memory </h1>
<span class="kwd">Record</span> <span class="id"><a name="init_mem_generic">init_mem_generic</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">m</span>: <span class="id"><a href="Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="globdef_initialized">globdef_initialized</a></span>: <span class="id"><a href="Globalenvs.html#Genv.globals_initialized">Genv.globals_initialized</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="dom_match">dom_match</a></span>: <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> = <span class="id"><a href="Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">is this condition necessary??? why not put it in precondition of init in sim? </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="reach_closed">reach_closed</a></span>: <span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> (<span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>);<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<h1> wrapper for initial core </h1>
<span class="kwd">Definition</span> <span class="id"><a name="generic_init_core">generic_init_core</a></span> {<span class="id">F</span> <span class="id">V</span> <span class="id">core</span>: <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fundef_init</span>: <span class="id"><a href="CUAST.html#F">F</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CUAST.html#core">core</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">fnid</span>: <span class="id"><a href="AST.html#ident">ident</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CUAST.html#core">core</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#fnid">fnid</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cfd</span> =&gt; <span class="id"><a href="CUAST.html#fundef_init">fundef_init</a></span> <span class="id">cfd</span> <span class="id"><a href="CUAST.html#args">args</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">get func name of EF_external </div>
<span class="kwd">Definition</span> <span class="id"><a name="gd_ef_fun_name">gd_ef_fun_name</a></span> {<span class="id">Func</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">gd</span>: <span class="id"><a href="AST.html#globdef">globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#Func">Func</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id">fd</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">fd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#External">External</a></span> <span class="id">ef</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ef</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#EF_external">EF_external</a></span> <span class="id">name</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Gvar">Gvar</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">get block from func name </div>
<span class="kwd">Definition</span> <span class="id"><a name="invert_block_from_string">invert_block_from_string</a></span> {<span class="id">Func</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#Func">Func</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">name</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Values.html#block">block</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.fold">PTree.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">res</span> <span class="id">b</span> <span class="id">gd</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> <span class="id">name</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="kwd">else</span> <span class="id"><a href="CUAST.html#res">res</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="CUAST.html#res">res</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge">ge</a></span>.(<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc">get ident from func name </div>
<span class="kwd">Definition</span> <span class="id"><a name="invert_symbol_from_string">invert_symbol_from_string</a></span> {<span class="id">Func</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#Func">Func</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">name</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id">b</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_genvs_invert_symbol_from_string_preserved">match_genvs_invert_symbol_from_string_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span>: <span class="kwd">Type</span>) (<span class="id">R</span>: <span class="id"><a href="AST.html#globdef">globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span>) <span class="id"><a href="CUAST.html#V1">V1</a></span> -&gt; <span class="id"><a href="AST.html#globdef">globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span>) <span class="id"><a href="CUAST.html#V2">V2</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">ge1</span> <span class="id">ge2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> <span class="id"><a href="CUAST.html#R">R</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">gd1</span> <span class="id">gd2</span>, <span class="id"><a href="CUAST.html#R">R</a></span> <span class="id"><a href="CUAST.html#gd1">gd1</a></span> <span class="id"><a href="CUAST.html#gd2">gd2</a></span> -&gt; <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd1">gd1</a></span> = <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd2">gd2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">name</span> <span class="id">id</span>, <span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#id">id</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7014')">Proof.</div>
<div class="proofscript" id="proof7014">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#invert_symbol_from_string">invert_symbol_from_string</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id">ge1</span> <span class="id">name</span> = <span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id">ge2</span> <span class="id">name</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">mge_defs</span> <span class="id">H0</span>. <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge1</span>) (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge2</span>). <span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> <span class="id">MATCH</span> <span class="id">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.fold_spec">Maps.PTree.fold_spec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Maps.PTree.elements_canonical_order</span>' <span class="kwd">in</span> <span class="id">MATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">MATCH</span>. <span class="tactic">generalize</span> (<span class="id"><a href="Maps.html#PTree.elements">Maps.PTree.elements</a></span> <span class="id">M1</span>) (<span class="id"><a href="Maps.html#PTree.elements">Maps.PTree.elements</a></span> <span class="id">M2</span>) (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>). <span class="tactic">clear</span> <span class="id">M1</span> <span class="id">M2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">intro</span> <span class="id">l</span>'; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">gd1</span>]; <span class="tactic">destruct</span> <span class="id">b1</span> <span class="kwd">as</span> [<span class="id">id2</span> <span class="id">gd2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span>. <span class="tactic">subst</span> <span class="id">id2</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">REL</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id">ge2</span> <span class="id">name</span>) <span class="id">eqn</span>:<span class="id">BLOCK</span>; <span class="tactic">auto</span>. <span class="tactic">clear</span> <span class="id">BLOCK</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">mge_symb</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<h1> general form of matching compilation units </h1>
<div class="doc">rewrite match_globdef (originally in Linking.v)</div>
<span class="kwd">Section</span> <span class="id"><a name="MATCH_CUNIT_GENERIC">MATCH_CUNIT_GENERIC</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span>: <span class="kwd">Type</span>}.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="MATCH_CUNIT_GENERIC.match_fundef">match_fundef</a></span>: <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F1">F1</a></span> -&gt; <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F2">F2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="MATCH_CUNIT_GENERIC.match_varinfo">match_varinfo</a></span>: <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V1">V1</a></span> -&gt; <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V2">V2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_globvar">match_globvar</a></span>: <span class="id"><a href="AST.html#globvar">globvar</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V1">V1</a></span> -&gt; <span class="id"><a href="AST.html#globvar">globvar</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V2">V2</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_globvar_intro">match_globvar_intro</a></span>: <span class="kwd">forall</span> <span class="id">i1</span> <span class="id">i2</span> <span class="id">init</span> <span class="id">ro</span> <span class="id">vo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#i1">i1</a></span> <span class="id"><a href="CUAST.html#i2">i2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_globvar">match_globvar</a></span> (<span class="id"><a href="AST.html#mkglobvar">mkglobvar</a></span> <span class="id"><a href="CUAST.html#i1">i1</a></span> <span class="id"><a href="CUAST.html#init">init</a></span> <span class="id"><a href="CUAST.html#ro">ro</a></span> <span class="id"><a href="CUAST.html#vo">vo</a></span>) (<span class="id"><a href="AST.html#mkglobvar">mkglobvar</a></span> <span class="id"><a href="CUAST.html#i2">i2</a></span> <span class="id"><a href="CUAST.html#init">init</a></span> <span class="id"><a href="CUAST.html#ro">ro</a></span> <span class="id"><a href="CUAST.html#vo">vo</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_globdef">match_globdef</a></span> : <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F1">F1</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V1">V1</a></span> -&gt; <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F2">F2</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V2">V2</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_globdef_fun">match_globdef_fun</a></span>: <span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#f1">f1</a></span> <span class="id"><a href="CUAST.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id"><a href="CUAST.html#f1">f1</a></span>) (<span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id"><a href="CUAST.html#f2">f2</a></span>)<br/>
| <span class="id"><a name="match_globdef_var">match_globdef_var</a></span>: <span class="kwd">forall</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_globvar">match_globvar</a></span> <span class="id"><a href="CUAST.html#v1">v1</a></span> <span class="id"><a href="CUAST.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="id"><a href="AST.html#Gvar">Gvar</a></span> <span class="id"><a href="CUAST.html#v1">v1</a></span>) (<span class="id"><a href="AST.html#Gvar">Gvar</a></span> <span class="id"><a href="CUAST.html#v2">v2</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_ident_globdef">match_ident_globdef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ig1</span>: <span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F1">F1</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V1">V1</a></span>) (<span class="id">ig2</span>: <span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F2">F2</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V2">V2</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#ig1">ig1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#ig2">ig2</a></span> /\ <span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="CUAST.html#ig1">ig1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="CUAST.html#ig2">ig2</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_comp_unit_gen">match_comp_unit_gen</a></span> (<span class="id">cu1</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F1">F1</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V1">V1</a></span>) (<span class="id">cu2</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.F2">F2</a></span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC.V2">V2</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="CUAST.html#match_ident_globdef">match_ident_globdef</a></span>) <span class="id"><a href="CUAST.html#cu1">cu1</a></span>.(<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span>) <span class="id"><a href="CUAST.html#cu2">cu2</a></span>.(<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#cu2">cu2</a></span>.(<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span>) = <span class="id"><a href="CUAST.html#cu1">cu1</a></span>.(<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_comp_unit_defmap">match_comp_unit_defmap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cu1</span> <span class="id">cu2</span>, <span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span>)!<span class="id"><a href="CUAST.html#id">id</a></span> (<span class="id"><a href="CUAST.html#comp_unit_defmap">comp_unit_defmap</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span>)!<span class="id"><a href="CUAST.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7015')">Proof.</div>
<div class="proofscript" id="proof7015">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree_Properties.of_list_related">PTree_Properties.of_list_related</a></span>. <span class="tactic">apply</span> <span class="id">H</span>. <br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="CUAST.html#MATCH_CUNIT_GENERIC">MATCH_CUNIT_GENERIC</a></span>.<br/>
<br/>
<br/>
<h1> general form of transformation </h1>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSF_CUNIT_GEN">TRANSF_CUNIT_GEN</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="TRANSF_CUNIT_GEN.A">A</a></span> <span class="id"><a name="TRANSF_CUNIT_GEN.B">B</a></span> <span class="id"><a name="TRANSF_CUNIT_GEN.V">V</a></span> <span class="id"><a name="TRANSF_CUNIT_GEN.W">W</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSF_CUNIT_GEN.transf_fun">transf_fun</a></span>: <span class="id"><a href="AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.A">A</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.B">B</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSF_CUNIT_GEN.transf_var">transf_var</a></span>: <span class="id"><a href="AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.V">V</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.W">W</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transform_partial_cunit2">transform_partial_cunit2</a></span> (<span class="id">p</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.A">A</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.V">V</a></span>) : <span class="id"><a href="Errors.html#res">res</a></span> (<span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.B">B</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.W">W</a></span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">gl</span>' &lt;- <span class="id"><a href="AST.html#transf_globdefs">transf_globdefs</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN.transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>.(<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Errors.html#OK">OK</a></span> {| <span class="id"><a href="CUAST.html#Build_comp_unit_generic">cu_defs</a></span> := <span class="id">gl</span>';  <span class="id">cu_public</span> := <span class="id"><a href="CUAST.html#p">p</a></span>.(<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span>) |}.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="CUAST.html#TRANSF_CUNIT_GEN">TRANSF_CUNIT_GEN</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSF_PARTIAL_CUNIT">TRANSF_PARTIAL_CUNIT</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSF_PARTIAL_CUNIT.A">A</a></span> <span class="id"><a name="TRANSF_PARTIAL_CUNIT.B">B</a></span> <span class="id"><a name="TRANSF_PARTIAL_CUNIT.V">V</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSF_PARTIAL_CUNIT.transf_fun">transf_fun</a></span>: <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.A">A</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.B">B</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transform_partial_cunit">transform_partial_cunit</a></span> (<span class="id">p</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.A">A</a></span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.V">V</a></span>) : <span class="id"><a href="Errors.html#res">res</a></span> (<span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.B">B</a></span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.V">V</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">f</span> =&gt; <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT.transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#f">f</a></span>) (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">v</span> =&gt; <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#v">v</a></span>) <span class="id"><a href="CUAST.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="CUAST.html#TRANSF_PARTIAL_CUNIT">TRANSF_PARTIAL_CUNIT</a></span>.<br/>
<br/>
<br/>
<div class="doc">Relation between the program transformation functions from <span class="bracket"><span class="id">AST</span></span>
  and the <span class="bracket"><span class="id">match_program</span></span> predicate. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_transform_partial_cunit2">match_transform_partial_cunit2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span>: <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_fundef</span>: <span class="id"><a href="CUAST.html#F1">F1</a></span> -&gt; <span class="id"><a href="CUAST.html#F2">F2</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_varinfo</span>: <span class="id"><a href="CUAST.html#V1">V1</a></span> -&gt; <span class="id"><a href="CUAST.html#V2">V2</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">transf_fun</span>: <span class="id"><a href="AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="CUAST.html#F1">F1</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">transf_var</span>: <span class="id"><a href="AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="CUAST.html#V1">V1</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">p</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span>) (<span class="id">tp</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tp">tp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#i">i</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span> -&gt; <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">v</span> <span class="id">tv</span>, <span class="id"><a href="CUAST.html#transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#i">i</a></span> <span class="id"><a href="CUAST.html#v">v</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tv">tv</a></span> -&gt; <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#v">v</a></span> <span class="id"><a href="CUAST.html#tv">tv</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> <span class="id"><a href="CUAST.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7016')">Proof.</div>
<div class="proofscript" id="proof7016">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span>; <span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">x</span> <span class="id">EQ</span>. <span class="tactic">generalize</span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id">p</span>). <br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">i</span> <span class="id">g</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">monadInv</span> <span class="id">EQ</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">g</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">transf_fun</span> <span class="id">i</span> <span class="id">f</span>) <span class="kwd">as</span> [<span class="id">tf</span>|?] <span class="id">eqn</span>:<span class="id">TF</span>; <span class="id">monadInv</span> <span class="id">EQ</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="AST.html#transf_globvar">transf_globvar</a></span> <span class="id">transf_var</span> <span class="id">i</span> <span class="id">v</span>) <span class="kwd">as</span> [<span class="id">tv</span>|?] <span class="id">eqn</span>:<span class="id">TV</span>; <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TV</span>. <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The following two theorems are simpler versions for the case where the
  function transformation does not depend on the compilation unit. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_transform_partial_cunit">match_transform_partial_cunit</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">transf_fun</span>: <span class="id"><a href="CUAST.html#A">A</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> <span class="id"><a href="CUAST.html#B">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">p</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#A">A</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">tp</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#B">B</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit">transform_partial_cunit</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tp">tp</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> <span class="id"><a href="CUAST.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7017')">Proof.</div>
<div class="proofscript" id="proof7017">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit2">match_transform_partial_cunit2</a></span>. <span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cu_match_genv">match_cu_match_genv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">match_fundef</span> <span class="id">match_varinfo</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">ge1</span> <span class="id">ge2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span>) <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7018')">Proof.</div>
<div class="proofscript" id="proof7018">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">cu1</span>, <span class="id">cu2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span> <span class="id">bound0</span> <span class="id">cu_public0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Globalenvs.html#Genv.add_globals_match">Genv.add_globals_match</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">Focus</span> 2.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id"><a href="Globalenvs.html#Genv.empty_genv">Genv.empty_genv</a></span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">cu_public1</span>).<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id"><a href="Globalenvs.html#Genv.empty_genv">Genv.empty_genv</a></span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">cu_public1</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">Maps.PTree.gempty</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cu_senv_preserved">match_cu_senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">match_fundef</span> <span class="id">match_varinfo</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">ge1</span> <span class="id">ge2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7019')">Proof.</div>
<div class="proofscript" id="proof7019">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>, <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span>, <span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">congruence</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span>, <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.genv_public_add_globals">Genv.genv_public_add_globals</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span>, <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">mge_defs</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cu_ge_match">match_cu_ge_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">match_fundef</span> <span class="id">match_varinfo</span> <span class="id">cu1</span> <span class="id">cu2</span> (<span class="id">ge1</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span>) (<span class="id">ge2</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#ge_match">LDSimDefs.ge_match</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7020')">Proof.</div>
<div class="proofscript" id="proof7020">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> [? ? ?].<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intro</span> <span class="id">id</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv_public">Genv.globalenv_public</a></span>; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intro</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>'). <span class="id">inv</span> <span class="id">mge_defs</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="LDSim_local.html">LDSim_local</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_cu_ge_match_strict">match_cu_ge_match_strict</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">match_fundef</span> <span class="id">match_varinfo</span> <span class="id">cu1</span> <span class="id">cu2</span> (<span class="id">ge1</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span>) (<span class="id">ge2</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#match_comp_unit_gen">match_comp_unit_gen</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#match_fundef">match_fundef</a></span> <span class="id"><a href="CUAST.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim_local.html#ge_match_strict">ge_match_strict</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7021')">Proof.</div>
<div class="proofscript" id="proof7021">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> [? ? ?].<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intro</span> <span class="id">id</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv_public">Genv.globalenv_public</a></span>; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>'). <span class="id">inv</span> <span class="id">mge_defs</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<div class="doc">relating local ge </div>
<span class="kwd">Import</span> <span class="id">Blockset</span>.<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="ge_related">ge_related</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span> <span class="id">ge_local</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="GE_RELATED">GE_RELATED</a></span>: <span class="kwd">forall</span> <span class="id">j</span> : <span class="id"><a href="Blockset.html#Bset.inj">Bset.inj</a></span>,<br/>
<div class="doc">domain </div>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>', <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; <span class="id">exists</span> <span class="id">gd</span>, (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge_local</span>) ! <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span>) -&gt;<br/>
<div class="doc">injective </div>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">b</span>', <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="CUAST.html#b1">b1</a></span> = <span class="id"><a href="CUAST.html#b2">b2</a></span>) -&gt;<br/>
<div class="doc">public eq </div>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id">ge</span> = <span class="id"><a href="Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id">ge_local</span>) -&gt;<br/>
<div class="doc">symb related </div>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="LDSimDefs.html#inj_oblock">inj_oblock</a></span> <span class="id"><a href="CUAST.html#j">j</a></span> (<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">ge_local</span> <span class="id"><a href="CUAST.html#id">id</a></span>) (<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id">ge</span> <span class="id"><a href="CUAST.html#id">id</a></span>)) -&gt;<br/>
<div class="doc">defs related </div>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>, (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge_local</span>) ! <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">gd</span>', (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge</span>) ! <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>' -&gt; <span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>', <span class="id"><a href="CUAST.html#j">j</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge_local</span>) ! <span class="id"><a href="CUAST.html#b">b</a></span> = (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge</span>) ! <span class="id">b</span>') -&gt;<br/>
<div class="doc">genv_next </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">ge_local</span>) (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">ge</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id">ge</span> <span class="id">ge_local</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="FMemory.html">FMemory</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Floats.html">Floats</a></span> <span class="id"><a href="FMemPerm.html">FMemPerm</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_as_zero_fm">read_as_zero_fm</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">m</span>: <span class="id"><a href="FMemory.html#Mem.mem">FMemory.Mem.mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">len</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="CUAST.html#p">p</a></span> -&gt; <span class="id"><a href="CUAST.html#p">p</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="CUAST.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="CUAST.html#ofs">ofs</a></span> + <span class="id"><a href="CUAST.html#len">len</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="CUAST.html#chunk">chunk</a></span> | <span class="id"><a href="CUAST.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="CUAST.html#chunk">chunk</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> =<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">match</span> <span class="id"><a href="CUAST.html#chunk">chunk</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Mint8unsigned">Mint8unsigned</a></span> | <span class="id"><a href="AST.html#Mint8signed">Mint8signed</a></span> | <span class="id"><a href="AST.html#Mint16unsigned">Mint16unsigned</a></span> | <span class="id"><a href="AST.html#Mint16signed">Mint16signed</a></span> | <span class="id"><a href="AST.html#Mint32">Mint32</a></span> =&gt; <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id"><a href="Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Mint64">Mint64</a></span> =&gt; <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id"><a href="Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Mfloat32">Mfloat32</a></span> =&gt; <span class="id"><a href="Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="Floats.html#Float32.zero">Float32.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Mfloat64">Mfloat64</a></span> =&gt; <span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="Floats.html#Float.zero">Float.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Many32">Many32</a></span> | <span class="id"><a href="AST.html#Many64">Many64</a></span> =&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="load_store_init_data_fm">load_store_init_data_fm</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">m</span>: <span class="id"><a href="FMemory.html#Mem.mem">FMemory.Mem.mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="Values.html#block">block</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#init_data">init_data</a></span>) {<span class="kwd">struct</span> <span class="id">il</span>} : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#il">il</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vint">Vint</a></span>(<span class="id"><a href="Integers.html#Int.zero_ext">Int.zero_ext</a></span> 8 <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 1) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vint">Vint</a></span>(<span class="id"><a href="Integers.html#Int.zero_ext">Int.zero_ext</a></span> 16 <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 2) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mint32">Mint32</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 4) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mint64">Mint64</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 8) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mfloat32">Mfloat32</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vsingle">Vsingle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 4) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mfloat64">Mfloat64</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + 8) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_addrof">Init_addrof</a></span> <span class="id">symb</span> <span class="id">ofs</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id">symb</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' /\ <span class="id"><a href="FMemory.html#Mem.load">FMemory.Mem.load</a></span> <span class="id"><a href="AST.html#Mptr">Mptr</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="AST.html#Mptr">Mptr</a></span>) <span class="id">il</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Init_space">Init_space</a></span> <span class="id">n</span> :: <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#read_as_zero_fm">read_as_zero_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="CUAST.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> <span class="id">n</span> 0) <span class="id">il</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="globals_initialized_fmem">globals_initialized_fmem</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">fm</span>: <span class="id"><a href="FMemory.html#Mem.mem">FMemory.Mem.mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Gfun">Gfun</a></span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.perm">FMemory.Mem.perm</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span> <span class="id"><a href="Memperm.html#Nonempty">Memperm.Nonempty</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="FMemory.html#Mem.perm">FMemory.Mem.perm</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#ofs">ofs</a></span> <span class="id"><a href="CUAST.html#k">k</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> -&gt; <span class="id"><a href="CUAST.html#ofs">ofs</a></span> = 0 /\ <span class="id"><a href="CUAST.html#p">p</a></span> = <span class="id"><a href="Memperm.html#Nonempty">Memperm.Nonempty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Gvar">Gvar</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.range_perm">FMemory.Mem.range_perm</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 (<span class="id"><a href="AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>)) <span class="id"><a href="Memperm.html#Cur">Memperm.Cur</a></span> (<span class="id"><a href="FMemPerm.html#permission_convert">permission_convert</a></span> (<span class="id"><a href="Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="id">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.perm">FMemory.Mem.perm</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> <span class="id"><a href="CUAST.html#ofs">ofs</a></span> <span class="id"><a href="CUAST.html#k">k</a></span> <span class="id"><a href="CUAST.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= <span class="id"><a href="CUAST.html#ofs">ofs</a></span> &lt; <span class="id"><a href="AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Memperm.html#perm_order">Memperm.perm_order</a></span> (<span class="id"><a href="FMemPerm.html#permission_convert">permission_convert</a></span> (<span class="id"><a href="Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="id">v</span>)) <span class="id"><a href="CUAST.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="CUAST.html#load_store_init_data_fm">load_store_init_data_fm</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 (<span class="id"><a href="AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FMemory.html#Mem.loadbytes">FMemory.Mem.loadbytes</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 (<span class="id"><a href="AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> (<span class="id"><a href="AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="init_fmem_generic">init_fmem_generic</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">m</span>: <span class="id"><a href="FMemory.html#Mem.mem">FMemory.Mem.mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="globdef_initialized_fm">globdef_initialized_fm</a></span> : <span class="id"><a href="CUAST.html#globals_initialized_fmem">globals_initialized_fmem</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="dom_match_fm">dom_match_fm</a></span> : <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) &lt;-&gt; <span class="id"><a href="FMemory.html#Mem.valid_block">FMemory.Mem.valid_block</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="reach_closed_fm">reach_closed_fm</a></span> : <span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> (<span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>) (<span class="id"><a href="FMemory.html#Mem.valid_block">FMemory.Mem.valid_block</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>) }.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="init_gmem_generic">init_gmem_generic</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>) (<span class="id">gm</span>: <span class="id"><a href="GMemory.html#gmem">GMemory.gmem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fm</span>, <span class="id"><a href="FMemory.html#strip">FMemory.strip</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span> = <span class="id"><a href="CUAST.html#gm">gm</a></span> /\ <span class="id"><a href="CUAST.html#init_fmem_generic">init_fmem_generic</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#fm">fm</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="is_internal">is_internal</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">cu_defs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>)) (<span class="id">id</span>: <span class="id"><a href="AST.html#ident">ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>', <span class="id">gdef</span>) :: <span class="id">cu_defs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="AST.html#ident_eq">ident_eq</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> <span class="id">id</span>') <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">gdef</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">_</span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="CUAST.html#is_internal">is_internal</a></span> <span class="id">cu_defs</span>' <span class="id"><a href="CUAST.html#id">id</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="CUAST.html#is_internal">is_internal</a></span> <span class="id">cu_defs</span>' <span class="id"><a href="CUAST.html#id">id</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transf_func_correct">transf_func_correct</a></span> {<span class="id">F1</span> <span class="id">F2</span>: <span class="kwd">Type</span>} (<span class="id">transf_fun</span>: <span class="id"><a href="AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> -&gt; <span class="id"><a href="Errors.html#res">res</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f1</span> <span class="id">f2</span>, <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> <span class="id"><a href="CUAST.html#f1">f1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#f1">f1</a></span>, <span class="id"><a href="CUAST.html#f2">f2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">_</span>, <span class="id"><a href="AST.html#Internal">Internal</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#External">External</a></span> <span class="id">_</span>, <span class="id"><a href="AST.html#External">External</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_internal_preserved">is_internal_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> <span class="id">V</span> <span class="id">W</span> <span class="id">defs1</span> <span class="id">defs2</span> <span class="id">transf_fun</span> <span class="id">transf_var</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#transf_func_correct">transf_func_correct</a></span> <span class="id"><a href="CUAST.html#A">A</a></span> <span class="id"><a href="CUAST.html#B">B</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AST.html#transf_globdefs">transf_globdefs</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#defs1">defs1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#defs2">defs2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, @<span class="id"><a href="CUAST.html#is_internal">is_internal</a></span> <span class="id"><a href="CUAST.html#A">A</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> <span class="id"><a href="CUAST.html#defs1">defs1</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = @<span class="id"><a href="CUAST.html#is_internal">is_internal</a></span> <span class="id"><a href="CUAST.html#B">B</a></span> <span class="id"><a href="CUAST.html#W">W</a></span> <span class="id"><a href="CUAST.html#defs2">defs2</a></span> <span class="id"><a href="CUAST.html#id">id</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7022')">Proof.</div>
<div class="proofscript" id="proof7022">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 1. <span class="id">revert</span> <span class="id">defs2</span>. <span class="tactic">induction</span> <span class="id">defs1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">defs2</span> <span class="kwd">as</span> [|<span class="id">b</span> <span class="id">defs2</span>]; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">monadInv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">a</span>, <span class="id">g</span>. <span class="tactic">destruct</span> <span class="id">transf_fun</span>. <span class="id">monadInv</span> <span class="id">H0</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="AST.html#transf_globvar">transf_globvar</a></span>. <span class="id">monadInv</span> <span class="id">H0</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">g</span>. <span class="tactic">destruct</span> <span class="id">transf_fun</span> <span class="id">eqn</span>:<span class="id">TRANSF</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>, <span class="id">f0</span>; <span class="tactic">eapply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">TRANSF</span>; <span class="tactic">try</span> <span class="id">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id"><a href="AST.html#ident_eq">ident_eq</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="AST.html#transf_globvar">transf_globvar</a></span>; <span class="id">monadInv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="AST.html#ident_eq">ident_eq</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="internal_fn">internal_fn</a></span> {<span class="id">F</span> <span class="id">V</span>} (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#filter">filter</a></span> (<span class="id"><a href="CUAST.html#is_internal">is_internal</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>)) (<span class="id"><a href="CUAST.html#cu_public">cu_public</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transform_partial_cunit2_internal_fn_preserved">transform_partial_cunit2_internal_fn_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">transf_fun</span> <span class="id">transf_var</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transf_func_correct">transf_func_correct</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#internal_fn">internal_fn</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> = @<span class="id"><a href="CUAST.html#internal_fn">internal_fn</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7023')">Proof.</div>
<div class="proofscript" id="proof7023">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span>, <span class="id"><a href="CUAST.html#internal_fn">internal_fn</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cu1</span>, <span class="id">cu2</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="CUAST.html#is_internal_preserved">is_internal_preserved</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">EQ</span>). <span class="tactic">clear</span> <span class="id">H0</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cu_public1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id"><a href="CUAST.html#is_internal">is_internal</a></span>; <span class="tactic">auto</span>. <span class="tactic">f_equal</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="load_store_init_data_preserved">load_store_init_data_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V</span> <span class="id">F2</span> <span class="id">transf_fun</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">m</span> <span class="id">b</span> <span class="id">init</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> (<span class="id">f</span> : <span class="id"><a href="CUAST.html#F1">F1</a></span>) (<span class="id">tf</span> : <span class="id"><a href="CUAST.html#F2">F2</a></span>) =&gt; <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span>) (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.load_store_init_data">Genv.load_store_init_data</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 <span class="id"><a href="CUAST.html#init">init</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.load_store_init_data">Genv.load_store_init_data</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> 0 <span class="id"><a href="CUAST.html#init">init</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7024')">Proof.</div>
<div class="proofscript" id="proof7024">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 1. <span class="tactic">generalize</span> 0. <span class="tactic">induction</span> <span class="id">init</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHinit</span>; <span class="tactic">try</span> (<span class="tactic">split</span>; <span class="tactic">intro</span>; <span class="tactic">tauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> []; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">b</span>' [<span class="id">FIND</span> <span class="id">LOAD</span>]]; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>'. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>'. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">mge_symb</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bytes_of_init_data_list_preserved">bytes_of_init_data_list_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V</span> <span class="id">F2</span> <span class="id">transf_fun</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">init</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="CUAST.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> (<span class="id">f</span> : <span class="id"><a href="CUAST.html#F1">F1</a></span>) (<span class="id">tf</span> : <span class="id"><a href="CUAST.html#F2">F2</a></span>) =&gt; <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span>) (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> <span class="id"><a href="CUAST.html#init">init</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#init">init</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7025')">Proof.</div>
<div class="proofscript" id="proof7025">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 1. <span class="tactic">induction</span> <span class="id">init</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHinit</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_mem_preserved">init_mem_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V</span> <span class="id">F2</span> <span class="id">transf_fun</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit">transform_partial_cunit</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#init_mem_generic">init_mem_generic</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#init_mem_generic">init_mem_generic</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7026')">Proof.</div>
<div class="proofscript" id="proof7026">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit">match_transform_partial_cunit</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">MATCH</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globals_initialized">Genv.globals_initialized</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span> <span class="id">b</span> <span class="id">gd</span> <span class="id">FIND</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>). <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> <span class="id">FIND</span>. <span class="tactic">rewrite</span> <span class="id">FIND</span> <span class="kwd">in</span> <span class="id">mge_defs</span>. <span class="id">inv</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">specialize</span> (<span class="id">globdef_initialized0</span> <span class="id">b</span> <span class="id">x</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>). <br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="CUAST.html#load_store_init_data_preserved">load_store_init_data_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="CUAST.html#bytes_of_init_data_list_preserved">bytes_of_init_data_list_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">init_mem_preserved</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V</span> <span class="id">F2</span> <span class="id">transf_fun</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit">transform_partial_cunit</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#init_mem_generic">init_mem_generic</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> <span class="id"><a href="CUAST.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#init_mem_generic">init_mem_generic</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> <span class="id"><a href="CUAST.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7027')">Proof.</div>
<div class="proofscript" id="proof7027">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#match_transform_partial_cunit">match_transform_partial_cunit</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#match_cu_match_genv">match_cu_match_genv</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">MATCH</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globals_initialized">Genv.globals_initialized</a></span> <span class="kwd">in</span> *. <span class="tactic">intros</span> <span class="id">b</span> <span class="id">gd</span> <span class="id">FIND</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b</span>). <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> <span class="id">FIND</span>. <span class="tactic">rewrite</span> <span class="id">FIND</span> <span class="kwd">in</span> <span class="id">mge_defs</span>. <span class="id">inv</span> <span class="id">mge_defs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">specialize</span> (<span class="id">globdef_initialized0</span> <span class="id">b</span> <span class="id">y</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>). <br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#load_store_init_data_preserved">load_store_init_data_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="CUAST.html#bytes_of_init_data_list_preserved">bytes_of_init_data_list_preserved</a></span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<div class="doc">CU property: no dup ident, no dup ef names </div>
<span class="kwd">Fixpoint</span> <span class="id"><a name="nodup_ident">nodup_ident</a></span> (<span class="id">ids</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#ident">AST.ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#ids">ids</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">id</span> :: <span class="id">ids</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">ids</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="kwd">else</span> <span class="id"><a href="CUAST.html#nodup_ident">nodup_ident</a></span> <span class="id">ids</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_ident_correct">nodup_ident_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ids</span>, <span class="id"><a href="CUAST.html#nodup_ident">nodup_ident</a></span> <span class="id"><a href="CUAST.html#ids">ids</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id"><a href="CUAST.html#ids">ids</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7028')">Proof.</div>
<div class="proofscript" id="proof7028">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ids</span>; <span class="tactic">intros</span>. <span class="id">constructor</span>. <br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nodup_gd_ident">nodup_gd_ident</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">cudefs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>)) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="CUAST.html#nodup_ident">nodup_ident</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#cudefs">cudefs</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_gd_ident_no_repet">nodup_gd_ident_no_repet</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">cudefs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">ident</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> <span class="id"><a href="CUAST.html#cudefs">cudefs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#cudefs">cudefs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7029')">Proof.</div>
<div class="proofscript" id="proof7029">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cudefs</span>; <span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="norepet_defs_gd_ident_exists">norepet_defs_gd_ident_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">cu</span>: <span class="id"><a href="CUAST.html#comp_unit_generic">comp_unit_generic</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ge</span> := <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7030')">Proof.</div>
<div class="proofscript" id="proof7030">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">ge</span>. <span class="tactic">destruct</span> <span class="id">cu</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">ge</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span>. <span class="tactic">simpl</span>. <span class="id">revert</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">cu_defs0</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">cu_defs0</span>)); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_involutive">rev_involutive</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">cu_defs0</span>). <span class="tactic">clear</span> <span class="id">cu_defs0</span>. <span class="tactic">intro</span> <span class="id">rcu_defs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id">rcu_defs</span>); <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span> <span class="kwd">in</span> <span class="id">NOREPET</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#list_norepet_append_commut">list_norepet_append_commut</a></span> <span class="kwd">in</span> <span class="id">NOREPET</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NOREPET</span>. <span class="id">inv</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">specialize</span> (<span class="id">IHl</span> <span class="id">H3</span>). <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.add_globals_app">Genv.add_globals_app</a></span> <span class="kwd">in</span> <span class="id">H</span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Globalenvs.html#Genv.add_globals_app">Genv.add_globals_app</a></span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> (<span class="id"><a href="Globalenvs.html#Genv.add_globals">Genv.add_globals</a></span> (<span class="id"><a href="Globalenvs.html#Genv.empty_genv">Genv.empty_genv</a></span> <span class="id">F</span> <span class="id">V</span> <span class="id">cu_public0</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">l</span>)))).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">a</span>). <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">IHl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span> (<span class="id"><a href="CUAST.html#Build_comp_unit_generic">Build_comp_unit_generic</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">l</span>) <span class="id">cu_public0</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="AST.html#prog_defs_names">prog_defs_names</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_gd_ident_exists">nodup_gd_ident_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">cu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ge</span> := <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7031')">Proof.</div>
<div class="proofscript" id="proof7031">
 <span class="tactic">intros</span> <span class="id">until</span> 1. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#norepet_defs_gd_ident_exists">norepet_defs_gd_ident_exists</a></span>. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#nodup_gd_ident_no_repet">nodup_gd_ident_no_repet</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_gd_init_genv_ident_exists">nodup_gd_init_genv_ident_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">cu</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7032')">Proof.</div>
<div class="proofscript" id="proof7032">
 <span class="tactic">intros</span> <span class="id">until</span> 2. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="CUAST.html#nodup_gd_ident_exists">nodup_gd_ident_exists</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nodup_gd_init_genv_ident_exists</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">cu</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="CUAST.html#id">id</a></span>, <span class="id"><a href="CUAST.html#gd">gd</a></span>) (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7033')">Proof.</div>
<div class="proofscript" id="proof7033">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="CUAST.html#nodup_gd_init_genv_ident_exists">nodup_gd_init_genv_ident_exists</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">id</span> <span class="id">FINDSYMB</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="AST.html#prog_defmap">prog_defmap</a></span> <span class="id">cu</span>)! <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AST.html#in_prog_defmap">in_prog_defmap</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">need a stronger pre condition on genv_defs: no rep in gds </div>
<span class="kwd">Fixpoint</span> <span class="id"><a name="ef_name_notin">ef_name_notin</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">name</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">ids</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">AST.ident</a></span> * (<span class="id"><a href="AST.html#globdef">AST.globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>))) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#ids">ids</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id">gd</span>) :: <span class="id">ids</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id">gd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> <span class="id">name</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="CUAST.html#ef_name_notin">ef_name_notin</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> <span class="id">ids</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="CUAST.html#ef_name_notin">ef_name_notin</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> <span class="id">ids</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ef_name_notin_correct">ef_name_notin_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">name</span> <span class="id">defs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#ef_name_notin">ef_name_notin</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>  <span class="id"><a href="CUAST.html#name">name</a></span> <span class="id"><a href="CUAST.html#defs">defs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">name</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="CUAST.html#id">id</a></span>,<span class="id"><a href="CUAST.html#gd">gd</a></span>) <span class="id"><a href="CUAST.html#defs">defs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#name">name</a></span> &lt;&gt; <span class="id">name</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7034')">Proof.</div>
<div class="proofscript" id="proof7034">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">defs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">g</span>. <span class="tactic">destruct</span> <span class="id">f</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id">eqn</span>:<span class="id">NAME</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">NAME</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id">eqn</span>:<span class="id">NAME</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id">IHdefs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="nodup_ef">nodup_ef</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ids</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#ident">AST.ident</a></span> * <span class="id"><a href="AST.html#globdef">AST.globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>)) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#ids">ids</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| (<span class="id">id</span>, <span class="id">gd</span>) :: <span class="id">ids</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id">gd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span> =&gt; <span class="id"><a href="CUAST.html#ef_name_notin">ef_name_notin</a></span> <span class="id">name</span> <span class="id">ids</span>' &amp;&amp; <span class="id"><a href="CUAST.html#nodup_ef">nodup_ef</a></span> <span class="id">ids</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="CUAST.html#nodup_ef">nodup_ef</a></span> <span class="id">ids</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_ef_correct">nodup_ef_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">ids</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#nodup_ef">nodup_ef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span>  <span class="id"><a href="CUAST.html#ids">ids</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">id1</span> <span class="id">gd1</span> <span class="id">id2</span> <span class="id">gd2</span> <span class="id">name1</span> <span class="id">name2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#n1">n1</a></span> &lt;&gt; <span class="id"><a href="CUAST.html#n2">n2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="CUAST.html#ids">ids</a></span> <span class="id"><a href="CUAST.html#n1">n1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="CUAST.html#id1">id1</a></span>, <span class="id"><a href="CUAST.html#gd1">gd1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="CUAST.html#ids">ids</a></span> <span class="id"><a href="CUAST.html#n2">n2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="CUAST.html#id2">id2</a></span>, <span class="id"><a href="CUAST.html#gd2">gd2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd1">gd1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#name1">name1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd2">gd2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#name2">name2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#name1">name1</a></span> &lt;&gt; <span class="id"><a href="CUAST.html#name2">name2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7035')">Proof.</div>
<div class="proofscript" id="proof7035">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ids</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Coqlib.html#nth_error_nil">nth_error_nil</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n1</span>, <span class="id">n2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#nth_error_in">nth_error_in</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#ef_name_notin_correct">ef_name_notin_correct</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#nth_error_in">nth_error_in</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#ef_name_notin_correct">ef_name_notin_correct</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.succ_inj_wd_neg">Nat.succ_inj_wd_neg</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fold_in">fold_in</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">func</span>: <span class="id"><a href="CUAST.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CUAST.html#B">B</a></span>) <span class="id">al</span> <span class="id">ob</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="kwd">fun</span> <span class="id">ob</span> <span class="id">a</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">then</span> <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">else</span> <span class="id"><a href="CUAST.html#ob">ob</a></span>) <span class="id"><a href="CUAST.html#al">al</a></span> <span class="id"><a href="CUAST.html#ob">ob</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">a</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="id"><a href="CUAST.html#al">al</a></span> /\ <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>) \/ (<span class="id"><a href="CUAST.html#ob">ob</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7036')">Proof.</div>
<div class="proofscript" id="proof7036">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">al</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id">func</span> <span class="id">a</span>) <span class="id">eqn</span>: <span class="id">FUNC</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id">IHal</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">a</span>' [<span class="id">IN</span> <span class="id">FUNC</span>']] | <span class="id">DEFAULT</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">DEFAULT</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHal</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">a</span>' [<span class="id">IN</span> <span class="id">FUNC</span>']] | <span class="id">DEFAULT</span>].<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fold_in</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">func</span>: <span class="id"><a href="CUAST.html#A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CUAST.html#B">B</a></span>) <span class="id">al</span> <span class="id">ob</span> <span class="id">b</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="id"><a href="CUAST.html#al">al</a></span> -&gt; <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="kwd">fun</span> <span class="id">ob</span> <span class="id">a</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">then</span> <span class="id"><a href="CUAST.html#func">func</a></span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">else</span> <span class="id"><a href="CUAST.html#ob">ob</a></span>) <span class="id"><a href="CUAST.html#al">al</a></span> <span class="id"><a href="CUAST.html#ob">ob</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7037')">Proof.</div>
<div class="proofscript" id="proof7037">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">al</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">clear</span>. <span class="id">revert</span> <span class="id">b</span>. <span class="tactic">induction</span> <span class="id">al</span>; <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id">func</span> <span class="id">a</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">func</span> <span class="id">a</span>). <span class="tactic">clear</span>. <span class="id">revert</span> <span class="id">b0</span>. <span class="tactic">induction</span> <span class="id">al</span>; <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id">func</span> <span class="id">a</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="norep_ef_name">norep_ef_name</a></span> {<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>} (<span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">gd</span> <span class="id">gd</span>' <span class="id">name</span> <span class="id">name</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#b">b</a></span> &lt;&gt; <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#name">name</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> <span class="id">gd</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#name">name</a></span> &lt;&gt; <span class="id">name</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nodup_ef_ge_norep_ef_name">nodup_ef_ge_norep_ef_name</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> <span class="id">cu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#nodup_gd_ident">nodup_gd_ident</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CUAST.html#nodup_ef">nodup_ef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span> <span class="id"><a href="CUAST.html#V">V</a></span> (<span class="id"><a href="CUAST.html#cu_defs">cu_defs</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu">cu</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#norep_ef_name">norep_ef_name</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7038')">Proof.</div>
<div class="proofscript" id="proof7038">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">GEINIT</span>. <span class="id">inv</span> <span class="id">H1</span>. <br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intros</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">gd1</span> <span class="id">gd2</span> <span class="id">name1</span> <span class="id">name2</span> <span class="id">NEQ</span> <span class="id">FIND1</span> <span class="id">FIND2</span> <span class="id">NAME1</span> <span class="id">NAME2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">nodup_gd_init_genv_ident_exists</span>'; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">FIND1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id1</span> [<span class="id">IN1</span> <span class="id">FIND1</span>']].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">nodup_gd_init_genv_ident_exists</span>'; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">FIND2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id2</span> [<span class="id">IN2</span> <span class="id">FIND2</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> *. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id1</span> &lt;&gt; <span class="id">id2</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">NEQ</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">IN1</span>. <span class="tactic">destruct</span> <span class="id">IN1</span> <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">IN1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">IN2</span>. <span class="tactic">destruct</span> <span class="id">IN2</span> <span class="kwd">as</span> [<span class="id">n2</span> <span class="id">IN2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">n1</span> &lt;&gt; <span class="id">n2</span>). <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="CUAST.html#nodup_ef_correct">nodup_ef_correct</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="invert_block_from_string_eq">invert_block_from_string_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">ge</span> <span class="id">ge_local</span>: <span class="id"><a href="Globalenvs.html#Genv.t">Genv.t</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id"><a href="CUAST.html#F">F</a></span>) <span class="id"><a href="CUAST.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOREPEF</span>: <span class="id"><a href="CUAST.html#norep_ef_name">norep_ef_name</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gd</span>, (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span>) ! <span class="id"><a href="CUAST.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#gd">gd</a></span> -&gt; <span class="id">exists</span> <span class="id">id</span>, (<span class="id"><a href="Globalenvs.html#Genv.genv_symb">Genv.genv_symb</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span>) ! <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#ge_related">ge_related</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">name</span>, <span class="id"><a href="Coqlib.html#option_rel">option_rel</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">b</span>' =&gt; <span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="CUAST.html#b">b</a></span> /\ <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span> <span class="id"><a href="CUAST.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id"><a href="CUAST.html#ge">ge</a></span> <span class="id"><a href="CUAST.html#name">name</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span> <span class="id"><a href="CUAST.html#ge_local">ge_local</a></span> <span class="id"><a href="CUAST.html#name">name</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7039')">Proof.</div>
<div class="proofscript" id="proof7039">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="CUAST.html#invert_block_from_string">invert_block_from_string</a></span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="kwd">fun</span> <span class="id">p</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> * <span class="id"><a href="AST.html#globdef">globdef</a></span> (<span class="id"><a href="AST.html#fundef">AST.fundef</a></span> <span class="id">F</span>) <span class="id">V</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span> <span class="id">name</span> <span class="id">name</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>) <span class="kwd">as</span> <span class="id">FILTER</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="kwd">fun</span> <span class="id">ob</span> <span class="id">a</span> =&gt; <span class="kwd">if</span> <span class="id">FILTER</span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">then</span> <span class="id">FILTER</span> <span class="id"><a href="CUAST.html#a">a</a></span> <span class="kwd">else</span> <span class="id"><a href="CUAST.html#ob">ob</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">a</span> <span class="id">p</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="CUAST.html#gd_ef_fun_name">gd_ef_fun_name</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">name</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span> <span class="id">name</span> <span class="id">name</span>' <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="CUAST.html#p">p</a></span>) <span class="kwd">else</span> <span class="id"><a href="CUAST.html#a">a</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="CUAST.html#a">a</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="tactic">do</span> 2 (<span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>; <span class="tactic">intro</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>. <span class="tactic">destruct</span> <span class="id">g</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.fold_spec">PTree.fold_spec</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H1</span>. <span class="tactic">rename</span> <span class="id">HeqFILTER</span> <span class="id">into</span> <span class="id">HFUNC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span>) <span class="id">eqn</span>:<span class="id">FOLD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CUAST.html#fold_in">fold_in</a></span> <span class="kwd">in</span> <span class="id">FOLD</span>. <span class="tactic">destruct</span> <span class="id">FOLD</span> <span class="kwd">as</span> [[[<span class="id">b</span> [<span class="id">f</span>|<span class="id">v</span>]] [<span class="id">IN</span> <span class="id">NAME</span>]]|<span class="id">C</span>]; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;2: <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HFUNC</span> <span class="kwd">in</span> <span class="id">NAME</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NAME</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">NAME</span>. <span class="tactic">subst</span> <span class="id">name0</span> <span class="id">p</span>. <span class="tactic">clear</span> <span class="id">NAME</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_complete">PTree.elements_complete</a></span> <span class="kwd">in</span> <span class="id">IN</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H5</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">INJ</span>]. <span class="id">exploit</span> <span class="id">H0</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">gd</span>' <span class="id">DEF</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H6</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">DEF</span>, <span class="id">IN</span>. <span class="tactic">intro</span> <span class="id">A</span>. <span class="tactic">inversion</span> <span class="id">A</span>. <span class="tactic">subst</span> <span class="id">gd</span>'. <span class="tactic">clear</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id">eqn</span>:<span class="id">FOLD</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CUAST.html#fold_in">fold_in</a></span> <span class="kwd">in</span> <span class="id">FOLD</span>'. <span class="tactic">destruct</span> <span class="id">FOLD</span>' <span class="kwd">as</span> [[[<span class="id">b</span>'' [<span class="id">f</span>'|<span class="id">v</span>']] [<span class="id">IN</span>' <span class="id">NAME</span>']]|<span class="id">C</span>]; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;2: <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HFUNC</span> <span class="kwd">in</span> <span class="id">NAME</span>'. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NAME</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>'; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">NAME</span>'. <span class="tactic">subst</span> <span class="id">name0</span> <span class="id">p</span>. <span class="tactic">clear</span> <span class="id">NAME</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>'' = <span class="id">b</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_complete">PTree.elements_complete</a></span> <span class="kwd">in</span> <span class="id">IN</span>'. <span class="id">revert</span> <span class="id">DEF</span> <span class="id">IN</span>' <span class="id">NOREPEF</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id">b</span>''); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">NOREPEF</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>''. <span class="id">exploit</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span>[<span class="id">id</span> <span class="id">FIND</span>].<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H3</span> <span class="id">id</span>). <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">FIND</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> <span class="id">H11</span>. <span class="tactic">inversion</span> <span class="id">H11</span>. <span class="tactic">subst</span> <span class="id">bj</span> <span class="id">b0</span> <span class="id">b</span>'0. <span class="tactic">clear</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">exists</span> <span class="id">id</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_correct">PTree.elements_correct</a></span> <span class="kwd">in</span> <span class="id">DEF</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">fold_in</span>' <span class="kwd">in</span> <span class="id">DEF</span>. <span class="tactic">rewrite</span> <span class="id">FOLD</span>' <span class="kwd">in</span> <span class="id">DEF</span>. <span class="tactic">destruct</span> <span class="id">DEF</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id">_</span> (<span class="id"><a href="Maps.html#PTree.elements">PTree.elements</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_defs">Genv.genv_defs</a></span> <span class="id">ge_local</span>)) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">eqn</span>:<span class="id">FOLD</span>';[|<span class="id">constructor</span>].<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CUAST.html#fold_in">fold_in</a></span> <span class="kwd">in</span> <span class="id">FOLD</span>'. <span class="tactic">destruct</span> <span class="id">FOLD</span>' <span class="kwd">as</span> [[[<span class="id">b</span>'' [<span class="id">f</span>'|<span class="id">v</span>']] [<span class="id">IN</span>' <span class="id">NAME</span>']]|<span class="id">C</span>]; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;2: <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HFUNC</span> <span class="kwd">in</span> <span class="id">NAME</span>'. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NAME</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>'; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">NAME</span>'. <span class="tactic">subst</span> <span class="id">name0</span> <span class="id">p</span>. <span class="tactic">clear</span> <span class="id">NAME</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Maps.html#PTree.elements_complete">PTree.elements_complete</a></span> <span class="kwd">in</span> <span class="id">IN</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">H4</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">INJ</span>]. <span class="id">exploit</span> <span class="id">H6</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IN</span>'. <span class="tactic">intro</span> <span class="id">A</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="Maps.html#PTree.elements_correct">PTree.elements_correct</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id">fold_in</span>' <span class="kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">FOLD</span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">destruct</span> <span class="id">A</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transform_partial_cunit_init_genv_preserved">transform_partial_cunit_init_genv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span> <span class="id">cu1</span> <span class="id">cu2</span> <span class="id">transf_fun</span> <span class="id">transf_var</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CUAST.html#transform_partial_cunit2">transform_partial_cunit2</a></span> <span class="id"><a href="CUAST.html#F1">F1</a></span> <span class="id"><a href="CUAST.html#V1">V1</a></span> <span class="id"><a href="CUAST.html#F2">F2</a></span> <span class="id"><a href="CUAST.html#V2">V2</a></span> <span class="id"><a href="CUAST.html#transf_fun">transf_fun</a></span> <span class="id"><a href="CUAST.html#transf_var">transf_var</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span>, <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu1">cu1</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ge2</span>, <span class="id"><a href="CUAST.html#globalenv_generic">globalenv_generic</a></span> <span class="id"><a href="CUAST.html#cu2">cu2</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge2">ge2</a></span> = <span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="CUAST.html#ge1">ge1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7040')">Proof.</div>
<div class="proofscript" id="proof7040">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">cu2</span>)) <span class="id">bound</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> (<span class="id"><a href="CUAST.html#match_transform_partial_cunit2">match_transform_partial_cunit2</a></span> (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id">exists</span> <span class="id">i</span>, <span class="id">transf_fun</span> <span class="id"><a href="CUAST.html#i">i</a></span> <span class="id"><a href="CUAST.html#f">f</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tf">tf</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">v</span> <span class="id">tv</span> =&gt; <span class="id">exists</span> <span class="id">i</span>, <span class="id">transf_var</span> <span class="id"><a href="CUAST.html#i">i</a></span> <span class="id"><a href="CUAST.html#v">v</a></span> = <span class="id"><a href="Errors.html#OK">OK</a></span> <span class="id"><a href="CUAST.html#tv">tv</a></span>)) <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cu1</span>, <span class="id">cu2</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Globalenvs.html#Genv.add_globals_match">Genv.add_globals_match</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id">mge_next</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PTree.gempty">Maps.PTree.gempty</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="CUAST.html#ge_extend">ge_extend</a></span> (<span class="id"><a href="Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id">cu2</span>) <span class="id">bound</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
