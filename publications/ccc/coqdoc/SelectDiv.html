<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SelectDiv</title>
<meta name="description" content="Documentation of Coq module SelectDiv" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SelectDiv</h1>
<div class="coq">
<br/>
<div class="doc">Instruction selection for division and modulus </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Compopts.html">Compopts</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Op.html">Op</a></span> <span class="id"><a href="CminorSel.html">CminorSel</a></span> <span class="id"><a href="SelectOp.html">SelectOp</a></span> <span class="id"><a href="SplitLong.html">SplitLong</a></span> <span class="id"><a href="SelectLong.html">SelectLong</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">cminorsel_scope</span>.<br/>
<br/>
<div class="doc">We try to turn divisions by a constant into a multiplication by
  a pseudo-inverse of the divisor.  The approach is described in
<ul>
<li>
 Torbj√∂rn Granlund, Peter L. Montgomery: "Division by Invariant
  Integers using Multiplication". PLDI 1994.
</li>
<li>
 Henry S. Warren, Jr: "Hacker's Delight". Addison-Wesley.  Chapter 10.
</li>
</ul>
</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="find_div_mul_params">find_div_mul_params</a></span> (<span class="id">fuel</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">nc</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">d</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#fuel">fuel</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">fuel</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">twp</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> (<span class="id"><a href="SelectDiv.html#nc">nc</a></span> * (<span class="id"><a href="SelectDiv.html#d">d</a></span> - <span class="id"><a href="SelectDiv.html#twp">twp</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span>)) <span class="id"><a href="SelectDiv.html#twp">twp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="SelectDiv.html#p">p</a></span>, (<span class="id"><a href="SelectDiv.html#twp">twp</a></span> + <span class="id"><a href="SelectDiv.html#d">d</a></span> - <span class="id"><a href="SelectDiv.html#twp">twp</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span>) / <span class="id"><a href="SelectDiv.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectDiv.html#find_div_mul_params">find_div_mul_params</a></span> <span class="id">fuel</span>' <span class="id"><a href="SelectDiv.html#nc">nc</a></span> <span class="id"><a href="SelectDiv.html#d">d</a></span> (<span class="id"><a href="SelectDiv.html#p">p</a></span> + 1)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divs_mul_params">divs_mul_params</a></span> (<span class="id">d</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#find_div_mul_params">find_div_mul_params</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Int.wordsize">Int.wordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Integers.html#Int.half_modulus">Int.half_modulus</a></span> - <span class="id"><a href="Integers.html#Int.half_modulus">Int.half_modulus</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#d">d</a></span> 32 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p</span> := <span class="id">p</span> - 32 <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id"><a href="SelectDiv.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (32 + <span class="id"><a href="SelectDiv.html#p">p</a></span>)) (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (32 + <span class="id"><a href="SelectDiv.html#p">p</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="SelectDiv.html#p">p</a></span> + 1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id">m</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">m</span> <span class="id"><a href="Integers.html#Int.modulus">Int.modulus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id"><a href="SelectDiv.html#p">p</a></span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span> 32<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="SelectDiv.html#p">p</a></span>, <span class="id">m</span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divu_mul_params">divu_mul_params</a></span> (<span class="id">d</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#find_div_mul_params">find_div_mul_params</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Int.wordsize">Int.wordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Integers.html#Int.modulus">Int.modulus</a></span> - <span class="id"><a href="Integers.html#Int.modulus">Int.modulus</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#d">d</a></span> 32 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p</span> := <span class="id">p</span> - 32 <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id"><a href="SelectDiv.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (32 + <span class="id"><a href="SelectDiv.html#p">p</a></span>)) (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (32 + <span class="id"><a href="SelectDiv.html#p">p</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id">m</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">m</span> <span class="id"><a href="Integers.html#Int.modulus">Int.modulus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id"><a href="SelectDiv.html#p">p</a></span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span> 32<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="SelectDiv.html#p">p</a></span>, <span class="id">m</span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divls_mul_params">divls_mul_params</a></span> (<span class="id">d</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#find_div_mul_params">find_div_mul_params</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Int64.wordsize">Int64.wordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span> - <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#d">d</a></span> 64 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p</span> := <span class="id">p</span> - 64 <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id"><a href="SelectDiv.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (64 + <span class="id"><a href="SelectDiv.html#p">p</a></span>)) (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (64 + <span class="id"><a href="SelectDiv.html#p">p</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="SelectDiv.html#p">p</a></span> + 1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id">m</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">m</span> <span class="id"><a href="Integers.html#Int64.modulus">Int64.modulus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id"><a href="SelectDiv.html#p">p</a></span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span> 64<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="SelectDiv.html#p">p</a></span>, <span class="id">m</span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divlu_mul_params">divlu_mul_params</a></span> (<span class="id">d</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#find_div_mul_params">find_div_mul_params</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Integers.html#Int64.wordsize">Int64.wordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Integers.html#Int64.modulus">Int64.modulus</a></span> - <span class="id"><a href="Integers.html#Int64.modulus">Int64.modulus</a></span> <span class="id">mod</span> <span class="id"><a href="SelectDiv.html#d">d</a></span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#d">d</a></span> 64 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">p</span> := <span class="id">p</span> - 64 <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> 0 <span class="id"><a href="SelectDiv.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (64 + <span class="id"><a href="SelectDiv.html#p">p</a></span>)) (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> (<span class="id">m</span> * <span class="id"><a href="SelectDiv.html#d">d</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (64 + <span class="id"><a href="SelectDiv.html#p">p</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id">m</span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">m</span> <span class="id"><a href="Integers.html#Int64.modulus">Int64.modulus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="Coqlib.html#zle">zle</a></span> 0 <span class="id"><a href="SelectDiv.html#p">p</a></span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span> 64<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="SelectDiv.html#p">p</a></span>, <span class="id">m</span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divu_mul">divu_mul</a></span> (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">m</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#shruimm">shruimm</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulhu">Omulhu</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span>)) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divuimm">divuimm</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n2</span>: <span class="id"><a href="Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="SelectOp.html#shruimm">shruimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#divu_base">divu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divu_mul_params">divu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectOp.html#divu_base">divu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#divu_mul">divu_mul</a></span> <span class="id">p</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction divu (e1: expr) (e2: expr) := 
  match e2 with
  | Eop (Ointconst n2) Enil =&gt; divuimm e1 n2
  | _ =&gt; divu_base e1 e2
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="divu_cases">divu_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="divu_case1">divu_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#divu_cases">divu_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="divu_default">divu_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#divu_cases">divu_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divu_match">divu_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#divu_cases">divu_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#divu_case1">divu_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#divu_default">divu_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divu">divu</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divu_match">divu_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divu_case1">divu_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divuimm">divuimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divu_default">divu_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#divu_base">divu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mod_from_div">mod_from_div</a></span> (<span class="id">equo</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n</span>: <span class="id"><a href="Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Osub">Osub</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> ::: <span class="id"><a href="SelectOp.html#mulimm">mulimm</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span> <span class="id"><a href="SelectDiv.html#equo">equo</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="moduimm">moduimm</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n2</span>: <span class="id"><a href="Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="SelectOp.html#andimm">andimm</a></span> (<span class="id"><a href="Integers.html#Int.sub">Int.sub</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span> <span class="id"><a href="Integers.html#Int.one">Int.one</a></span>) <span class="id"><a href="SelectDiv.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#modu_base">modu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divu_mul_params">divu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectOp.html#modu_base">modu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#mod_from_div">mod_from_div</a></span> (<span class="id"><a href="SelectDiv.html#divu_mul">divu_mul</a></span> <span class="id">p</span> <span class="id">m</span>) <span class="id"><a href="SelectDiv.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction modu (e1: expr) (e2: expr) := 
  match e2 with
  | Eop (Ointconst n2) Enil =&gt; moduimm e1 n2
  | _ =&gt; modu_base e1 e2
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="modu_cases">modu_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="modu_case1">modu_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#modu_cases">modu_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="modu_default">modu_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#modu_cases">modu_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modu_match">modu_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#modu_cases">modu_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#modu_case1">modu_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#modu_default">modu_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modu">modu</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#modu_match">modu_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#modu_case1">modu_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#moduimm">moduimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#modu_default">modu_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#modu_base">modu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divs_mul">divs_mul</a></span> (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">m</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulhs">Omulhs</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span>)) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e3</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span> <span class="id"><a href="Integers.html#Int.half_modulus">Int.half_modulus</a></span> <span class="kwd">then</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">else</span> <span class="id"><a href="SelectOp.html#add">add</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#add">add</a></span> (<span class="id"><a href="SelectOp.html#shrimm">shrimm</a></span> <span class="id"><a href="SelectDiv.html#e3">e3</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SelectOp.html#shruimm">shruimm</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="Integers.html#Int.zwordsize">Int.zwordsize</a></span> - 1))).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divsimm">divsimm</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n2</span>: <span class="id"><a href="Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 31)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="SelectOp.html#shrximm">shrximm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectOp.html#divs_base">divs_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#divs_base">divs_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divs_mul_params">divs_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.signed">Int.signed</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectOp.html#divs_base">divs_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#divs_mul">divs_mul</a></span> <span class="id">p</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction divs (e1: expr) (e2: expr) := 
  match e2 with
  | Eop (Ointconst n2) Enil =&gt; divsimm e1 n2
  | _ =&gt; divs_base e1 e2
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="divs_cases">divs_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="divs_case1">divs_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#divs_cases">divs_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="divs_default">divs_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#divs_cases">divs_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divs_match">divs_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#divs_cases">divs_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#divs_case1">divs_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#divs_default">divs_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divs">divs</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divs_match">divs_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divs_case1">divs_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divsimm">divsimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divs_default">divs_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#divs_base">divs_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modsimm">modsimm</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n2</span>: <span class="id"><a href="Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 31)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#mod_from_div">mod_from_div</a></span> (<span class="id"><a href="SelectOp.html#shrximm">shrximm</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">l</span>) <span class="id"><a href="SelectDiv.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectOp.html#mods_base">mods_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#mods_base">mods_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divs_mul_params">divs_mul_params</a></span> (<span class="id"><a href="Integers.html#Int.signed">Int.signed</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectOp.html#mods_base">mods_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#mod_from_div">mod_from_div</a></span> (<span class="id"><a href="SelectDiv.html#divs_mul">divs_mul</a></span> <span class="id">p</span> <span class="id">m</span>) <span class="id"><a href="SelectDiv.html#n2">n2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction mods (e1: expr) (e2: expr) := 
  match e2 with
  | Eop (Ointconst n2) Enil =&gt; modsimm e1 n2
  | _ =&gt; mods_base e1 e2
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="mods_cases">mods_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="mods_case1">mods_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#mods_cases">mods_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="mods_default">mods_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#mods_cases">mods_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mods_match">mods_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#mods_cases">mods_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ointconst">Ointconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#mods_case1">mods_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#mods_default">mods_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mods">mods</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#mods_match">mods_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#mods_case1">mods_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#modsimm">modsimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#mods_default">mods_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectOp.html#mods_base">mods_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<div class="doc">64-bit integer divisions </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SELECT">SELECT</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">hf</span>: <span class="id"><a href="SplitLong.html#helper_functions">helper_functions</a></span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modl_from_divl">modl_from_divl</a></span> (<span class="id">equo</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n</span>: <span class="id"><a href="Integers.html#int64">int64</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#subl">subl</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="SelectLong.html#mullimm">mullimm</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span> <span class="id"><a href="SelectDiv.html#equo">equo</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divlu_mull">divlu_mull</a></span> (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">m</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#shrluimm">shrluimm</a></span> (<span class="id"><a href="SelectLong.html#mullhu">mullhu</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span>)) (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divlu">divlu</a></span> (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>, <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n1</span> =&gt; <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.divu">Int64.divu</a></span> <span class="id">n1</span> <span class="id">n2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">Int64.is_power2</span>' <span class="id">n2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="SelectLong.html#shrluimm">shrluimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   =&gt; <span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#divlu_base">divlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divlu_mul_params">divlu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n2</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectLong.html#divlu_base">divlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#divlu_mull">divlu_mull</a></span> <span class="id">p</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="SelectLong.html#divlu_base">divlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modlu">modlu</a></span> (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>, <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n1</span> =&gt; <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.modu">Int64.modu</a></span> <span class="id">n1</span> <span class="id">n2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Integers.html#Int64.is_power2">Int64.is_power2</a></span> <span class="id">n2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="SelectLong.html#andl">andl</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.sub">Int64.sub</a></span> <span class="id">n2</span> <span class="id"><a href="Integers.html#Int64.one">Int64.one</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   =&gt; <span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#modlu_base">modlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divlu_mul_params">divlu_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n2</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectLong.html#modlu_base">modlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#modl_from_divl">modl_from_divl</a></span> (<span class="id"><a href="SelectDiv.html#divlu_mull">divlu_mull</a></span> <span class="id">p</span> <span class="id">m</span>) <span class="id">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="SelectLong.html#modlu_base">modlu_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divls_mull">divls_mull</a></span> (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">m</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#mullhs">mullhs</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e3</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="SelectDiv.html#m">m</a></span> <span class="id"><a href="Integers.html#Int64.half_modulus">Int64.half_modulus</a></span> <span class="kwd">then</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">else</span> <span class="id"><a href="SelectLong.html#addl">addl</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#addl">addl</a></span> (<span class="id"><a href="SelectLong.html#shrlimm">shrlimm</a></span> <span class="id"><a href="SelectDiv.html#e3">e3</a></span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="SelectDiv.html#p">p</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="SelectLong.html#shrluimm">shrluimm</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="Integers.html#Int64.zwordsize">Int64.zwordsize</a></span> - 1))).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divls">divls</a></span> (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>, <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n1</span> =&gt; <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.divs">Int64.divs</a></span> <span class="id">n1</span> <span class="id">n2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">Int64.is_power2</span>' <span class="id">n2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 63)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="SelectLong.html#shrxlimm">shrxlimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectLong.html#divls_base">divls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   =&gt; <span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#divls_base">divls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divls_mul_params">divls_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.signed">Int64.signed</a></span> <span class="id">n2</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectLong.html#divls_base">divls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#divls_mull">divls_mull</a></span> <span class="id">p</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="SelectLong.html#divls_base">divls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modls">modls</a></span> (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>, <span class="id"><a href="SelectLong.html#is_longconst">is_longconst</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n1</span> =&gt; <span class="id"><a href="SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="Integers.html#Int64.mods">Int64.mods</a></span> <span class="id">n1</span> <span class="id">n2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n2</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">Int64.is_power2</span>' <span class="id">n2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">l</span> (<span class="id"><a href="Integers.html#Int.repr">Int.repr</a></span> 63)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#modl_from_divl">modl_from_divl</a></span> (<span class="id"><a href="SelectLong.html#shrxlimm">shrxlimm</a></span> (<span class="id"><a href="CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">l</span>) <span class="id">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="SelectLong.html#modls_base">modls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   =&gt; <span class="kwd">if</span> <span class="id"><a href="Compopts.html#optim_for_size">optim_for_size</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectLong.html#modls_base">modls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divls_mul_params">divls_mul_params</a></span> (<span class="id"><a href="Integers.html#Int64.signed">Int64.signed</a></span> <span class="id">n2</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="SelectLong.html#modls_base">modls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">p</span>, <span class="id">m</span>) =&gt; <span class="id"><a href="CminorSel.html#Elet">Elet</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> (<span class="id"><a href="SelectDiv.html#modl_from_divl">modl_from_divl</a></span> (<span class="id"><a href="SelectDiv.html#divls_mull">divls_mull</a></span> <span class="id">p</span> <span class="id">m</span>) <span class="id">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="SelectLong.html#modls_base">modls_base</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="SelectDiv.html#SELECT">SELECT</a></span>.<br/>
<br/>
<div class="doc">Floating-point division by a constant can also be turned into a FP
    multiplication by the inverse constant, but only for powers of 2. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divfimm">divfimm</a></span> (<span class="id">e</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n</span>: <span class="id"><a href="Floats.html#float">float</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Floats.html#Float.exact_inverse">Float.exact_inverse</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' =&gt; <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulf">Omulf</a></span> (<span class="id"><a href="SelectDiv.html#e">e</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ofloatconst">Ofloatconst</a></span> <span class="id">n</span>') <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>    =&gt; <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Odivf">Odivf</a></span> (<span class="id"><a href="SelectDiv.html#e">e</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ofloatconst">Ofloatconst</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction divf (e1: expr) (e2: expr) :=
  match e2 with
  | Eop (Ofloatconst n2) Enil =&gt; divfimm e1 n2
  | _ =&gt; Eop Odivf (e1 ::: e2 ::: Enil)
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="divf_cases">divf_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="divf_case1">divf_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#divf_cases">divf_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ofloatconst">Ofloatconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="divf_default">divf_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#divf_cases">divf_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divf_match">divf_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#divf_cases">divf_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Ofloatconst">Ofloatconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#divf_case1">divf_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#divf_default">divf_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divf">divf</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divf_match">divf_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divf_case1">divf_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divfimm">divfimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divf_default">divf_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Odivf">Odivf</a></span> (<span class="id"><a href="SelectDiv.html#e1">e1</a></span> ::: <span class="id"><a href="SelectDiv.html#e2">e2</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divfsimm">divfsimm</a></span> (<span class="id">e</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">n</span>: <span class="id"><a href="Floats.html#float32">float32</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Floats.html#Float32.exact_inverse">Float32.exact_inverse</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span>' =&gt; <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Omulfs">Omulfs</a></span> (<span class="id"><a href="SelectDiv.html#e">e</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Osingleconst">Osingleconst</a></span> <span class="id">n</span>') <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>    =&gt; <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Odivfs">Odivfs</a></span> (<span class="id"><a href="SelectDiv.html#e">e</a></span> ::: <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Osingleconst">Osingleconst</a></span> <span class="id"><a href="SelectDiv.html#n">n</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Original definition:
<pre>
Nondetfunction divfs (e1: expr) (e2: expr) :=
  match e2 with
  | Eop (Osingleconst n2) Enil =&gt; divfsimm e1 n2
  | _ =&gt; Eop Odivfs (e1 ::: e2 ::: Enil)
  end.</pre>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="divfs_cases">divfs_cases</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="divfs_case1">divfs_case1</a></span>: <span class="kwd">forall</span> <span class="id">n2</span>, <span class="id"><a href="SelectDiv.html#divfs_cases">divfs_cases</a></span> (<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Osingleconst">Osingleconst</a></span> <span class="id"><a href="SelectDiv.html#n2">n2</a></span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="divfs_default">divfs_default</a></span>: <span class="kwd">forall</span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>), <span class="id"><a href="SelectDiv.html#divfs_cases">divfs_cases</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divfs_match">divfs_match</a></span> (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">as</span> <span class="id">zz1</span> <span class="kwd">return</span> <span class="id"><a href="SelectDiv.html#divfs_cases">divfs_cases</a></span> <span class="id"><a href="SelectDiv.html#zz1">zz1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="Op.html#Osingleconst">Osingleconst</a></span> <span class="id">n2</span>) <span class="id"><a href="CminorSel.html#Enil">Enil</a></span> =&gt; <span class="id"><a href="SelectDiv.html#divfs_case1">divfs_case1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id">e2</span> =&gt; <span class="id"><a href="SelectDiv.html#divfs_default">divfs_default</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="divfs">divfs</a></span> (<span class="id">e1</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) (<span class="id">e2</span>: <span class="id"><a href="CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="SelectDiv.html#divfs_match">divfs_match</a></span> <span class="id"><a href="SelectDiv.html#e2">e2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divfs_case1">divfs_case1</a></span> <span class="id">n2</span> =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="SelectDiv.html#divfsimm">divfsimm</a></span> <span class="id"><a href="SelectDiv.html#e1">e1</a></span> <span class="id">n2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="SelectDiv.html#divfs_default">divfs_default</a></span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CminorSel.html#Eop">Eop</a></span> <span class="id"><a href="Op.html#Odivfs">Odivfs</a></span> (<span class="id"><a href="SelectDiv.html#e1">e1</a></span> ::: <span class="id"><a href="SelectDiv.html#e2">e2</a></span> ::: <span class="id"><a href="CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
