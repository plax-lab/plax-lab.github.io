<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module MemClosures_local</title>
<meta name="description" content="Documentation of Coq module MemClosures_local" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module MemClosures_local</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="Memdata.html">Memdata</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Memory.html">Memory</a></span> <span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="InjRels.html">InjRels</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Mem</span>.<br/>
<br/>
<br/>
<h1> Memory Closures </h1>
<br/>
<div class="doc">This file defines closures on memory </div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "<span class="id">a</span> # <span class="id">b</span>" := (<span class="id"><a href="Maps.html#PMap.get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="tactic">at</span> <span class="id">level</span> 1).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">reach</span>' (<span class="id">m</span>: <span class="id"><a href="Memory.html#Mem.mem">mem</a></span>) (<span class="id">B</span>: <span class="id"><a href="Blockset.html#Bset.t">Bset.t</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Values.html#block">block</a></span> * <span class="id"><a href="Integers.html#ptrofs">ptrofs</a></span>) -&gt; <span class="id"><a href="Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="reach_nil">reach_nil</a></span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id">B</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id">reach</span>' <span class="id">m</span> <span class="id">B</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span><br/>
| <span class="id"><a name="reach_cons">reach_cons</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">L</span> <span class="id">b</span>' <span class="id">z</span> <span class="id">ofs</span> <span class="id">q</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reach</span>' <span class="id">m</span> <span class="id">B</span> <span class="id"><a href="MemClosures_local.html#L">L</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m</span>)!!<span class="id">b</span>' = <span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#ofs">ofs</a></span>) <span class="id"><a href="MemClosures_local.html#q">q</a></span> <span class="id"><a href="MemClosures_local.html#n">n</a></span>-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reach</span>' <span class="id">m</span> <span class="id">B</span> ((<span class="id">b</span>',<span class="id"><a href="MemClosures_local.html#ofs">ofs</a></span>)::<span class="id"><a href="MemClosures_local.html#L">L</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="reachable">reachable</a></span> : <span class="id"><a href="Memory.html#Mem.mem">mem</a></span> -&gt; <span class="id"><a href="Blockset.html#Bset.t">Bset.t</a></span> -&gt; <span class="id"><a href="Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Reachable">Reachable</a></span> : <span class="kwd">forall</span> <span class="id">m</span> <span class="id">bs</span> <span class="id">b</span> <span class="id">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reach</span>' <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs">bs</a></span> <span class="id"><a href="MemClosures_local.html#L">L</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="MemClosures_local.html#reachable">reachable</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs">bs</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>.<br/>
<br/>
<div class="doc">MODIFICATION:
    strengthen <span class="bracket"><span class="id">reach_closed</span></span>, requiring memory contains no Vundef / Undef values within block set of interest </div>
<span class="kwd">Record</span> <span class="id"><a name="reach_closed">reach_closed</a></span> (<span class="id">m</span>: <span class="id"><a href="Memory.html#Mem.mem">mem</a></span>) (<span class="id">B</span>: <span class="id"><a href="Blockset.html#Bset.t">Bset.t</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="reachable_closure">reachable_closure</a></span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="MemClosures_local.html#reachable">reachable</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="no_undef">no_undef</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span>) !! <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="Memdata.html#Undef">Undef</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="no_vundef">no_vundef</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">z</span> <span class="id">q</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ <span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span>) !! <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id"><a href="MemClosures_local.html#q">q</a></span> <span class="id"><a href="MemClosures_local.html#n">n</a></span>);<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reach_closed_belongsto">reach_closed_belongsto</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">B</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reachable">reachable</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6550')">Proof.</div>
<div class="proofscript" id="proof6550">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">reachable_closure0</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bset_eq_reach</span>'<span class="id">_local</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bs1</span> <span class="id">bs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">L</span> <span class="id">b</span>, <span class="id">reach</span>' <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> <span class="id"><a href="MemClosures_local.html#L">L</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id">reach</span>' <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span> <span class="id"><a href="MemClosures_local.html#L">L</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6551')">Proof.</div>
<div class="proofscript" id="proof6551">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">EQ</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">IHL</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">IHL</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bset_eq_reachable_local">bset_eq_reachable_local</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="MemClosures_local.html#reachable">reachable</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="MemClosures_local.html#reachable">reachable</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6552')">Proof.</div>
<div class="proofscript" id="proof6552">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">bset_eq_reach</span>'<span class="id">_local</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">bset_eq_reach</span>'<span class="id">_local</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">firstorder</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bset_eq_reach_closed_local">bset_eq_reach_closed_local</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bs1</span> <span class="id">bs2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs1">bs1</a></span> &lt;-&gt; <span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#bs2">bs2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6553')">Proof.</div>
<div class="proofscript" id="proof6553">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id"><a href="MemClosures_local.html#bset_eq_reachable_local">bset_eq_reachable_local</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">reachable_closure0</span>. <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id"><a href="MemClosures_local.html#bset_eq_reachable_local">bset_eq_reachable_local</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">reachable_closure0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">TODO: move to LDSimDefs_local? </div>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_inject_rc_inject">sep_inject_rc_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6554')">Proof.</div>
<div class="proofscript" id="proof6554">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">INJECT</span> <span class="id">INCR</span> <span class="id">SEPINJ</span> <span class="id">MEMINJ</span> <span class="id">RC</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;* <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_perm">mi_perm</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_align">mi_align</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">MEMVALINJ</span>. <span class="id">inv</span> <span class="id">MEMVALINJ</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="MemClosures_local.html#reachable_closure">reachable_closure</a></span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>. <span class="id">instantiate</span> (2:=(<span class="id">b1</span>,<span class="id">ofs1</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>); <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">INJ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b0</span>) <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">rewrite</span> <span class="id">Heqo</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MEMINJ</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MEMINJ</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="kwd">in</span> *; <span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MEMINJ</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MEMINJ</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sep_inject_rely_inject">sep_inject_rely_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; ~ <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; ~ <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id">m1</span>' <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m2</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6555')">Proof.</div>
<div class="proofscript" id="proof6555">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>' <span class="id">INJECT</span> <span class="id">INCR</span> <span class="id">SEPINJ</span> <span class="id">MEMINJ</span> <span class="id">UNCHG</span> <span class="id">RC</span> <span class="id">UNCHG</span>' <span class="id">RC</span>' <span class="id">MEMINJ</span>'.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;* <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ</span>.<br/>
&nbsp;Shared&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_perm">mi_perm</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>'; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;Local&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span> |- *; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_perm">mi_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span> <span class="kwd">in</span> <span class="id">H1</span>; [|<span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>]. <span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEPINJ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_mappedblocks">mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ</span>.<br/>
&nbsp;Shared&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_align">mi_align</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>'; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;Local&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_align">mi_align</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id">p</span>). <span class="id">instantiate</span> (1:= <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">z</span> <span class="id">RANGE</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;** <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ</span>.<br/>
&nbsp;Shared&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>'; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">MEMVALINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MEMVALINJ</span>; <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Local&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">C</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">C</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id">mu</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span> <span class="kwd">in</span> <span class="id">C</span>; [|<span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>]. <span class="tactic">destruct</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEPINJ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">C</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">C</span>; <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">erewrite</span> (<span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span> <span class="id">_</span> <span class="id">m1</span> <span class="id">m2</span>), (<span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span> <span class="id">_</span> <span class="id">m1</span>' <span class="id">m2</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_perm">mi_perm</a></span>. <span class="id">inv</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); [|<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span>; <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m2</span>)) <span class="kwd">in</span> <span class="id">p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">contradiction</span>|<span class="tactic">eapply</span> (<span class="id"><a href="Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span> <span class="id">_</span> <span class="id">m1</span> <span class="id">m2</span>); <span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>'). <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_mappedblocks">mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MEMINJ</span>. <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ1</span>; <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b2</span>) <span class="id">eqn</span>:<span class="id">INJ2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">j</span> ?<span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>, <span class="id">H</span>': <span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> ?<span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>; <span class="tactic">try</span> (<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>'; <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">TMP</span>; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">TMP</span>; <span class="id">inv</span> <span class="id">TMP</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> ?<span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="tactic">by</span> (<span class="tactic">intro</span> <span class="id">C</span>; <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">C</span>; <span class="tactic">eauto</span>; <span class="tactic">destruct</span> <span class="id">C</span>; <span class="tactic">congruence</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">exploit</span> <span class="id">SEPINJ</span>; <span class="tactic">eauto</span>; <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b2</span>) <span class="id">eqn</span>:<span class="id">INJ2</span>';[|<span class="tactic">discriminate</span>]. <span class="tactic">intro</span> <span class="id">C</span>; <span class="id">inv</span> <span class="id">C</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="id">exploit</span> <span class="id">SEPINJ</span>; <span class="tactic">eauto</span>; <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ1</span>';[|<span class="tactic">discriminate</span>]. <span class="tactic">intro</span> <span class="id">C</span>; <span class="id">inv</span> <span class="id">C</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">mi_freeblocks0</span> <span class="kwd">in</span> <span class="id">n</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b2</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">mi_freeblocks0</span> <span class="kwd">in</span> <span class="id">n</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Nonempty">Nonempty</a></span>) <span class="tactic">by</span> (<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Nonempty">Nonempty</a></span>) <span class="tactic">by</span> (<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">INJ</span>.<br/>
&nbsp;Shared&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Local&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">C</span>; [|<span class="tactic">eauto</span>]. <span class="tactic">destruct</span> <span class="id">C</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="id">erewrite</span> &lt;- (<span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="id">_</span> <span class="id">m1</span> <span class="id">m2</span>) <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ</span>.<br/>
&nbsp;Shared&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_perm_inv">mi_perm_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;Local&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span> <span class="kwd">in</span> <span class="id">C</span>; [|<span class="tactic">eauto</span>]. <span class="tactic">destruct</span> <span class="id">C</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)); <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- (<span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="id">_</span> <span class="id">m1</span> <span class="id">m2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- (<span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="id">_</span> <span class="id">m1</span> <span class="id">m2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_perm_inv">mi_perm_inv</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">MEMINJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">C</span>. <span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span> <span class="kwd">in</span> <span class="id">C</span>; [|<span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>]. <span class="tactic">destruct</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEPINJ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_mappedblocks">mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_on_reach_closed">unchanged_on_reach_closed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">B</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' <span class="id"><a href="MemClosures_local.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6556')">Proof.</div>
<div class="proofscript" id="proof6556">
&nbsp;&nbsp;<span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">CLOSED</span> <span class="id">_</span> <span class="id">_</span>]. <span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#Reachable">Reachable</a></span> <span class="kwd">with</span> <span class="id">L</span>. <span class="id">revert</span> <span class="id">L</span> <span class="id">b</span> <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">NEXT</span> <span class="id">PERM</span> <span class="id">CONTENT</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">PERM</span> <span class="kwd">in</span> <span class="id">H5</span>;[|<span class="tactic">apply</span> <span class="id">CLOSED</span>; <span class="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">CONTENT</span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_on_reach_closed_inverse">unchanged_on_reach_closed_inverse</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">B</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' <span class="id"><a href="MemClosures_local.html#B">B</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6557')">Proof.</div>
<div class="proofscript" id="proof6557">
&nbsp;&nbsp;<span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">CLOSED</span> <span class="id">_</span> <span class="id">_</span>]. <span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#Reachable">Reachable</a></span> <span class="kwd">with</span> <span class="id">L</span>. <span class="id">revert</span> <span class="id">L</span> <span class="id">b</span> <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">NEXT</span> <span class="id">PERM</span> <span class="id">CONTENT</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H5</span> <span class="kwd">as</span> <span class="id">READABLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">PERM</span> <span class="kwd">in</span> <span class="id">H5</span>;[|<span class="tactic">apply</span> <span class="id">CLOSED</span>; <span class="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">CONTENT</span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">CLOSED</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">pose</span> <span class="id">proof</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">READABLE</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">pose</span> <span class="id">proof</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">READABLE</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An invariant for RC preservation </div>
<span class="kwd">Record</span> <span class="id"><a name="unmapped_closed">unmapped_closed</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">m</span> <span class="id">m</span>': <span class="id"><a href="Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="unmapped_closure">unmapped_closure</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">z</span> <span class="id">b0</span> <span class="id">ofs0</span> <span class="id">q</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; ~ <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m</span>') !! <span class="id">b</span>' = <span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> (<span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id"><a href="MemClosures_local.html#b0">b0</a></span> <span class="id"><a href="MemClosures_local.html#ofs0">ofs0</a></span>) <span class="id"><a href="MemClosures_local.html#q">q</a></span> <span class="id"><a href="MemClosures_local.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b0">b0</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="unmapped_no_undef">unmapped_no_undef</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; ~ <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m</span>') !! <span class="id">b</span>' &lt;&gt; <span class="id"><a href="Memdata.html#Undef">Undef</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="unmapped_no_vundef">unmapped_no_vundef</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">z</span> <span class="id">q</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; ~ <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> (<span class="id"><a href="Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m</span>') !! <span class="id">b</span>' &lt;&gt; <span class="id"><a href="Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span> <span class="id"><a href="MemClosures_local.html#q">q</a></span> <span class="id"><a href="MemClosures_local.html#n">n</a></span>;<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reach_closed_unmapped_closed">reach_closed_unmapped_closed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6558')">Proof.</div>
<div class="proofscript" id="proof6558">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">reachable_closure0</span>. <span class="id">econstructor</span>. <span class="id">instantiate</span>(1:=(<span class="id">b</span>', <span class="id">ofs0</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>). <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_shared_src_valid">inject_shared_src_valid</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6559')">Proof.</div>
<div class="proofscript" id="proof6559">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_dom">Bset.inj_dom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">INJ</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span> <span class="kwd">in</span> <span class="id">n</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_shared_tgt_valid">inject_shared_tgt_valid</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6560')">Proof.</div>
<div class="proofscript" id="proof6560">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b0</span> <span class="id">INJ</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.mi_mappedblocks">mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unmapped_closed_reach_closed_preserved_by_extends">unmapped_closed_reach_closed_preserved_by_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="Values.html#inject_id">inject_id</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6561')">Proof.</div>
<div class="proofscript" id="proof6561">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQS</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id">mu</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id">mu</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">SHARED</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">inj_dom</span> <span class="kwd">in</span> <span class="id">SHARED</span>. <span class="tactic">destruct</span> <span class="id">SHARED</span> <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">A</span>]. <span class="id">exploit</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_range</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span> <span class="kwd">in</span> <span class="id">SHARED</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">SHARED</span> <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">A</span>]. <span class="id">exploit</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">revert</span> <span class="id">L</span> <span class="id">b</span> <span class="id">H7</span>. <span class="tactic">induction</span> <span class="id">L</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">apply</span> <span class="id">IHL</span> <span class="kwd">in</span> <span class="id">H9</span>. <span class="tactic">clear</span> <span class="id">IHL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>'0 &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span>'0 <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;mapped&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>, <span class="id">H12</span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>. <span class="id">inv</span> <span class="id">H8</span>. <span class="id">inv</span> <span class="id">H14</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">A</span>; <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">EQS</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#reachable_closure">reachable_closure</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="MemClosures_local.html#Reachable">Reachable</a></span> <span class="kwd">with</span> ((<span class="id">b</span>', <span class="id">ofs1</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">EQS</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_vundef">no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;unmapped&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H6</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b0</span> &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H8</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b0</span> &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H10</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_vundef">no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H8</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unmapped_closed_reach_closed_preserved_by_injection">unmapped_closed_reach_closed_preserved_by_injection</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6562')">Proof.</div>
<div class="proofscript" id="proof6562">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">revert</span> <span class="id">L</span> <span class="id">b</span> <span class="id">H6</span>. <span class="tactic">induction</span> <span class="id">L</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="tactic">apply</span> <span class="id">IHL</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">clear</span> <span class="id">IHL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>'0 &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span>'0 <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>, <span class="id">H11</span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>. <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> <span class="kwd">in</span> <span class="id">H13</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">INJ</span>'; [|<span class="tactic">discriminate</span>]. <span class="id">inv</span> <span class="id">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Bset.inj_range</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_vundef">no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H5</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b0</span> &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H7</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b0</span> &amp; <span class="id">INJ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">z</span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.mi_memval">mi_memval</a></span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intro</span> <span class="id">INJVAL</span>; <span class="id">inv</span> <span class="id">INJVAL</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H9</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_vundef">no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#no_undef">no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ</span>. <span class="tactic">exact</span> <span class="id">H7</span>. <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">unmapped_closed_reach_closed_preserved_by_injection</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6563')">Proof.</div>
<div class="proofscript" id="proof6563">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closed_reach_closed_preserved_by_injection">unmapped_closed_reach_closed_preserved_by_injection</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#inject_shared_src_valid">inject_shared_src_valid</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#inject_shared_tgt_valid">inject_shared_tgt_valid</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">unmapped_closed_reach_closed_preserved_by_injection</span>'':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">j</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m">m</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6564')">Proof.</div>
<div class="proofscript" id="proof6564">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">unmapped_closed_reach_closed_preserved_by_injection</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#sep_inject_rc_inject">sep_inject_rc_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_on_unmapped_closed_preserved">unchanged_on_unmapped_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id">m1</span>' <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6565')">Proof.</div>
<div class="proofscript" id="proof6565">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.    <br/>
&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">Bset.inj_dom</span>'; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unchanged_on_reach_closed_preserved">unchanged_on_reach_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt; <span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m1</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.unchanged_on">unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) <span class="id">m1</span>' <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt; <span class="id"><a href="MemClosures_local.html#reach_closed">reach_closed</a></span> <span class="id">m2</span>' (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6566')">Proof.</div>
<div class="proofscript" id="proof6566">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_reach_closed">unchanged_on_reach_closed</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unchanged_on_reach_closed_inverse">unchanged_on_reach_closed_inverse</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_val_inject_unmapped_closed_preserved">store_val_inject_unmapped_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">chunk</span> <span class="id">j</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">v</span>' <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b">b</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="MemClosures_local.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.store">store</a></span> <span class="id"><a href="MemClosures_local.html#chunk">chunk</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#ofs">ofs</a></span> <span class="id"><a href="MemClosures_local.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', <span class="id"><a href="MemClosures_local.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.store">store</a></span> <span class="id"><a href="MemClosures_local.html#chunk">chunk</a></span> <span class="id">m1</span>' <span class="id">b</span>' (<span class="id"><a href="MemClosures_local.html#ofs">ofs</a></span> + <span class="id"><a href="MemClosures_local.html#delta">delta</a></span>) <span class="id">v</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6567')">Proof.</div>
<div class="proofscript" id="proof6567">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">chunk</span> <span class="id">j</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">v</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">INJECT</span> <span class="id">SHAREDVALID</span> <span class="id">SHAREDVALID</span>' <span class="id">INCR</span> <span class="id">SEPINJ</span> <span class="id">RCINV</span> <span class="id">STORE</span> <span class="id">INJPTR</span> <span class="id">STORE</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">MAPPED</span>: <span class="kwd">forall</span> <span class="id">z</span>, <span class="id">ofs</span> &lt;= <span class="id"><a href="MemClosures_local.html#z">z</a></span> &lt; <span class="id">ofs</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> -&gt; <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">STORE</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Memory.html#Mem.valid_access">valid_access</a></span>. <span class="tactic">intros</span> [<span class="id">RANGEPERM</span> <span class="id">_</span>]. <span class="tactic">apply</span> <span class="id"><a href="Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="Memtype.html#Writable">Writable</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id">b</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">PMap.gss</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span>)). <span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b1</span> <span class="id">INJ1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPINJ</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">intro</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">INJ2</span>; <span class="id">inv</span> <span class="id">C</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>. <span class="tactic">intro</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">MAPPED</span>. <span class="tactic">split</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="kwd">in</span> <span class="id">H2</span>; [|<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>, &lt;- <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id">b</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span>)). <span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b1</span> <span class="id">INJ1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPINJ</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">intro</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">INJ2</span>; <span class="id">inv</span> <span class="id">C</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>. <span class="tactic">intro</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">MAPPED</span>. <span class="tactic">split</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span>; [|<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>, &lt;- <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id">b</span>'0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span>)). <span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_range">Bset.inj_range</a></span>; <span class="tactic">try</span> <span class="tactic">exact</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b1</span> <span class="id">INJ1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPINJ</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">INJ1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>; <span class="tactic">intro</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">INJ2</span>; <span class="id">inv</span> <span class="id">C</span>. <span class="id">exploit</span> <span class="id"><a href="Blockset.html#Bset.inj_injective">Bset.inj_injective</a></span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id">INJ1</span>. <span class="tactic">exact</span> <span class="id">INJ2</span>. <span class="tactic">intro</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">MAPPED</span>. <span class="tactic">split</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Memory.html#Mem.setN_outside">setN_outside</a></span>; [|<span class="tactic">rewrite</span> <span class="id"><a href="Memdata.html#encode_val_length">encode_val_length</a></span>, &lt;- <span class="id"><a href="Memdata.html#size_chunk_conv">size_chunk_conv</a></span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gso">PMap.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>; <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_1">perm_store_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_inject_unmapped_closed_preserved">free_inject_unmapped_closed_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">j</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">lo</span>' <span class="id">hi</span>' <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.inject">Bset.inject</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedSrc">Injections.SharedSrc</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>, <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">Injections.SharedTgt</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>) <span class="id"><a href="MemClosures_local.html#b0">b0</a></span> -&gt; <span class="id"><a href="Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span>' <span class="id"><a href="MemClosures_local.html#b0">b0</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#inject_incr">inject_incr</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InjRels.html#sep_inject">sep_inject</a></span> (<span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span> (<span class="id"><a href="Injections.html#inj">Injections.inj</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span>)) <span class="id"><a href="MemClosures_local.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="MemClosures_local.html#m1">m1</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#lo">lo</a></span> <span class="id"><a href="MemClosures_local.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#j">j</a></span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', <span class="id"><a href="MemClosures_local.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lo</span>' &lt;= (<span class="id"><a href="MemClosures_local.html#lo">lo</a></span> + <span class="id"><a href="MemClosures_local.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="MemClosures_local.html#hi">hi</a></span> + <span class="id"><a href="MemClosures_local.html#delta">delta</a></span>) &lt;= <span class="id">hi</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.free">Mem.free</a></span> <span class="id">m1</span>' <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemClosures_local.html#unmapped_closed">unmapped_closed</a></span> <span class="id"><a href="MemClosures_local.html#mu">mu</a></span> <span class="id"><a href="MemClosures_local.html#m2">m2</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6568')">Proof.</div>
<div class="proofscript" id="proof6568">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">mu</span> <span class="id">m1</span> <span class="id">m1</span>' <span class="id">j</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">lo</span>' <span class="id">hi</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">INJECT</span> <span class="id">SHAREDVALID</span> <span class="id">SHAREDVALID</span>' <span class="id">INCR</span> <span class="id">SEPINJ</span> <span class="id">RCINV</span> <span class="id">FREE</span> <span class="id">INJPTR</span> <span class="id">HLO</span> <span class="id">HHI</span> <span class="id">FREE</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.free_unchanged_on">free_unchanged_on</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="kwd">fun</span> <span class="id">b</span> <span class="id">z</span> =&gt; ~ (<span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id">b</span>' /\ <span class="id">lo</span>' &lt;= <span class="id"><a href="MemClosures_local.html#z">z</a></span> &lt; <span class="id">hi</span>')); <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">UNCHG</span>'.<br/>
<div class="doc">unmapped are less </div>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id">mu</span>) <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; ~ <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span>' <span class="id">b</span>' <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt; ~ <span class="id"><a href="Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id"><a href="MemClosures_local.html#b">b</a></span> <span class="id"><a href="MemClosures_local.html#z">z</a></span> <span class="id"><a href="Memtype.html#Max">Max</a></span> <span class="id"><a href="Memtype.html#Readable">Readable</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_1">perm_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zlt">zlt</a></span> <span class="id">z</span> <span class="id">lo</span>); <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#zle">zle</a></span> <span class="id">hi</span> <span class="id">z</span>); [<span class="tactic">omega</span>|]. <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>. <span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.inj_to_meminj">Bset.inj_to_meminj</a></span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">A</span>. <span class="tactic">rewrite</span> <span class="id">INJPTR</span> <span class="kwd">in</span> <span class="id">A</span>; <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.  <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_closure">unmapped_closure</a></span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H5</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_undef">unmapped_no_undef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemClosures_local.html#unmapped_no_vundef">unmapped_no_vundef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
