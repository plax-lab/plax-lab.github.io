<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module GlobSemantics</title>
<meta name="description" content="Documentation of Coq module GlobSemantics" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module GlobSemantics</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span> <span class="id"><a href="GAST.html">GAST</a></span> <span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Injections.html">Injections</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html">Coq.Lists.Streams</a></span>.<br/>
<br/>
<div class="doc">This file defines the global semantics of a program. </div>
<br/>
<h1> Global Semantics </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="GlobSem">GlobSem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">GE</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}.<br/>
<br/>
<div class="doc">The global semantics rules </div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="glob_step">glob_step</a></span> : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="id"><a href="ETrace.html#glabel">glabel</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
<div class="doc">Normal core-step </div>
&nbsp;&nbsp;| <span class="id"><a name="Corestep">Corestep</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">d</span> <span class="id">c</span> <span class="id">fp</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>' <span class="id">gm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_f</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_fl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span>) <span class="id">c_f</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_step</span>: <span class="id"><a href="InteractionSemantics.html#step">step</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">c_fl</span> <span class="id">cc</span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobSemantics.html#fp">fp</a></span> <span class="id">cc</span>' <span class="id">gm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobSemantics.html#d">d</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="GlobSemantics.html#fp">fp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">gm</span>' <span class="id"><a href="GlobSemantics.html#d">d</a></span>)<br/>
<div class="doc">Steps that call external function:
      when the current core generates an <span class="bracket"><span class="id">at_external</span></span> event with the 
      function id <span class="bracket"><span class="id">funid</span></span> and arguments <span class="bracket"><span class="id">args</span></span>,
      the global semantics find the module <span class="bracket"><span class="id">new_mod</span></span> corresponds to <span class="bracket"><span class="id">funid</span></span> using 
      <span class="bracket"><span class="id">GlobEnv.get_mod</span></span> function, and 
      initialize a new core using <span class="bracket"><span class="id">init_core</span></span> of <span class="bracket"><span class="id">new_mod</span></span> with <span class="bracket"><span class="id">funid</span></span> and <span class="bracket"><span class="id">args</span></span>,
      and pushes the new core using <span class="bracket"><span class="id">ThreadPool.push</span></span> into the call stack of current thread
   </div>
&nbsp;&nbsp;| <span class="id"><a name="Call">Call</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">funid</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">new_ix</span> <span class="id">cc</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GlobSemantics.html#funid">funid</a></span>, <span class="id"><a href="GlobSemantics.html#sg">sg</a></span>, <span class="id"><a href="GlobSemantics.html#args">args</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_prim</span>: <span class="id"><a href="GAST.html#not_primitive">not_primitive</a></span> <span class="id"><a href="GlobSemantics.html#funid">funid</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_mod_id</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#funid">funid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#new_ix">new_ix</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#new_ix">new_ix</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">new_Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">new_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_new_core</span>: <span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">new_lang</span> <span class="id">new_Ge</span> <span class="id"><a href="GlobSemantics.html#funid">funid</a></span> <span class="id"><a href="GlobSemantics.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_push</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#new_ix">new_ix</a></span> <span class="id">cc</span>' <span class="id"><a href="GlobSemantics.html#sg">sg</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
<div class="doc">Steps of returning of external function:
      when the current core halts with return value <span class="bracket"><span class="id">res</span></span>,
      the global semantics pops the current core using <span class="bracket"><span class="id">ThreadPool.pop</span></span>,
      and updates the caller core using <span class="bracket"><span class="id">after_external</span></span> with the return value.
   </div>
&nbsp;&nbsp;| <span class="id"><a name="Return">Return</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>' <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'' <span class="id">thdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_caller</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span>' := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c</span>'<span class="id">_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c</span>'<span class="id">_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span>' := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c</span>'<span class="id">_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c</span>'<span class="id">_lang</span> <span class="id">cc</span>' (<span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="id">c_sg</span> <span class="id"><a href="GlobSemantics.html#res">res</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_upd</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">c</span>' <span class="id">cc</span>'' <span class="id">c</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">c</span>'' <span class="id">thdp</span>''),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>'' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
<div class="doc">Thread halt </div>
&nbsp;&nbsp;| <span class="id"><a name="Halt">Halt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">res</span> <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_halt</span>: <span class="id"><a href="InteractionSemantics.html#halt">halt</a></span> <span class="id">c_lang</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#res">res</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_pop</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">thdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_halt</span>:<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
<div class="doc">Enter atomic block </div>
&nbsp;&nbsp;| <span class="id"><a name="Ent_Atom">Ent_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ent_atom">ent_atom</a></span>, <span class="id"><a href="GAST.html#ent_atom_sg">ent_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>)<br/>
<div class="doc">Exit atomic block </div>
&nbsp;&nbsp;| <span class="id"><a name="Ext_Atom">Ext_Atom</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#ext_atom">ext_atom</a></span>, <span class="id"><a href="GAST.html#ext_atom_sg">ext_atom_sg</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#I">I</a></span>) <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
<div class="doc">Generate event </div>
&nbsp;&nbsp;| <span class="id"><a name="EF_Print">EF_Print</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">c</span> <span class="id">v</span> <span class="id">cc</span>' <span class="id">c</span>' <span class="id">thdp</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">cc</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_ix</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_mod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">c_ix</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">c_lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Ge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">c_mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_core</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_atext</span>: <span class="id"><a href="InteractionSemantics.html#at_external">at_external</a></span> <span class="id">c_lang</span> <span class="id">Ge</span> <span class="id">cc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="GAST.html#print">print</a></span>, <span class="id"><a href="GAST.html#print_sg">print_sg</a></span>, <span class="id"><a href="GlobSemantics.html#v">v</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_v</span>: <span class="id"><a href="GlobDefs.html#not_pointer">not_pointer</a></span> <span class="id"><a href="GlobSemantics.html#v">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_aftext</span>: <span class="id"><a href="InteractionSemantics.html#after_external">after_external</a></span> <span class="id">c_lang</span> <span class="id">cc</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">cc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_core_update</span>: <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id"><a href="GlobSemantics.html#c">c</a></span> <span class="id">cc</span>' <span class="id">c</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_tp_upd</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id">c</span>' <span class="id">thdp</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) (<span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id"><a href="GlobSemantics.html#v">v</a></span>) <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id">thdp</span>' <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>)<br/>
<div class="doc">Thread switch, only switch to non-halted threads </div>
&nbsp;&nbsp;| <span class="id"><a name="Switch">Switch</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">gm</span> <span class="id">t</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_thread_valid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_not_halted</span>: ~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id">t</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> (<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>) <span class="id"><a href="ETrace.html#sw">sw</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#thdp">thdp</a></span> <span class="id">t</span>' <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobDefs.html#O">O</a></span>).<br/>
<br/>
<br/>
<div class="doc">Abort if current thread got stuck </div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="abort">abort</a></span> (<span class="id">pc</span>: @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#GlobSem.GE">GE</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(~ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> (<span class="id"><a href="GlobSemantics.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span>)) (<span class="id"><a href="GlobSemantics.html#pc">pc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>)) ) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">gl</span> <span class="id">fp</span> <span class="id">pc</span>', <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#pc">pc</a></span> <span class="id"><a href="GlobSemantics.html#gl">gl</a></span> <span class="id"><a href="GlobSemantics.html#fp">fp</a></span> <span class="id">pc</span>' -&gt; <span class="id"><a href="GlobSemantics.html#gl">gl</a></span> = <span class="id"><a href="ETrace.html#sw">sw</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="GlobSemantics.html#GlobSem">GlobSem</a></span>.<br/>
<br/>
<div class="doc">A program is safe if for any initial configurations, it would not abort </div>
<span class="kwd">Inductive</span> <span class="id"><a name="safe_prog">safe_prog</a></span> {<span class="id">NL</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} {<span class="id">L</span>: @<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="GlobSemantics.html#NL">NL</a></span>} (<span class="id">p</span>: @<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id"><a href="GlobSemantics.html#NL">NL</a></span> <span class="id"><a href="GlobSemantics.html#L">L</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Safe_prog">Safe_prog</a></span> : (<span class="kwd">forall</span> <span class="id">gm</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">t</span>, <span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id">p</span> <span class="id"><a href="GlobSemantics.html#gm">gm</a></span> <span class="id"><a href="GlobSemantics.html#GE">GE</a></span> <span class="id"><a href="GlobSemantics.html#pc">pc</a></span> <span class="id"><a href="GlobSemantics.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#safe_state">safe_state</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobSemantics.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#safe_prog">safe_prog</a></span> <span class="id">p</span>.<br/>
<br/>
<div class="doc">Refinement between program configurations, i.e. subset of event traces </div>
<span class="kwd">Definition</span> <span class="id"><a name="config_refine">config_refine</a></span> {<span class="id">ge1</span> <span class="id">ge2</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s1</span>: @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#ge1">ge1</a></span>) (<span class="id">s2</span>: @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="GlobSemantics.html#ge2">ge2</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">B</span>, <span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSemantics.html#s1">s1</a></span> <span class="id"><a href="GlobSemantics.html#B">B</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#Etr">Etr</a></span> <span class="id"><a href="GlobSemantics.html#glob_step">glob_step</a></span> <span class="id"><a href="GlobSemantics.html#abort">abort</a></span> <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="GlobSemantics.html#s2">s2</a></span> <span class="id"><a href="GlobSemantics.html#B">B</a></span>.<br/>
<br/>
<div class="doc">Refinement between programs </div>
<span class="kwd">Inductive</span> <span class="id"><a name="prog_refine">prog_refine</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">NL</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} {<span class="id">L</span>: @<span class="id"><a href="GAST.html#langs">langs</a></span> <span class="id"><a href="GlobSemantics.html#NL">NL</a></span>} : @<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id">NL</span> <span class="id">L</span> -&gt; @<span class="id"><a href="GAST.html#prog">prog</a></span> <span class="id">NL</span> <span class="id">L</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="Prog_Refine">Prog_Refine</a></span> : <span class="kwd">forall</span> <span class="id">pSrc</span> <span class="id">pTgt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">sgm</span> <span class="id">sge</span> <span class="id">spc</span> <span class="id">ts</span> <span class="id">tgm</span> <span class="id">tge</span> <span class="id">tpc</span> <span class="id">tt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#InitRel">InitRel</a></span> <span class="id"><a href="GlobSemantics.html#mu">mu</a></span> <span class="id"><a href="GlobSemantics.html#sge">sge</a></span> <span class="id"><a href="GlobSemantics.html#tge">tge</a></span> <span class="id"><a href="GlobSemantics.html#sgm">sgm</a></span> <span class="id"><a href="GlobSemantics.html#tgm">tgm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="GlobSemantics.html#pSrc">pSrc</a></span> <span class="id"><a href="GlobSemantics.html#sgm">sgm</a></span> <span class="id"><a href="GlobSemantics.html#sge">sge</a></span> <span class="id"><a href="GlobSemantics.html#spc">spc</a></span> <span class="id"><a href="GlobSemantics.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#init_config">init_config</a></span> <span class="id"><a href="GlobSemantics.html#pTgt">pTgt</a></span> <span class="id"><a href="GlobSemantics.html#tgm">tgm</a></span> <span class="id"><a href="GlobSemantics.html#tge">tge</a></span> <span class="id"><a href="GlobSemantics.html#tpc">tpc</a></span> <span class="id"><a href="GlobSemantics.html#tt">tt</a></span> -&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#config_refine">config_refine</a></span> <span class="id"><a href="GlobSemantics.html#tpc">tpc</a></span> <span class="id"><a href="GlobSemantics.html#spc">spc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobSemantics.html#prog_refine">prog_refine</a></span> <span class="id"><a href="GlobSemantics.html#pSrc">pSrc</a></span> <span class="id"><a href="GlobSemantics.html#pTgt">pTgt</a></span>.<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
