<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Invs</title>
<meta name="description" content="Documentation of Coq module Invs" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Invs</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html">EqdepFacts</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Axioms.html">Axioms</a></span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Maps.html">Maps</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Blockset.html">Blockset</a></span> <span class="id"><a href="Footprint.html">Footprint</a></span> <span class="id"><a href="GMemory.html">GMemory</a></span> <span class="id"><a href="MemAux.html">MemAux</a></span> <span class="id"><a href="InteractionSemantics.html">InteractionSemantics</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html">ETrace</a></span> <span class="id"><a href="GlobDefs.html">GlobDefs</a></span> <span class="id"><a href="NPSemantics.html">NPSemantics</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Injections.html">Injections</a></span> <span class="id"><a href="LDSimDefs.html">LDSimDefs</a></span> <span class="id"><a href="LDSim.html">LDSim</a></span> <span class="id"><a href="AuxLDSim.html">AuxLDSim</a></span> <span class="id"><a href="GSimDefs.html">GSimDefs</a></span> <span class="id"><a href="GlobDSim.html">GlobDSim</a></span> <span class="id"><a href="GDefLemmas.html">GDefLemmas</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "'&lt;&lt;' <span class="id">i</span> ',' <span class="id">c</span> ',' <span class="id">sg</span> ',' <span class="id">F</span> '&gt;&gt;'" :=<br/>
&nbsp;&nbsp;{|<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i</span>; <span class="id">Core.c</span> := <span class="id">c</span>; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span>|}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "'[[' <span class="id">thdp</span> ',' <span class="id">t</span> ',' <span class="id">m</span> ',' <span class="id">b</span> ']]@' <span class="id">G</span> " :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">G</span> <span class="id">thdp</span> <span class="id">t</span> <span class="id">m</span> <span class="id">b</span>) (<span class="tactic">at</span> <span class="id">level</span> 70, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "'[[' <span class="id">thdp</span> ',' <span class="id">t</span> ',' <span class="id">m</span> ',' <span class="id">b</span> ']]'" :=<br/>
&nbsp;&nbsp;({| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:= <span class="id">thdp</span>; <span class="id">cur_tid</span>:= <span class="id">t</span>; <span class="id">gm</span>:= <span class="id">m</span>; <span class="id">atom_bit</span>:= <span class="id">b</span> |})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">at</span> <span class="id">level</span> 70, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> " <span class="id">GE</span> '||-' <span class="id">pc1</span> '=&lt;' <span class="id">l</span> '|' <span class="id">fp</span> '&gt;=&gt;&gt;' <span class="id">pc2</span> " :=<br/>
&nbsp;&nbsp;(@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">GE</span> <span class="id">pc1</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc2</span>) (<span class="tactic">at</span> <span class="id">level</span> 80, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="freelist_free_unchg_freelist">freelist_free_unchg_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">fl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="Invs.html#fl">fl</a></span> (<span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span> <span class="id"><a href="Invs.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="id"><a href="Invs.html#fl">fl</a></span> (<span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span> <span class="id">m</span>') -&gt;            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id"><a href="Invs.html#fl">fl</a></span> <span class="id"><a href="Invs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9142')">Proof.</div>
<div class="proofscript" id="proof9142">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">split</span>; <span class="tactic">intro</span>; [<span class="id">exploit</span> <span class="id">H</span>| <span class="id">exploit</span> <span class="id">H0</span>]; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">contradiction</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#Memperm_validblock">Memperm_validblock</a></span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<div class="doc">Well defined properties for GE </div>
<span class="kwd">Definition</span> <span class="id"><a name="GE_mod_wd">GE_mod_wd</a></span> (<span class="id">GE</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>): <span class="kwd">Prop</span>:=<br/>
&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">modules</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Mod</span> := <span class="id">modules</span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">lang</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">Mod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#wd">wd</a></span> <span class="id">lang</span>.<br/>
<br/>
<div class="doc">lemmas derived from GE_mod_wd </div>
<div class="doc">forward </div>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_forward">GE_mod_wd_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE">GE</a></span> ||- <span class="id"><a href="Invs.html#pc">pc</a></span> =&lt;<span class="id"><a href="Invs.html#l">l</a></span>|<span class="id"><a href="Invs.html#fp">fp</a></span>&gt;=&gt;&gt; <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9143')">Proof.</div>
<div class="proofscript" id="proof9143">
&nbsp;&nbsp;<span class="tactic">inversion</span> 2; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="InteractionSemantics.html#step_forward">step_forward</a></span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">in</span> <span class="id">H_core_step</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_star_forward">GE_mod_wd_star_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> (<span class="id">pc</span> <span class="id">pc</span>': @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">ETrace.tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9144')">Proof.</div>
<div class="proofscript" id="proof9144">
&nbsp;&nbsp;<span class="tactic">induction</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_plus_forward">GE_mod_wd_plus_forward</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> (<span class="id">pc</span> <span class="id">pc</span>': @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id">fp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">ETrace.tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9145')">Proof.</div>
<div class="proofscript" id="proof9145">
&nbsp;&nbsp;<span class="tactic">induction</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#l">l</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9146')">Proof.</div>
<div class="proofscript" id="proof9146">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">pc</span>, <span class="id">pc</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">clear</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;core&nbsp;step&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;call&nbsp;ext&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push_inv">ThreadPool.push_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;return&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;thread&nbsp;halt&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;all&nbsp;halt&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;primitives&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_plus_tp_inv">GE_mod_wd_plus_tp_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">ETrace.tau_plus</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9147')">Proof.</div>
<div class="proofscript" id="proof9147">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_star_tp_inv">GE_mod_wd_star_tp_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">ETrace.tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9148')">Proof.</div>
<div class="proofscript" id="proof9148">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="get_top_in_cs">get_top_in_cs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> (<span class="id">thdp</span>: @<span class="id"><a href="GlobDefs.html#ThreadPool.t">ThreadPool.t</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id">i</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id"><a href="Invs.html#thdp">thdp</a></span> <span class="id"><a href="Invs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#c">c</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id"><a href="Invs.html#thdp">thdp</a></span> <span class="id"><a href="Invs.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#cs">cs</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="id"><a href="Invs.html#cs">cs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9149')">Proof.</div>
<div class="proofscript" id="proof9149">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span> <span class="id">i</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">l</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#l">l</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>') (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9150')">Proof.</div>
<div class="proofscript" id="proof9150">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span>, <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;core-step&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>; <span class="tactic">destruct</span> <span class="id">c</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;/&nbsp;need&nbsp;lemma&nbsp;for&nbsp;blockset&nbsp;and&nbsp;no_overlap&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">b</span> <span class="id">n0</span> <span class="id">H</span>'. <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">b</span> <span class="id">n0</span> <span class="id">H</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">cs_inv</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>). <span class="tactic">destruct</span> <span class="id">cs_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">fid_valid</span> {| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i0</span>; <span class="id">Core.c</span> := <span class="id">c</span>; <span class="id">Core.sg</span> := <span class="id">sg</span>; <span class="id">Core.F</span> := <span class="id">F</span> |}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">fid_valid</span>. <span class="tactic">clear</span> <span class="id">fid_disjoint</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span> <span class="id">_</span> (<span class="id">H</span> <span class="id">i0</span>)) <span class="kwd">in</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="InteractionSemantics.html#LEffect_local_alloc">LEffect_local_alloc</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H_core_step</span> <span class="id">into</span> <span class="id">H_in_fl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_in_fl</span> <span class="kwd">as</span> (<span class="id">n0</span>'&amp;<span class="id">H_in_fl</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.get_tfl">FLists.get_tfl</a></span> <span class="kwd">in</span> <span class="id">H_in_fl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id">GE</span>) <span class="id">i</span> <span class="id">n</span> &lt;&gt; <span class="id">F</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#get_top_in_cs">get_top_in_cs</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_core</span> <span class="kwd">as</span> (<span class="id">cs0</span>&amp;<span class="id">H</span>''&amp;<span class="id">H</span>''').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>'' <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="kwd">in</span> <span class="id">H</span>'''. <span class="tactic">destruct</span> <span class="id">cs</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>'''. <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H</span>'''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H_tp_upd</span> <span class="id">H_core_upd</span> <span class="id">fid_belongsto</span> <span class="id">tp_valid_freelist_free</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">fid_valid</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#or_introl">or_introl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fid_valid</span> <span class="kwd">as</span> (<span class="id">nF</span>&amp;<span class="id">HnF</span>&amp;<span class="id">HF</span>). <span class="tactic">subst</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="tactic">apply</span> (<span class="id"><a href="GlobDefs.html#FLists.thread_fl_norep">FLists.thread_fl_norep</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id">H0</span>)); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="GlobDefs.html#FLists.thread_fl_disj">FLists.thread_fl_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id">H0</span>)); <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id">H0</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>. <span class="tactic">eapply</span> <span class="id">H7</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;call&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="kwd">in</span> <span class="id">H_tp_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>)!!<span class="id">t</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_push</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">subst</span>; <span class="tactic">omega</span>. }<br/>
&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>)!!<span class="id">t</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t0</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>; <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>. <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>) !! <span class="id">t</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t0</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>. <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;*)</span>&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">thdp</span>) !! <span class="id">t</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#CallStack.pop">CallStack.pop</a></span> <span class="id">t0</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>. <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">tp_valid_freelist_free</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_star_tp_inv_mem">GE_mod_wd_star_tp_inv_mem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">ETrace.tau_star</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>') (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9151')">Proof.</div>
<div class="proofscript" id="proof9151">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_star</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_plus_tp_inv_mem">GE_mod_wd_plus_tp_inv_mem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">pc</span> <span class="id">fp</span> <span class="id">pc</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#pc">pc</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">ETrace.tau_plus</a></span> (@<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span>) <span class="id"><a href="Invs.html#pc">pc</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">pc</span>' -&gt;      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> (<span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id">pc</span>') (<span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9152')">Proof.</div>
<div class="proofscript" id="proof9152">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHtau_plus</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="GE_mod_wd_star_unchg">GE_mod_wd_star_unchg</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">GE</span> <span class="id">ix</span> <span class="id">fl</span> <span class="id">c</span> <span class="id">m</span> <span class="id">fp</span> <span class="id">c</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#star">InteractionSemantics.star</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="InteractionSemantics.html#step">step</a></span> (<span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> <span class="id"><a href="Invs.html#ix">ix</a></span>)) (<span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#GE">GE</a></span> <span class="id"><a href="Invs.html#ix">ix</a></span>)) <span class="id"><a href="Invs.html#fl">fl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#c">c</a></span> <span class="id"><a href="Invs.html#m">m</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span> <span class="id">c</span>' <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.unchanged_on">GMem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">ofs</span> =&gt; ~ <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span> <span class="id"><a href="Invs.html#fp">fp</a></span>) <span class="id"><a href="Invs.html#b">b</a></span> <span class="id"><a href="Invs.html#ofs">ofs</a></span>) <span class="id"><a href="Invs.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9153')">Proof.</div>
<div class="proofscript" id="proof9153">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">induction</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span> <span class="kwd">with</span> (<span class="id">m2</span>:= <span class="id">m</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>. <span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>. <span class="id">solv_belongsto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">This section deals with invariants on global environments </div>
<span class="kwd">Section</span> <span class="id"><a name="GEInvs">GEInvs</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">SGE</span> <span class="id">TGE</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="mod_ldsim">mod_ldsim</a></span> <span class="id">sMod</span> <span class="id">tMod</span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">mu</span>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">match_state</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="Invs.html#sMod">sMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id"><a href="Invs.html#sMod">sMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sGe</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="Invs.html#sMod">sMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id"><a href="Invs.html#tMod">tMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id"><a href="Invs.html#tMod">tMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tGe</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id"><a href="Invs.html#tMod">tMod</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fnid</span> <span class="id">argS</span> <span class="id">argT</span> <span class="id">score</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#G_args">G_args</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span>) <span class="id"><a href="Invs.html#argS">argS</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#arg_rel">arg_rel</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span>) <span class="id"><a href="Invs.html#argS">argS</a></span> <span class="id"><a href="Invs.html#argT">argT</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">sl</span> <span class="id">sGe</span> <span class="id"><a href="Invs.html#fnid">fnid</a></span> <span class="id"><a href="Invs.html#argS">argS</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#score">score</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tcore</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#init_core">init_core</a></span> <span class="id">tl</span> <span class="id">tGe</span> <span class="id"><a href="Invs.html#fnid">fnid</a></span> <span class="id"><a href="Invs.html#argT">argT</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#tcore">tcore</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#init_gmem">init_gmem</a></span> <span class="id">sl</span> <span class="id">sge</span> <span class="id"><a href="Invs.html#sm">sm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="InteractionSemantics.html#init_gmem">init_gmem</a></span> <span class="id">tl</span> <span class="id">tge</span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSim.html#local_init_rel">local_init_rel</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#sfl">sfl</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tfl">tfl</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">sm</span>' <span class="id">tm</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="LDSimDefs.html#HLRely">HLRely</a></span> <span class="id"><a href="Invs.html#sfl">sfl</a></span> <span class="id"><a href="Invs.html#tfl">tfl</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id">sm</span>' <span class="id"><a href="Invs.html#tm">tm</a></span> <span class="id">tm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="AuxLDSim.html#config_ldsim_aux">config_ldsim_aux</a></span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id"><a href="Invs.html#sfl">sfl</a></span> <span class="id"><a href="Invs.html#tfl">tfl</a></span> <span class="id">sGe</span> <span class="id">tGe</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id"><a href="Invs.html#match_state">match_state</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#match_state">match_state</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id"><a href="Invs.html#score">score</a></span>, <span class="id">sm</span>') (<span class="id"><a href="Invs.html#tcore">tcore</a></span>, <span class="id">tm</span>'))).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="GE_mod_sim">GE_mod_sim</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fnid</span> <span class="id">i_xs</span> <span class="id">sfid</span> <span class="id">tfid</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="Invs.html#GEInvs.SGE">SGE</a></span> <span class="id"><a href="Invs.html#fnid">fnid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#i_xs">i_xs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i_xt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#GlobEnv.get_mod">GlobEnv.get_mod</a></span> <span class="id"><a href="Invs.html#GEInvs.TGE">TGE</a></span> <span class="id"><a href="Invs.html#fnid">fnid</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#i_xt">i_xt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span>: <span class="id">sMod</span> := (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#GEInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#i_xs">i_xs</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tMod</span> := (<span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#GEInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#i_xt">i_xt</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#GEInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#sfid">sfid</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#GEInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#tfid">tfid</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#mod_ldsim">mod_ldsim</a></span> <span class="id">sMod</span> <span class="id">tMod</span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id"><a href="Invs.html#mu">mu</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Invs.html#GEInvs">GEInvs</a></span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="StateInvs">StateInvs</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">SGE</span> <span class="id">TGE</span>: <span class="id"><a href="GlobDefs.html#GlobEnv.t">GlobEnv.t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">sm_init</span> <span class="id">tm_init</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_init_sm">H_init_sm</a></span>: <span class="id"><a href="GlobDefs.html#GlobEnv.init_mem">GlobEnv.init_mem</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_init_tm">H_init_tm</a></span>: <span class="id"><a href="GlobDefs.html#GlobEnv.init_mem">GlobEnv.init_mem</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_wd_mu">H_wd_mu</a></span>: <span class="id"><a href="Blockset.html#Bset.inject_weak">Bset.inject_weak</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_mem_inj">H_mem_inj</a></span>: <span class="id"><a href="GMemory.html#GMem.Binject_weak">GMem.Binject_weak</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>) <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_valid_SharedSrc">H_valid_SharedSrc</a></span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span> <span class="id"><a href="Invs.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_valid_SharedTgt">H_valid_SharedTgt</a></span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="GMemory.html#GMem.valid_block">GMem.valid_block</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span> <span class="id"><a href="Invs.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_RC_init_sm">H_RC_init_sm</a></span>: <span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span> (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.H_RC_init_tm">H_RC_init_tm</a></span>: <span class="id"><a href="MemClosures.html#reach_closed">MemClosures.reach_closed</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span> (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.HGE_sim">HGE_sim</a></span>: <span class="id"><a href="Invs.html#GE_mod_sim">GE_mod_sim</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span>: <span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) (<span class="id"><a href="Injections.html#SharedSrc">SharedSrc</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span>: <span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) (<span class="id"><a href="Injections.html#SharedTgt">SharedTgt</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.Hfl_free_src">Hfl_free_src</a></span>: <span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) (<span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> (<span class="id"><a name="StateInvs.Hfl_free_tgt">Hfl_free_tgt</a></span>: <span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) (<span class="id"><a href="MemAux.html#valid_block_bset">valid_block_bset</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span>)).<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>: <span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="StateInvs.GE_mod_wd_tgt">GE_mod_wd_tgt</a></span>: <span class="id"><a href="Invs.html#GE_mod_wd">GE_mod_wd</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="StateInvs.GE_wd_src">GE_wd_src</a></span>: <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hypothesis</span> <span class="id"><a name="StateInvs.GE_wd_tgt">GE_wd_tgt</a></span>: <span class="id"><a href="GlobDefs.html#GlobEnv.wd">GlobEnv.wd</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<br/>
<div class="doc">wrapping local config sim to sim on (Core.t * gmem) </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="Core_sim_current">Core_sim_current</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">index_order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>: <span class="id"><a href="Invs.html#index">index</a></span>) (<span class="id">fpS</span> <span class="id">fpT</span>: <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) (<span class="id">sm</span>:<span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">tCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) (<span class="id">tm</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="core_config_sim_current">core_config_sim_current</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xs</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">score</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id">i_xs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xt</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tcore</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">i_xt</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">sfls</span> <span class="id">sfid</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">tfls</span> <span class="id">tfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>, @<span class="id"><a href="AuxLDSim.html#config_ldsim_aux">config_ldsim_aux</a></span> <span class="id">sl</span> <span class="id">tl</span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id"><a href="Invs.html#R">R</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#R">R</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> (<span class="id">score</span>, <span class="id"><a href="Invs.html#sm">sm</a></span>) (<span class="id">tcore</span>, <span class="id"><a href="Invs.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sg_eq_current">sg_eq_current</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> = <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="Core_sim_block">Core_sim_block</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">index_order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sm0</span> <span class="id">tm0</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) (<span class="id">sm</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">tCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) (<span class="id">tm</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="core_config_sim_block">core_config_sim_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xs</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">score</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id">i_xs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xt</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tcore</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">i_xt</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">sfls</span> <span class="id">sfid</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">tfls</span> <span class="id">tfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span>' <span class="id">tm</span>', <span class="id"><a href="LDSimDefs.html#HLRely">HLRely</a></span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id">sm</span>' <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id">tm</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>, @<span class="id"><a href="AuxLDSim.html#config_ldsim_aux">config_ldsim_aux</a></span> <span class="id">sl</span> <span class="id">tl</span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id"><a href="Invs.html#R">R</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>, <span class="id"><a href="Invs.html#R">R</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> (<span class="id">score</span>, <span class="id">sm</span>') (<span class="id">tcore</span>, <span class="id">tm</span>');<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mem_rely_src_block">mem_rely_src_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">sfls</span> <span class="id">sfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">sfl</span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mem_rely_tgt_block">mem_rely_tgt_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">tfls</span> <span class="id">tfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">tfl</span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sg_eq_block">sg_eq_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> = <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="Core_sim_tail">Core_sim_tail</a></span> (<span class="id">beta</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">index_order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>: <span class="id"><a href="Invs.html#index">index</a></span>) (<span class="id">fpS</span> <span class="id">fpT</span>: <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">sm0</span> <span class="id">tm0</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) (<span class="id">sm</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) (<span class="id">tCore</span>: @<span class="id"><a href="GlobDefs.html#Core.t">Core.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) (<span class="id">tm</span>: <span class="id"><a href="GMemory.html#gmem">gmem</a></span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">The caller cores </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="core_config_sim">core_config_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#beta">beta</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xs</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">score</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id">i_xs</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">sMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">i_xt</span> := <span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tcore</span> := <span class="id"><a href="GlobDefs.html#Core.c">Core.c</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tMod</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.modules">GlobEnv.modules</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">i_xt</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tl</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.lang">ModSem.lang</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tG</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.Ge">ModSem.Ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tge</span> := <span class="id"><a href="InteractionSemantics.html#ModSem.ge">ModSem.ge</a></span> <span class="id">tMod</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">sfls</span> <span class="id">sfid</span> <span class="kwd">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">tfls</span> <span class="id">tfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>, @<span class="id"><a href="AuxLDSim.html#config_ldsim_aux">config_ldsim_aux</a></span> <span class="id">sl</span> <span class="id">tl</span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id">sfl</span> <span class="id">tfl</span> <span class="id">sG</span> <span class="id">tG</span> <span class="id">sge</span> <span class="id">tge</span> <span class="id"><a href="Invs.html#R">R</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#R">R</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> (<span class="id">score</span>, <span class="id"><a href="Invs.html#sm0">sm0</a></span>) (<span class="id">tcore</span>, <span class="id"><a href="Invs.html#tm0">tm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mem_rely_src">mem_rely_src</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">sfls</span> <span class="id">sfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">sfl</span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mem_rely_tgt">mem_rely_tgt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfid</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfls</span> := <span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tfl</span> := <span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> <span class="id">tfls</span> <span class="id">tfid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">tfl</span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sg_eq">sg_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> = <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="CallStack_sim_tail">CallStack_sim_tail</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="sim_emp">sim_emp</a></span>: <span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>, <span class="id"><a href="Invs.html#CallStack_sim_tail">CallStack_sim_tail</a></span> <span class="id">mu</span> <span class="id"><a href="GlobDefs.html#CallStack.emp_cs">CallStack.emp_cs</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="GlobDefs.html#CallStack.emp_cs">CallStack.emp_cs</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="sim_cons">sim_cons</a></span>: <span class="kwd">forall</span> <span class="id">sm0</span> <span class="id">tm0</span> <span class="id">sm</span> <span class="id">tm</span> <span class="id">scs</span> <span class="id">tcs</span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span> <span class="id">sCore</span> <span class="id">tCore</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Core_sim_tail">Core_sim_tail</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">mu</span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_tail">CallStack_sim_tail</a></span> <span class="id">mu</span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_tail">CallStack_sim_tail</a></span> <span class="id">mu</span> (<span class="id"><a href="Invs.html#sCore">sCore</a></span>::<span class="id"><a href="Invs.html#scs">scs</a></span>) <span class="id"><a href="Invs.html#sm">sm</a></span> (<span class="id"><a href="Invs.html#tCore">tCore</a></span>::<span class="id"><a href="Invs.html#tcs">tcs</a></span>) <span class="id"><a href="Invs.html#tm">tm</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="CallStack_sim_cur">CallStack_sim_cur</a></span> (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">index_order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">i</span>: <span class="id"><a href="Invs.html#index">index</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="cur_emp">cur_emp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span> (<span class="id">Hwf</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id">index_order</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_cur">CallStack_sim_cur</a></span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span> <span class="id">mu</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="top_sim">top_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">sCore</span> <span class="id">sm</span> <span class="id">tCore</span> <span class="id">tm</span> <span class="id">scs</span> <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Core_sim_current">Core_sim_current</a></span> <span class="id">mu</span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_tail">CallStack_sim_tail</a></span> <span class="id">mu</span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_cur">CallStack_sim_cur</a></span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span> <span class="id">mu</span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> (<span class="id"><a href="Invs.html#sCore">sCore</a></span>::<span class="id"><a href="Invs.html#scs">scs</a></span>) <span class="id"><a href="Invs.html#sm">sm</a></span> (<span class="id"><a href="Invs.html#tCore">tCore</a></span>::<span class="id"><a href="Invs.html#tcs">tcs</a></span>) <span class="id"><a href="Invs.html#tm">tm</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="CallStack_sim_other">CallStack_sim_other</a></span> (<span class="id">mu</span>: <span class="id"><a href="Injections.html#Mu">Mu</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; @<span class="id"><a href="GlobDefs.html#CallStack.t">CallStack.t</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> -&gt; <span class="id"><a href="GMemory.html#gmem">gmem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="other_emp">other_emp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sm</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_other">CallStack_sim_other</a></span> <span class="id">mu</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="other_sim">other_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">sm0</span> <span class="id">tm0</span> <span class="id">sCore</span> <span class="id">sm</span> <span class="id">tCore</span> <span class="id">tm</span> <span class="id">scs</span> <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Core_sim_block">Core_sim_block</a></span> <span class="id">mu</span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id"><a href="Invs.html#sm0">sm0</a></span> <span class="id"><a href="Invs.html#tm0">tm0</a></span> <span class="id"><a href="Invs.html#sCore">sCore</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tCore">tCore</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_tail">CallStack_sim_tail</a></span> <span class="id">mu</span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_other">CallStack_sim_other</a></span> <span class="id">mu</span> (<span class="id"><a href="Invs.html#sCore">sCore</a></span>::<span class="id"><a href="Invs.html#scs">scs</a></span>) <span class="id"><a href="Invs.html#sm">sm</a></span> (<span class="id"><a href="Invs.html#tCore">tCore</a></span>::<span class="id"><a href="Invs.html#tcs">tcs</a></span>) <span class="id"><a href="Invs.html#tm">tm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="CallStack_sim_cur_order_wf">CallStack_sim_cur_order_wf</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">mu</span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">scs</span> <span class="id">sm</span> <span class="id">tcs</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_cur">CallStack_sim_cur</a></span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#mu">mu</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id"><a href="Invs.html#sm">sm</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id"><a href="Invs.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="Invs.html#index_order">index_order</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9154')">Proof.</div>
<div class="proofscript" id="proof9154">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim_current0</span> <span class="kwd">as</span> (<span class="id">R</span>&amp;<span class="id">Hsim</span>&amp;<span class="id">Hmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsim</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<div class="doc">The global index </div>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="glob_index">glob_index</a></span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="i_wrap">i_wrap</a></span> : <span class="kwd">forall</span> (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="kwd">wf</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="Invs.html#order">order</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#glob_index">glob_index</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="glob_order">glob_order</a></span>: <span class="id"><a href="Invs.html#glob_index">glob_index</a></span> -&gt; <span class="id"><a href="Invs.html#glob_index">glob_index</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="g_order">g_order</a></span>: <span class="kwd">forall</span> (<span class="id">index</span>: <span class="kwd">Type</span>) (<span class="id">order</span>: <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="id"><a href="Invs.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="kwd">wf</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="Invs.html#order">order</a></span>) <span class="id">i1</span> <span class="id">i2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#order">order</a></span> <span class="id"><a href="Invs.html#i1">i1</a></span> <span class="id"><a href="Invs.html#i2">i2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#glob_order">glob_order</a></span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#order">order</a></span> <span class="kwd">wf</span> <span class="id"><a href="Invs.html#i1">i1</a></span>) (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#order">order</a></span> <span class="kwd">wf</span> <span class="id"><a href="Invs.html#i2">i2</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_order_eq">glob_order_eq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i1</span> <span class="id">i2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#glob_order">glob_order</a></span> <span class="id"><a href="Invs.html#i1">i1</a></span> <span class="id"><a href="Invs.html#i2">i2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">index</span>, <span class="id">order</span>, <span class="kwd">wf</span>, <span class="id">i2</span>') := <span class="id"><a href="Invs.html#i2">i2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#i1">i1</a></span> = <span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id"><a href="Invs.html#index">index</a></span> <span class="id"><a href="Invs.html#order">order</a></span> <span class="kwd">wf</span> <span class="id">i1</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#order">order</a></span> <span class="id">i1</span>' <span class="id">i2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9155')">Proof.</div>
<div class="proofscript" id="proof9155">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">eexists</span> ; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="glob_order_wf">glob_order_wf</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="Invs.html#glob_order">glob_order</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9156')">Proof.</div>
<div class="proofscript" id="proof9156">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span> <span class="id">j</span> <span class="id">Horder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Horder</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="kwd">wf</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">Horder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#glob_order_eq">glob_order_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> (<span class="id">y</span>' &amp; <span class="id">Hy</span>' &amp; <span class="id">Horder</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<br/>
<br/>
<div class="doc">Global invariant </div>
<div class="doc">fp0 are the accumulated footprints since the last switch point, 
      and fp are footprints recorded by current module local simulation </div>
&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="Config_sim">Config_sim</a></span> (<span class="id">i</span>: <span class="id"><a href="Invs.html#glob_index">glob_index</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span>: <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">spc</span>: @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) (<span class="id">tpc</span>: @<span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">mem_forward </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="curmem_forward_src">curmem_forward_src</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span> <span class="id">sm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="curmem_forward_tgt">curmem_forward_tgt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span> <span class="id">tm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">freelists are free in current memory </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fl_inv_src">fl_inv_src</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">stp</span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">sm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span>        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">stp</span> <span class="id">sm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fl_inv_tgt">fl_inv_tgt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">ttp</span> := <span class="id"><a href="GlobDefs.html#thread_pool">thread_pool</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">tm</span> := <span class="id"><a href="GlobDefs.html#gm">gm</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">ttp</span> <span class="id">tm</span>;<br/>
<br/>
<div class="doc">thread-pool domain matches, tid and atombit are eq </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="tp_match">tp_match</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#thrddom_eq">thrddom_eq</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#atombit_eq">atombit_eq</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>;<br/>
<div class="doc">recorded fps are matched </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fp_match">fp_match</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">_</span> <span class="id">ttid</span> <span class="id">_</span> <span class="id">_</span> := <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">ttid</span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">thread-pools are well-formed </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="tp_inv_src">tp_inv_src</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">stp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">sbit</span> := <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">stp</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="tp_inv_tgt">tp_inv_tgt</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">ttp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tbit</span> := <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span>        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">ttp</span>;<br/>
<div class="doc">cores in call-stacks are simulated </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="tp_cur_sim">tp_cur_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">stp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">sbit</span> := <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">ttp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tbit</span> := <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">_</span> <span class="id">i</span>' := <span class="id"><a href="Invs.html#i">i</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">scs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">stp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">ttp</span> <span class="id">ttid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_cur">CallStack_sim_cur</a></span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">i</span>' <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id">sm</span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id">tm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="tp_other_sim">tp_other_sim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">stp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">sbit</span> := <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="GlobDefs.html#Build_ProgConfig">Build_ProgConfig</a></span> <span class="id">ttp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tbit</span> := <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="kwd">in</span>        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">scs</span> <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#t">t</a></span> &lt;&gt; <span class="id">stid</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">stp</span> <span class="id"><a href="Invs.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">ttp</span> <span class="id"><a href="Invs.html#t">t</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#CallStack_sim_other">CallStack_sim_other</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> <span class="id">sm</span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> <span class="id">tm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sim_final">sim_final</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tpc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) (<span class="id">fpT</span>' : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">ETrace.tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>) <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id">fpT</span>') /\ <span class="id"><a href="GlobDefs.html#final_state">final_state</a></span> <span class="id">tpc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9157')">Proof.</div>
<div class="proofscript" id="proof9157">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tpc</span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id">eq_fp_match</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">locs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.eq_sym">FP.eq_sym</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union_emp">FP.union_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_union">fpG_union</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span>, <span class="id">tpc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;final&nbsp;state&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">t</span>; <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">Htp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_inv_src">tp_inv_src</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">Hinvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_inv_tgt">tp_inv_tgt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">Hinvt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Htp</span> <span class="kwd">as</span> (<span class="id">Htp</span> &amp; <span class="id">junk</span>); <span class="tactic">clear</span> <span class="id">junk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">Htp</span> <span class="id">Hinvs</span> <span class="id">Hinvt</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Htp</span>. <span class="id">specialize</span> (<span class="id">H3</span> <span class="id">t</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">Hinvs</span> <span class="id">Hinvt</span> <span class="id">H</span> <span class="id">H3</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">inversion</span> <span class="id">Hinvt</span>. <span class="tactic">apply</span> <span class="id">tp_valid</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">thread_pool</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#plt">plt</a></span> <span class="id">t</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.next_tid">ThreadPool.next_tid</a></span> <span class="id">thread_pool</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hinvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">tp_finite</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sim_tau_step">sim_tau_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">spc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) (<span class="id">fpS</span>' : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="ETrace.html#tau">ETrace.tau</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> (<span class="id">tpc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) (<span class="id">fpT</span>' : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">i</span>' : <span class="id"><a href="Invs.html#glob_index">glob_index</a></span>) <span class="id">fpS</span>'' <span class="id">fpT</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_plus">ETrace.tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id">fpT</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>' <span class="id">fpS</span>'' <span class="id">fpT</span>'' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id">fpT</span>') <span class="id">spc</span>' <span class="id">tpc</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span>', <span class="id"><a href="Invs.html#glob_order">glob_order</a></span> <span class="id">i</span>' <span class="id"><a href="Invs.html#i">i</a></span> /\ <span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>' (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id">fpS</span>') <span class="id"><a href="Invs.html#fpT">fpT</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id">fpS</span>') <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id">spc</span>' <span class="id"><a href="Invs.html#tpc">tpc</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9158')">Proof.</div>
<div class="proofscript" id="proof9158">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">H</span> <span class="id">spc</span>' <span class="id">fpS</span>' <span class="id">H0</span> <span class="id">Hatom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span> <span class="kwd">as</span> [<span class="id">sthdp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">sbit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span>' <span class="kwd">as</span> [<span class="id">sthdp</span>' <span class="id">stid</span>' <span class="id">sm</span>' <span class="id">sbit</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span> <span class="kwd">as</span> [<span class="id">tthdp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tbit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> <span class="id">Htp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Htp</span> <span class="kwd">as</span> [<span class="id">Htp</span> <span class="id">H</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span> <span class="id">tbit</span>. <span class="tactic">clear</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">H4</span> <span class="id">H5</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span> <span class="id">ttid</span>. <span class="tactic">clear</span> <span class="id">pc1</span> <span class="id">pc2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Htp</span>. <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">Htp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H3</span> <span class="id">into</span> <span class="id">Htp</span>. <span class="tactic">rename</span> <span class="id">H0</span> <span class="id">into</span> <span class="id">Hsstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsstep</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;core-step&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="id"><a href="Invs.html#scs">scs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c</span>) <span class="kwd">as</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#get_top_in_cs">get_top_in_cs</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_scs</span> <span class="kwd">as</span> ( <span class="id">scs</span> &amp; <span class="id">H_tp_scs</span> &amp; <span class="id">H_scs_c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#tc">tc</a></span>) <span class="kwd">as</span> <span class="id">H_tp_core_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_top_exists">ocs_match_top_exists</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_core_tgt</span> <span class="kwd">as</span> (<span class="id">tc</span> &amp; <span class="id">H_tp_core_tgt</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="id"><a href="Invs.html#tcs">tcs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">repeat</span> <span class="id">solv_thread</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="GlobDefs.html#ThreadPool.content">ThreadPool.content</a></span> <span class="id">tthdp</span>) !! <span class="id">stid</span>'); [<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>|<span class="tactic">discriminate</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_tcs</span> <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_tcs</span> &amp; <span class="id">H_tcs_tc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">index_order</span> <span class="id">Hwf</span> <span class="id">i</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">scs</span> <span class="id">H_tp_scs</span>) <span class="kwd">as</span> <span class="id">Hlsim_cur</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hlsim_cur</span> <span class="kwd">as</span> (<span class="id">tcs</span>' &amp; <span class="id">H_tp_tcs</span>' &amp; <span class="id">Hlsim_cur</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_tcs</span> <span class="kwd">in</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">inversion</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">subst</span> <span class="id">tcs</span>'. <span class="tactic">clear</span> <span class="id">H_tp_tcs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hlsim_cur</span>. <span class="id">solv_thread</span>'. <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim_current0</span> <span class="kwd">as</span> (<span class="id">R</span>&amp;<span class="id">Hlsim_top</span>&amp;<span class="id">Hmatch</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_scs_c</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H_tcs_tc</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="AuxLDSim.html#match_tau_step">AuxLDSim.match_tau_step</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hlsim_top</span>) <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span> <span class="kwd">as</span> [<span class="id">Hnostep</span> | <span class="id">Hplus</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;*&nbsp;no&nbsp;step,&nbsp;index&nbsp;decrease&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hnostep</span> <span class="kwd">as</span> (<span class="id">i</span>'&amp;<span class="id">Hdecr</span>&amp;<span class="id">Hmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwf</span> <span class="id">i</span>'). <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;**&nbsp;src_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H</span> <span class="id">H_core_step</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span> (<span class="id"><a href="GlobDefs.html#Core.i">Core.i</a></span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">GE_mod_wd_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">step_forward</span> <span class="kwd">in</span> <span class="id">H_core_step</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;tgt_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;src&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tgt&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [|<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">generalize</span> <span class="id">H_tp_upd</span> <span class="id">Htp</span> <span class="id">H_tp_scs</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#stp_upd_ocs_match">stp_upd_ocs_match</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">HLFPG</span>&amp;<span class="id">Hfpsubs</span>&amp;<span class="id">Hfpsubt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union_S">LFPG_union_S</a></span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">fp_match0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>. <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;src&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;np_step&nbsp;and&nbsp;threadpool&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;tgt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">exists</span> (<span class="id">tc</span> :: <span class="id">tcs0</span>). <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#thdp_upd_get_nil_false">thdp_upd_get_nil_false</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;current&nbsp;top&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;get&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c</span>' = <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#thdp_upd_get">thdp_upd_get</a></span> <span class="kwd">in</span> <span class="id">H_tp_upd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_upd</span> <span class="kwd">as</span> (<span class="id">c0</span>&amp;<span class="id">cs</span>&amp;<span class="id">H</span>'&amp;<span class="id">H</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;dealing&nbsp;with&nbsp;dependent&nbsp;types...&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_upd</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>. <span class="id">exists</span> <span class="id">R</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">sg_eq_current0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_upd</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;current&nbsp;tail&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#thdp_upd_get">thdp_upd_get</a></span> <span class="kwd">in</span> <span class="id">H_tp_upd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_upd</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_eq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span>  <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;/by&nbsp;step&nbsp;and&nbsp;HG&nbsp;we&nbsp;know&nbsp;forward&nbsp;and&nbsp;unchg_on&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span>. <span class="tactic">destruct</span> <span class="id">H7</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H6</span>; <span class="tactic">clear</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>. <span class="id">solv_belongsto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">H9</span>); <span class="tactic">clear</span> <span class="id">H8</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">Hfl_mu_disj_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">destruct</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>, <span class="id">H5</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>)) <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">sthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">score</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">score</span>' <span class="id">scs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">score</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">destruct</span> <span class="id">H6</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">fid_disjoint</span> 0%<span class="id">nat</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>) <span class="id">c</span> <span class="id">score</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">H6</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">fid_disjoint</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H5</span> <span class="id">H6</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHCallStack_sim_tail</span> <span class="id">H3</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H4</span>.<br/>
&nbsp;/by&nbsp;wd&nbsp;GE&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHCallStack_sim_tail</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;/by&nbsp;step&nbsp;and&nbsp;HG&nbsp;we&nbsp;know&nbsp;forward&nbsp;and&nbsp;unchg_on&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span>  <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span>. <span class="tactic">destruct</span> <span class="id">H9</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H9</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>. <span class="id">solv_belongsto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H9</span> <span class="id">H11</span>); <span class="tactic">clear</span> <span class="id">H10</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>.<br/>
<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">Hfl_mu_disj_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>, <span class="id">H9</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H9</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>)) <span class="kwd">in</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">sthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">score</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">score</span>' <span class="id">scs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">score</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H7</span>. <span class="tactic">apply</span> <span class="id">cs_inv</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">fid_belongsto</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">c</span> (<span class="id">c</span> :: <span class="id">scs0</span>)) <span class="tactic">by</span> (<span class="tactic">simpl</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.fid_belongsto">ThreadPool.fid_belongsto</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.fbelongsto">FLists.fbelongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>, <span class="id">H3</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H7</span>, &lt;- <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.thread_fl_disj">FLists.thread_fl_disj</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">H_tp_upd</span> <span class="id">H3</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">congruence</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">t</span> <span class="id">scs</span> <span class="id">tcs</span> <span class="id">H2</span> <span class="id">H9</span> <span class="id">H4</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H10</span> <span class="id">H5</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H8</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>; <span class="id">econstructor</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">core_config_sim_block0</span> <span class="id">mem_rely_tgt_block0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src_block0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span>, <span class="id">H8</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src0</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span>, <span class="id">H8</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHCallStack_sim_tail</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}      <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;*&nbsp;step&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hplus</span> <span class="kwd">as</span> (<span class="id">i</span>'&amp;<span class="id">fpT</span>'&amp;<span class="id">tcc</span>'&amp;<span class="id">tm</span>'&amp;<span class="id">Hplus</span>&amp;<span class="id">HLfpG</span>&amp;<span class="id">Hmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tc</span>', <span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> <span class="id">tc</span> <span class="id">tcc</span>' <span class="id">tc</span>') <span class="kwd">as</span> <span class="id">H_tcore_upd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="tactic">destruct</span> <span class="id">tc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.Build_t</a></span> <span class="id">i</span> <span class="id">tcc</span>' <span class="id">sg</span> <span class="id">F</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tcore_upd</span> <span class="kwd">as</span> (<span class="id">tc</span>'&amp;<span class="id">H_tcore_upd</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' <span class="id">tc</span>' <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tp_upd_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core_tgt</span> <span class="id">H_tcore_upd</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">cs</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Invs.html#cs">cs</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">cs</span> <span class="id">H</span>]. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H_tp_core_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">cs</span>', <span class="id"><a href="GlobDefs.html#CallStack.update">CallStack.update</a></span> <span class="id">cs</span> <span class="id">tc</span>' <span class="id">cs</span>'). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">cs</span>; <span class="tactic">inversion</span> <span class="id">H_tp_core_tgt</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tc</span>'::<span class="id">cs</span>). <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">cs</span>' <span class="id">H0</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_upd_tgt</span> <span class="kwd">as</span> [<span class="id">tthdp</span>' <span class="id">H_tp_upd_tgt</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> {| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">tthdp</span>'; <span class="id">cur_tid</span>:= <span class="id">stid</span>'; <span class="id">gm</span>:= <span class="id">tm</span>'; <span class="id">atom_bit</span>:= <span class="id">sbit</span>'|},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fpT</span>', (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">index</span> <span class="id">index_order</span> <span class="id">Hwf</span> <span class="id">i</span>'), (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>'), (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span> <span class="id">fpT</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;*&nbsp;plus&nbsp;step&nbsp;*)</span>&nbsp;/lemma,&nbsp;core&nbsp;plus&nbsp;step&nbsp;-&gt;&nbsp;glob&nbsp;plus&nbsp;tau&nbsp;step&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="ETrace.html#tau_plus">ETrace.tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id">sbit</span>' |} <span class="id">fpT</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>'; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>'; <span class="id">atom_bit</span> := <span class="id">sbit</span>' |})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Htstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_tcs</span> <span class="id">Hplus</span> <span class="id">H_tcore_upd</span> <span class="id">H_tp_upd_tgt</span> <span class="id">H_tp_core_tgt</span>. <span class="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span>. <span class="tactic">do</span> 3 <span class="tactic">intro</span> . <span class="tactic">inversion</span> <span class="id">H_tcore_upd</span>. <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">H_tcore_upd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">tcs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">tthdp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hplus</span>; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#core_step_np_step">core_step_np_step</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_cons">ETrace.tau_plus_cons</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHHplus</span>; <span class="tactic">eauto</span>; <span class="tactic">clear</span> <span class="id">IHHplus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">solv_thread</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.set2">PMap.set2</a></span>. <span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;*&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union_T">LFPG_union_T</a></span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union_S">LFPG_union_S</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LfpG</span>'<span class="id">_subset_T</span> <span class="kwd">with</span> (<span class="id">fpT</span>':=<span class="id">fpT</span>') <span class="kwd">in</span> <span class="id">HLfpG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HLfpG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_subset_S">LFPG_subset_S</a></span> <span class="kwd">with</span> (<span class="id">fpS</span> := <span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;/lemma&nbsp;LDSimDefs.fpG&nbsp;-&gt;&nbsp;fpG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">H6</span> <span class="id">b</span>).<br/>
&nbsp;/lemma&nbsp;locs&nbsp;belongsto&nbsp;bset&nbsp;belongsto&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Blockset.Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> <span class="id">fpT</span>') <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>. <span class="id">solv_belongsto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H8</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.bbelongsto">FLists.bbelongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.get_tfblock">FLists.get_tfblock</a></span>, <span class="id"><a href="GlobDefs.html#FLists.get_block">FLists.get_block</a></span>, <span class="id"><a href="GlobDefs.html#FLists.get_tfl">FLists.get_tfl</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;/lemma&nbsp;by&nbsp;wd&nbsp;GE,&nbsp;..*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id">stid</span>' <span class="id"><a href="Invs.html#n">n</a></span> = <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.fid_belongsto">ThreadPool.fid_belongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>, <span class="id">x</span>. <span class="tactic">rewrite</span> <span class="id">H9</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;/lemma&nbsp;eq&nbsp;subset&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="id">solv_belongsto</span>. }<br/>
&nbsp;*&nbsp;match&nbsp;state&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_forward">GE_mod_wd_forward</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.forward">GMem.forward</a></span> <span class="id">tm</span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">Htstep</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_tgt">GE_mod_wd_tgt</a></span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_forward">GE_mod_wd_plus_forward</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;**&nbsp;src_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;tgt_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;src&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tgt&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv_mem">GE_mod_wd_plus_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>.<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> (<span class="id">HLFPG</span>&amp;<span class="id">Hfpsubs</span>&amp;<span class="id">Hfpsubt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union_T">LFPG_union_T</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union_S">LFPG_union_S</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id">HLfpG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">fp_match_subset_T</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">fp_match_subset_S</span>'. <span class="tactic">eapply</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;/&nbsp;lemma&nbsp;x&nbsp;subset&nbsp;(x&nbsp;U&nbsp;y)&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="id">solv_belongsto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HLfpG</span>.<br/>
&nbsp;/&nbsp;need&nbsp;lemma&nbsp;for&nbsp;local&nbsp;fpG&nbsp;to&nbsp;glob&nbsp;fpG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">H5</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span> <span class="id">fpT</span>')) <span class="id">b</span>) <span class="tactic">by</span> (<span class="id">exists</span> <span class="id">ofs</span>; <span class="id">solv_belongsto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H5</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.bbelongsto">FLists.bbelongsto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">tc</span> (<span class="id">tc</span>::<span class="id">tcs0</span>)) <span class="tactic">by</span> (<span class="tactic">simpl</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.fid_belongsto">ThreadPool.fid_belongsto</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.fbelongsto">FLists.fbelongsto</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x0</span>, <span class="id">x</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.get_tfblock">FLists.get_tfblock</a></span>, <span class="id"><a href="GlobDefs.html#FLists.get_block">FLists.get_block</a></span>, <span class="id"><a href="GlobDefs.html#FLists.get_tfl">FLists.get_tfl</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;***&nbsp;fp&nbsp;subsets&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">apply</span> <span class="id"><a href="Footprint.html#FP.union2_subset">FP.union2_subset</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;src&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;tgt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv">GE_mod_wd_plus_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> (<span class="id">tc</span>' :: <span class="id">tcs0</span>). <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd_tgt</span>. <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H_tp_tcs</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">inversion</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">scs</span>.<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;thread&nbsp;pool&nbsp;dom&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;current&nbsp;top&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;get&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c</span>' = <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t</span>.<br/>
&nbsp;dealing&nbsp;with&nbsp;dependent&nbsp;types...&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_upd</span>; <span class="tactic">inversion</span> <span class="id">H_tcore_upd</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;current&nbsp;tail&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">Maps.PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>. <span class="tactic">inversion</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H_tp_scs</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">inversion</span> <span class="id">H5</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;/by&nbsp;step&nbsp;and&nbsp;HG&nbsp;we&nbsp;know&nbsp;forward&nbsp;and&nbsp;unchg_on&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span>. <span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H8</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>. <span class="id">solv_belongsto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H8</span> <span class="id">H10</span>); <span class="tactic">clear</span> <span class="id">H10</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">Hfl_mu_disj_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">destruct</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>, <span class="id">H6</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>)) <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>. <span class="tactic">eapply</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">tm</span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;/&nbsp;lemma&nbsp;for&nbsp;plus-step&nbsp;local-effect&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.unchanged_on">GMem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">ofs</span> =&gt; ~ <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span> <span class="id">fpT</span>') <span class="id"><a href="Invs.html#b">b</a></span> <span class="id"><a href="Invs.html#ofs">ofs</a></span>) <span class="id">tm</span> <span class="id">tm</span>') <span class="kwd">as</span> <span class="id">Htleffect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">Hplus</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_tgt">GE_mod_wd_tgt</a></span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hplus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span> <span class="kwd">with</span> (<span class="id">m2</span>:= <span class="id">m</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>. <span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>. <span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">HLfpG</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H8</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_tgt">GE_wd_tgt</a></span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span>. <span class="tactic">clear</span> ; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HLfpG</span>. <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span> <span class="id">fpT</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">solv_belongsto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">H</span>); <span class="tactic">clear</span> <span class="id">H</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">Hfl_mu_disj_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_tgt">GE_wd_tgt</a></span>)) <span class="kwd">in</span> <span class="id">H6</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">score</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">score</span>' <span class="id">scs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">score</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">H7</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">fid_disjoint</span> 0%<span class="id">nat</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>) <span class="id">c</span> <span class="id">score</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">H7</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">fid_disjoint</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">tcore</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">tcore</span>' <span class="id">tcs0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tcore</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_nth_error">In_nth_error</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">fid_disjoint</span> 0%<span class="id">nat</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>) <span class="id">tc</span> <span class="id">tcore</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">H8</span> <span class="id">H9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">fid_disjoint</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">sthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">tthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv">GE_mod_wd_plus_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H5</span> <span class="id">H6</span> <span class="id">H7</span> <span class="id">H8</span> <span class="id">H9</span> <span class="id">H10</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHCallStack_sim_tail</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H5</span> <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H7</span> <span class="id">sCore</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#or_introl">or_introl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_tgt0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H8</span> <span class="id">tCore</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#or_introl">or_introl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H6</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHCallStack_sim_tail</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H7</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;/by&nbsp;step&nbsp;and&nbsp;HG&nbsp;we&nbsp;know&nbsp;forward&nbsp;and&nbsp;unchg_on&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">sm</span> <span class="id">sm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H_core_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span>. <span class="tactic">destruct</span> <span class="id">H10</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H10</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS</span> <span class="id">fpS</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>; <span class="id">solv_belongsto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H10</span> <span class="id">H12</span>); <span class="tactic">clear</span> <span class="id">H11</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>.<br/>
<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#no_overlap">no_overlap</a></span> <span class="kwd">in</span> <span class="id">Hfl_mu_disj_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="MemAux.html#in_fl">in_fl</a></span> <span class="kwd">in</span> <span class="id">H8</span>. <span class="tactic">destruct</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_src">Hfl_mu_disj_src</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>, <span class="id">H8</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span> <span class="id">_</span> (<span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span> <span class="id">_</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_src">GE_wd_src</a></span>)) <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>. <span class="tactic">eapply</span> <span class="id">H7</span>; <span class="tactic">eauto</span>. <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_src">GE_mod_wd_src</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">fi</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">fl</span> := (<span class="id"><a href="GlobDefs.html#FLists.get_fl">FLists.get_fl</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id"><a href="Invs.html#fi">fi</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#fi">fi</a></span> &lt;&gt; (<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="MemAux.html#unchg_freelist">unchg_freelist</a></span> <span class="id">fl</span> <span class="id">tm</span> <span class="id">tm</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;/&nbsp;lemma&nbsp;for&nbsp;plus-step&nbsp;local-effect&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GMemory.html#GMem.unchanged_on">GMem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">ofs</span> =&gt; ~ <span class="id"><a href="Footprint.html#Locs.belongsto">Locs.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.locs">FP.locs</a></span> <span class="id">fpT</span>') <span class="id"><a href="Invs.html#b">b</a></span> <span class="id"><a href="Invs.html#ofs">ofs</a></span>) <span class="id">tm</span> <span class="id">tm</span>') <span class="kwd">as</span> <span class="id">Htleffect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">Hplus</span> <span class="id"><a href="Invs.html#StateInvs.GE_mod_wd_tgt">GE_mod_wd_tgt</a></span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hplus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_trans">GMem.unchanged_on_trans</a></span> <span class="kwd">with</span> (<span class="id">m2</span>:= <span class="id">m</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="InteractionSemantics.html#step_local_eff">step_local_eff</a></span>, <span class="id"><a href="InteractionSemantics.html#LEffect_unchanged_on">LEffect_unchanged_on</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">intro</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_implies">GMem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">HLfpG</span> <span class="id">H8</span> <span class="id">H9</span> <span class="id">H10</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_tgt">GE_wd_tgt</a></span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span>. <span class="tactic">clear</span> ; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HLfpG</span>. <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#fpG">LDSimDefs.fpG</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Blockset.html#Bset.belongsto">Bset.belongsto</a></span> (<span class="id"><a href="Footprint.html#FP.blocks">FP.blocks</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span> <span class="id">fpT</span>')) <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">ofs</span>. <span class="id">solv_belongsto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">H</span>); <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;b&nbsp;in&nbsp;S&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#StateInvs.Hfl_mu_disj_tgt">Hfl_mu_disj_tgt</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;b&nbsp;in&nbsp;F&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.flist_disj">FLists.flist_disj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">GE_wd_tgt</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">score</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">score</span>' <span class="id">scs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">score</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>, <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">fid_belongsto</span> <span class="kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">c</span> (<span class="id">c</span> :: <span class="id">scs0</span>)) <span class="tactic">by</span> (<span class="tactic">simpl</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">fid_belongsto0</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.fbelongsto">FLists.fbelongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>, <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H9</span>, &lt;- <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.thread_fl_disj">FLists.thread_fl_disj</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">tcore</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">tcore</span>' <span class="id">tcs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tcore</span>' &lt;&gt; <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.cs_inv">ThreadPool.cs_inv</a></span> <span class="kwd">in</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H6</span>, <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">fid_belongsto</span> <span class="kwd">in</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">tc</span> (<span class="id">tc</span> :: <span class="id">tcs0</span>)) <span class="tactic">by</span> (<span class="tactic">simpl</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">fid_belongsto0</span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#FLists.fbelongsto">FLists.fbelongsto</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>, <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H10</span>, &lt;- <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.thread_fl_disj">FLists.thread_fl_disj</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv">GE_mod_wd_plus_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_upd</span> <span class="id">H4</span> <span class="id">H5</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_upd_tgt</span> <span class="id">H4</span> <span class="id">H6</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_upd_tgt</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">t</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="id">H11</span> <span class="id">H12</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H7</span> <span class="id">H8</span> <span class="id">H9</span> <span class="id">H10</span> <span class="id">H13</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H13</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src_block0</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H7</span>, <span class="id">H9</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_tgt_block0</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H8</span>, <span class="id">H10</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src0</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H7</span>, <span class="id">H9</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_tgt0</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GMemory.html#GMem.forward_trans">GMem.forward_trans</a></span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="MemAux.html#unchg_freelist_trans">unchg_freelist_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H8</span>, <span class="id">H10</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHCallStack_sim_tail</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H9</span>. <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H10</span>. <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;call&nbsp;ext&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">left</span>. <span class="tactic">destruct</span> <span class="id">i</span> <span class="id">eqn</span>:<span class="id">Hi</span>.<br/>
&nbsp;arguments&nbsp;related&nbsp;arg_rel&nbsp;(inj&nbsp;mu)&nbsp;args&nbsp;args'&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="Invs.html#scs">scs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>; <span class="tactic">clear</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span>; <span class="tactic">inversion</span> <span class="id">H_tp_core</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.top">CallStack.top</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_cs</span>) <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_cs</span>' &amp; <span class="id">Hsim_cur_cs</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tcs</span> <span class="kwd">as</span> [ | <span class="id">tc</span> ]; [ <span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span> | ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H9</span> <span class="id">into</span> <span class="id">Hsim_cur_other</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hsim_cur_cs</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_core</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>. <span class="tactic">rewrite</span> <span class="id">H_tp_cs</span>'; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span> <span class="kwd">as</span> [<span class="id">core_config_sim</span> <span class="id">Hsg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim</span> <span class="kwd">as</span> [<span class="id">R_top</span> [<span class="id">Hldsim_top</span> <span class="id">Hmatch_top</span>] ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_at_external">match_at_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> [<span class="id">GARG</span> [<span class="id">i0</span>' [<span class="id">args</span>' <span class="id">Hldsim_top</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> (<span class="id">H_core_atext</span>' &amp; <span class="id">Hargs</span> &amp; <span class="id">HLG</span> &amp; <span class="id">match_top</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;by&nbsp;simulation&nbsp;on&nbsp;modules&nbsp;in&nbsp;SGE&nbsp;and&nbsp;TGE,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;could&nbsp;init&nbsp;a&nbsp;related&nbsp;target&nbsp;core&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">sthdp</span> <span class="id">stid</span>') <span class="kwd">as</span> <span class="id">sfnum</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span>) <span class="id">stid</span>' <span class="id">sfnum</span>) <span class="kwd">as</span> <span class="id">sfid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">tthdp</span> <span class="id">stid</span>') <span class="kwd">as</span> <span class="id">tfnum</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id">stid</span>' <span class="id">tfnum</span>) <span class="kwd">as</span> <span class="id">tfid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#StateInvs.HGE_sim">HGE_sim</a></span> <span class="id">funid</span> <span class="id">new_ix</span> <span class="id">sfid</span> <span class="id">tfid</span> <span class="id">H_mod_id</span>) <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">new_ix</span>' &amp; <span class="id">H_mod_id</span>' &amp; <span class="id">Hmod_sim_new</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmod_sim_new</span> <span class="kwd">as</span> (<span class="id">index</span>' &amp; <span class="id">index_order</span>' &amp; <span class="id">R_new</span> &amp; <span class="id">Hmod_sim_new</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> (<span class="id">Hmod_sim_new</span> <span class="id">funid</span> <span class="id">args</span> <span class="id">args</span>') <span class="kwd">as</span> (<span class="id">tcc</span>'' &amp; <span class="id">H_new_core</span>' &amp; <span class="id">Htmp</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">Htmp</span> <span class="id"><a href="Invs.html#StateInvs.sm_init">sm_init</a></span> <span class="id"><a href="Invs.html#StateInvs.tm_init">tm_init</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_init_sm</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_init_tm</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.freelist_norepeat">FLists.freelist_norepeat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#FLists.freelist_norepeat">FLists.freelist_norepeat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#GlobEnv.wd_fl">GlobEnv.wd_fl</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (2:= <span class="id">sm</span>'). <span class="id">instantiate</span> (1:= <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HLG</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<div class="doc">TODO: lemma : freelist free -&gt; unchg_freelist </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#freelist_free_unchg_freelist">freelist_free_unchg_freelist</a></span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">fl_inv_src0</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hmatch_top</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">Hmatch_top</span>. <span class="tactic">destruct</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#freelist_free_unchg_freelist">freelist_free_unchg_freelist</a></span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">fl_inv_tgt0</span>. <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">i0</span>'' &amp; <span class="id">Hsim_new</span> &amp; <span class="id">Hmatch_new</span>).<br/>
<br/>
eapply&nbsp;match_init<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H.&nbsp;eapply&nbsp;ThreadPool.tp_valid_freelist_free;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H.&nbsp;eapply&nbsp;ThreadPool.tp_valid_freelist_free;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;FLists.freelist_norepeat;&nbsp;eauto.&nbsp;eapply&nbsp;GlobEnv.wd_fl;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;FLists.freelist_norepeat;&nbsp;eauto.&nbsp;eapply&nbsp;GlobEnv.wd_fl;&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eapply&nbsp;match_HG;&nbsp;eauto.&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H_init_sm&nbsp;H_init_tm).&nbsp;&nbsp;&nbsp;sm'&nbsp;tm)&nbsp;as&nbsp;(index'&nbsp;&amp;&nbsp;index_order'&nbsp;&amp;&nbsp;R_new&nbsp;&amp;&nbsp;i0''&nbsp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hsim_new&nbsp;&amp;&nbsp;Hmatch_new);&nbsp;eauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Htmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>'', <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' <span class="id">new_ix</span>' <span class="id">tcc</span>'' <span class="id">sg</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tthdp</span>'')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">H_tp_push</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>'. <span class="tactic">clear</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_push</span>' <span class="kwd">as</span> [<span class="id">tthdp</span>'' <span class="id">H_tp_push</span>''].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ([[ <span class="id">tthdp</span>'', <span class="id">stid</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span> ]]), <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unshelve</span> <span class="id">eexists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">index</span>' <span class="id">index_order</span>' <span class="id">_</span> <span class="id">i0</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#index_wf">AuxLDSim.index_wf</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> ( <span class="id"><a href="ETrace.html#tau_plus">tau_plus</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>''; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span> |}) <span class="kwd">as</span> <span class="id">Htplus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="ETrace.html#tau_plus_1">tau_plus_1</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Call">Call</a></span> <span class="kwd">with</span> (<span class="id">c1</span>:= (&lt;&lt; <span class="id">i</span>, <span class="id">c0</span>, <span class="id">sg0</span>, <span class="id">F</span> &gt;&gt;)); <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;*&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union">LFPG_union</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;**&nbsp;src_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;tgt_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;src&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tgt&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv_mem">GE_mod_wd_plus_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htplus</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_push</span>, <span class="id">H_tp_push</span>'', <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_push_ocs_match">tp_push_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">HLFPG</span>&amp;<span class="id">Hfpsubs</span>&amp;<span class="id">Hfpsubt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#LFPG_union">LFPG_union</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="id">constructor</span>. <span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tp_inv&nbsp;src&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;tgt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_plus_tp_inv">GE_mod_wd_plus_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htplus</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_push</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H_tp_cs</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_cs</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; [|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#CallStack.push">CallStack.push</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.push">ThreadPool.push</a></span> <span class="kwd">in</span> <span class="id">H_tp_push</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span>:=<span class="id">tcc</span>''; <span class="id">Core.sg</span>:= <span class="id">sg</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Core.F</span>:= <span class="id"><a href="GlobDefs.html#FLists.get_tfid">FLists.get_tfid</a></span> (<span class="id"><a href="GlobDefs.html#GlobEnv.freelists">GlobEnv.freelists</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span>) <span class="id">stid</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="GlobDefs.html#ThreadPool.next_fmap">ThreadPool.next_fmap</a></span> <span class="id">tthdp</span> <span class="id">stid</span>') |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: {| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span>:=<span class="id">c0</span>; <span class="id">Core.sg</span>:=<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>; <span class="id">Core.F</span>:= <span class="id">F</span> |} :: <span class="id">tcs</span>). <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_push</span>'', <span class="id">H_tp_cs</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. <span class="tactic">discriminate</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;current&nbsp;top&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;current&nbsp;tail&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;caller&nbsp;core&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">eexists</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;[<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;/by&nbsp;step&nbsp;and&nbsp;HG&nbsp;we&nbsp;know&nbsp;forward&nbsp;and&nbsp;unchg_on&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_push</span> <span class="id">H0</span> <span class="id">H1</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_push</span>'' <span class="id">H0</span> <span class="id">H2</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">t</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">H3</span> <span class="id">H4</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H5</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;return&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id">c</span>' :: <span class="id"><a href="Invs.html#scs">scs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#get_top_in_cs">get_top_in_cs</a></span> <span class="kwd">in</span> <span class="id">H_tp_core</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_core</span> <span class="kwd">as</span> (<span class="id">cs</span> &amp; <span class="id">Htpcs</span> &amp; <span class="id">Htop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>; <span class="tactic">inversion</span> <span class="id">Htop</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">Htpcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Htpcs</span> <span class="kwd">in</span> <span class="id">H_tp_pop</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_tp_pop</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H_tp_caller</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H_tp_caller</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#peq">peq</a></span>; [|<span class="id">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>; <span class="tactic">inversion</span> <span class="id">H_tp_caller</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_scs</span> <span class="kwd">as</span> (<span class="id">scs</span> &amp; <span class="id">H_tp_scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tc</span> <span class="id">tc</span>' <span class="id">tcs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Invs.html#tc">tc</a></span> :: <span class="id">tc</span>' :: <span class="id"><a href="Invs.html#tcs">tcs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">stid</span>'); <span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_eq</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="GSimDefs.html#cs_match">cs_match</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="GlobDefs.html#CallStack.is_emp">CallStack.is_emp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">_</span> <span class="id">_</span>) |- <span class="id">_</span> =&gt; <span class="tactic">inversion</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">eexists</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_tcs</span> <span class="kwd">as</span> (<span class="id">tc</span> &amp; <span class="id">tc</span>' &amp; <span class="id">tcs</span> &amp; <span class="id">H_tp_tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">index_order</span> <span class="id">Hwf</span> <span class="id">i</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_scs</span>) <span class="kwd">as</span> <span class="id">Hlsim_cur</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hlsim_cur</span> <span class="kwd">as</span> (<span class="id">tcs</span>' &amp; <span class="id">H_tp_tcs</span>' &amp; <span class="id">Hlsim_cur</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_tcs</span> <span class="kwd">in</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">inversion</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">subst</span> <span class="id">tcs</span>'. <span class="tactic">clear</span> <span class="id">H_tp_tcs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hlsim_cur</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">sCore</span> <span class="id">sm</span> <span class="id">tCore</span> <span class="id">tm0</span> <span class="id">scs0</span> <span class="id">tcs0</span> <span class="id">H0</span> <span class="id">H1</span>' <span class="id">Hsim_cur_top</span> <span class="id">Hsim_cur_other</span> <span class="id">H3</span> <span class="id">H2</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_top</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim_current0</span> <span class="kwd">as</span> (<span class="id">R</span>&amp;<span class="id">Hlsim_top</span>&amp;<span class="id">Hmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hmatch</span> <span class="kwd">as</span> <span class="id">Hmatch</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="AuxLDSim.html#match_halt">AuxLDSim.match_halt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hlsim_top</span>) <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="kwd">as</span> [<span class="id">tix_top</span> <span class="id">tcc</span> <span class="id">sg</span> <span class="id">F</span>] <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span> <span class="kwd">as</span> (<span class="id">H_res_src</span> &amp; <span class="id">resT</span> &amp; <span class="id">H_core_halt</span>' &amp;  <span class="id">Hres_rel</span> &amp; <span class="id">HLG</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_other</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">sm0</span> <span class="id">tm0</span> <span class="id">sm</span> <span class="id">tm1</span> <span class="id">scs0</span> <span class="id">tcs0</span> <span class="id">index0</span> <span class="id">index_order0</span> <span class="id">i0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sCore</span> <span class="id">tCore</span> <span class="id">Hsim_caller</span> <span class="id">Hsim_cur_other</span>' <span class="id">H0</span> <span class="id">H1</span>' <span class="id">H3</span> <span class="id">H2</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">Hsim_cur_other</span>.<br/>
&nbsp;construct&nbsp;return&nbsp;step&nbsp;&nbsp;in&nbsp;target&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_caller</span>. <span class="tactic">clear</span> <span class="id">Hsim_caller</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim0</span> <span class="kwd">as</span> (<span class="id">R_caller</span> &amp; <span class="id">Hsim_caller</span> &amp; <span class="id">Hmatch_caller</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hsim_caller</span> <span class="kwd">as</span> <span class="id">Hcaller_after_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_after_external">match_after_external</a></span> <span class="kwd">in</span> <span class="id">Hcaller_after_sim</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> (<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>) <span class="id">resT</span>) <span class="kwd">in</span> <span class="id">Hcaller_after_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Focus</span> 2. <span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="id">_</span> <span class="id">res</span>) <span class="id">eqn</span>:<span class="id">Htmp</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Htmp</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id"><a href="AST.html#sig_res">AST.sig_res</a></span>; <span class="tactic">congruence</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcaller_after_sim</span> <span class="kwd">as</span> (<span class="id">tcc</span>'' &amp; <span class="id">H_core_aftext</span>' &amp; <span class="id">Hmatch_after</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;TODO:&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;is&nbsp;signature&nbsp;preserved&nbsp;across&nbsp;all&nbsp;compilation&nbsp;passes&nbsp;?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A:&nbsp;propably&nbsp;yes,&nbsp;at&nbsp;leat&nbsp;for&nbsp;Selection.v<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;if&nbsp;so,&nbsp;need&nbsp;additional&nbsp;condition&nbsp;in&nbsp;Config_sim&nbsp;for&nbsp;eq_sig&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;what&nbsp;about&nbsp;the&nbsp;entry&nbsp;signature?&nbsp;main_sg?&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A:&nbsp;seems&nbsp;it&nbsp;does&nbsp;not&nbsp;matter&nbsp;what&nbsp;signature&nbsp;is&nbsp;recoreded&nbsp;in&nbsp;the&nbsp;bottom&nbsp;core,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;both&nbsp;source&nbsp;and&nbsp;target&nbsp;program&nbsp;could&nbsp;initialize&nbsp;the&nbsp;core&nbsp;with&nbsp;[&nbsp;sg_main&nbsp;].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Do&nbsp;we&nbsp;need&nbsp;additional&nbsp;conditions&nbsp;in&nbsp;mod_lsim?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A:&nbsp;no,&nbsp;signature&nbsp;checks&nbsp;only&nbsp;return&nbsp;values&nbsp;when&nbsp;a&nbsp;core&nbsp;halts.&nbsp;mod_lsim<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deals&nbsp;with&nbsp;core&nbsp;initialization,&nbsp;has&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;sg.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;TODO:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;seems&nbsp;that&nbsp;the&nbsp;has_type&nbsp;relation&nbsp;is&nbsp;not&nbsp;preserved&nbsp;by&nbsp;value&nbsp;injection&nbsp;...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sol:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;we&nbsp;could&nbsp;add&nbsp;condition&nbsp;on&nbsp;returning&nbsp;type?&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i.e.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;halted&nbsp;c&nbsp;=&nbsp;Some&nbsp;(v,&nbsp;typ)&nbsp;-&gt;&nbsp;has_type&nbsp;v&nbsp;typ&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check&nbsp;typ&nbsp;when&nbsp;returning&nbsp;in&nbsp;globsem&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;return&nbsp;type&nbsp;matches&nbsp;in&nbsp;simulation<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;need&nbsp;lemma&nbsp;for:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res_has_type&nbsp;res&nbsp;ty&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val_inj&nbsp;res&nbsp;res'&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res_has_type&nbsp;res'&nbsp;ty&nbsp;*)</span><br/>
&nbsp;Solved:&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;additional&nbsp;type&nbsp;information&nbsp;in&nbsp;interaction&nbsp;semantics&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_tcs</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">tthdp</span>' <span class="id">H_tp_pop</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">tthdp</span>' <span class="id">stid</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span>:= <span class="id">tcc</span>''; <span class="id">Core.sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">tc</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Core.F</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>' |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tthdp</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_pop</span>' <span class="id">H_tp_tcs</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">solv_thread</span>. <span class="tactic">repeat</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">tthdp</span>'' <span class="id">H_tp_upd</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> {| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span>|}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>''; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span>|}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> <span class="id">Htreturn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_tp_upd</span>' <span class="kwd">as</span> [<span class="id">cs</span> <span class="id">cs</span>' <span class="id">thdp</span>'0 <span class="id">H0</span>' <span class="id">H1</span>' <span class="id">H2</span>' <span class="id">H3</span>']. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>' <span class="kwd">as</span> [<span class="id">c0</span> <span class="id">cs0</span> <span class="id">cc</span> <span class="id">c</span>'0 <span class="id">H0</span>'' <span class="id">H1</span>'' <span class="id">H2</span>'' <span class="id">H3</span>''].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Return">Return</a></span> <span class="kwd">with</span> (<span class="id">c1</span>:=(&lt;&lt;<span class="id">tix_top</span>, <span class="id">tcc</span>, <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>, <span class="id">F</span>&gt;&gt;)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">simpl</span>.<br/>
&nbsp;dependent&nbsp;types.......&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">tc</span>' = <span class="id">c0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H0</span>' <span class="id">H_tp_pop</span>' <span class="id">H_tp_tcs</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">c0</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id">index_order0</span>) <span class="kwd">as</span> <span class="id">wf0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">Hsim_caller</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hmatch_after</span> <span class="id">sm</span>' <span class="id">tm</span>) <span class="kwd">as</span> (<span class="id">i0</span>' &amp; <span class="id">Hmatch_caller</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hlsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">Hlsim_top</span> <span class="id">HLG</span> <span class="id">mem_rely_src0</span> <span class="id">mem_rely_tgt0</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src0</span>, <span class="id">mem_rely_tgt0</span>, <span class="id">HLG</span>, <span class="id">Hlsim_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>, <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hmatch_after</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">_</span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">wf0</span> <span class="id">i0</span>'), <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htreturn</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;match&nbsp;tp&nbsp;dom&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_upd</span> <span class="id">H_tp_pop</span>' <span class="id">H_tp_upd</span>' <span class="id">H_tp_scs</span> <span class="id">H_tp_tcs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span>; [|<span class="tactic">eauto</span>|<span class="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;LFPG&nbsp;*)</span><br/>
<div class="doc">??? the same routine with the caller sim case </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [|<span class="tactic">clear</span>; <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<div class="doc">tp invs </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htreturn</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_star_tp_inv">GE_mod_wd_star_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstar</span>'; <span class="tactic">eauto</span>. }<br/>
<div class="doc">sim cur </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">solv_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span>' <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>'' :: <span class="id">scs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_scs</span>, <span class="id">H_tp_pop</span>, <span class="id">H_tp_upd</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>'' <span class="id">stid</span>' =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ({|<span class="id"><a href="GlobDefs.html#Core.Build_t">Core.c</a></span>:= <span class="id">tcc</span>''; <span class="id">Core.sg</span>:= <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">tc</span>'; <span class="id">Core.F</span> := <span class="id"><a href="GlobDefs.html#Core.F">Core.F</a></span> <span class="id">tc</span>' |} :: <span class="id">tcs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>''. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">f_equal</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;sim&nbsp;cur&nbsp;top&nbsp;*)</span><br/>
&nbsp;why&nbsp;do&nbsp;i&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;dependent&nbsp;types?&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>' <span class="kwd">as</span> [<span class="id">i_c</span>' <span class="id">c_c</span>' <span class="id">sg_c</span>' <span class="id">F_c</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>'' <span class="kwd">as</span> [<span class="id">i_c</span>'' <span class="id">c_c</span>'' <span class="id">sg_c</span>'' <span class="id">F_c</span>''].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">i_c</span>' = <span class="id">i_c</span>'' /\ <span class="id">F_c</span>' = <span class="id">F_c</span>'' /\ <span class="id">sg_c</span>' = <span class="id">sg_c</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_core_upd</span>; <span class="tactic">clear</span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H0</span> [<span class="id">H3</span> <span class="id">H4</span>] ]; <span class="tactic">subst</span> <span class="id">i_c</span>'' <span class="id">F_c</span>''; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">c_c</span>'' = <span class="id">cc</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H_core_upd</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">c_c</span>'' <span class="id">sg_c</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R_caller</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;sim&nbsp;cur&nbsp;other&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
<div class="doc">sim other </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span>' <span class="id">t</span> = <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_upd</span>, <span class="id">H_tp_pop</span>, <span class="id">H0</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>'' <span class="id">t</span> = <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_upd</span>', <span class="id">H_tp_pop</span>', <span class="id">H0</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">ores_rel </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">Hres_rel</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="LDSimDefs.html#ores_rel">ores_rel</a></span>, <span class="id"><a href="GlobDefs.html#res_sg">res_sg</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sig_res</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;halt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_scs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span> <span class="id">H_tp_pop</span> <span class="id">H_thread_halt</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tc</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Invs.html#tc">tc</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">stid</span>'); <span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>. <span class="id">solv_eq</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="id">eexists</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_tcs</span> <span class="kwd">as</span> (<span class="id">tc</span> &amp; <span class="id">H_tp_tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">index_order</span> <span class="id">Hwf</span> <span class="id">i</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_scs</span>) <span class="kwd">as</span> <span class="id">Hlsim_cur</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hlsim_cur</span> <span class="kwd">as</span> (<span class="id">tcs</span>' &amp; <span class="id">H_tp_tcs</span>' &amp; <span class="id">Hlsim_cur</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H_tp_tcs</span> <span class="kwd">in</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">inversion</span> <span class="id">H_tp_tcs</span>'. <span class="tactic">subst</span> <span class="id">tcs</span>'. <span class="tactic">clear</span> <span class="id">H_tp_tcs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hlsim_cur</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">sCore</span> <span class="id">sm</span> <span class="id">tCore</span> <span class="id">tm0</span> <span class="id">scs0</span> <span class="id">tcs0</span> <span class="id">H0</span> <span class="id">H1</span>' <span class="id">Hsim_cur_top</span> <span class="id">Hsim_cur_other</span> <span class="id">H3</span> <span class="id">H2</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">Hlsim_cur</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_top</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim_current0</span> <span class="kwd">as</span> (<span class="id">R</span>&amp;<span class="id">Hlsim_top</span>&amp;<span class="id">Hmatch</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hmatch</span> <span class="kwd">as</span> <span class="id">Hmatch</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="AuxLDSim.html#match_halt">AuxLDSim.match_halt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hlsim_top</span>) <span class="kwd">in</span> <span class="id">Hmatch</span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="kwd">as</span> [<span class="id">tix_top</span> <span class="id">tcc</span> <span class="id">sg</span> <span class="id">F</span>] <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch</span> <span class="kwd">as</span> (<span class="id">H_res_src</span> &amp; <span class="id">resT</span> &amp; <span class="id">H_core_halt</span>' &amp; <span class="id">Hres_rel</span> &amp; <span class="id">HLG</span>).<br/>
<br/>
&nbsp;construct&nbsp;return&nbsp;step&nbsp;&nbsp;in&nbsp;target&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">tthdp</span> <span class="id">stid</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_tcs</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">tthdp</span>' <span class="id">H_tp_pop</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">stid</span>') <span class="kwd">as</span> <span class="id">H_therad_halt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">t</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' -&gt; <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">H_all_thread_halted</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">sthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">tthdp</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> 1 <span class="kwd">as</span> (<span class="id">cs</span>' &amp; <span class="id">Hcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H</span> <span class="id">H_all_thread_halted</span> <span class="id">H_thread_halt</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_pop</span>' <span class="id">Hcs</span>' <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span> <span class="kwd">with</span> (<span class="id">i</span>:=<span class="id">t</span>') <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.Halted">ThreadPool.Halted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hcs</span>' <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">inversion</span> <span class="id">H3</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H4</span>; [<span class="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exfalso</span>. <span class="tactic">clear</span> <span class="id">H2</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">sthdp</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_all_thread_halted</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H5</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> {| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span>|}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>'; <span class="id">cur_tid</span> := <span class="id">stid</span>'; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span>|}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">as</span> <span class="id">Htreturn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Halt">Halt</a></span> <span class="kwd">with</span> (<span class="id">c0</span>:= <span class="id">tc</span>); <span class="tactic">subst</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_tcs</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">_</span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwf</span> <span class="id">i</span>), <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htreturn</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;match&nbsp;tp&nbsp;dom&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H</span> <span class="id">H_tp_pop</span> <span class="id">H_tp_pop</span>' <span class="id">H_tp_scs</span> <span class="id">H_tp_tcs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;LFPG&nbsp;*)</span><br/>
<div class="doc">WTF??? the same routine with the caller sim case </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [|<span class="tactic">clear</span>; <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<div class="doc">tp invs </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Hsstep</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htreturn</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_star_tp_inv">GE_mod_wd_star_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstar</span>'; <span class="tactic">eauto</span>. }<br/>
<div class="doc">sim cur </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="tactic">by</span> (<span class="id">find_relatives</span> <span class="id">sthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">econstructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
<div class="doc">sim other </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span>' <span class="id">t</span> = <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_pop</span>, <span class="id">H0</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id">t</span> = <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_pop</span>', <span class="id">H0</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H2</span> <span class="id">H3</span> <span class="id">H4</span> <span class="id">H0</span> <span class="id">H1</span> <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sim_ent_atom">sim_ent_atom</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">spc</span>' <span class="id">fpS</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> &lt;&gt; <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">tpc</span>' <span class="id">fpT</span>' <span class="id">tpc</span>'' <span class="id">fpT</span>'' <span class="id">i</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="ETrace.html#tau_star">tau_star</a></span> <span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> = <span class="id"><a href="GlobDefs.html#atom_bit">atom_bit</a></span> <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id">tpc</span>' <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id">fpT</span>'' <span class="id">tpc</span>'' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>.(<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id">fpS</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT</span>' <span class="id">fpT</span>'')) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>' <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">spc</span>' <span class="id">tpc</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9159')">Proof.</div>
<div class="proofscript" id="proof9159">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span> <span class="kwd">as</span> [<span class="id">sthdp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span> <span class="kwd">as</span> [<span class="id">tthdp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span> <span class="id">eqn</span>:<span class="id">Hi</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="Invs.html#scs">scs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>; <span class="tactic">clear</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> | <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">inversion</span> <span class="id">H_tp_core</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_cs</span>) <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_cs</span>' &amp; <span class="id">Hsim_cur_cs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tcs</span> <span class="kwd">as</span> [ | <span class="id">tc</span> ]; [ <span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span> | ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H9</span> <span class="id">into</span> <span class="id">Hsim_cur_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H10</span> <span class="id">into</span> <span class="id">Hsim_cur_tail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">Hsim_cur_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">ttid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_core</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">solv_thread</span>. <span class="tactic">rewrite</span> <span class="id">H_tp_cs</span>'. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsim_cur_top</span> <span class="kwd">as</span> [<span class="id">core_config_sim</span> <span class="id">Hsg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim</span> <span class="kwd">as</span> [<span class="id">R_top</span> [<span class="id">Hldsim_top</span> <span class="id">Hmatch_top</span>] ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_at_external">match_at_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> [<span class="id">HGarg</span> [<span class="id">i0</span>' [<span class="id">args</span>' <span class="id">Hldsim_top</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> (<span class="id">H_core_atext</span>' &amp; <span class="id">Hargs</span> &amp; <span class="id">HLG</span> &amp; <span class="id">match_top</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">tb</span> = <span class="id"><a href="GlobDefs.html#O">O</a></span> /\ <span class="id">ttid</span> = <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span>  <span class="id">H</span>. <span class="tactic">clear</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">norm_hypos</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">subst</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (?&amp;?); <span class="tactic">subst</span>.<br/>
&nbsp;by&nbsp;simulation&nbsp;on&nbsp;modules&nbsp;in&nbsp;SGE&nbsp;and&nbsp;TGE,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;could&nbsp;init&nbsp;a&nbsp;related&nbsp;target&nbsp;core<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span>' <span class="kwd">as</span> <span class="id">Hldsim_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_after_external">match_after_external</a></span> <span class="kwd">in</span>  <span class="id">Hldsim_top</span>'; <span class="tactic">eauto</span>; <span class="tactic">try</span> (<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>' <span class="kwd">as</span> (<span class="id">tcc</span>'' &amp; <span class="id">H_core_aftext</span>' &amp; <span class="id">i0</span>'' &amp; <span class="id">Hmatch_top</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (2:= <span class="id">sm</span>). <span class="id">instantiate</span> (1:= <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">HLG</span> <span class="id">Hldsim_top</span> <span class="id">match_top</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> <span class="id">match_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HLG</span>, <span class="id">Hldsim_top</span>. <span class="tactic">destruct</span> <span class="id">H</span>, <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">tthdp</span> <span class="id">stid</span> (&lt;&lt; <span class="id">i</span>, <span class="id">tcc</span>'', <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>, <span class="id">F</span> &gt;&gt;) <span class="id">tthdp</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">H_tp_upd</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_upd</span>'.      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">_</span>, <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, ([[<span class="id">tthdp</span>', <span class="id">stid</span>, <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#I">I</a></span> ]]), <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> {| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>; <span class="id">cur_tid</span>:= <span class="id">stid</span>; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#O">O</a></span> |} <span class="id"><a href="ETrace.html#tau">tau</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span> := <span class="id">tthdp</span>'; <span class="id">cur_tid</span>:= <span class="id">stid</span>; <span class="id">gm</span> := <span class="id">tm</span>; <span class="id">atom_bit</span> := <span class="id"><a href="GlobDefs.html#I">I</a></span> |}) <span class="kwd">as</span> <span class="id">Htstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Ent_Atom">Ent_Atom</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">inversion</span> <span class="id">Hargs</span>. <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="kwd">wf</span> <span class="id">i0</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;*&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;**&nbsp;src_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;tgt_fwd&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;**&nbsp;src&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tgt&nbsp;mem&nbsp;inv&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">HLFPG</span>&amp;<span class="id">Hfpsubs</span>&amp;<span class="id">Hfpsubt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="id">solv_belongsto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;tp_inv&nbsp;src&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;tp_inv&nbsp;tgt&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv">GE_mod_wd_tp_inv</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">c</span>' :: <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_cs</span> <span class="id">H_tp_upd</span> <span class="id">H1</span>; <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="tactic">repeat</span> <span class="id">solv_thread</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">scs0</span>. <span class="tactic">unfold</span> <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ({| <span class="id"><a href="GlobDefs.html#Core.Build_t">Core.i</a></span> := <span class="id">i</span>; <span class="id">Core.c</span> := <span class="id">tcc</span>''; <span class="id">Core.sg</span> := <span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>; <span class="id">Core.F</span> := <span class="id">F</span> |} :: <span class="id">tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">generalize</span> <span class="id">H_tp_cs</span>' <span class="id">H_tp_upd</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;current&nbsp;top&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">c</span>, <span class="id">c</span>'; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_core_update</span>. <span class="tactic">inversion</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R_top</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;current&nbsp;tail&nbsp;sim&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;tail&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H</span> <span class="id">Hsim_cur_tail</span> <span class="id">H1</span> <span class="id"><a href="Invs.html#StateInvs.GE_wd_tgt">GE_wd_tgt</a></span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hsim_cur_tail</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHHsim_cur_tail</span> <span class="id">H</span>). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_upd</span> <span class="id">H1</span> <span class="id">H2</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_upd</span>' <span class="id">H1</span> <span class="id">H3</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">t</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">H4</span> <span class="id">H5</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">Hargs</span>. <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="sim_sw_step">sim_sw_step</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">o</span> : <span class="id"><a href="ETrace.html#glabel">ETrace.glabel</a></span>) (<span class="id">spc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) (<span class="id">fpS</span>' : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#o">o</a></span> &lt;&gt; <span class="id"><a href="ETrace.html#tau">ETrace.tau</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#o">o</a></span> <span class="id">fpS</span>' <span class="id">spc</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">fpT</span>' : <span class="id"><a href="Footprint.html#FP.t">FP.t</a></span>) (<span class="id">tpc</span>' : <span class="id"><a href="GlobDefs.html#ProgConfig">ProgConfig</a></span>) (<span class="id">i</span>' : <span class="id"><a href="Invs.html#glob_index">glob_index</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="NPSemantics.html#np_step">np_step</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span> <span class="id"><a href="Invs.html#o">o</a></span> <span class="id">fpT</span>' <span class="id">tpc</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> (<span class="id"><a href="GlobDefs.html#cur_tid">cur_tid</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id">fpS</span>') (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id">fpT</span>') /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>' <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id">spc</span>' <span class="id">tpc</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9160')">Proof.</div>
<div class="proofscript" id="proof9160">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">fpS</span> <span class="id">fpT</span> <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span> <span class="id">H</span> <span class="id">o</span> <span class="id">spc</span>' <span class="id">fpS</span>' <span class="id">H_o</span> <span class="id">H_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">spc</span> <span class="kwd">as</span> [<span class="id">sthdp</span> <span class="id">stid</span> <span class="id">sm</span> <span class="id">b</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tpc</span> <span class="kwd">as</span> [<span class="id">tthdp</span> <span class="id">ttid</span> <span class="id">tm</span> <span class="id">tb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ttid</span> = <span class="id">stid</span> /\ <span class="id">tb</span> = <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">tp_match0</span> <span class="kwd">as</span> (<span class="id">_</span> &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H_step</span>; <span class="tactic">try</span> (<span class="id">exfalso</span>; <span class="tactic">apply</span> <span class="id">H_o</span>; <span class="tactic">auto</span>; <span class="tactic">fail</span>); <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H_o</span>.<br/>
<div class="doc">Thrd_Halt case </div>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="id">solv_thread</span>'. } <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_cs</span>) <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_cs</span>' &amp; <span class="id">Hsim_cur_cs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tcs</span> <span class="kwd">as</span> [ | <span class="id">tc</span> ]; [ <span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span> | ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Hsim_cur_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H8</span> <span class="id">into</span> <span class="id">Hsim_cur_top</span>. <span class="tactic">rename</span> <span class="id">H9</span> <span class="id">into</span> <span class="id">Hsim_cur_tail</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">tcs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H</span>. <span class="id">specialize</span> (<span class="id">H2</span> <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H_tp_cs</span>, <span class="id">H_tp_cs</span>' <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_core</span>' <span class="tactic">by</span> <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsim_cur_top</span> <span class="kwd">as</span> [<span class="id">core_config_sim</span> <span class="id">Hsg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim</span> <span class="kwd">as</span> [<span class="id">R_top</span> [<span class="id">Hldsim_top</span> <span class="id">Hmatch_top</span>] ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_halt">match_halt</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> [<span class="id">HGarg</span> [<span class="id">res</span>' [<span class="id">H_core_halt</span>'[<span class="id">Hres</span> <span class="id">HLG</span>] ] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.pop">ThreadPool.pop</a></span> <span class="id">tthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tthdp</span>' /\ <span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">stid</span>) <span class="kwd">as</span> <span class="id">Htmp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. <span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">solv_thread</span>'. <span class="id">solv_pmap</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">Htmp</span>. <span class="tactic">destruct</span> <span class="id">Htmp</span> <span class="kwd">as</span> [<span class="id">H_tp_pop</span>' <span class="id">H_thread_halt</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, {| <span class="id"><a href="GlobDefs.html#Build_ProgConfig">thread_pool</a></span>:=<span class="id">tthdp</span>'; <span class="id">cur_tid</span>:= <span class="id">t</span>'; <span class="id">gm</span>:= <span class="id">tm</span>; <span class="id">atom_bit</span>:= <span class="id"><a href="GlobDefs.html#O">O</a></span> |}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">thdp</span>') <span class="kwd">as</span> <span class="id">H_thdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tthdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.pop_inv">ThreadPool.pop_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_tid</span>: <span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' /\ ~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_valid_tid">thrddom_eq_valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_halted">thrddom_eq_halted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tid</span> <span class="kwd">as</span> [<span class="id">H_thread_valid</span>' <span class="id">H_not_halted</span>'].<br/>
<br/>
<div class="doc">find the next current thread </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H_tid</span>': <span class="id">t</span>' &lt;&gt; <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">subst</span>. <span class="tactic">congruence</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H_thread_valid</span> <span class="kwd">as</span> <span class="id">H_tp_cs_t</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span> <span class="id"><a href="Invs.html#StateInvs.SGE">SGE</a></span> <span class="id">thdp</span>' <span class="id">t</span>' <span class="id">H_thdp</span>'<span class="id">_inv</span>) <span class="kwd">in</span> <span class="id">H_tp_cs_t</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_cs_t</span>' <span class="kwd">as</span> [<span class="id">scs</span>' <span class="id">H_tp_cs_t</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H_thread_valid</span>' <span class="kwd">as</span> <span class="id">H_tp_cs</span>'<span class="id">_t</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' <span class="id">H_tthdp</span>'<span class="id">_inv</span>) <span class="kwd">in</span> <span class="id">H_tp_cs</span>'<span class="id">_t</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H_tp_cs</span>'<span class="id">_t</span>' <span class="kwd">as</span> [<span class="id">tcs</span>' <span class="id">H_tp_cs</span>'<span class="id">_t</span>'].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tid</span>'. <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tid</span>'. <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="kwd">in</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span>' <span class="id">t</span>' <span class="id">scs</span>' <span class="id">tcs</span>' <span class="id">H_tid</span>' <span class="id">H0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">exfalso</span>. <span class="tactic">generalize</span> <span class="id">H_not_halted</span>' <span class="id">H_tp_cs</span>'<span class="id">_t</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_not_halted</span>'. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">core_config_sim_block0</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R_t</span>' &amp; <span class="id">Hsim_top_t</span>' &amp; <span class="id">Hmatch_top_t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>', <span class="id">HLG</span>. <span class="tactic">destruct</span> <span class="id">H4</span>, <span class="id">g</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src_block0</span>, <span class="id">mem_rely_tgt_block0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmatch_top_t</span>' <span class="kwd">as</span> [<span class="id">i_t</span>' <span class="id">Hmatch_top_t</span>''].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id">index_order</span>) <span class="kwd">as</span> <span class="id">Hwf</span> <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">Hsim_top_t</span>'; <span class="tactic">auto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> ||- [[<span class="id">tthdp</span>, <span class="id">stid</span>, <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]] =&lt; <span class="id"><a href="ETrace.html#sw">sw</a></span> | <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> &gt;=&gt;&gt; [[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Thrd_Halt">Thrd_Halt</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwf</span> <span class="id">i_t</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#fp_match">fp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_pop</span>, <span class="id">H_tp_pop</span>', <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#tp_pop_ocs_match">tp_pop_ocs_match</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="tactic">split</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>'; <span class="tactic">inversion</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">sCore</span> :: <span class="id">scs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">scs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tCore</span> :: <span class="id">tcs</span>). <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">t</span> <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;the&nbsp;current&nbsp;thread&nbsp;before&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> /\ <span class="id">tcs0</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">tp_other_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;Ext_Atom&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="Invs.html#scs">scs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">solv_thread</span>'. } <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_cs</span>) <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_cs</span>' &amp; <span class="id">Hsim_cur_cs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tcs</span> <span class="kwd">as</span> [ | <span class="id">tc</span> ]; [ <span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span> | ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Hsim_cur_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H8</span> <span class="id">into</span> <span class="id">Hsim_cur_top</span>. <span class="tactic">rename</span> <span class="id">H9</span> <span class="id">into</span> <span class="id">Hsim_cur_tail</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_core</span>' <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">generalize</span> <span class="id">H_tp_cs</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsim_cur_top</span> <span class="kwd">as</span> [<span class="id">core_config_sim</span> <span class="id">Hsg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim</span> <span class="kwd">as</span> [<span class="id">R_top</span> [<span class="id">Hldsim_top</span> <span class="id">Hmatch_top</span>] ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_at_external">match_at_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>' <span class="kwd">as</span> [<span class="id">_</span> (<span class="id">i</span>' &amp; <span class="id">artTgt</span> &amp; <span class="id">H_core_atext</span>' &amp; <span class="id">Hargs</span> &amp; <span class="id">HLG</span> &amp; <span class="id">Hmatch_top</span>')].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_after_external">match_after_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id">instantiate</span> (1:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>'' <span class="kwd">as</span> (<span class="id">tc</span>' &amp; <span class="id">H_core_aftext</span>' &amp; <span class="id">Hldsim_top</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> (&lt;&lt;<span class="id">i0</span>,<span class="id">c0</span>,<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;) <span class="id">tc</span>' (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;)) <span class="kwd">as</span> <span class="id">H_core_update</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">tthdp</span> <span class="id">stid</span> (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;) <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tp_upd</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="id">solv_thread</span>'. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_upd</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">thdp</span>') <span class="kwd">as</span> <span class="id">H_thdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tthdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' /\ ~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_valid_tid">thrddom_eq_valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_halted">thrddom_eq_halted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H_thread_valid</span>' <span class="id">H_not_halted</span>'].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> ||- [[<span class="id">tthdp</span>, <span class="id">stid</span>, <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#I">I</a></span>]] =&lt; <span class="id"><a href="ETrace.html#sw">sw</a></span> | <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> &gt;=&gt;&gt; [[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Htstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#Ext_Atom">Ext_Atom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">Hargs</span>. <span class="tactic">subst</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, ([[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">stid</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS0</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT0</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>)) <span class="kwd">as</span> <span class="id">HLFPG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">fp_match0</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id">exists</span> <span class="id">i</span>'0, <span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>'0 <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;([[<span class="id">thdp</span>', <span class="id">t</span>', <span class="id">sm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]])).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1. <span class="id">exists</span> <span class="id">x</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">thdp</span>' <span class="id">sm</span>) <span class="kwd">as</span> <span class="id">H_inv_mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">H_step</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">tthdp</span>' <span class="id">tm</span>) <span class="kwd">as</span> <span class="id">H_inv_mem</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#thrddom_eq">thrddom_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#atombit_eq">atombit_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]])) <span class="kwd">as</span> <span class="id">H_tp_match</span>'.<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_upd</span>, <span class="id">H_tp_upd</span>', <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">t</span>' <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="kwd">as</span> <span class="id">HLFPG</span>'.<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="tactic">split</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>'; <span class="tactic">inversion</span> <span class="id">H</span>'. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>' <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>' :: <span class="id">scs</span>)) <span class="kwd">as</span> <span class="id">H_tp_cs_aft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt; :: <span class="id">tcs</span>)) <span class="kwd">as</span> <span class="id">H_tp_cs_aft</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">find the next current thread </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">t</span>' <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">t' = stid </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hldsim_top</span>'' <span class="id">sm</span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>, <span class="id">HLG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="kwd">wf</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;current&nbsp;sim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">c</span>' :: <span class="id">scs</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>,<span class="id">c</span>'. <span class="tactic">inversion</span> <span class="id">H_core_update</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;other&nbsp;sim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tp_other_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span>; <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span>; <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">t' &lt;&gt; stid </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>' <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">scs</span>' &amp; <span class="id">H_thdp</span>'<span class="id">_scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tcs</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">tcs</span>' &amp; <span class="id">H_tthdp</span>'<span class="id">_tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="kwd">in</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span>' <span class="id">t</span>' <span class="id">scs</span>' <span class="id">tcs</span>' <span class="id">n</span> <span class="id">H0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">exfalso</span>. <span class="tactic">generalize</span> <span class="id">H_not_halted</span>' <span class="id">H_tthdp</span>'<span class="id">_tcs</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_not_halted</span>'. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">core_config_sim_block0</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R_t</span>' &amp; <span class="id">Hsim_top_t</span>' &amp; <span class="id">Hmatch_top_t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>, <span class="id">HLG</span>. <span class="tactic">destruct</span> <span class="id">H4</span>, <span class="id">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src_block0</span>, <span class="id">mem_rely_tgt_block0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hmatch_top_t</span>') <span class="kwd">as</span> [<span class="id">i_t</span>' <span class="id">Hmatch_top_t</span>''].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id">index_order</span>) <span class="kwd">as</span> <span class="id">Hwf</span> <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">Hsim_top_t</span>'; <span class="tactic">auto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwf</span> <span class="id">i_t</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs1</span> = <span class="id">sCore</span> :: <span class="id">scs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">scs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tCore</span> :: <span class="id">tcs0</span>). <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">t</span> <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;the&nbsp;current&nbsp;thread&nbsp;before&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs1</span> = (<span class="id">c</span>'::<span class="id">scs</span>) /\ <span class="id">tcs1</span> = (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>, <span class="id">F</span>&gt;&gt;)::<span class="id">tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>; <span class="tactic">subst</span>.<br/>
&nbsp;dependent&nbsp;types....&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>,<span class="id">c</span>'. <span class="tactic">inversion</span> <span class="id">H_core_update</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">tp_other_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;Ext_Atom&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>, <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span> :: <span class="id"><a href="Invs.html#scs">scs</a></span>)) <span class="kwd">as</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">solv_thread</span>'. } <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Invs.html#tp_cur_sim">tp_cur_sim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H_tp_cs</span>) <span class="kwd">as</span> (<span class="id">tcs</span> &amp; <span class="id">H_tp_cs</span>' &amp; <span class="id">Hsim_cur_cs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tcs</span> <span class="kwd">as</span> [ | <span class="id">tc</span> ]; [ <span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span> | ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hsim_cur_cs</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Hsim_cur_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H8</span> <span class="id">into</span> <span class="id">Hsim_cur_top</span>. <span class="tactic">rename</span> <span class="id">H9</span> <span class="id">into</span> <span class="id">Hsim_cur_tail</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_top">ThreadPool.get_top</a></span> <span class="id">tthdp</span> <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tc</span>) <span class="kwd">as</span> <span class="id">H_tp_core</span>' <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">generalize</span> <span class="id">H_tp_cs</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tc</span> <span class="id">eqn</span>:<span class="id">Htc</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hsim_cur_top</span> <span class="kwd">as</span> [<span class="id">core_config_sim</span> <span class="id">Hsg</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">core_config_sim</span> <span class="kwd">as</span> [<span class="id">R_top</span> [<span class="id">Hldsim_top</span> <span class="id">Hmatch_top</span>] ].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">Hldsim_top</span> <span class="kwd">as</span> <span class="id">Hldsim_top</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_at_external">match_at_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>' <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">HGargS</span> (<span class="id">i</span>' &amp; <span class="id">artTgt</span> &amp; <span class="id">H_core_atext</span>' &amp; <span class="id">Hargs</span> &amp; <span class="id">HLG</span> &amp; <span class="id">Hmatch_top</span>')].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_after_external">match_after_external</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>''; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id">instantiate</span> (1:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>'' <span class="kwd">as</span> (<span class="id">tc</span>' &amp; <span class="id">H_core_aftext</span>' &amp; <span class="id">Hldsim_top</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#Core.update">Core.update</a></span> (&lt;&lt;<span class="id">i0</span>,<span class="id">c0</span>,<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;) <span class="id">tc</span>' (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;)) <span class="kwd">as</span> <span class="id">H_core_update</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">constructor</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tthdp</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.update">ThreadPool.update</a></span> <span class="id">tthdp</span> <span class="id">stid</span> (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt;) <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tp_upd</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">H_tp_core</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">econstructor</span>; <span class="id">solv_thread</span>'. <span class="id">econstructor</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decompose_ex</span> <span class="id">H_tp_upd</span>'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">thdp</span>') <span class="kwd">as</span> <span class="id">H_thdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv">ThreadPool.inv</a></span> <span class="id">tthdp</span>') <span class="kwd">as</span> <span class="id">H_tthdp</span>'<span class="id">_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="GlobDefs.html#ThreadPool.upd_top_inv">ThreadPool.upd_top_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.valid_tid">ThreadPool.valid_tid</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' /\ ~<span class="id"><a href="GlobDefs.html#ThreadPool.halted">ThreadPool.halted</a></span> <span class="id">tthdp</span>' <span class="id">t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_valid_tid">thrddom_eq_valid_tid</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: <span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,3: <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#thrddom_eq_halted">thrddom_eq_halted</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span>; <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#ocs_match_comm">ocs_match_comm</a></span>; <span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H_thread_valid</span>' <span class="id">H_not_halted</span>'].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> ||- [[<span class="id">tthdp</span>, <span class="id">stid</span>, <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]] =&lt; <span class="id"><a href="ETrace.html#evt">evt</a></span> <span class="id">v</span> | <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> &gt;=&gt;&gt; [[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">Htstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="NPSemantics.html#EF_Print">EF_Print</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">inversion</span> <span class="id">Hargs</span>. <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H4</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_v</span> <span class="id">H2</span> <span class="id">H_core_atext</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span> <span class="id">v</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">inversion</span> <span class="id">H_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">inversion</span> <span class="id">H_v</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>, ([[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">stid</span> (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpS0</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) (<span class="id"><a href="Footprint.html#FP.union">FP.union</a></span> <span class="id">fpT0</span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>)) <span class="kwd">as</span> <span class="id">HLFPG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="GDefLemmas.html#fp_union_emp_r">fp_union_emp_r</a></span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">fp_match0</span>. <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id">exists</span> <span class="id">i</span>'0, <span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id">i</span>'0 <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;([[<span class="id">thdp</span>', <span class="id">t</span>', <span class="id">sm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>', <span class="id">t</span>', <span class="id">tm</span>, <span class="id"><a href="GlobDefs.html#O">O</a></span>]])).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> 1. <span class="id">exists</span> <span class="id">x</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">thdp</span>' <span class="id">sm</span>) <span class="kwd">as</span> <span class="id">H_inv_mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">H_step</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.inv_mem">ThreadPool.inv_mem</a></span> <span class="id">tthdp</span>' <span class="id">tm</span>) <span class="kwd">as</span> <span class="id">H_inv_mem</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#GE_mod_wd_tp_inv_mem">GE_mod_wd_tp_inv_mem</a></span> <span class="kwd">in</span> <span class="id">Htstep</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#thrddom_eq">thrddom_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#atombit_eq">atombit_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GSimDefs.html#tid_eq">tid_eq</a></span> ([[<span class="id">thdp</span>',<span class="id">t</span>',<span class="id">sm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]]) ([[<span class="id">tthdp</span>',<span class="id">t</span>',<span class="id">tm</span>,<span class="id"><a href="GlobDefs.html#O">O</a></span>]])) <span class="kwd">as</span> <span class="id">H_tp_match</span>'.<br/>
&nbsp;**&nbsp;tp_match&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; [| <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
&nbsp;/need&nbsp;lemma&nbsp;for&nbsp;upd&nbsp;and&nbsp;dom_eq/&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>. <span class="tactic">intro</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H_tp_upd</span>, <span class="id">H_tp_upd</span>', <span class="id">H</span>. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_match">tp_match</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? <span class="id">_</span>]. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="GDefLemmas.html#sttp_upd_ocs_match">sttp_upd_ocs_match</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GSimDefs.html#LFPG">LFPG</a></span> <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> <span class="id"><a href="Invs.html#StateInvs.TGE">TGE</a></span> <span class="id">t</span>' <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>/\ <span class="id"><a href="Footprint.html#FP.subset">FP.subset</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span> <span class="id"><a href="Footprint.html#FP.emp">FP.emp</a></span>) <span class="kwd">as</span> <span class="id">HLFPG</span>'.<br/>
&nbsp;**&nbsp;LFPG&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span>. <span class="tactic">split</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="GSimDefs.html#fpG_emp">fpG_emp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">H</span>'; <span class="tactic">inversion</span> <span class="id">H</span>'. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>' <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>' :: <span class="id">scs</span>)) <span class="kwd">as</span> <span class="id">H_tp_cs_aft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id">stid</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id">sg</span>,<span class="id">F</span>&gt;&gt; :: <span class="id">tcs</span>)) <span class="kwd">as</span> <span class="id">H_tp_cs_aft</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>. <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">find the next current thread </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">t</span>' <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">t' = stid </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hldsim_top</span>'' <span class="id">sm</span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>, <span class="id">HLG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>, <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="kwd">wf</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;current&nbsp;sim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs0</span> = <span class="id">c</span>' :: <span class="id">scs</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>,<span class="id">c</span>'. <span class="tactic">inversion</span> <span class="id">H_core_update</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;other&nbsp;sim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">tp_other_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span>; <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span>; <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
<div class="doc">t' &lt;&gt; stid </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">scs</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">thdp</span>' <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">scs</span>' &amp; <span class="id">H_thdp</span>'<span class="id">_scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">tcs</span>', <span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span>' <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="GDefLemmas.html#valid_tid_get_cs">valid_tid_get_cs</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">tcs</span>' &amp; <span class="id">H_tthdp</span>'<span class="id">_tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">sthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">scs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="GlobDefs.html#ThreadPool.get_cs">ThreadPool.get_cs</a></span> <span class="id">tthdp</span> <span class="id">t</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tcs</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">n</span>. <span class="id">find_relatives</span> <span class="id">tthdp</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span> <span class="kwd">as</span> <span class="id">H</span>'. <span class="tactic">apply</span> <span class="id"><a href="Invs.html#tp_other_sim">tp_other_sim</a></span> <span class="kwd">in</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span>' <span class="id">t</span>' <span class="id">scs</span>' <span class="id">tcs</span>' <span class="id">n</span> <span class="id">H0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">exfalso</span>. <span class="tactic">generalize</span> <span class="id">H_not_halted</span>' <span class="id">H_tthdp</span>'<span class="id">_tcs</span>'. <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H_not_halted</span>'. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">core_config_sim_block0</span> <span class="kwd">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R_t</span>' &amp; <span class="id">Hsim_top_t</span>' &amp; <span class="id">Hmatch_top_t</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="AuxLDSim.html#match_HG">match_HG</a></span> <span class="kwd">in</span> <span class="id">Hldsim_top</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hldsim_top</span>, <span class="id">HLG</span>. <span class="tactic">destruct</span> <span class="id">H4</span>, <span class="id">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mem_rely_src_block0</span>, <span class="id">mem_rely_tgt_block0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Hmatch_top_t</span>') <span class="kwd">as</span> [<span class="id">i_t</span>' <span class="id">Hmatch_top_t</span>''].<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id">index_order</span>) <span class="kwd">as</span> <span class="id">Hwf</span> <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">Hsim_top_t</span>'; <span class="tactic">auto</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="Invs.html#i_wrap">i_wrap</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hwf</span> <span class="id">i_t</span>').<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;**&nbsp;sim_invs&nbsp;cur&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs1</span> = <span class="id">sCore</span> :: <span class="id">scs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'. <span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">scs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tCore</span> :: <span class="id">tcs0</span>). <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;**&nbsp;sim_invs&nbsp;other&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Coqlib.html#peq">peq</a></span> <span class="id">t</span> <span class="id">stid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(**&nbsp;the&nbsp;current&nbsp;thread&nbsp;before&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">scs1</span> = (<span class="id">c</span>'::<span class="id">scs</span>) /\ <span class="id">tcs1</span> = (&lt;&lt;<span class="id">i0</span>,<span class="id">tc</span>',<span class="id"><a href="GlobDefs.html#Core.sg">Core.sg</a></span> <span class="id">c</span>, <span class="id">F</span>&gt;&gt;)::<span class="id">tcs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solv_thread</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H7</span>; <span class="tactic">subst</span>.<br/>
&nbsp;dependent&nbsp;types....&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">c</span>,<span class="id">c</span>'. <span class="tactic">inversion</span> <span class="id">H_core_update</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.EqdepFacts.html#eq_sigT_iff_eq_dep">eq_sigT_iff_eq_dep</a></span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep.html#EqdepTheory.eq_dep_eq">Eqdep.EqdepTheory.eq_dep_eq</a></span> <span class="kwd">in</span> <span class="id">H10</span>. <span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.forward_refl">GMem.forward_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="GMemory.html#GMem.unchanged_on_refl">GMem.unchanged_on_refl</a></span>]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">tp_other_sim0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">find_relatives</span> <span class="id">thdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">find_relatives</span> <span class="id">tthdp</span>'; <span class="tactic">clear</span>; <span class="tactic">intros</span>; <span class="id">solv_thread</span>'; <span class="id">solv_pmap</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="match_state">match_state</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> <span class="id">mu</span>' <span class="id">fpS0</span> <span class="id">fpT0</span> <span class="id">spc</span> <span class="id">tpc</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span>' = <span class="id"><a href="Invs.html#StateInvs.mu">mu</a></span> /\ <span class="id"><a href="Blockset.html#Bset.inj_inject">Bset.inj_inject</a></span> (<span class="id"><a href="Injections.html#inj">inj</a></span> <span class="id">mu</span>')) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fpS</span> <span class="id">fpT</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Invs.html#Config_sim">Config_sim</a></span> <span class="id"><a href="Invs.html#i">i</a></span> <span class="id"><a href="Invs.html#fpS">fpS</a></span> <span class="id"><a href="Invs.html#fpT">fpT</a></span> <span class="id"><a href="Invs.html#fpS0">fpS0</a></span> <span class="id"><a href="Invs.html#fpT0">fpT0</a></span> <span class="id"><a href="Invs.html#spc">spc</a></span> <span class="id"><a href="Invs.html#tpc">tpc</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="Config_sim_GConfigDSim">Config_sim_GConfigDSim</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="GlobDSim.html#GConfigDSim">GConfigDSim</a></span> <span class="id"><a href="Invs.html#glob_index">glob_index</a></span> <span class="id"><a href="Invs.html#glob_order">glob_order</a></span> <span class="id"><a href="Invs.html#match_state">match_state</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9161')">Proof.</div>
<div class="proofscript" id="proof9161">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;index_order&nbsp;well&nbsp;founded&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="Invs.html#glob_order_wf">glob_order_wf</a></span>. }<br/>
&nbsp;tp&nbsp;matches&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">fpS0</span> &amp; <span class="id">fpT0</span> &amp; <span class="id">H1</span>). <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tp_match0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">thrddom_eq_thrddom_eq</span>'. <span class="tactic">auto</span>. }<br/>
&nbsp;tau-step&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">fp0</span> &amp; <span class="id">fpT0</span> &amp; <span class="id">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#sim_tau_step">sim_tau_step</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">tpc</span>'&amp;<span class="id">fpT</span>'&amp;<span class="id">i</span>'&amp;<span class="id">fpS</span>''&amp;<span class="id">fpT</span>''&amp;<span class="id">Hstep</span>&amp;<span class="id">HLFPG</span>&amp;<span class="id">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tpc</span>', <span class="id">fpT</span>', <span class="id">i</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Invs.html#match_state">match_state</a></span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Invs.html#match_state">match_state</a></span>. <span class="tactic">do</span> 2 <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">x</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;ent-atom&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">fpS0</span>&amp;<span class="id">fpT0</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#sim_ent_atom">sim_ent_atom</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">tpc</span>'&amp;<span class="id">fpT</span>'&amp;<span class="id">tpc</span>''&amp;<span class="id">fpT</span>''&amp;<span class="id">i</span>'&amp;<span class="id">Hstar</span>&amp;<span class="id">Hatombit</span>&amp;<span class="id">Hent</span>&amp;<span class="id">HFP</span>&amp;<span class="id">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Invs.html#match_state">match_state</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tpc</span>', <span class="id">fpT</span>', <span class="id">tpc</span>'', <span class="id">fpT</span>'', <span class="id">i</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 (<span class="tactic">split</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;evt-step&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">fpS0</span>&amp;<span class="id">fpT0</span>&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Invs.html#sim_sw_step">sim_sw_step</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="id">eexists</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Invs.html#match_state">match_state</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;final-state&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (?&amp;?&amp;?&amp;?). <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="Invs.html#sim_final">sim_final</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">End</span> <span class="id"><a href="Invs.html#StateInvs">StateInvs</a></span>.<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
