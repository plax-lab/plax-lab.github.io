<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module val_casted</title>
<meta name="description" content="Documentation of Coq module val_casted" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module val_casted</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Coqlib.html">Coqlib</a></span> <span class="id"><a href="Integers.html">Integers</a></span> <span class="id"><a href="Values.html">Values</a></span> <span class="id"><a href="AST.html">AST</a></span> <span class="id"><a href="Ctypes.html">Ctypes</a></span> <span class="id"><a href="Cop.html">Cop</a></span> <span class="id"><a href="FCop.html">FCop</a></span> <span class="id"><a href="Locations.html">Locations</a></span>.<br/>
<br/>
<div class="doc">A function version of <span class="bracket"><span class="id">val_casted</span></span> </div>
<span class="kwd">Definition</span> <span class="id"><a name="val_casted_func">val_casted_func</a></span> (<span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">ty</span>: <span class="id"><a href="Ctypes.html#type">type</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#v">v</a></span>, <span class="id"><a href="val_casted.html#ty">ty</a></span> <span class="kwd">with</span><br/>
<div class="doc">val_casted_int </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tint">Tint</a></span> <span class="id">sz</span> <span class="id">si</span> <span class="id">attr</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="Cop.html#cast_int_int">cast_int_int</a></span> <span class="id">sz</span> <span class="id">si</span> <span class="id">n</span>) <span class="id">n</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
<div class="doc">val_casted_float </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tfloat">Tfloat</a></span> <span class="id"><a href="Ctypes.html#F64">F64</a></span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_single </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vsingle">Vsingle</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tfloat">Tfloat</a></span> <span class="id"><a href="Ctypes.html#F32">F32</a></span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_long </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tlong">Tlong</a></span> <span class="id">si</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_ptr_ptr </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">ty</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_int_ptr </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">ty</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
<div class="doc">val_casted_ptr_int </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Ctypes.html#Tint">Tint</a></span> <span class="id"><a href="Ctypes.html#I32">I32</a></span> <span class="id">si</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
<div class="doc">val_casted_long_ptr </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n</span>, <span class="id"><a href="Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">ty</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
<div class="doc">val_casted_ptr_long </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Ctypes.html#Tlong">Tlong</a></span> <span class="id">si</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
<div class="doc">val_casted_struct </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Ctypes.html#Tstruct">Tstruct</a></span> <span class="id">id</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_union </div>
&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="Ctypes.html#Tunion">Tunion</a></span> <span class="id">id</span> <span class="id">attr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">val_casted_void </div>
&nbsp;&nbsp;| <span class="id">_</span>,  <span class="id"><a href="Ctypes.html#Tvoid">Tvoid</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
<div class="doc">OTHERS </div>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_funcP">val_casted_funcP</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">ty</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id"><a href="val_casted.html#ty">ty</a></span> &lt;-&gt; <span class="id"><a href="val_casted.html#val_casted_func">val_casted_func</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id"><a href="val_casted.html#ty">ty</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6430')">Proof.</div>
<div class="proofscript" id="proof6430">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>, <span class="id">ty</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">simpl</span>; <span class="tactic">split</span>; <span class="tactic">intro</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>] =&gt; <span class="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">_</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>] =&gt; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="id">constructor</span>; <span class="tactic">auto</span> ]).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq_dec">Int.eq_dec</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Integers.html#Int.eq_dec">Int.eq_dec</a></span>; <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f0</span>. <span class="tactic">discriminate</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f0</span>. <span class="id">constructor</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">i0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">bool</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">val_casted for value list </div>
<span class="kwd">Inductive</span> <span class="id"><a name="val_casted_list">val_casted_list</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span> -&gt; <span class="id"><a href="Ctypes.html#typelist">typelist</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="vcl_nil">vcl_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="Ctypes.html#Tnil">Tnil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="vcl_cons">vcl_cons</a></span>: <span class="kwd">forall</span> <span class="id">v1</span> <span class="id">vl</span> <span class="id">ty1</span> <span class="id">tyl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="val_casted.html#v1">v1</a></span> <span class="id"><a href="val_casted.html#ty1">ty1</a></span> -&gt; <span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> (<span class="id"><a href="val_casted.html#v1">v1</a></span> :: <span class="id"><a href="val_casted.html#vl">vl</a></span>) (<span class="id"><a href="Ctypes.html#Tcons">Tcons</a></span>  <span class="id"><a href="val_casted.html#ty1">ty1</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_list_params">val_casted_list_params</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">params</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> (<span class="id"><a href="Ctypes.html#type_of_params">type_of_params</a></span> <span class="id"><a href="val_casted.html#params">params</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="val_casted.html#params">params</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6431')">Proof.</div>
<div class="proofscript" id="proof6431">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">params</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">ty</span>]. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="val_casted_list_func">val_casted_list_func</a></span> (<span class="id">vs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">ts</span> : <span class="id"><a href="Ctypes.html#typelist">typelist</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vs">vs</a></span>, <span class="id"><a href="val_casted.html#ts">ts</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="Ctypes.html#Tnil">Tnil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">v1</span> :: <span class="id">vl</span>, <span class="id"><a href="Ctypes.html#Tcons">Tcons</a></span> <span class="id">ty1</span> <span class="id">tyl</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_func">val_casted_func</a></span> <span class="id">v1</span> <span class="id">ty1</span> &amp;&amp; <span class="id"><a href="val_casted.html#val_casted_list_func">val_casted_list_func</a></span> <span class="id">vl</span> <span class="id">tyl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_list_funcP">val_casted_list_funcP</a></span> <span class="id">vs</span> <span class="id">ts</span> : <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list_func">val_casted_list_func</a></span> <span class="id"><a href="val_casted.html#vs">vs</a></span> <span class="id"><a href="val_casted.html#ts">ts</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt; <span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="val_casted.html#vs">vs</a></span> <span class="id"><a href="val_casted.html#ts">ts</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6432')">Proof.</div>
<div class="proofscript" id="proof6432">
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ts</span>; <span class="tactic">induction</span> <span class="id">vs</span>. <span class="tactic">destruct</span> <span class="id">ts</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> <span class="id">_</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> 1. <span class="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">ts</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> 1. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">intros</span> [<span class="id">H1</span> <span class="id">H2</span>]. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="val_casted.html#val_casted_funcP">val_casted_funcP</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;-<span class="id">IHvs</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="val_casted.html#val_casted_funcP">val_casted_funcP</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">IHvs</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_inj">val_casted_inj</a></span> (<span class="id">j</span> : <span class="id"><a href="Values.html#meminj">meminj</a></span>) <span class="id">v1</span> <span class="id">v2</span> <span class="id">tv</span> : <br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#v1">v1</a></span> <span class="id"><a href="val_casted.html#v2">v2</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="val_casted.html#v1">v1</a></span> <span class="id"><a href="val_casted.html#tv">tv</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="Cop.html#val_casted">val_casted</a></span> <span class="id"><a href="val_casted.html#v2">v2</a></span> <span class="id"><a href="val_casted.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6433')">Proof.</div>
<div class="proofscript" id="proof6433">
<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="id">solve</span>[<span class="id">constructor</span>; <span class="tactic">auto</span>].<br/>
<span class="tactic">inversion</span> 1; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_casted_list_inj">val_casted_list_inj</a></span> (<span class="id">j</span> : <span class="id"><a href="Values.html#meminj">meminj</a></span>) <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">ts</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#vs1">vs1</a></span> <span class="id"><a href="val_casted.html#vs2">vs2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="val_casted.html#vs1">vs1</a></span> <span class="id"><a href="val_casted.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_casted_list">val_casted_list</a></span> <span class="id"><a href="val_casted.html#vs2">vs2</a></span> <span class="id"><a href="val_casted.html#ts">ts</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6434')">Proof.</div>
<div class="proofscript" id="proof6434">
<span class="tactic">intros</span> <span class="id">H1</span>; <span class="id">revert</span> <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">H1</span>; <span class="tactic">induction</span> <span class="id">ts</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">vs1</span> <span class="id">vs2</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="id">revert</span> <span class="id">H2</span> <span class="id">H1</span>; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
<span class="id">revert</span> <span class="id">H2</span> <span class="id">H1</span>; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
<span class="tactic">eapply</span> <span class="id"><a href="val_casted.html#val_casted_inj">val_casted_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="tactic">eapply</span> <span class="id">IHts</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="val_has_type_func">val_has_type_func</a></span> (<span class="id">v</span> : <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">t</span> : <span class="id"><a href="AST.html#typ">typ</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vundef">Vundef</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vint">Vint</a></span> <span class="id">_</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="val_casted.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany32">AST.Tany32</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">_</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="val_casted.html#t">t</a></span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tlong">AST.Tlong</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="val_casted.html#t">t</a></span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tfloat">AST.Tfloat</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="val_casted.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tsingle">AST.Tsingle</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany32">AST.Tany32</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="val_casted.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany32">AST.Tany32</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tlong">AST.Tlong</a></span> =&gt; <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tany64">AST.Tany64</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_has_type_funcP">val_has_type_funcP</a></span> <span class="id">v</span> <span class="id">t</span> : <br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id"><a href="val_casted.html#t">t</a></span> &lt;-&gt; (<span class="id"><a href="val_casted.html#val_has_type_func">val_has_type_func</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id"><a href="val_casted.html#t">t</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6435')">Proof.</div>
<div class="proofscript" id="proof6435">
<span class="tactic">split</span>.<br/>
<span class="tactic">induction</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">induction</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">inversion</span> 1.<br/>
<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="tactic">inversion</span> 1.<br/>
<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>; <span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1].<br/>
<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> 1. <span class="tactic">inversion</span> 1. <span class="tactic">inversion</span> 1.<br/>
<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>; <span class="tactic">inversion</span> 1.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="val_has_type_list_func">val_has_type_list_func</a></span> (<span class="id">vl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">tyl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#typ">typ</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vl">vl</a></span>, <span class="id"><a href="val_casted.html#tyl">tyl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">v</span> :: <span class="id">vl</span>', <span class="id">ty</span> :: <span class="id">tyl</span>' =&gt; <span class="id"><a href="val_casted.html#val_has_type_func">val_has_type_func</a></span> <span class="id">v</span> <span class="id">ty</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id">vl</span>' <span class="id">tyl</span>' <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id">_</span> :: <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> :: <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_has_type_list_func_charact">val_has_type_list_func_charact</a></span> <span class="id">vl</span> <span class="id">tyl</span> : <br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.has_type_list">Val.has_type_list</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> &lt;-&gt; (<span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6436')">Proof.</div>
<div class="proofscript" id="proof6436">
<span class="id">revert</span> <span class="id">tyl</span>; <span class="tactic">induction</span> <span class="id">vl</span>.<br/>
<span class="tactic">destruct</span> <span class="id">tyl</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> 1.<br/>
<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">tyl</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> 1.<br/>
<span class="tactic">simpl</span>. <span class="tactic">split</span>. <span class="tactic">intros</span> [<span class="id">H</span> <span class="id">H2</span>]. <br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">split</span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;-<span class="id">IHvl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">intros</span> [<span class="id">H</span> <span class="id">H2</span>]. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHvl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="tys_nonvoid">tys_nonvoid</a></span> (<span class="id">tyl</span> : <span class="id"><a href="Ctypes.html#typelist">typelist</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Ctypes.html#Tnil">Tnil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Ctypes.html#Tcons">Tcons</a></span> <span class="id"><a href="Ctypes.html#Tvoid">Tvoid</a></span> <span class="id">tyl</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Ctypes.html#Tcons">Tcons</a></span> <span class="id">_</span> <span class="id">tyl</span>' =&gt; <span class="id"><a href="val_casted.html#tys_nonvoid">tys_nonvoid</a></span> <span class="id">tyl</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="vals_defined">vals_defined</a></span> (<span class="id">vl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">vl</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vals_inject_defined">vals_inject_defined</a></span> (<span class="id">vl1</span> <span class="id">vl2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">j</span> : <span class="id"><a href="Values.html#meminj">meminj</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6437')">Proof.</div>
<div class="proofscript" id="proof6437">
<span class="id">revert</span> <span class="id">vl2</span>; <span class="tactic">induction</span> <span class="id">vl1</span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">vl2</span>; <span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1|<span class="tactic">auto</span>].<br/>
<span class="tactic">intros</span> <span class="id">vl2</span>; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1].<br/>
<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="tactic">rewrite</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">auto</span>.<br/>
<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="tactic">rewrite</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">auto</span>.<br/>
<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="tactic">rewrite</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">auto</span>.<br/>
<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="tactic">rewrite</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">auto</span>.<br/>
<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">X</span>. <span class="tactic">rewrite</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valinject_hastype</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">j</span> : <span class="id"><a href="Values.html#meminj">meminj</a></span>) (<span class="id">v</span> <span class="id">v</span>' : <span class="id"><a href="Values.html#val">val</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id">v</span>' -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#v">v</a></span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span> : <span class="id"><a href="AST.html#typ">typ</a></span>, <span class="id"><a href="Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> <span class="id"><a href="val_casted.html#T">T</a></span> -&gt; <span class="id"><a href="Values.html#Val.has_type">Val.has_type</a></span> <span class="id">v</span>' <span class="id"><a href="val_casted.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6438')">Proof.</div>
<div class="proofscript" id="proof6438">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_list_inject_hastype">val_list_inject_hastype</a></span> <span class="id">j</span> <span class="id">vl1</span> <span class="id">vl2</span> <span class="id">tys</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span> <span class="id"><a href="val_casted.html#tys">tys</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span> <span class="id"><a href="val_casted.html#tys">tys</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6439')">Proof.</div>
<div class="proofscript" id="proof6439">
<span class="id">revert</span> <span class="id">vl2</span> <span class="id">tys</span>. <span class="tactic">induction</span> <span class="id">vl1</span>. <span class="tactic">inversion</span> 1. <span class="id">solve</span>[<span class="tactic">destruct</span> <span class="id">tys</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">tys</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H1</span>. <br/>
<span class="tactic">assert</span> (<span class="id">def</span>: <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">vl1</span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <br/>
{ <span class="id">inv</span> <span class="id">H2</span>. <span class="id">revert</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>. }<br/>
<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">tys</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">congruence</span>. <br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">split</span>. <br/>
<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span>. <span class="tactic">eapply</span> <span class="id">valinject_hastype</span>'; <span class="tactic">eauto</span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">intros</span> <span class="id">contra</span>. <span class="tactic">rewrite</span> <span class="id">contra</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">congruence</span>.<br/>
<span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">H0</span> <span class="id">_</span>]. <span class="id">solve</span>[<span class="tactic">rewrite</span> <span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span>; <span class="tactic">auto</span>].<br/>
<span class="tactic">eapply</span> (<span class="id">IHvl1</span> <span class="id">vl</span>'); <span class="tactic">eauto</span>.<br/>
<span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <br/>
&nbsp;&nbsp;<span class="id">solve</span>[<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">_</span> -&gt;]; <span class="tactic">auto</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_list_inject_defined">val_list_inject_defined</a></span> <span class="id">j</span> <span class="id">vl1</span> <span class="id">vl2</span> : <br/>
&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#vl1">vl1</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#vl2">vl2</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6440')">Proof.</div>
<div class="proofscript" id="proof6440">
<span class="id">revert</span> <span class="id">vl2</span>. <span class="tactic">induction</span> <span class="id">vl1</span>; <span class="tactic">simpl</span>. <br/>
+ <span class="tactic">intros</span> <span class="id">vl2</span>; <span class="tactic">inversion</span> 1; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">intros</span> <span class="id">vl2</span>; <span class="tactic">inversion</span> 1; <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H</span>. <br/>
<span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">H8</span>.<br/>
<span class="tactic">assert</span> (<span class="id">def1</span>: <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">vl1</span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
{ <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">congruence</span>]. }<br/>
<span class="id">revert</span> <span class="id">H2</span> <span class="id">H8</span>. <span class="tactic">inversion</span> 1; <span class="tactic">auto</span>. <span class="tactic">subst</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">TODO: properties about these fixpoints remains to be proved </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="encode_longs">encode_longs</a></span> (<span class="id">tyl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#typ">typ</a></span>) (<span class="id">vl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tlong">AST.Tlong</a></span> :: <span class="id">tyl</span>' =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vlong">Vlong</a></span> <span class="id">n</span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="Values.html#Vint">Vint</a></span> (<span class="id"><a href="Integers.html#Int64.hiword">Int64.hiword</a></span> <span class="id">n</span>) :: <span class="id"><a href="Values.html#Vint">Vint</a></span> (<span class="id"><a href="Integers.html#Int64.loword">Int64.loword</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="val_casted.html#encode_longs">encode_longs</a></span> <span class="id">tyl</span>' <span class="id">vl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id"><a href="val_casted.html#encode_longs">encode_longs</a></span> <span class="id">tyl</span>' <span class="id">vl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id"><a href="Values.html#Vundef">Vundef</a></span> :: <span class="id"><a href="val_casted.html#encode_longs">encode_longs</a></span> <span class="id">tyl</span>' <span class="id">vl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">t</span> :: <span class="id">tyl</span>' =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">v</span> :: <span class="id">vl</span>' =&gt; <span class="id">v</span> :: <span class="id"><a href="val_casted.html#encode_longs">encode_longs</a></span> <span class="id">tyl</span>' <span class="id">vl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="encode_typs">encode_typs</a></span> (<span class="id">tyl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#typ">typ</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#typ">typ</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Tlong">AST.Tlong</a></span> :: <span class="id">tyl</span>' =&gt; <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> :: <span class="id"><a href="AST.html#Tint">AST.Tint</a></span> :: <span class="id"><a href="val_casted.html#encode_typs">encode_typs</a></span> <span class="id">tyl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">t</span> :: <span class="id">tyl</span>' =&gt; <span class="id">t</span> :: <span class="id"><a href="val_casted.html#encode_typs">encode_typs</a></span> <span class="id">tyl</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">getBlocks</span>' (<span class="id">vl</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">b0</span> : <span class="id"><a href="Values.html#block">block</a></span>) := <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">_</span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id"><a href="val_casted.html#b0">b0</a></span> || <span class="id">getBlocks</span>' <span class="id">vl</span>' <span class="id"><a href="val_casted.html#b0">b0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> :: <span class="id">vl</span>' =&gt; <span class="id">getBlocks</span>' <span class="id">vl</span>' <span class="id"><a href="val_casted.html#b0">b0</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<div class="doc">should val_casted.v renamed into arguments_welldefined.v? </div>
<div class="doc">is this definition is too conservative? Zlength * 8 instead of actuall size of arguments </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="wd_args">wd_args</a></span> (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">tyl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="AST.html#typ">typ</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="val_casted.html#val_has_type_list_func">val_has_type_list_func</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> &amp;&amp; <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> &amp;&amp; <span class="id"><a href="Coqlib.html#zlt">zlt</a></span> (4 * (2 * (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength">Zlength</a></span> <span class="id"><a href="val_casted.html#args">args</a></span>))) <span class="id"><a href="Integers.html#Int.max_unsigned">Int.max_unsigned</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="set_arguments">set_arguments</a></span> (<span class="id">ll</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="AST.html#rpair">rpair</a></span> <span class="id"><a href="Locations.html#loc">loc</a></span>)) (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Values.html#val">val</a></span>) (<span class="id">ls</span>: <span class="id"><a href="Locations.html#Locmap.t">Locmap.t</a></span>) : <span class="id"><a href="Locations.html#Locmap.t">Locmap.t</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#ll">ll</a></span>, <span class="id"><a href="val_casted.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">lp</span> :: <span class="id">ll</span>' , <span class="id">v</span> :: <span class="id">vl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">lp</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#One">AST.One</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id">l</span> <span class="id">v</span> (<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="id">ll</span>' <span class="id">vl</span>' <span class="id"><a href="val_casted.html#ls">ls</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Twolong">AST.Twolong</a></span> <span class="id">hi</span> <span class="id">lo</span> =&gt; <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id">hi</span> (<span class="id"><a href="Values.html#Val.hiword">Val.hiword</a></span> <span class="id">v</span>) (<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id">lo</span> (<span class="id"><a href="Values.html#Val.loword">Val.loword</a></span> <span class="id">v</span>) (<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="id">ll</span>' <span class="id">vl</span>' <span class="id"><a href="val_casted.html#ls">ls</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="val_casted.html#ls">ls</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">dual to Locmap.getpair </div>
<span class="kwd">Definition</span> <span class="id"><a name="get_result">get_result</a></span> (<span class="id">rp</span>: <span class="id"><a href="AST.html#rpair">rpair</a></span> <span class="id"><a href="Machregs.html#mreg">mreg</a></span>) (<span class="id">lm</span>: <span class="id"><a href="Locations.html#Locmap.t">Locmap.t</a></span>) : <span class="id"><a href="Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#rp">rp</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#One">AST.One</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="val_casted.html#lm">lm</a></span> (<span class="id"><a href="Locations.html#R">R</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="AST.html#Twolong">AST.Twolong</a></span> <span class="id">r1</span> <span class="id">r2</span> =&gt; <span class="id"><a href="Values.html#Val.longofwords">Val.longofwords</a></span> (<span class="id"><a href="val_casted.html#lm">lm</a></span> (<span class="id"><a href="Locations.html#R">R</a></span> <span class="id">r1</span>)) (<span class="id"><a href="val_casted.html#lm">lm</a></span> (<span class="id"><a href="Locations.html#R">R</a></span> <span class="id">r2</span>))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="has_type_list_tail">has_type_list_tail</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">vl</span>' <span class="id">tyl</span> <span class="id">tyl</span>', <span class="id"><a href="Values.html#Val.has_type_list">Val.has_type_list</a></span> (<span class="id"><a href="val_casted.html#vl">vl</a></span> ++ <span class="id">vl</span>') (<span class="id"><a href="val_casted.html#tyl">tyl</a></span> ++ <span class="id">tyl</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="val_casted.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.has_type_list">Val.has_type_list</a></span> <span class="id">vl</span>' <span class="id">tyl</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6441')">Proof.</div>
<div class="proofscript" id="proof6441">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tyl</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tyl</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">IHvl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vals_defined_tail">vals_defined_tail</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">vl</span>', <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> (<span class="id"><a href="val_casted.html#vl">vl</a></span> ++ <span class="id">vl</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">vl</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6442')">Proof.</div>
<div class="proofscript" id="proof6442">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wd_args_inject">wd_args_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">args</span> <span class="id">args</span>' <span class="id">tyl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="val_casted.html#j">j</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> <span class="id">args</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id">args</span>' <span class="id"><a href="val_casted.html#tyl">tyl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6443')">Proof.</div>
<div class="proofscript" id="proof6443">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQLEN</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">generalize</span> <span class="id">vl</span>' <span class="id">H5</span>; <span class="tactic">clear</span>; <span class="tactic">induction</span> <span class="id">args</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H5</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">erewrite</span> <span class="id">IHargs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tyl</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id">args</span> <span class="id">tyl</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="kwd">in</span> *. <span class="id">InvBooleans</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>, <span class="id">H0</span>. <span class="id">InvBooleans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span>. <span class="tactic">assert</span> (<span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>; <span class="tactic">discriminate</span>). <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength_cons">Zlength_cons</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHargs</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">try</span> <span class="id">eassumption</span>. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="kwd">in</span> *. <span class="id">InvBooleans</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>, <span class="id">H9</span>|- * . <span class="id">InvBooleans</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>, <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength_cons">Zlength_cons</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength_correct">Zlength_correct</a></span>, &lt;- <span class="id">EQLEN</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength_correct">Zlength_correct</a></span>, &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcomplements.html#Zlength_cons">Zlength_cons</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H1</span>. <span class="tactic">clear</span>. <span class="tactic">destruct</span> <span class="id"><a href="Coqlib.html#zlt">zlt</a></span>. <span class="tactic">auto</span>. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Conventions1.html">Conventions1</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wd_args_set_arguments_get_agree">wd_args_set_arguments_get_agree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">locs</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> <span class="id"><a href="val_casted.html#sg">sg</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#locs">locs</a></span> = <span class="id"><a href="Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id"><a href="val_casted.html#sg">sg</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="id"><a href="val_casted.html#locs">locs</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> (<span class="id"><a href="Locations.html#Locmap.init">Locmap.init</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>) = <span class="id"><a href="val_casted.html#ls">ls</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">l</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="val_casted.html#locs">locs</a></span> <span class="id"><a href="val_casted.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="val_casted.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> <span class="id"><a href="val_casted.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="val_casted.html#l">l</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#One">AST.One</a></span> <span class="id">l0</span> =&gt; <span class="id"><a href="val_casted.html#ls">ls</a></span> <span class="id">l0</span> = <span class="id"><a href="val_casted.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="AST.html#Twolong">AST.Twolong</a></span> <span class="id">lhi</span> <span class="id">llo</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#ls">ls</a></span> <span class="id">lhi</span> = <span class="id"><a href="Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="val_casted.html#v">v</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#ls">ls</a></span> <span class="id">llo</span> = <span class="id"><a href="Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="val_casted.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6444')">Proof.</div>
<div class="proofscript" id="proof6444">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">unfold</span> <span class="id"><a href="Conventions1.html#loc_arguments">loc_arguments</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">C</span>; <span class="id">inv</span> <span class="id">C</span>. <span class="tactic">destruct</span> <span class="id">sg</span>. <span class="tactic">simpl</span>. <span class="tactic">clear</span>. <span class="tactic">intros</span> <span class="id">args</span> <span class="id">locs</span> <span class="id">ls</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#wd_args">wd_args</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">intros</span> ((? &amp; ?) &amp; <span class="id">_</span>) <span class="id">Hlocs</span> <span class="id">Hls</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> 0. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">args</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sig_args</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n</span>; <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span> <span class="kwd">as</span> [|<span class="id">v</span> <span class="id">args</span>]; [<span class="tactic">inversion</span> <span class="id">H</span>| <span class="id">specialize</span> (<span class="id">IHsig_args</span> <span class="id">args</span>)].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">vTyp</span> <span class="id">argsTyp</span>]. <br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> /\ <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="kwd">as</span> [<span class="id">vDef</span> <span class="id">argsDef</span>] <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">split</span>; <span class="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n</span>.<br/>
&nbsp;n&nbsp;=&nbsp;0&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">IHsig_args</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>|-* . <span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">v</span>; <span class="tactic">split</span>;[<span class="tactic">auto</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Locations.html#Locmap.getpair">Locmap.getpair</a></span>; <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">v</span>; <span class="id">inv</span> <span class="id">vTyp</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>; <span class="tactic">auto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>, <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">vTyp</span>; <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHsig_args</span> <span class="id">argsTyp</span> <span class="id">argsDef</span> (<span class="id">z</span> + <span class="id"><a href="Locations.html#typesize">typesize</a></span> <span class="id">a</span>) <span class="id">n</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">Hnth</span> <span class="id">Hagree</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'. <span class="tactic">split</span>; [<span class="tactic">auto</span>|]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>|-* . <br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Coqlib.html#nth_error_in">nth_error_in</a></span>, <span class="id"><a href="Conventions1.html#loc_arguments_32_charact">loc_arguments_32_charact</a></span> <span class="kwd">in</span> <span class="id">H1</span>.  <br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>; <span class="tactic">unfold</span> <span class="id"><a href="Locations.html#Locmap.getpair">Locmap.getpair</a></span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>; <span class="tactic">auto</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; [<span class="tactic">auto</span>| <span class="id">right</span>; <span class="tactic">destruct</span> <span class="id">sl</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>; <span class="tactic">omega</span>; <span class="tactic">fail</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> <span class="id">sl</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">right</span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">Hhi</span> <span class="id">Hlo</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Locations.html#Loc.diff">Loc.diff</a></span> <span class="id">_</span> ?<span class="id">x</span> =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- ?<span class="id">x</span> &lt;&gt; ?<span class="id">x</span> \/ <span class="id">_</span> =&gt; <span class="id">right</span>; <span class="tactic">omega</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">_</span> &lt;&gt; ?<span class="id">x</span> \/ <span class="id">_</span>  =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wd_args_set_arguments_eq">wd_args_set_arguments_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">args</span> <span class="id">sg</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#wd_args">wd_args</a></span> <span class="id"><a href="val_casted.html#args">args</a></span> (<span class="id"><a href="AST.html#sig_args">sig_args</a></span> <span class="id"><a href="val_casted.html#sg">sg</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#args">args</a></span> = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">p</span> =&gt; <span class="id"><a href="Locations.html#Locmap.getpair">Locmap.getpair</a></span> <span class="id"><a href="val_casted.html#p">p</a></span> (<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id"><a href="val_casted.html#sg">sg</a></span>) <span class="id"><a href="val_casted.html#args">args</a></span> (<span class="id"><a href="Locations.html#Locmap.init">Locmap.init</a></span> <span class="id"><a href="Values.html#Vundef">Vundef</a></span>))) (<span class="id"><a href="Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id"><a href="val_casted.html#sg">sg</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6445')">Proof.</div>
<div class="proofscript" id="proof6445">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">unfold</span> <span class="id"><a href="Conventions1.html#loc_arguments">loc_arguments</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">C</span>; <span class="id">inv</span> <span class="id">C</span>. <span class="tactic">destruct</span> <span class="id">sg</span>. <span class="tactic">simpl</span>. <span class="tactic">clear</span>. <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#wd_args">wd_args</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>. <span class="tactic">intros</span> ((? &amp; ?) &amp; <span class="id">_</span>). <br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> 0. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">args</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sig_args</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; <span class="tactic">auto</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span> <span class="kwd">as</span> [|<span class="id">v</span> <span class="id">args</span>]; [<span class="tactic">inversion</span> <span class="id">H</span>| <span class="id">specialize</span> (<span class="id">IHsig_args</span> <span class="id">args</span>)].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">vTyp</span> <span class="id">argsTyp</span>]. <br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span> &lt;&gt; <span class="id"><a href="Values.html#Vundef">Vundef</a></span> /\ <span class="id"><a href="val_casted.html#vals_defined">vals_defined</a></span> <span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="kwd">as</span> [<span class="id">vDef</span> <span class="id">argsDef</span>] <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">split</span>; <span class="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">IHsig_args</span> <span class="id">argsTyp</span> <span class="id">argsDef</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="val_casted.html#val_has_type_funcP">val_has_type_funcP</a></span> <span class="kwd">in</span> <span class="id">vTyp</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>, <span class="id">a</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>, <span class="id"><a href="Locations.html#Locmap.gss">Locmap.gss</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="Integers.html#Int64.ofwords_recompose">Int64.ofwords_recompose</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="id">right</span>; <span class="tactic">omega</span>. <span class="tactic">inversion</span> <span class="id">vTyp</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsig_args</span> <span class="id">argsTyp</span> <span class="id">argsDef</span> (<span class="id">z</span> + <span class="id"><a href="Locations.html#typesize">typesize</a></span> <span class="id">a</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHsig_args</span> <span class="tactic">at</span> 1. <span class="tactic">clear</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_ext_in">map_ext_in</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Conventions1.html#loc_arguments_32_charact">loc_arguments_32_charact</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">a0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">destruct</span> <span class="id">sl</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>; [<span class="tactic">auto</span>| <span class="tactic">red</span>; <span class="id">right</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">omega</span>]).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rhi</span>, <span class="id">rlo</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sl</span>, <span class="id">sl0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">repeat</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Locations.html#Locmap.gso">Locmap.gso</a></span>; [<span class="tactic">auto</span>| <span class="tactic">red</span>; <span class="id">right</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">omega</span>]).<br/>
Qed.</div>
<br/>
<div class="doc">TODO: move to val_casted </div>
<span class="kwd">Lemma</span> <span class="id"><a name="locmap_set_reorder">locmap_set_reorder</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">rs</span>, <span class="id"><a href="Locations.html#Loc.diff">Loc.diff</a></span> <span class="id"><a href="val_casted.html#l1">l1</a></span> <span class="id"><a href="val_casted.html#l2">l2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id"><a href="val_casted.html#l1">l1</a></span> <span class="id"><a href="val_casted.html#v1">v1</a></span> (<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id"><a href="val_casted.html#l2">l2</a></span> <span class="id"><a href="val_casted.html#v2">v2</a></span> <span class="id"><a href="val_casted.html#rs">rs</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id"><a href="val_casted.html#l2">l2</a></span> <span class="id"><a href="val_casted.html#v2">v2</a></span> (<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> <span class="id"><a href="val_casted.html#l1">l1</a></span> <span class="id"><a href="val_casted.html#v1">v1</a></span> <span class="id"><a href="val_casted.html#rs">rs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6446')">Proof.</div>
<div class="proofscript" id="proof6446">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span>. <span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="Locations.html#Loc.diff_not_eq">Loc.diff_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Locations.html#Loc.diff_dec">Loc.diff_dec</a></span> <span class="id">l1</span> <span class="id">x</span>) <span class="id">eqn</span>:? ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Locations.html#Loc.diff_dec">Loc.diff_dec</a></span> <span class="id">l2</span> <span class="id">x</span>) <span class="id">eqn</span>:? ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">destruct</span> <span class="id"><a href="Locations.html#Loc.eq">Loc.eq</a></span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="Locations.html#Loc.diff">Loc.diff</a></span> ?<span class="id">x</span> ?<span class="id">x</span> |- <span class="id">_</span> =&gt;  <span class="id">exfalso</span>; <span class="tactic">eapply</span> <span class="id"><a href="Locations.html#Loc.same_not_diff">Loc.same_not_diff</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Locations.html#Loc.diff_sym">Loc.diff_sym</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_arguments_reorder">set_arguments_reorder</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">a</span> <span class="id">tyl</span> <span class="id">args</span> <span class="id">z0</span> <span class="id">z</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#z0">z0</a></span> &lt;= <span class="id"><a href="val_casted.html#z">z</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> (<span class="id"><a href="val_casted.html#t">t</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="val_casted.html#z0">z0</a></span>) (<span class="id"><a href="val_casted.html#a">a</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> (<span class="id"><a href="val_casted.html#z">z</a></span> + <span class="id"><a href="Locations.html#typesize">typesize</a></span> <span class="id"><a href="val_casted.html#t">t</a></span>)) <span class="id"><a href="val_casted.html#args">args</a></span> <span class="id"><a href="val_casted.html#rs">rs</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="id"><a href="val_casted.html#tyl">tyl</a></span> (<span class="id"><a href="val_casted.html#z">z</a></span> + <span class="id"><a href="Locations.html#typesize">typesize</a></span> <span class="id"><a href="val_casted.html#t">t</a></span>)) <span class="id"><a href="val_casted.html#args">args</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> (<span class="id"><a href="val_casted.html#t">t</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="val_casted.html#z0">z0</a></span>) (<span class="id"><a href="val_casted.html#a">a</a></span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="val_casted.html#rs">rs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6447')">Proof.</div>
<div class="proofscript" id="proof6447">
&nbsp;&nbsp;<span class="tactic">clear</span>. <span class="tactic">induction</span> <span class="id">tyl</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="tactic">at</span> 2, <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a0</span>.<br/>
&nbsp;&nbsp;1,2,4,5,6:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; [<span class="tactic">auto</span>|]; <span class="id">fold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="tactic">at</span> 1, <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">IHtyl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="tactic">at</span> 1, <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">hi</span> ?<span class="id">vhi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">lo</span> ?<span class="id">vlo</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">head</span> ?<span class="id">vhead</span> <span class="id">_</span>)) = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">lo</span> <span class="id">head</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">hi</span> <span class="id">head</span>);[|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">x</span> ?<span class="id">v</span> (<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">head</span> ?<span class="id">vhead</span> <span class="id">_</span>) = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">x</span> <span class="id">head</span>);[|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[?<span class="id">x</span> + ?<span class="id">y</span> + ?<span class="id">z</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span> + <span class="id">z</span>) <span class="kwd">with</span> (<span class="id">x</span> + <span class="id">z</span> + <span class="id">y</span>) <span class="tactic">by</span> <span class="tactic">omega</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHtyl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">z</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">x</span> + <span class="id">y</span> + <span class="id">z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>; <span class="tactic">auto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; [<span class="tactic">auto</span>|]; <span class="id">fold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="tactic">at</span> 1, <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">IHtyl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> <span class="tactic">at</span> 1, <span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">hi</span> ?<span class="id">vhi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">lo</span> ?<span class="id">vlo</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">headhi</span> ?<span class="id">vheadhi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">headlo</span> ?<span class="id">vheadlo</span> <span class="id">_</span>))) = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">lo</span> <span class="id">headhi</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">hi</span> <span class="id">headhi</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">lo</span> <span class="id">headlo</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">hi</span> <span class="id">headlo</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">l</span> ?<span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">headhi</span> ?<span class="id">vhi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Locations.html#Locmap.set">Locmap.set</a></span> ?<span class="id">headlo</span> ?<span class="id">vlo</span> <span class="id">_</span>)) = <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">l</span> <span class="id">headhi</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> (<span class="id"><a href="val_casted.html#locmap_set_reorder">locmap_set_reorder</a></span> <span class="id">l</span> <span class="id">headlo</span>);[|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span>;<span class="id">right</span>;<span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id"><a href="val_casted.html#set_arguments">set_arguments</a></span> (<span class="id"><a href="Conventions1.html#loc_arguments_32">loc_arguments_32</a></span> <span class="id">_</span> (?<span class="id">x</span> + ?<span class="id">y</span> + ?<span class="id">z</span>))] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span> + <span class="id">z</span>) <span class="kwd">with</span> (<span class="id">x</span> + <span class="id">z</span> + <span class="id">y</span>) <span class="tactic">by</span> <span class="tactic">omega</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHtyl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">z</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">x</span> + <span class="id">y</span> + <span class="id">z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>; <span class="tactic">auto</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">omega</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
Qed.</div>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
